<!--ig-start-->
### Instance Group as Log Source

1. Sign in to the Centralized Logging with OpenSearch Console.

2. In the left sidebar, under **Log Analytics Pipelines**, choose **Application Log**.

3. Choose the application pipeline that has been created during the **Prerequisites**.

4. Choose the **Permission grant method**. If you choose **I will manually add the below required permissions after pipeline creation**, you have to click **Expand to view required permissions** and copy the provided JSON policy.

5. Go to **AWS Console > IAM > Policies** on the left column, and

    1. Choose **Create Policy**, choose **JSON** and replace all the content inside the text block. Remember to substitute `<YOUR ACCOUNT ID>` with your account id.

    2. Choose **Next**, **Next**, then enter the name for this policy.

    3. Attach the policy to your EC2 instance profile to grant the log agent permissions to send logs to the application log pipeline. If you are using Auto Scaling group, you need to update the IAM instance profile associated with the Auto Scaling Group. If needed, you can follow the documentation to update your [launch template][launch-template] or [launch configuration][launch-configuration].

6. Click the **Create an Ingestion** dropdown menu, and select **From Instance Group**.

7. Select **Choose exists** and choose **Next**.

8. Select the instance group you have created during the **Prerequisites** and choose **Next**.

9. (Auto Scaling Group only) If your instance group is created based on an Auto Scaling Group, after ingestion status become "Created", then you can find the generated Shell Script in the instance group's detail page. Copy the shell script and update the User Data of the Auto Scaling [Launch configurations](https://docs.aws.amazon.com/autoscaling/ec2/userguide/launch-configurations.html) or [Launch template](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-launch-templates.html).

10. Select **Choose exists** and select the log config created in previous setup.

11. Choose **Create** to finish creating an ingestion.

[launch-template]: https://docs.aws.amazon.com/autoscaling/ec2/userguide/create-launch-template.html#advanced-settings-for-your-launch-template
[launch-configuration]: https://docs.aws.amazon.com/autoscaling/ec2/userguide/change-launch-config.html

<!--ig-end-->

<!--eks-start-->
### Amazon EKS Cluster as Log Source

1. Sign in to the Centralized Logging with OpenSearch Console.

2. In the left sidebar, under **Log Source**, choose **EKS Clusters**.

3. Choose the EKS Cluster that has been imported as Log Source during the **Prerequisites**.

4. Go to **App Log Ingestion** tab and choose **Create an Ingestion**.

    1. Select **Choose exists** and choose the application pipeline created during the **Prerequisites**. Choose **Next**.

    2. Select the log config created in previous setup.

    3. Choose **Create** to finish creating an ingestion.

5. Deploy Fluent-bit log agent following the guide generated by Centralized Logging with OpenSearch.

    1. Select the App Log Ingestion just created.

    2. Follow **DaemonSet** or **Sidecar** Guide to deploy the log agent.

<!--eks-end-->

<!--S3-start-->
### Amazon S3 as Log Source

1. Sign in to the Centralized Logging with OpenSearch Console.

2. In the left sidebar, under **Log Analytics Pipelines**, choose **Application Log**.

3. Choose the application pipeline that has been created during the **Prerequisites**.

4. Choose the **Create an Ingestion** dropdown menu, and select **From S3 bucket**.

5. Choose the S3 bucket where your logs are stored and enter **Prefix filter**

6. Choose **Ingestion mode** based on your need. If you want to ingest the log continuously, select **On-going**; If you only need to ingest the log once, select **One-time**.

7. Specify **Compression format** if your log files are compressed.

8. Select the log config created in the previous setup.

9.  Choose **Create** to finish creating an ingestion.

<!--S3-end-->

<!--syslog-start-->
### Syslog as Log Source

1. Sign in to the Centralized Logging with OpenSearch Console.

2. In the left sidebar, under **Log Analytics Pipelines**, choose **Application Log**.

3. Choose the application pipeline that has been created during the **Prerequisites**.

4. Choose the **Create an Ingestion** dropdown menu, and select **From Syslog**.

5. You can use UDP or TCP with custom port number. Choose **Next**.

6. Select the log config created in the previous setup.

7. Choose **Create** to finish creating an ingestion.
<!--syslog-end-->


[launch-template]: https://docs.aws.amazon.com/autoscaling/ec2/userguide/create-launch-template.html#advanced-settings-for-your-launch-template
[launch-configuration]: https://docs.aws.amazon.com/autoscaling/ec2/userguide/change-launch-config.html