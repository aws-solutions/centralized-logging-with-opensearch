{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Log Hub \u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u5168\u9762\u7684\u65e5\u5fd7\u7ba1\u7406\u548c\u5206\u6790\u529f\u80fd\uff0c\u5e2e\u52a9\u60a8\u7b80\u5316\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u6784\u5efa\u3002\u672c\u89e3\u51b3\u65b9\u6848\u57fa\u4e8eAmazon OpenSearch Service \u6784\u5efa\uff0c\u53ef\u8ba9\u60a8\u6709\u6548\u5730\u5b8c\u6210\u65e5\u5fd7\u6444\u53d6\u3001\u65e5\u5fd7\u5904\u7406\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002\u672c\u89e3\u51b3\u65b9\u6848\u53ef\u5e94\u7528\u4e8e\u591a\u7c7b\u573a\u666f\uff0c\u4f8b\u5982\u6ee1\u8db3\u5b89\u5168\u548c\u5408\u89c4\u6027\u6cd5\u89c4\uff0c\u5b9e\u73b0\u7cbe\u7ec6\u5316\u7684\u4e1a\u52a1\u8fd0\u8425\uff0c\u6216\u8005\u589e\u5f3aIT\u6545\u969c\u6392\u9664\u548c\u7ef4\u62a4\u3002 \u672c\u89e3\u51b3\u65b9\u6848\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a \u4e00\u4f53\u5316\u65e5\u5fd7\u6444\u53d6 \uff1a\u63d0\u4f9b\u7f51\u9875\u63a7\u5236\u53f0\uff0c\u4fbf\u4e8e\u60a8\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch (AOS) \u57df\u4e2d\u3002\u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7\uff0c\u8bf7\u53c2\u9605 AWS \u670d\u52a1\u65e5\u5fd7 \u3002\u6709\u5173\u652f\u6301\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u8bf7\u53c2\u9605 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7 \u3002 \u65e0\u4ee3\u7801\u65e5\u5fd7\u5904\u7406 \uff1a\u652f\u6301AWS\u5f00\u53d1\u7684\u65e5\u5fd7\u5904\u7406\u5668\u63d2\u4ef6\u3002\u60a8\u53ef\u4ee5\u5728\u7f51\u9875\u63a7\u5236\u53f0\u8f7b\u677e\u5bf9\u539f\u59cb\u7684\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5904\u7406\u3002 \u5f00\u7bb1\u5373\u7528\u7684\u4eea\u8868\u677f\u6a21\u677f \uff1a\u63d0\u4f9b\u4e00\u7cfb\u5217\u7684\u53ef\u89c6\u5316\u6a21\u677f\u7684\u96c6\u5408\uff0c\u65e2\u9002\u7528\u4e8e Nginx \u548c Apache HTTP Server \u7b49\u5e38\u7528\u8f6f\u4ef6\uff0c\u4e5f\u9002\u7528\u4e8e Amazon S3 \u548c Amazon CloudTrail \u7b49 AWS \u670d\u52a1\u3002 \u672c\u6307\u5357\u4e2d\u7684 \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\u5f15\u5bfc\u60a8\u5b8c\u6210\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u8fc7\u7a0b\uff0c AOS \u96c6\u7fa4\u7ba1\u7406 \u7ae0\u8282\u4ecb\u7ecd\u5982\u4f55\u5728 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u672c\u5b9e\u65bd\u6307\u5357\u63cf\u8ff0\u4e86\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u67b6\u6784\u6ce8\u610f\u4e8b\u9879\u548c\u914d\u7f6e\u6b65\u9aa4\u3002\u5b83\u5305\u62ec CloudFormation \u6a21\u677f\u7684\u94fe\u63a5\uff0c\u8fd9\u4e9b\u6a21\u677f\u4f7f\u7528 AWS \u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u6700\u4f73\u5b9e\u8df5\u6765\u542f\u52a8\u548c\u914d\u7f6e\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u6240\u9700\u7684 AWS \u670d\u52a1\u3002 \u672c\u6307\u5357\u9002\u7528\u4e8e\u5728 AWS \u4e91\u4e2d\u5177\u6709\u67b6\u6784\u5b9e\u8df5\u7ecf\u9a8c\u7684 IT \u67b6\u6784\u5e08\u3001\u5f00\u53d1\u4eba\u5458\u3001DevOps \u548c\u6570\u636e\u5de5\u7a0b\u5e08\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/architecture/","text":"\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u5728 AWS \u4e91\u4e2d\u6784\u5efa\u4ee5\u4e0b\u73af\u5883\u3002 \u56fe1: \u89e3\u51b3\u65b9\u6848\u67b6\u6784\u56fe \u6b64\u89e3\u51b3\u65b9\u6848\u5728\u60a8\u7684 AWS \u4e91\u8d26\u6237\u4e2d\u90e8\u7f72 AWS CloudFormation \u6a21\u677f\u5e76\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\u3002 Amazon CloudFront \u5206\u53d1\u6258\u7ba1\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e2d\u7684\u524d\u7aef Web UI \u8d44\u6e90\u3002 \u5982\u679c\u90e8\u7f72\u5728\u6d77\u5916\u533a\u57df\uff0c Amazon Cognito \u7528\u6237\u6c60 \u4e3a\u540e\u7aef\u63d0\u4f9b\u8eab\u4efd\u9a8c\u8bc1\uff1b\u5982\u679c\u90e8\u7f72\u5728\u4e2d\u56fd\u533a\u57df\uff0c\u4f7f\u7528 OpenID \u8fde\u63a5\u5668 (OIDC)\u3002 AWS AppSync \u63d0\u4f9b\u540e\u7aef GraphQL API\u3002 Amazon DynamoDB \u5c06\u89e3\u51b3\u65b9\u6848\u76f8\u5173\u4fe1\u606f\u5b58\u50a8\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u3002 AWS Lambda \u4e0e\u5176\u5b83 AWS \u670d\u52a1\u4ea4\u4e92\uff0c\u5904\u7406\u7ba1\u7406\u65e5\u5fd7\u7ba1\u9053\u6216\u65e5\u5fd7\u4ee3\u7406\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u5e76\u83b7\u53d6 DynamoDB \u8868\u4e2d\u66f4\u65b0\u7684\u4fe1\u606f\u3002 AWS Step Functions \u6309\u9700\u534f\u8c03\u4e00\u7ec4\u9884\u5b9a\u4e49\u5806\u6808\u7684 AWS CloudFormation \u90e8\u7f72\u7528\u4e8e\u65e5\u5fd7\u7ba1\u9053\u7ba1\u7406\u3002\u65e5\u5fd7\u7ba1\u9053\u5806\u6808\u90e8\u7f72\u5355\u72ec\u7684 AWS \u8d44\u6e90\uff0c\u7528\u4e8e\u6536\u96c6\u548c\u5904\u7406\u65e5\u5fd7\uff0c\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u548c\u53ef\u89c6\u5316\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u6216 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u901a\u8fc7 Log Hub \u63a7\u5236\u53f0\u6309\u9700\u521b\u5efa\u3002 AWS Systems Manager \u548c Amazon EventBridge \u7528\u4e8e\u7ba1\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u7684\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f8b\u5982\u4e3a\u5e94\u7528\u670d\u52a1\u5668\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff08Fluent Bit\uff09\u548c\u76d1\u63a7\u4ee3\u7406\u7684\u5065\u5eb7\u72b6\u6001\u3002 Amazon EC2 \u6216 Amazon EKS \u5b89\u88c5 Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u4e0a\u4f20\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch \u4e2d\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch \u4e2d\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684\u65e5\u5fd7\u7ba1\u9053\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002 AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301 AWS \u670d\u52a1\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7\u3002 \u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730\uff0c\u5305\u62ec Amazon S3 \u5b58\u50a8\u6876\u3001CloudWatch \u65e5\u5fd7\u7ec4\u3001Kinesis Data Streams \u548c Kinesis Firehose\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\u7a0b\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\u3002 Amazon S3 \u4e2d\u7684\u65e5\u5fd7 \u6709\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon S3\u3002Amazon S3 \u4e2d\u7684\u65e5\u5fd7\u4e00\u822c\u4e0d\u7528\u4e8e\u5b9e\u65f6\u5206\u6790\u3002 \u56fe2: \u5206\u6790\u5b58\u50a8\u4e8e S3 \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\uff08\u65e5\u5fd7\u6876\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\u4f1a\u901a\u8fc7 S3 \u4e8b\u4ef6\u901a\u77e5 \u5411 Amazon SQS \u53d1\u9001\u901a\u77e5\u3002 Amazon SQS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 CloudWatch Logs \u4e2d\u7684\u65e5\u5fd7 \u67d0\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u3002 \u56fe 3\uff1a\u7528\u4e8e\u5206\u6790 CloudWatch Logs \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u4e2d\u3002 CloudWatch \u65e5\u5fd7\u901a\u8fc7\u8ba2\u9605\u6d41\u5f0f\u4f20\u8f93\u5230 Amazon Kinesis Data Stream (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u6216\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u56fe 4\uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Kinesis Data Streams (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08Backup Bucket\uff09\u3002","title":"\u67b6\u6784\u6982\u8ff0"},{"location":"implementation-guide/architecture/#aws","text":"Log Hub \u652f\u6301 AWS \u670d\u52a1\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7\u3002 \u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730\uff0c\u5305\u62ec Amazon S3 \u5b58\u50a8\u6876\u3001CloudWatch \u65e5\u5fd7\u7ec4\u3001Kinesis Data Streams \u548c Kinesis Firehose\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\u7a0b\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\u3002","title":"AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture/#amazon-s3","text":"\u6709\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon S3\u3002Amazon S3 \u4e2d\u7684\u65e5\u5fd7\u4e00\u822c\u4e0d\u7528\u4e8e\u5b9e\u65f6\u5206\u6790\u3002 \u56fe2: \u5206\u6790\u5b58\u50a8\u4e8e S3 \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\uff08\u65e5\u5fd7\u6876\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\u4f1a\u901a\u8fc7 S3 \u4e8b\u4ef6\u901a\u77e5 \u5411 Amazon SQS \u53d1\u9001\u901a\u77e5\u3002 Amazon SQS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002","title":"Amazon S3 \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#cloudwatch-logs","text":"\u67d0\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u3002 \u56fe 3\uff1a\u7528\u4e8e\u5206\u6790 CloudWatch Logs \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u4e2d\u3002 CloudWatch \u65e5\u5fd7\u901a\u8fc7\u8ba2\u9605\u6d41\u5f0f\u4f20\u8f93\u5230 Amazon Kinesis Data Stream (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002","title":"CloudWatch Logs \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#_1","text":"Log Hub \u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u6216\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u56fe 4\uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Kinesis Data Streams (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08Backup Bucket\uff09\u3002","title":"\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/considerations/","text":"\u53ef\u90e8\u7f72\u533a\u57df \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u670d\u52a1\u76ee\u524d\u53ef\u80fd\u5e76\u975e\u5728\u6240\u6709 AWS \u533a\u57df\u90fd\u53ef\u7528\u3002\u8bf7\u5728\u63d0\u4f9b\u6240\u9700\u670d\u52a1\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u6309\u533a\u57df\u5212\u5206\u7684\u6700\u65b0\u53ef\u7528\u6027\uff0c\u8bf7\u53c2\u9605 AWS \u533a\u57df\u670d\u52a1\u5217\u8868 \u3002 \u652f\u6301\u90e8\u7f72\u7684\u6d77\u5916\u533a\u57df \u533a\u57dfID \u533a\u57df\u540d\u79f0 us-east-1 \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09 us-east-2 \u7f8e\u56fd\u4e1c\u90e8\uff08\u4fc4\u4ea5\u4fc4\u5dde\uff09 us-west-1 \u7f8e\u56fd\u897f\u90e8\uff08\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8\uff09 us-west-2 \u7f8e\u56fd\u897f\u90e8\uff08\u4fc4\u52d2\u5188\uff09 ap-south-1 \u4e9a\u592a\u5730\u533a\uff08\u5b5f\u4e70\uff09 ap-northeast-2 \u4e9a\u592a\u5730\u533a\uff08\u9996\u5c14\uff09 ap-southeast-1 \u4e9a\u592a\u5730\u533a\uff08\u65b0\u52a0\u5761\uff09 ap-southeast-2 \u4e9a\u592a\u5730\u533a\uff08\u6089\u5c3c\uff09 ap-northeast-1 \u4e9a\u592a\u5730\u533a\uff08\u4e1c\u4eac\uff09 ca-central-1 \u52a0\u62ff\u5927\uff08\u4e2d\u90e8\uff09 eu-central-1 \u6b27\u6d32\uff08\u6cd5\u5170\u514b\u798f\uff09 eu-west-1 \u6b27\u6d32\uff08\u7231\u5c14\u5170\uff09 eu-west-2 \u6b27\u6d32\uff08\u4f26\u6566\uff09 eu-west-3 \u6b27\u6d32\uff08\u5df4\u9ece\uff09 eu-north-1 \u6b27\u6d32\uff08\u65af\u5fb7\u54e5\u5c14\u6469\uff09 me-south-1 \u4e2d\u4e1c\uff08\u5df4\u6797\uff09 sa-east-1 \u5357\u7f8e\u6d32\uff08\u5723\u4fdd\u7f57\uff09 \u652f\u6301\u90e8\u7f72\u7684\u4e2d\u56fd\u533a\u57df \u5730\u533aID \u5730\u533a\u540d\u79f0 cn-north-1 \u7531\u5149\u73af\u65b0\u7f51\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5317\u4eac\uff09\u533a\u57df cn-northwest-1 \u7531\u897f\u4e91\u6570\u636e\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5b81\u590f\uff09\u533a\u57df","title":"\u533a\u57df\u652f\u6301"},{"location":"implementation-guide/considerations/#_1","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u670d\u52a1\u76ee\u524d\u53ef\u80fd\u5e76\u975e\u5728\u6240\u6709 AWS \u533a\u57df\u90fd\u53ef\u7528\u3002\u8bf7\u5728\u63d0\u4f9b\u6240\u9700\u670d\u52a1\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u6309\u533a\u57df\u5212\u5206\u7684\u6700\u65b0\u53ef\u7528\u6027\uff0c\u8bf7\u53c2\u9605 AWS \u533a\u57df\u670d\u52a1\u5217\u8868 \u3002 \u652f\u6301\u90e8\u7f72\u7684\u6d77\u5916\u533a\u57df \u533a\u57dfID \u533a\u57df\u540d\u79f0 us-east-1 \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09 us-east-2 \u7f8e\u56fd\u4e1c\u90e8\uff08\u4fc4\u4ea5\u4fc4\u5dde\uff09 us-west-1 \u7f8e\u56fd\u897f\u90e8\uff08\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8\uff09 us-west-2 \u7f8e\u56fd\u897f\u90e8\uff08\u4fc4\u52d2\u5188\uff09 ap-south-1 \u4e9a\u592a\u5730\u533a\uff08\u5b5f\u4e70\uff09 ap-northeast-2 \u4e9a\u592a\u5730\u533a\uff08\u9996\u5c14\uff09 ap-southeast-1 \u4e9a\u592a\u5730\u533a\uff08\u65b0\u52a0\u5761\uff09 ap-southeast-2 \u4e9a\u592a\u5730\u533a\uff08\u6089\u5c3c\uff09 ap-northeast-1 \u4e9a\u592a\u5730\u533a\uff08\u4e1c\u4eac\uff09 ca-central-1 \u52a0\u62ff\u5927\uff08\u4e2d\u90e8\uff09 eu-central-1 \u6b27\u6d32\uff08\u6cd5\u5170\u514b\u798f\uff09 eu-west-1 \u6b27\u6d32\uff08\u7231\u5c14\u5170\uff09 eu-west-2 \u6b27\u6d32\uff08\u4f26\u6566\uff09 eu-west-3 \u6b27\u6d32\uff08\u5df4\u9ece\uff09 eu-north-1 \u6b27\u6d32\uff08\u65af\u5fb7\u54e5\u5c14\u6469\uff09 me-south-1 \u4e2d\u4e1c\uff08\u5df4\u6797\uff09 sa-east-1 \u5357\u7f8e\u6d32\uff08\u5723\u4fdd\u7f57\uff09 \u652f\u6301\u90e8\u7f72\u7684\u4e2d\u56fd\u533a\u57df \u5730\u533aID \u5730\u533a\u540d\u79f0 cn-north-1 \u7531\u5149\u73af\u65b0\u7f51\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5317\u4eac\uff09\u533a\u57df cn-northwest-1 \u7531\u897f\u4e91\u6570\u636e\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5b81\u590f\uff09\u533a\u57df","title":"\u53ef\u90e8\u7f72\u533a\u57df"},{"location":"implementation-guide/cost/","text":"\u8d39\u7528\u9884\u4f30 \u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u4e2a\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002 \u622a\u81f32022\u5e746\u6708\uff0c\u5f71\u54cd\u89e3\u51b3\u65b9\u6848\u6210\u672c\u7684\u4e3b\u8981\u56e0\u7d20\u5305\u62ec\uff1a \u8981\u6444\u53d6\u7684\u65e5\u5fd7\u7c7b\u578b \u8981\u6444\u53d6/\u5904\u7406\u7684\u65e5\u5fd7\u91cf \u65e5\u5fd7\u7684\u4f4d\u7f6e \u91cd\u8981\u4fe1\u606f Amazon OpenSearch \u96c6\u7fa4\u7684\u6210\u672c\u4e0d\u4f1a\u8ba1\u5165\u6210\u672c\u4f30\u7b97\u3002 AWS \u670d\u52a1\u65e5\u5fd7 \u6444\u53d6\u548c\u5904\u7406\u670d\u52a1\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002 Amazon S3 \u4e2d\u7684\u65e5\u5fd7 \u5047\u8bbe AWS \u670d\u52a1\u6bcf 5 \u5206\u949f\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230 Amazon S3 \u7684\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u6700\u5927\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a 10 MB\u3002 Lambda \u5185\u5b58\u4e3a 128 MB\u3002\u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u5e73\u5747 Lambda \u8fd0\u884c\u65f6\u95f4\u4e3a 500 \u6beb\u79d2\uff0c\u5904\u7406\u5c0f\u4e8e 10 MB \u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u5e73\u5747 Lambda \u8fd0\u884c\u65f6\u95f4\u4e3a 1000 \u6beb\u79d2\u3002 \u4f8b\u5982\uff1a1 GB/\u5929 \u60a8\u6bcf\u5929\u6709 1 GB \u7684\u670d\u52a1\u65e5\u5fd7\u4fdd\u5b58\u5230 S3\u3002\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Lambda \u6210\u672c = \u6bcf\u5929 288 \u4e2a\u65e5\u5fd7\u6587\u4ef6\uff08\u6bcf\u4e2a\u6587\u4ef6 3.47 MB\uff09x 500 \u6beb\u79d2 x \u6bcf\u6beb\u79d2 0.0000000021 \u7f8e\u5143 x 30 \u5929 = 0.009 \u7f8e\u5143/\u6708 SQS \u6210\u672c = \u6bcf\u5929 288 \u4e2a\u8bf7\u6c42 x 30 \u5929 = \u5728\u514d\u8d39\u5957\u9910\u5185 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x 30 GB/\u6708 = 0.69 \u7f8e\u5143/\u6708 S3 \u8bf7\u6c42\u6210\u672c = \u6bcf\u5929 288 \u4e2a\u8bf7\u6c42 x 30 \u5929 x \u6bcf 1000 \u4e2a\u8bf7\u6c42 0.005 USD = 0.04 USD/\u6708 \u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u4e3a\uff1a \u6bcf\u6708\u603b\u8d39\u7528 = 0.018 \u7f8e\u5143 Lambda \u6210\u672c + 0.69 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c + 0.04 \u7f8e\u5143 S3 \u8bf7\u6c42\u6210\u672c = 0.742 \u7f8e\u5143 \u793a\u4f8b 2\uff1a100 GB/\u5929 \u60a8\u6bcf\u5929\u6709 100 GB \u7684\u670d\u52a1\u65e5\u5fd7\u4fdd\u5b58\u5230 S3\u3002\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Lambda \u6210\u672c = \u6bcf\u5929 10000 \u4e2a\u65e5\u5fd7\u6587\u4ef6\uff08\u6bcf\u4e2a\u6587\u4ef6 10 MB\uff09x 1000 \u6beb\u79d2 x \u6bcf\u6beb\u79d2 0.0000000021 \u7f8e\u5143 x 30 \u5929 = 0.63 \u7f8e\u5143/\u6708 SQS \u6210\u672c = \u6bcf\u5929 10000 \u4e2a\u8bf7\u6c42 x 30 \u5929 = \u5728\u514d\u8d39\u5957\u9910\u5185 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x 3,000 GB/\u6708 = 69 \u7f8e\u5143/\u6708 S3 \u8bf7\u6c42\u6210\u672c = \u6bcf\u5929 10000 \u4e2a\u8bf7\u6c42 x 30 \u5929 x \u6bcf 1000 \u4e2a\u8bf7\u6c42 0.005 USD = 1.5 USD/\u6708 \u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u5982\u4e0b\uff1a \u6bcf\u6708\u603b\u8d39\u7528 = 1.26 \u7f8e\u5143 Lambda \u6210\u672c + 69 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c + 1.5 \u7f8e\u5143 S3 \u8bf7\u6c42\u6210\u672c = 71.13 \u7f8e\u5143 \u5e94\u7528\u65e5\u5fd7 \u6444\u53d6\u548c\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002 \u4ece Amazon EC2 \u6216 Amazon EKS \u6536\u96c6\u65e5\u5fd7 \u6210\u672c\u4f30\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u5047\u8bbe\u548c\u4e8b\u5b9e\uff1a \u63d0\u4f9b 30% \u4ee5\u4e0a\u7684\u5206\u7247\u6765\u5904\u7406\u6d41\u91cf\u6296\u52a8\u3002 \u5e73\u5747\u65e5\u5fd7\u6d88\u606f\u5927\u5c0f\u4e3a 1 KB\u3002 Lambda \u5904\u7406\u5668\u5185\u5b58\u4e3a 1024 MB\u3002 \u6bcf\u4e2a Lambda \u8c03\u7528\u5904\u7406 1 MB \u65e5\u5fd7\u3002 \u6bcf\u6b21 Lambda \u8c03\u7528\u540c\u65f6\u5904\u7406\u4e00\u4e2a Kinesis \u5206\u7247\u3002 \u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u7684 Lambda \u8fd0\u884c\u65f6\u4e3a 500 \u6beb\u79d2\u3002 \u6839\u636e\u5047\u8bbe\uff0c\u4e00\u4e2a Kinesis \u5206\u7247\u6444\u53d6\u65e5\u5fd7\u5927\u5c0f\u4e3a = 1 MB/\u79d2 x 3600 \u79d2/\u5c0f\u65f6 x 24 \u5c0f\u65f6 x 0.7 = 60.48 GB/\u5929 \u4f8b\u5982\uff1a1 GB/\u5929 \u60a8\u6709 1 GB \u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4ece EC2 \u6216 EKS \u53d1\u9001\u5230 KDS\uff0c\u5373\u6bcf\u5929 100 \u4e07\u6761\u65e5\u5fd7\u6d88\u606f\u3002 Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 \u7f8e\u5143/\u5206\u7247\u5c0f\u65f6 x \u6bcf\u5929 24 \u5c0f\u65f6 x \u6bcf\u6708 30 \u5929 = 10.8 \u7f8e\u5143/\u6708 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 \u7f8e\u5143 * \u6bcf\u5929 1 \u767e\u4e07 * \u6bcf\u6708 30 \u5929 = 0.42 \u7f8e\u5143/\u6708 Lambda \u6210\u672c = \u6bcf 1 \u6beb\u79d2 0.0000000167 \u7f8e\u5143 x \u6bcf\u6b21\u8c03\u7528 500 \u6beb\u79d2 x \u6bcf\u5929 1,000 \u6b21\u8c03\u7528\uff08\u6bcf\u6b21\u8c03\u7528 1 GB / 1 MB\uff09x \u6bcf\u6708 30 \u5929 = 7.52 \u7f8e\u5143/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 10.8 \u7f8e\u5143 Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c + 4.2 \u7f8e\u5143 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + 2.51 \u7f8e\u5143 Lambda \u6210\u672c = 18.74 \u7f8e\u5143 \u4f8b\u5982\uff1a100 GB/\u5929 \u60a8\u6709 100 GB \u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4ece EC2 \u6216 EKS \u53d1\u9001\u5230 KDS\uff0c\u5373\u6bcf\u5929 1 \u4ebf\u6761\u65e5\u5fd7\u6d88\u606f\u3002 Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 \u7f8e\u5143/\u5206\u7247\u5c0f\u65f6 x 2 \u4e2a\u5206\u7247 x \u6bcf\u5929 24 \u5c0f\u65f6 x \u6bcf\u6708 30 \u5929 = 21.6 \u7f8e\u5143/\u6708 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 \u7f8e\u5143 * \u6bcf\u5929 1 \u4ebf * \u6bcf\u6708 30 \u5929 = 42 \u7f8e\u5143/\u6708 Lambda \u6210\u672c = \u6bcf 1 \u6beb\u79d2 0.0000000167 \u7f8e\u5143 x \u6bcf\u6b21\u8c03\u7528 500 \u6beb\u79d2 x \u6bcf\u5929 100,000 \u6b21\u8c03\u7528\uff08\u6bcf\u6b21\u8c03\u7528 100 GB / 1 MB\uff09x \u6bcf\u6708 30 \u5929 = 25.05 \u7f8e\u5143/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 183.6 \u7f8e\u5143 Kinesis Shard \u5c0f\u65f6\u6210\u672c + 420 \u7f8e\u5143 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + 7,515 \u7f8e\u5143 Lambda \u6210\u672c = 88.65 \u7f8e\u5143 \u8bbf\u95ee\u4ee3\u7406 \u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u8bbf\u95ee\u4ee3\u7406 \uff0c\u5c06\u6536\u53d6\u4ee5\u4e0b\u8d39\u7528\u3002 EC2 \u6210\u672c = t3.large 1Y RI \u5168\u90e8\u9884\u4ed8 $426.612 x 2 / 12 \u4e2a\u6708 = $71.1/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 71.1 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 88.9 \u7f8e\u5143 \u544a\u8b66 \u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u544a\u8b66 \uff0c\u53ef\u53c2\u8003 CloudWatch \u4ef7\u683c \u3002","title":"\u6210\u672c\u9884\u4f30"},{"location":"implementation-guide/cost/#_1","text":"\u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u4e2a\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002 \u622a\u81f32022\u5e746\u6708\uff0c\u5f71\u54cd\u89e3\u51b3\u65b9\u6848\u6210\u672c\u7684\u4e3b\u8981\u56e0\u7d20\u5305\u62ec\uff1a \u8981\u6444\u53d6\u7684\u65e5\u5fd7\u7c7b\u578b \u8981\u6444\u53d6/\u5904\u7406\u7684\u65e5\u5fd7\u91cf \u65e5\u5fd7\u7684\u4f4d\u7f6e \u91cd\u8981\u4fe1\u606f Amazon OpenSearch \u96c6\u7fa4\u7684\u6210\u672c\u4e0d\u4f1a\u8ba1\u5165\u6210\u672c\u4f30\u7b97\u3002","title":"\u8d39\u7528\u9884\u4f30"},{"location":"implementation-guide/cost/#aws","text":"\u6444\u53d6\u548c\u5904\u7406\u670d\u52a1\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002","title":"AWS \u670d\u52a1\u65e5\u5fd7"},{"location":"implementation-guide/cost/#amazon-s3","text":"\u5047\u8bbe AWS \u670d\u52a1\u6bcf 5 \u5206\u949f\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230 Amazon S3 \u7684\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u6700\u5927\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a 10 MB\u3002 Lambda \u5185\u5b58\u4e3a 128 MB\u3002\u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u5e73\u5747 Lambda \u8fd0\u884c\u65f6\u95f4\u4e3a 500 \u6beb\u79d2\uff0c\u5904\u7406\u5c0f\u4e8e 10 MB \u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u5e73\u5747 Lambda \u8fd0\u884c\u65f6\u95f4\u4e3a 1000 \u6beb\u79d2\u3002 \u4f8b\u5982\uff1a1 GB/\u5929 \u60a8\u6bcf\u5929\u6709 1 GB \u7684\u670d\u52a1\u65e5\u5fd7\u4fdd\u5b58\u5230 S3\u3002\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Lambda \u6210\u672c = \u6bcf\u5929 288 \u4e2a\u65e5\u5fd7\u6587\u4ef6\uff08\u6bcf\u4e2a\u6587\u4ef6 3.47 MB\uff09x 500 \u6beb\u79d2 x \u6bcf\u6beb\u79d2 0.0000000021 \u7f8e\u5143 x 30 \u5929 = 0.009 \u7f8e\u5143/\u6708 SQS \u6210\u672c = \u6bcf\u5929 288 \u4e2a\u8bf7\u6c42 x 30 \u5929 = \u5728\u514d\u8d39\u5957\u9910\u5185 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x 30 GB/\u6708 = 0.69 \u7f8e\u5143/\u6708 S3 \u8bf7\u6c42\u6210\u672c = \u6bcf\u5929 288 \u4e2a\u8bf7\u6c42 x 30 \u5929 x \u6bcf 1000 \u4e2a\u8bf7\u6c42 0.005 USD = 0.04 USD/\u6708 \u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u4e3a\uff1a \u6bcf\u6708\u603b\u8d39\u7528 = 0.018 \u7f8e\u5143 Lambda \u6210\u672c + 0.69 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c + 0.04 \u7f8e\u5143 S3 \u8bf7\u6c42\u6210\u672c = 0.742 \u7f8e\u5143 \u793a\u4f8b 2\uff1a100 GB/\u5929 \u60a8\u6bcf\u5929\u6709 100 GB \u7684\u670d\u52a1\u65e5\u5fd7\u4fdd\u5b58\u5230 S3\u3002\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Lambda \u6210\u672c = \u6bcf\u5929 10000 \u4e2a\u65e5\u5fd7\u6587\u4ef6\uff08\u6bcf\u4e2a\u6587\u4ef6 10 MB\uff09x 1000 \u6beb\u79d2 x \u6bcf\u6beb\u79d2 0.0000000021 \u7f8e\u5143 x 30 \u5929 = 0.63 \u7f8e\u5143/\u6708 SQS \u6210\u672c = \u6bcf\u5929 10000 \u4e2a\u8bf7\u6c42 x 30 \u5929 = \u5728\u514d\u8d39\u5957\u9910\u5185 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x 3,000 GB/\u6708 = 69 \u7f8e\u5143/\u6708 S3 \u8bf7\u6c42\u6210\u672c = \u6bcf\u5929 10000 \u4e2a\u8bf7\u6c42 x 30 \u5929 x \u6bcf 1000 \u4e2a\u8bf7\u6c42 0.005 USD = 1.5 USD/\u6708 \u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u5982\u4e0b\uff1a \u6bcf\u6708\u603b\u8d39\u7528 = 1.26 \u7f8e\u5143 Lambda \u6210\u672c + 69 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c + 1.5 \u7f8e\u5143 S3 \u8bf7\u6c42\u6210\u672c = 71.13 \u7f8e\u5143","title":"Amazon S3 \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/cost/#_2","text":"\u6444\u53d6\u548c\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002","title":"\u5e94\u7528\u65e5\u5fd7"},{"location":"implementation-guide/cost/#amazon-ec2-amazon-eks","text":"\u6210\u672c\u4f30\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u5047\u8bbe\u548c\u4e8b\u5b9e\uff1a \u63d0\u4f9b 30% \u4ee5\u4e0a\u7684\u5206\u7247\u6765\u5904\u7406\u6d41\u91cf\u6296\u52a8\u3002 \u5e73\u5747\u65e5\u5fd7\u6d88\u606f\u5927\u5c0f\u4e3a 1 KB\u3002 Lambda \u5904\u7406\u5668\u5185\u5b58\u4e3a 1024 MB\u3002 \u6bcf\u4e2a Lambda \u8c03\u7528\u5904\u7406 1 MB \u65e5\u5fd7\u3002 \u6bcf\u6b21 Lambda \u8c03\u7528\u540c\u65f6\u5904\u7406\u4e00\u4e2a Kinesis \u5206\u7247\u3002 \u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u7684 Lambda \u8fd0\u884c\u65f6\u4e3a 500 \u6beb\u79d2\u3002 \u6839\u636e\u5047\u8bbe\uff0c\u4e00\u4e2a Kinesis \u5206\u7247\u6444\u53d6\u65e5\u5fd7\u5927\u5c0f\u4e3a = 1 MB/\u79d2 x 3600 \u79d2/\u5c0f\u65f6 x 24 \u5c0f\u65f6 x 0.7 = 60.48 GB/\u5929 \u4f8b\u5982\uff1a1 GB/\u5929 \u60a8\u6709 1 GB \u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4ece EC2 \u6216 EKS \u53d1\u9001\u5230 KDS\uff0c\u5373\u6bcf\u5929 100 \u4e07\u6761\u65e5\u5fd7\u6d88\u606f\u3002 Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 \u7f8e\u5143/\u5206\u7247\u5c0f\u65f6 x \u6bcf\u5929 24 \u5c0f\u65f6 x \u6bcf\u6708 30 \u5929 = 10.8 \u7f8e\u5143/\u6708 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 \u7f8e\u5143 * \u6bcf\u5929 1 \u767e\u4e07 * \u6bcf\u6708 30 \u5929 = 0.42 \u7f8e\u5143/\u6708 Lambda \u6210\u672c = \u6bcf 1 \u6beb\u79d2 0.0000000167 \u7f8e\u5143 x \u6bcf\u6b21\u8c03\u7528 500 \u6beb\u79d2 x \u6bcf\u5929 1,000 \u6b21\u8c03\u7528\uff08\u6bcf\u6b21\u8c03\u7528 1 GB / 1 MB\uff09x \u6bcf\u6708 30 \u5929 = 7.52 \u7f8e\u5143/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 10.8 \u7f8e\u5143 Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c + 4.2 \u7f8e\u5143 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + 2.51 \u7f8e\u5143 Lambda \u6210\u672c = 18.74 \u7f8e\u5143 \u4f8b\u5982\uff1a100 GB/\u5929 \u60a8\u6709 100 GB \u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4ece EC2 \u6216 EKS \u53d1\u9001\u5230 KDS\uff0c\u5373\u6bcf\u5929 1 \u4ebf\u6761\u65e5\u5fd7\u6d88\u606f\u3002 Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 \u7f8e\u5143/\u5206\u7247\u5c0f\u65f6 x 2 \u4e2a\u5206\u7247 x \u6bcf\u5929 24 \u5c0f\u65f6 x \u6bcf\u6708 30 \u5929 = 21.6 \u7f8e\u5143/\u6708 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 \u7f8e\u5143 * \u6bcf\u5929 1 \u4ebf * \u6bcf\u6708 30 \u5929 = 42 \u7f8e\u5143/\u6708 Lambda \u6210\u672c = \u6bcf 1 \u6beb\u79d2 0.0000000167 \u7f8e\u5143 x \u6bcf\u6b21\u8c03\u7528 500 \u6beb\u79d2 x \u6bcf\u5929 100,000 \u6b21\u8c03\u7528\uff08\u6bcf\u6b21\u8c03\u7528 100 GB / 1 MB\uff09x \u6bcf\u6708 30 \u5929 = 25.05 \u7f8e\u5143/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 183.6 \u7f8e\u5143 Kinesis Shard \u5c0f\u65f6\u6210\u672c + 420 \u7f8e\u5143 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + 7,515 \u7f8e\u5143 Lambda \u6210\u672c = 88.65 \u7f8e\u5143","title":"\u4ece Amazon EC2 \u6216 Amazon EKS \u6536\u96c6\u65e5\u5fd7"},{"location":"implementation-guide/cost/#_3","text":"\u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u8bbf\u95ee\u4ee3\u7406 \uff0c\u5c06\u6536\u53d6\u4ee5\u4e0b\u8d39\u7528\u3002 EC2 \u6210\u672c = t3.large 1Y RI \u5168\u90e8\u9884\u4ed8 $426.612 x 2 / 12 \u4e2a\u6708 = $71.1/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 71.1 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 88.9 \u7f8e\u5143","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/cost/#_4","text":"\u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u544a\u8b66 \uff0c\u53ef\u53c2\u8003 CloudWatch \u4ef7\u683c \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/faq/","text":"\u5e38\u89c1\u95ee\u9898 \u5982\u4f55\u5728\u4e0e Log Hub \u90e8\u7f72\u533a\u57df\u4e0d\u540c\u7684\u533a\u57df\u4e2d\u63d0\u53d6 AWS \u6258\u7ba1\u670d\u52a1\u7684\u65e5\u5fd7\uff1f \u60a8\u53ef\u4ee5\u5229\u7528 S3 \u8de8\u533a\u57df\u590d\u5236 \u5c06\u65e5\u5fd7\u590d\u5236\u5230 Log Hub \u90e8\u7f72\u533a\u57df\uff0c\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684 \u5bf9\u8c61\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5220\u9664\u539f\u59cb\u6570\u636e\u3002 \u5f53\u66f4\u65b0\u5806\u6808\u65f6\uff0cCloudFormation \u5806\u6808\u5728\u5220\u9664 AWS::Lambda::Function \u8d44\u6e90\u65f6\u5361\u4f4f\u4e86\u3002\u5982\u4f55\u89e3\u51b3\uff1f Lambda \u51fd\u6570\u4f4d\u4e8e VPC \u4e2d\uff0c\u60a8\u9700\u8981\u7b49\u5f85\u5173\u8054\u7684 ENI \u8d44\u6e90\u88ab\u5220\u9664\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u6709\u54ea\u4e9b\u9650\u5236\uff1f Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86\u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236\u7684 AOS \u57df\u3002\u6309\u7167 \u6700\u4f73\u5b9e\u8df5 \uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u57df\u3002\u4e0d\u652f\u6301\u4f7f\u7528\u516c\u5171\u8bbf\u95ee\u7684 AOS\u3002 Log Hub \u5fc5\u987b\u4e0e\u8981\u4f7f\u7528\u7684 AOS \u57df\u90e8\u7f72\u5728\u540c\u4e00 AWS \u8d26\u6237\u548c\u540c\u4e00\u533a\u57df\u4e2d\u3002 \u65e5\u5fd7\u4ee3\u7406 \u91cd\u542fEC2\u5b9e\u4f8b\u540e\u4ee3\u7406\u72b6\u6001\u4e3a\u79bb\u7ebf\uff0c\u5982\u4f55\u8ba9\u5b83\u5728\u5b9e\u4f8b\u91cd\u542f\u65f6\u81ea\u52a8\u542f\u52a8\uff1f \u5982\u679c\u60a8\u5df2\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f46\u5728\u521b\u5efa\u4efb\u4f55\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\u91cd\u65b0\u542f\u52a8\u5b9e\u4f8b\uff0c\u901a\u5e38\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002 \u5982\u679c\u60a8\u5df2\u7ecf\u914d\u7f6e\u65e5\u5fd7\u6444\u53d6\uff0c\u4ee3\u7406\u5c06\u81ea\u52a8\u91cd\u542f\u3002 \u5982\u679c\u60a8\u6709\u65e5\u5fd7\u6444\u53d6\uff0c \u4f46\u4f9d\u7136\u53d1\u751f\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u4f7f\u7528 systemctl status fluent-bit \u68c0\u67e5\u5176\u5728\u5b9e\u4f8b\u4e2d\u7684\u72b6\u6001\u3002 \u65e5\u5fd7\u6444\u53d6 \u6211\u521b\u5efa\u4e86\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u662f\u5728 OpenSearch \u4e2d\u6709\u91cd\u590d\u7684\u8bb0\u5f55\u3002 \u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684 Kinesis Shards \u6765\u5904\u7406\u4f20\u5165\u7684\u8bf7\u6c42\u3002 \u53d1\u751f\u9608\u503c\u9519\u8bef\u65f6\uff0c\u5728 Kinesis \u4e2d\uff0cFluent Bit \u4ee3\u7406\u5c06 \u91cd\u8bd5 [chunk](https://docs.fluentbit.io/manual/administration /\u7f13\u51b2\u548c\u5b58\u50a8\uff09\u3002","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"},{"location":"implementation-guide/faq/#_1","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"implementation-guide/faq/#log-hub-aws","text":"\u60a8\u53ef\u4ee5\u5229\u7528 S3 \u8de8\u533a\u57df\u590d\u5236 \u5c06\u65e5\u5fd7\u590d\u5236\u5230 Log Hub \u90e8\u7f72\u533a\u57df\uff0c\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684 \u5bf9\u8c61\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5220\u9664\u539f\u59cb\u6570\u636e\u3002","title":"\u5982\u4f55\u5728\u4e0e Log Hub \u90e8\u7f72\u533a\u57df\u4e0d\u540c\u7684\u533a\u57df\u4e2d\u63d0\u53d6 AWS \u6258\u7ba1\u670d\u52a1\u7684\u65e5\u5fd7\uff1f"},{"location":"implementation-guide/faq/#cloudformation-awslambdafunction","text":"Lambda \u51fd\u6570\u4f4d\u4e8e VPC \u4e2d\uff0c\u60a8\u9700\u8981\u7b49\u5f85\u5173\u8054\u7684 ENI \u8d44\u6e90\u88ab\u5220\u9664\u3002","title":"\u5f53\u66f4\u65b0\u5806\u6808\u65f6\uff0cCloudFormation \u5806\u6808\u5728\u5220\u9664 AWS::Lambda::Function \u8d44\u6e90\u65f6\u5361\u4f4f\u4e86\u3002\u5982\u4f55\u89e3\u51b3\uff1f"},{"location":"implementation-guide/faq/#_2","text":"Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86\u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236\u7684 AOS \u57df\u3002\u6309\u7167 \u6700\u4f73\u5b9e\u8df5 \uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u57df\u3002\u4e0d\u652f\u6301\u4f7f\u7528\u516c\u5171\u8bbf\u95ee\u7684 AOS\u3002 Log Hub \u5fc5\u987b\u4e0e\u8981\u4f7f\u7528\u7684 AOS \u57df\u90e8\u7f72\u5728\u540c\u4e00 AWS \u8d26\u6237\u548c\u540c\u4e00\u533a\u57df\u4e2d\u3002","title":"\u6b64\u89e3\u51b3\u65b9\u6848\u6709\u54ea\u4e9b\u9650\u5236\uff1f"},{"location":"implementation-guide/faq/#_3","text":"","title":"\u65e5\u5fd7\u4ee3\u7406"},{"location":"implementation-guide/faq/#ec2","text":"\u5982\u679c\u60a8\u5df2\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f46\u5728\u521b\u5efa\u4efb\u4f55\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\u91cd\u65b0\u542f\u52a8\u5b9e\u4f8b\uff0c\u901a\u5e38\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002 \u5982\u679c\u60a8\u5df2\u7ecf\u914d\u7f6e\u65e5\u5fd7\u6444\u53d6\uff0c\u4ee3\u7406\u5c06\u81ea\u52a8\u91cd\u542f\u3002 \u5982\u679c\u60a8\u6709\u65e5\u5fd7\u6444\u53d6\uff0c \u4f46\u4f9d\u7136\u53d1\u751f\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u4f7f\u7528 systemctl status fluent-bit \u68c0\u67e5\u5176\u5728\u5b9e\u4f8b\u4e2d\u7684\u72b6\u6001\u3002","title":"\u91cd\u542fEC2\u5b9e\u4f8b\u540e\u4ee3\u7406\u72b6\u6001\u4e3a\u79bb\u7ebf\uff0c\u5982\u4f55\u8ba9\u5b83\u5728\u5b9e\u4f8b\u91cd\u542f\u65f6\u81ea\u52a8\u542f\u52a8\uff1f"},{"location":"implementation-guide/faq/#_4","text":"","title":"\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/faq/#opensearch","text":"\u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684 Kinesis Shards \u6765\u5904\u7406\u4f20\u5165\u7684\u8bf7\u6c42\u3002 \u53d1\u751f\u9608\u503c\u9519\u8bef\u65f6\uff0c\u5728 Kinesis \u4e2d\uff0cFluent Bit \u4ee3\u7406\u5c06 \u91cd\u8bd5 [chunk](https://docs.fluentbit.io/manual/administration /\u7f13\u51b2\u548c\u5b58\u50a8\uff09\u3002","title":"\u6211\u521b\u5efa\u4e86\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u662f\u5728 OpenSearch \u4e2d\u6709\u91cd\u590d\u7684\u8bb0\u5f55\u3002"},{"location":"implementation-guide/revisions/","text":"\u7248\u672c\u66f4\u65b0 \u65e5\u671f \u63cf\u8ff0 2022\u5e746\u6708 \u9996\u6b21\u53d1\u5e03","title":"\u7248\u672c\u66f4\u65b0"},{"location":"implementation-guide/revisions/#_1","text":"\u65e5\u671f \u63cf\u8ff0 2022\u5e746\u6708 \u9996\u6b21\u53d1\u5e03","title":"\u7248\u672c\u66f4\u65b0"},{"location":"implementation-guide/solution-components/","text":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6 \u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a \u57df\u7ba1\u7406 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (AOS) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 AOS \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 AOS \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a AOS \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002 \u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002 Log Hub \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/solution-components/#_1","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/solution-components/#_2","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (AOS) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 AOS \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 AOS \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a AOS \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002","title":"\u57df\u7ba1\u7406"},{"location":"implementation-guide/solution-components/#_3","text":"\u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002 Log Hub \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002","title":"\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/solution-components/#_4","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002","title":"\u670d\u52a1\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/solution-components/#_5","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/trouble-shooting/","text":"\u6545\u969c\u6392\u67e5 \u4ee5\u4e0b\u4ecb\u7ecd\u5728\u4f7f\u7528 Log Hub \u65f6\u53ef\u80fd\u9047\u5230\u7684\u9519\u8bef\u6216\u95ee\u9898\uff0c\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002 Error: Failed to assume service-linked role arn:x:x:x:/AWSServiceRoleForAppSync \u51fa\u73b0\u6b64\u9519\u8bef\u7684\u539f\u56e0\u662f\u8be5\u8d26\u6237\u4ece\u672a\u4f7f\u7528\u8fc7 AWS AppSync \u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u518d\u6b21\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u6a21\u677f\u3002\u5f53\u60a8\u9047\u5230\u9519\u8bef\u65f6\uff0cAWS \u5df2\u7ecf\u81ea\u52a8\u521b\u5efa\u4e86\u89d2\u8272\u3002 \u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 AWS CloudShell \u6216\u672c\u5730\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b AWS CLI \u547d\u4ee4\u4ee5\u94fe\u63a5 AppSync \u89d2\u8272\uff1a aws iam create-service-linked-role --aws-service-name appsync.amazonaws.com Error: Unable to add backend role Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 AOS \u57df\u3002 \u60a8\u9700\u8981\u8f6c\u5230 AOS \u63a7\u5236\u53f0\uff0c\u5e76\u7f16\u8f91 AOS \u57df\u7684 \u8bbf\u95ee\u7b56\u7565 \u3002 Error: PutRecords API responded with error='AccessDeniedException' Fluent-bit agent\u5728EKS\u96c6\u7fa4\u4e2d\u5411Kinesis\u53d1\u9001\u65e5\u5fd7\u65f6\u6c47\u62a5\u4e86\"AccessDeniedException\"\u9519\u8bef \u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u8bbe\u7f6e IAM \u89d2\u8272\u4fe1\u4efb\u5173\u7cfb \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0: \u6253\u5f00 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9\u8981\u68c0\u67e5\u7684EKS\u96c6\u7fa4 \u70b9\u51fb IAM \u89d2\u8272 ARN \uff0c \u8fd9\u4f1a\u5728 AWS \u63a7\u5236\u53f0\u4e2d\u6253\u5f00 IAM \u89d2\u8272\u3002 \u9009\u62e9 \u4fe1\u4efb\u5173\u7cfb \u9009\u9879\u5361\u4ee5\u9a8c\u8bc1 OIDC \u63d0\u4f9b\u65b9, \u670d\u52a1\u8d26\u6237\u547d\u540d\u7a7a\u95f4\u4ee5\u53ca\u6761\u4ef6\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u524d\u5f80 Amazon EKS IAM role configuration \u83b7\u5f97\u66f4\u591a\u4fe1\u606f","title":"\u6545\u969c\u6392\u67e5"},{"location":"implementation-guide/trouble-shooting/#_1","text":"\u4ee5\u4e0b\u4ecb\u7ecd\u5728\u4f7f\u7528 Log Hub \u65f6\u53ef\u80fd\u9047\u5230\u7684\u9519\u8bef\u6216\u95ee\u9898\uff0c\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002","title":"\u6545\u969c\u6392\u67e5"},{"location":"implementation-guide/trouble-shooting/#error-failed-to-assume-service-linked-role-arnxxxawsserviceroleforappsync","text":"\u51fa\u73b0\u6b64\u9519\u8bef\u7684\u539f\u56e0\u662f\u8be5\u8d26\u6237\u4ece\u672a\u4f7f\u7528\u8fc7 AWS AppSync \u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u518d\u6b21\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u6a21\u677f\u3002\u5f53\u60a8\u9047\u5230\u9519\u8bef\u65f6\uff0cAWS \u5df2\u7ecf\u81ea\u52a8\u521b\u5efa\u4e86\u89d2\u8272\u3002 \u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 AWS CloudShell \u6216\u672c\u5730\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b AWS CLI \u547d\u4ee4\u4ee5\u94fe\u63a5 AppSync \u89d2\u8272\uff1a aws iam create-service-linked-role --aws-service-name appsync.amazonaws.com","title":"Error: Failed to assume service-linked role arn:x:x:x:/AWSServiceRoleForAppSync"},{"location":"implementation-guide/trouble-shooting/#error-unable-to-add-backend-role","text":"Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 AOS \u57df\u3002 \u60a8\u9700\u8981\u8f6c\u5230 AOS \u63a7\u5236\u53f0\uff0c\u5e76\u7f16\u8f91 AOS \u57df\u7684 \u8bbf\u95ee\u7b56\u7565 \u3002","title":"Error: Unable to add backend role"},{"location":"implementation-guide/trouble-shooting/#error-putrecords-api-responded-with-erroraccessdeniedexception","text":"Fluent-bit agent\u5728EKS\u96c6\u7fa4\u4e2d\u5411Kinesis\u53d1\u9001\u65e5\u5fd7\u65f6\u6c47\u62a5\u4e86\"AccessDeniedException\"\u9519\u8bef","title":"Error: PutRecords API responded with error='AccessDeniedException'"},{"location":"implementation-guide/trouble-shooting/#iam","text":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0: \u6253\u5f00 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9\u8981\u68c0\u67e5\u7684EKS\u96c6\u7fa4 \u70b9\u51fb IAM \u89d2\u8272 ARN \uff0c \u8fd9\u4f1a\u5728 AWS \u63a7\u5236\u53f0\u4e2d\u6253\u5f00 IAM \u89d2\u8272\u3002 \u9009\u62e9 \u4fe1\u4efb\u5173\u7cfb \u9009\u9879\u5361\u4ee5\u9a8c\u8bc1 OIDC \u63d0\u4f9b\u65b9, \u670d\u52a1\u8d26\u6237\u547d\u540d\u7a7a\u95f4\u4ee5\u53ca\u6761\u4ef6\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u524d\u5f80 Amazon EKS IAM role configuration \u83b7\u5f97\u66f4\u591a\u4fe1\u606f","title":"\u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u8bbe\u7f6e IAM \u89d2\u8272\u4fe1\u4efb\u5173\u7cfb"},{"location":"implementation-guide/applications/","text":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301\u4ece EC2 \u5b9e\u4f8b\u3001EKS \u96c6\u7fa4\u548c S3 \u5b58\u50a8\u6876\u4e2d\u6444\u53d6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u5bf9\u4e8e EC2 \u5b9e\u4f8b\uff0cLog Hub \u4f1a\u81ea\u52a8\u5b89\u88c5 logging agent ( Fluent Bit 1.8 )\uff0c\u6536\u96c6 EC2 \u5b9e\u4f8b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e EKS \u96c6\u7fa4\uff0cLog Hub \u5c06\u751f\u6210\u4e00\u4f53\u5316\u914d\u7f6e\u6587\u4ef6\u4f9b\u5ba2\u6237\u5c06 logging agent ( Fluent Bit 1.8 ) \u90e8\u7f72\u4e3a DaemonSet \u6216 Sidecar\u3002 \u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u6536\u96c6 pod \u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e S3 \u5b58\u50a8\u6876\uff0cLog hub \u5c06\u76f4\u63a5\u6536\u96c6\u5b58\u50a8\u5728 S3 \u5b58\u50a8\u6876\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u6570\u636e\u6e90 Log \u683c\u5f0f EC2 \u673a\u5668\u7ec4 EKS \u96c6\u7fa4 S3 \u6876 Nginx \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u5426 \u591a\u5f20\u6587\u672c (Spring Boot) \u662f \u662f \u5426 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff1a Apache HTTP server \u65e5\u5fd7 Nginx \u65e5\u5fd7 \u5355\u884c\u6587\u672c\u65e5\u5fd7 \u591a\u884c\u6587\u672c\u65e5\u5fd7 JSON \u65e5\u5fd7 \u5728\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\uff0c\u60a8\u9700\u8981\uff1a \u521b\u5efa\u65e5\u5fd7\u6e90 \uff08\u4e0d\u9002\u7528\u4e8eS3\u5b58\u50a8\u6876\uff09 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u6982\u5ff5 \u4e0b\u9762\u4ecb\u7ecd\u7684\u6982\u5ff5\u53ef\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u8981\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u9700\u8981\u6570\u636e\u7ba1\u9053\u3002\u7ba1\u9053\u4e0d\u4ec5\u7f13\u51b2\u4f20\u8f93\u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u6e05\u7406\u6216\u9884\u5904\u7406\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06 IP \u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u3002\u76ee\u524d\uff0cKinesis Data Stream \u7528\u4f5c\u6570\u636e\u7f13\u51b2\u3002 \u65e5\u5fd7\u6444\u53d6 (Log Ingestion) \u65e5\u5fd7\u6444\u53d6\u4e3a Log Hub \u4f7f\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u914d\u7f6e\u65e5\u5fd7\u6e90\u3001\u65e5\u5fd7\u7c7b\u578b\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u4e4b\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u4ece\u65e5\u5fd7\u6e90\u6536\u96c6\u7279\u5b9a\u7c7b\u578b\u7684\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u65e5\u5fd7\u4ee3\u7406 (Logging Agent) \u65e5\u5fd7\u4ee3\u7406\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u8bfb\u53d6\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0cOpenSearch\uff09\u3002 \u76ee\u524d\uff0cLog Hub \u4ec5\u652f\u6301\u81ea\u52a8\u5b89\u88c5\u7684 Fluent Bit 1.8 \u65e5\u5fd7\u4ee3\u7406\u3002 Fluent Bit \u4ee3\u7406\u5177\u6709 OpenSSL 1.1 \u7684\u4f9d\u8d56\u9879\u3002\u8981\u4e86\u89e3\u5982\u4f55\u5728 Linux \u5b9e\u4f8b\u4e0a\u5b89\u88c5 OpenSSL\uff0c\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u65e5\u5fd7\u6e90 (Log Source) \u65e5\u5fd7\u6e90\u662f\u6307\u60a8\u5e0c\u671b Log Hub \u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 Amazon \u670d\u52a1\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u6e90\u6709\uff1a \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 S3 \u5b58\u50a8\u6876 \u5b9e\u4f8b\u7ec4 (Instance Group) \u5b9e\u4f8b\u7ec4\u662f\u60a8\u8981\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 EC2 \u5b9e\u4f8b\u7684\u96c6\u5408\u3002 Log Hub \u5c06\u5e2e\u52a9\u60a8\u5728\u7ec4\u5185\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4e2d\u5b89\u88c5\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u3002 EKS \u96c6\u7fa4 (EKS Cluster) Log Hub \u4e2d\u7684 EKS \u96c6\u7fa4\u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon EKS\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar\u3002 S3 \u5b58\u50a8\u6876 (S3 Bucket) \u5982\u679c\u60a8\u7684\u7cfb\u7edf\u5f53\u524d\u6b63\u5728\u5c06\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u53d1\u9001\u5230 S3 \u5b58\u50a8\u6876\uff0cLog Hub \u652f\u6301\u6536\u96c6\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e0a\u7684\u5386\u53f2\u6216\u6301\u7eed\u65e5\u5fd7\u3002 \u65e5\u5fd7\u914d\u7f6e (Log Config) \u65e5\u5fd7\u914d\u7f6e\u662f\u4e00\u79cd\u914d\u7f6e\uff0c\u5b83\u544a\u8bc9 Log Hub \u65e5\u5fd7\u5728\u65e5\u5fd7\u6e90\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u3001\u60a8\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7c7b\u578b\u3001\u65e5\u5fd7\u884c\u5305\u542b\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/applications/#_1","text":"Log Hub \u652f\u6301\u4ece EC2 \u5b9e\u4f8b\u3001EKS \u96c6\u7fa4\u548c S3 \u5b58\u50a8\u6876\u4e2d\u6444\u53d6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u5bf9\u4e8e EC2 \u5b9e\u4f8b\uff0cLog Hub \u4f1a\u81ea\u52a8\u5b89\u88c5 logging agent ( Fluent Bit 1.8 )\uff0c\u6536\u96c6 EC2 \u5b9e\u4f8b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e EKS \u96c6\u7fa4\uff0cLog Hub \u5c06\u751f\u6210\u4e00\u4f53\u5316\u914d\u7f6e\u6587\u4ef6\u4f9b\u5ba2\u6237\u5c06 logging agent ( Fluent Bit 1.8 ) \u90e8\u7f72\u4e3a DaemonSet \u6216 Sidecar\u3002 \u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u6536\u96c6 pod \u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e S3 \u5b58\u50a8\u6876\uff0cLog hub \u5c06\u76f4\u63a5\u6536\u96c6\u5b58\u50a8\u5728 S3 \u5b58\u50a8\u6876\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/#_2","text":"Log \u683c\u5f0f EC2 \u673a\u5668\u7ec4 EKS \u96c6\u7fa4 S3 \u6876 Nginx \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u5426 \u591a\u5f20\u6587\u672c (Spring Boot) \u662f \u662f \u5426 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff1a Apache HTTP server \u65e5\u5fd7 Nginx \u65e5\u5fd7 \u5355\u884c\u6587\u672c\u65e5\u5fd7 \u591a\u884c\u6587\u672c\u65e5\u5fd7 JSON \u65e5\u5fd7 \u5728\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\uff0c\u60a8\u9700\u8981\uff1a \u521b\u5efa\u65e5\u5fd7\u6e90 \uff08\u4e0d\u9002\u7528\u4e8eS3\u5b58\u50a8\u6876\uff09 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053","title":"\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u6570\u636e\u6e90"},{"location":"implementation-guide/applications/#_3","text":"\u4e0b\u9762\u4ecb\u7ecd\u7684\u6982\u5ff5\u53ef\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u7684\u5de5\u4f5c\u539f\u7406\u3002","title":"\u6982\u5ff5"},{"location":"implementation-guide/applications/#_4","text":"\u8981\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u9700\u8981\u6570\u636e\u7ba1\u9053\u3002\u7ba1\u9053\u4e0d\u4ec5\u7f13\u51b2\u4f20\u8f93\u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u6e05\u7406\u6216\u9884\u5904\u7406\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06 IP \u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u3002\u76ee\u524d\uff0cKinesis Data Stream \u7528\u4f5c\u6570\u636e\u7f13\u51b2\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/#log-ingestion","text":"\u65e5\u5fd7\u6444\u53d6\u4e3a Log Hub \u4f7f\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u914d\u7f6e\u65e5\u5fd7\u6e90\u3001\u65e5\u5fd7\u7c7b\u578b\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u4e4b\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u4ece\u65e5\u5fd7\u6e90\u6536\u96c6\u7279\u5b9a\u7c7b\u578b\u7684\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch\u3002","title":"\u65e5\u5fd7\u6444\u53d6 (Log Ingestion)"},{"location":"implementation-guide/applications/#logging-agent","text":"\u65e5\u5fd7\u4ee3\u7406\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u8bfb\u53d6\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0cOpenSearch\uff09\u3002 \u76ee\u524d\uff0cLog Hub \u4ec5\u652f\u6301\u81ea\u52a8\u5b89\u88c5\u7684 Fluent Bit 1.8 \u65e5\u5fd7\u4ee3\u7406\u3002 Fluent Bit \u4ee3\u7406\u5177\u6709 OpenSSL 1.1 \u7684\u4f9d\u8d56\u9879\u3002\u8981\u4e86\u89e3\u5982\u4f55\u5728 Linux \u5b9e\u4f8b\u4e0a\u5b89\u88c5 OpenSSL\uff0c\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002","title":"\u65e5\u5fd7\u4ee3\u7406 (Logging Agent)"},{"location":"implementation-guide/applications/#log-source","text":"\u65e5\u5fd7\u6e90\u662f\u6307\u60a8\u5e0c\u671b Log Hub \u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 Amazon \u670d\u52a1\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u6e90\u6709\uff1a \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 S3 \u5b58\u50a8\u6876","title":"\u65e5\u5fd7\u6e90 (Log Source)"},{"location":"implementation-guide/applications/#instance-group","text":"\u5b9e\u4f8b\u7ec4\u662f\u60a8\u8981\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 EC2 \u5b9e\u4f8b\u7684\u96c6\u5408\u3002 Log Hub \u5c06\u5e2e\u52a9\u60a8\u5728\u7ec4\u5185\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4e2d\u5b89\u88c5\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u3002","title":"\u5b9e\u4f8b\u7ec4 (Instance Group)"},{"location":"implementation-guide/applications/#eks-eks-cluster","text":"Log Hub \u4e2d\u7684 EKS \u96c6\u7fa4\u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon EKS\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar\u3002","title":"EKS \u96c6\u7fa4 (EKS Cluster)"},{"location":"implementation-guide/applications/#s3-s3-bucket","text":"\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u5f53\u524d\u6b63\u5728\u5c06\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u53d1\u9001\u5230 S3 \u5b58\u50a8\u6876\uff0cLog Hub \u652f\u6301\u6536\u96c6\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e0a\u7684\u5386\u53f2\u6216\u6301\u7eed\u65e5\u5fd7\u3002","title":"S3 \u5b58\u50a8\u6876 (S3 Bucket)"},{"location":"implementation-guide/applications/#log-config","text":"\u65e5\u5fd7\u914d\u7f6e\u662f\u4e00\u79cd\u914d\u7f6e\uff0c\u5b83\u544a\u8bc9 Log Hub \u65e5\u5fd7\u5728\u65e5\u5fd7\u6e90\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u3001\u60a8\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7c7b\u578b\u3001\u65e5\u5fd7\u884c\u5305\u542b\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u3002","title":"\u65e5\u5fd7\u914d\u7f6e (Log Config)"},{"location":"implementation-guide/applications/apache/","text":"Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7 Apache HTTP Server (httpd) \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ece\u800c\u6444\u53d6 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u3002 \u524d\u63d0\u6761\u4ef6 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Apache HTTP \u670d\u52a1\u5668 \u3002 \u5728 Apache Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/httpd/conf/httpd.conf \uff0c\u4ee5 LogFormat \u5f00\u5934\u3002 \u5982: LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [22/Dec/2021:06:48:57 +0000] \"GET /xxx HTTP/1.1\" 404 196 \"-\" \"curl/7.79.1\" \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 \u6b65\u9aa4 3: \u67e5\u770b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f \u5bf9\u4e8e Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\uff0cLog Hub \u5c06\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002 \u793a\u4f8b\u4eea\u8868\u677f","title":"Apache HTTP \u670d\u52a1\u5668"},{"location":"implementation-guide/applications/apache/#apache-http","text":"Apache HTTP Server (httpd) \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ece\u800c\u6444\u53d6 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u3002","title":"Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7"},{"location":"implementation-guide/applications/apache/#_1","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/apache/#1-apache-http","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Apache HTTP \u670d\u52a1\u5668 \u3002 \u5728 Apache Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/httpd/conf/httpd.conf \uff0c\u4ee5 LogFormat \u5f00\u5934\u3002 \u5982: LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [22/Dec/2021:06:48:57 +0000] \"GET /xxx HTTP/1.1\" 404 196 \"-\" \"curl/7.79.1\" \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/apache/#2","text":"","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/apache/#_2","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/apache/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/apache/#3-apache-http","text":"\u5bf9\u4e8e Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\uff0cLog Hub \u5c06\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4 3: \u67e5\u770b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/apache/#_3","text":"","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/create-applog-pipeline/","text":"\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u7ba1\u9053 \u3002 \u4ee5\u5c0f\u5199\u5f62\u5f0f\u6307\u5b9a \u7d22\u5f15\u540d\u79f0 \u3002 \u5728 Buffer(Amazon Kinesis Data Streams) \u90e8\u5206\u4e2d\uff0c\u6307\u5b9a\u521d\u59cb\u5206\u7247\u53f7\u3002 \u91cd\u8981 \u5982\u679c Kinesis Data Streams (KDS) \u4e2d\u51fa\u73b0\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728 OpenSearch \u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u65e5\u5fd7\u3002 \u8fd9\u662f\u56e0\u4e3a Fluent Bit \u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 \u7684\u5f62\u5f0f\u4e0a\u4f20\u65e5\u5fd7\uff08\u5305\u542b\u591a\u6761\u8bb0\u5f55\uff09\uff0c\u5982\u679c\u4e0a\u4f20\u5931\u8d25\u4f1a\u91cd\u8bd5\u8be5\u5757\u3002 \u6bcf\u4e2a KDS \u5206\u7247\u6700\u591a\u53ef\u652f\u6301\u6bcf\u79d2 1,000 \u6761\u8bb0\u5f55\u8fdb\u884c\u5199\u5165\uff0c\u6700\u9ad8\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d2 1 MB\u3002 \u8bf7\u4f30\u8ba1\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u9009\u62e9 \u662f \u4ee5\u6839\u636e\u8f93\u5165\u65e5\u5fd7\u6d41\u91cf\u542f\u7528 Kinesis Data Streams \u5206\u7247\u7684\u81ea\u52a8\u7f29\u653e\uff0c\u5e76\u6307\u5b9a\u6700\u5927\u5206\u7247\u6570\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7ba1\u9053\u8f6c\u4e3a\"\u6709\u6548\"\u72b6\u6001\u3002","title":"\u521b\u5efa\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/applications/create-applog-pipeline/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u7ba1\u9053 \u3002 \u4ee5\u5c0f\u5199\u5f62\u5f0f\u6307\u5b9a \u7d22\u5f15\u540d\u79f0 \u3002 \u5728 Buffer(Amazon Kinesis Data Streams) \u90e8\u5206\u4e2d\uff0c\u6307\u5b9a\u521d\u59cb\u5206\u7247\u53f7\u3002 \u91cd\u8981 \u5982\u679c Kinesis Data Streams (KDS) \u4e2d\u51fa\u73b0\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728 OpenSearch \u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u65e5\u5fd7\u3002 \u8fd9\u662f\u56e0\u4e3a Fluent Bit \u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 \u7684\u5f62\u5f0f\u4e0a\u4f20\u65e5\u5fd7\uff08\u5305\u542b\u591a\u6761\u8bb0\u5f55\uff09\uff0c\u5982\u679c\u4e0a\u4f20\u5931\u8d25\u4f1a\u91cd\u8bd5\u8be5\u5757\u3002 \u6bcf\u4e2a KDS \u5206\u7247\u6700\u591a\u53ef\u652f\u6301\u6bcf\u79d2 1,000 \u6761\u8bb0\u5f55\u8fdb\u884c\u5199\u5165\uff0c\u6700\u9ad8\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d2 1 MB\u3002 \u8bf7\u4f30\u8ba1\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u9009\u62e9 \u662f \u4ee5\u6839\u636e\u8f93\u5165\u65e5\u5fd7\u6d41\u91cf\u542f\u7528 Kinesis Data Streams \u5206\u7247\u7684\u81ea\u52a8\u7f29\u653e\uff0c\u5e76\u6307\u5b9a\u6700\u5927\u5206\u7247\u6570\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7ba1\u9053\u8f6c\u4e3a\"\u6709\u6548\"\u72b6\u6001\u3002","title":"\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/create-log-ingestion/","text":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002","title":"Create log ingestion"},{"location":"implementation-guide/applications/create-log-ingestion/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-ingestion/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-ingestion/#s3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002","title":"S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/","text":"\u65e5\u5fd7\u6e90 \u5728\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u5148\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 Log Hub \u652f\u6301\u4ee5\u4e0b\u65e5\u5fd7\u6e90\uff1a EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6982\u5ff5 \u3002 \u521b\u5efa\u4e00\u4e2a EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u5b9e\u4f8b\u7ec4\u662f\u6307\u6258\u7ba1\u76f8\u540c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\u3002\u8fd9\u662f\u4e00\u79cd\u5c06 Log Config \u4e0e\u4e00\u7ec4 EC2 \u5b9e\u4f8b\u76f8\u5173\u8054\u7684\u65b9\u6cd5\u3002 Log Hub \u4f7f\u7528 Systems Manager Agent(SSM Agent) \u5b89\u88c5\u548c\u914d\u7f6e Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams \u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u5b9e\u4f8b\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a SSM Agent \u5b89\u88c5\u5728\u5b9e\u4f8b\u4e0a\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5728 Linux \u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 SSM Agent AmazonSSMManagedInstanceCore \u7b56\u7565\u4e0e\u5b9e\u4f8b\u76f8\u5173\u8054\u3002 \u5df2\u5b89\u88c5 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee AWS Systems Manager\u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon Kinesis Data Streams\u3002 \u6b65\u9aa4 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u5b9e\u4f8b \u90e8\u5206\u4e2d\uff0c\u9009\u62e9\u8981\u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684\u5b9e\u4f8b\u3002 \u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0 5 \u4e2a\u6807\u7b7e\u6765\u8fc7\u6ee4\u5b9e\u4f8b\u3002 \u9a8c\u8bc1\u6240\u6709\u9009\u4e2d\u7684\u5b9e\u4f8b \u72b6\u6001 \u90fd\u662f \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9009\u4e2d\u7684\u5b9e\u4f8b\u201c\u72b6\u6001\u201d\u4e3a\u7a7a\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u6309\u94ae\uff0c\u7b49\u5f85 \u72b6\u6001 \u53d8\u4e3a \u5728\u7ebf \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u5df2\u77e5\u95ee\u9898 \u5728 \u5317\u4eac (cn-north-1)\u548c\u5b81\u590f (cn-northwest-1) \u533a\u57df\u7684 Ubuntu \u5b9e\u4f8b\u4e0a\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u4f1a\u5bfc\u81f4\u5b89\u88c5\u9519\u8bef\u3002 Fluent Bit \u5b89\u88c5\u5305\u4e0d\u80fd \u4e0b\u8f7d\u6210\u529f\u3002 \u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 \u5bfc\u5165 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 Log Hub \u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u91cd\u8981 Log Hub \u4e0d\u652f\u6301\u5c06\u4e00\u4e2a EKS \u96c6\u7fa4\u4e2d\u7684\u65e5\u5fd7\u540c\u65f6\u53d1\u9001\u5230\u591a\u4e2a Amazon OpenSearch \u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS Cluster \u3002 \u5355\u51fb \u5bfc\u5165\u96c6\u7fa4 \u6309\u94ae\u3002 \u9009\u62e9 Log Hub \u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9 DaemonSet \u6216 Sidecar \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\u7684\u90e8\u7f72\u6a21\u5f0f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6307\u5b9a Log Hub \u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u7684 Amazon OpenSearch \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 Amazon S3 \u4f5c\u4e3a\u65e5\u5fd7\u6e90 Note Amazon S3 \u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u60a8\u7684 Log Hub \u533a\u57df\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e2d\u7684 Amazon S3 bucket \u662f\u6307\u5b58\u50a8\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u3002 \u60a8\u65e0\u9700\u4ece Log Hub \u63a7\u5236\u53f0\u521b\u5efa\u7279\u5b9a\u7684\u65e5\u5fd7\u6e90\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#_1","text":"\u5728\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u5148\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 Log Hub \u652f\u6301\u4ee5\u4e0b\u65e5\u5fd7\u6e90\uff1a EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6982\u5ff5 \u3002","title":"\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#ec2","text":"\u5b9e\u4f8b\u7ec4\u662f\u6307\u6258\u7ba1\u76f8\u540c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\u3002\u8fd9\u662f\u4e00\u79cd\u5c06 Log Config \u4e0e\u4e00\u7ec4 EC2 \u5b9e\u4f8b\u76f8\u5173\u8054\u7684\u65b9\u6cd5\u3002 Log Hub \u4f7f\u7528 Systems Manager Agent(SSM Agent) \u5b89\u88c5\u548c\u914d\u7f6e Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams \u3002","title":"\u521b\u5efa\u4e00\u4e2a EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#_2","text":"\u786e\u4fdd\u5b9e\u4f8b\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a SSM Agent \u5b89\u88c5\u5728\u5b9e\u4f8b\u4e0a\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5728 Linux \u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 SSM Agent AmazonSSMManagedInstanceCore \u7b56\u7565\u4e0e\u5b9e\u4f8b\u76f8\u5173\u8054\u3002 \u5df2\u5b89\u88c5 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee AWS Systems Manager\u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon Kinesis Data Streams\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/create-log-source/#_3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u5b9e\u4f8b \u90e8\u5206\u4e2d\uff0c\u9009\u62e9\u8981\u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684\u5b9e\u4f8b\u3002 \u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0 5 \u4e2a\u6807\u7b7e\u6765\u8fc7\u6ee4\u5b9e\u4f8b\u3002 \u9a8c\u8bc1\u6240\u6709\u9009\u4e2d\u7684\u5b9e\u4f8b \u72b6\u6001 \u90fd\u662f \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9009\u4e2d\u7684\u5b9e\u4f8b\u201c\u72b6\u6001\u201d\u4e3a\u7a7a\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u6309\u94ae\uff0c\u7b49\u5f85 \u72b6\u6001 \u53d8\u4e3a \u5728\u7ebf \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u5df2\u77e5\u95ee\u9898 \u5728 \u5317\u4eac (cn-north-1)\u548c\u5b81\u590f (cn-northwest-1) \u533a\u57df\u7684 Ubuntu \u5b9e\u4f8b\u4e0a\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u4f1a\u5bfc\u81f4\u5b89\u88c5\u9519\u8bef\u3002 Fluent Bit \u5b89\u88c5\u5305\u4e0d\u80fd \u4e0b\u8f7d\u6210\u529f\u3002 \u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/applications/create-log-source/#eks","text":"Log Hub \u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u91cd\u8981 Log Hub \u4e0d\u652f\u6301\u5c06\u4e00\u4e2a EKS \u96c6\u7fa4\u4e2d\u7684\u65e5\u5fd7\u540c\u65f6\u53d1\u9001\u5230\u591a\u4e2a Amazon OpenSearch \u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS Cluster \u3002 \u5355\u51fb \u5bfc\u5165\u96c6\u7fa4 \u6309\u94ae\u3002 \u9009\u62e9 Log Hub \u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9 DaemonSet \u6216 Sidecar \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\u7684\u90e8\u7f72\u6a21\u5f0f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6307\u5b9a Log Hub \u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u7684 Amazon OpenSearch \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u5bfc\u5165 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#amazon-s3","text":"Note Amazon S3 \u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u60a8\u7684 Log Hub \u533a\u57df\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e2d\u7684 Amazon S3 bucket \u662f\u6307\u5b58\u50a8\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u3002 \u60a8\u65e0\u9700\u4ece Log Hub \u63a7\u5236\u53f0\u521b\u5efa\u7279\u5b9a\u7684\u65e5\u5fd7\u6e90\u3002","title":"\u4f7f\u7528 Amazon S3 \u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/include-prerequisites/","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Include prerequisites"},{"location":"implementation-guide/applications/include-supported-app-logs/","text":"Log \u683c\u5f0f EC2 \u673a\u5668\u7ec4 EKS \u96c6\u7fa4 S3 \u6876 Nginx \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u5426 \u591a\u5f20\u6587\u672c (Spring Boot) \u662f \u662f \u5426","title":"Include supported app logs"},{"location":"implementation-guide/applications/json/","text":"JSON \u683c\u5f0f\u65e5\u5fd7 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6 JSON \u65e5\u5fd7\u3002 \u524d\u63d0\u6761\u4ef6 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a JSON \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 JSON \u3002 \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b JSON \u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: { \"host\" : \"81.95.250.9\" , \"user-identifier\" : \"-\" , \"time\" : \"08/Mar/2022:06:28:03 +0000\" , \"method\" : \"PATCH\" , \"request\" : \"/clicks-and-mortar/24%2f7\" , \"protocol\" : \"HTTP/2.0\" , \"status\" : 502 , \"bytes\" : 24337 , \"referer\" : \"http://www.investorturn-key.net/functionalities/innovative/integrated\" } \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6 \u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002 \u7b2c 3 \u6b65\uff1a\u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"JSON"},{"location":"implementation-guide/applications/json/#json","text":"\u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6 JSON \u65e5\u5fd7\u3002","title":"JSON \u683c\u5f0f\u65e5\u5fd7"},{"location":"implementation-guide/applications/json/#_1","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/json/#1-json","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 JSON \u3002 \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b JSON \u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: { \"host\" : \"81.95.250.9\" , \"user-identifier\" : \"-\" , \"time\" : \"08/Mar/2022:06:28:03 +0000\" , \"method\" : \"PATCH\" , \"request\" : \"/clicks-and-mortar/24%2f7\" , \"protocol\" : \"HTTP/2.0\" , \"status\" : 502 , \"bytes\" : 24337 , \"referer\" : \"http://www.investorturn-key.net/functionalities/innovative/integrated\" } \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a JSON \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/json/#2","text":"\u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002","title":"\u6b65\u9aa4 2\uff1a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/applications/json/#3-opensearch","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u7b2c 3 \u6b65\uff1a\u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7"},{"location":"implementation-guide/applications/multi-line-text/","text":"\u591a\u884c\u6587\u672c\u65e5\u5fd7 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u3002 \u76ee\u524dLog Hub\u652f\u6301 Spring Boot \u4f7f\u7528 \u6b63\u5219\u8868\u8fbe\u5f0f \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f\u6216\u81ea\u5b9a\u4e49\u65e5\u5fd7\u683c\u5f0f\u3002 Prerequisites \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u591a\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u591a\u884c\u6587\u672c \u3002 Java - Spring Boot Java Spring Boot \u65e5\u5fd7\uff0c\u53ef\u4ee5\u63d0\u4f9b\u65e5\u5fd7\u683c\u5f0f\u3002 \u4f8b\u5982\uff1a %d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger : %msg%n \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u81ea\u5b9a\u4e49\u683c\u5f0f \u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e00\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002 \u4f8b\u5982\uff1a (?<time>\\d{4}-\\d{2}-\\d{2}\\s*\\d{2}:\\d{2}:\\d{2}.\\d{3})\\s*(?<level>[\\S]+)\\s*\\[(?<thread>.+)\\]\\s*(?<logger>\\S+)\\s*:\\s*(?<message>[\\s\\S]+) \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002 Note \u76ee\u524d\uff0cLog Hub \u4e0d\u652f\u6301\u4ece S3 Bucket \u6536\u96c6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002 \u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u591a\u884c\u6587\u672c"},{"location":"implementation-guide/applications/multi-line-text/#_1","text":"\u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u3002 \u76ee\u524dLog Hub\u652f\u6301 Spring Boot \u4f7f\u7528 \u6b63\u5219\u8868\u8fbe\u5f0f \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f\u6216\u81ea\u5b9a\u4e49\u65e5\u5fd7\u683c\u5f0f\u3002","title":"\u591a\u884c\u6587\u672c\u65e5\u5fd7"},{"location":"implementation-guide/applications/multi-line-text/#prerequisites","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Prerequisites"},{"location":"implementation-guide/applications/multi-line-text/#1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u591a\u884c\u6587\u672c \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u591a\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/multi-line-text/#java-spring-boot","text":"Java Spring Boot \u65e5\u5fd7\uff0c\u53ef\u4ee5\u63d0\u4f9b\u65e5\u5fd7\u683c\u5f0f\u3002 \u4f8b\u5982\uff1a %d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger : %msg%n \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"Java - Spring Boot"},{"location":"implementation-guide/applications/multi-line-text/#_2","text":"\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e00\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002 \u4f8b\u5982\uff1a (?<time>\\d{4}-\\d{2}-\\d{2}\\s*\\d{2}:\\d{2}:\\d{2}.\\d{3})\\s*(?<level>[\\S]+)\\s*\\[(?<thread>.+)\\]\\s*(?<logger>\\S+)\\s*:\\s*(?<message>[\\s\\S]+) \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u81ea\u5b9a\u4e49\u683c\u5f0f"},{"location":"implementation-guide/applications/multi-line-text/#2","text":"\u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002 Note \u76ee\u524d\uff0cLog Hub \u4e0d\u652f\u6301\u4ece S3 Bucket \u6536\u96c6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/multi-line-text/#3-opensearch","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7"},{"location":"implementation-guide/applications/nginx/","text":"Nginx Nginx \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ee5\u6444\u53d6 Nginx \u65e5\u5fd7\u3002 Prerequisites \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Nginx \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Nginx \u3002 \u5728 Nginx Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u4f60\u7684Nginx\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a /etc/nginx/nginx.conf \uff0c\u4ee5 log_format \u5f00\u5934\u3002 \u5982: log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2aNginx\u793a\u4f8b\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u70b9\u51fb \u521b\u5efa . \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 \u6b65\u9aa4 3: \u67e5\u770b Nginx \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f \u5bf9\u4e8e Nginx \u65e5\u5fd7\uff0cLog Hub \u4f1a\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002 \u793a\u4f8b\u4eea\u8868\u677f","title":"Nginx"},{"location":"implementation-guide/applications/nginx/#nginx","text":"Nginx \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ee5\u6444\u53d6 Nginx \u65e5\u5fd7\u3002","title":"Nginx"},{"location":"implementation-guide/applications/nginx/#prerequisites","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Prerequisites"},{"location":"implementation-guide/applications/nginx/#1-nginx","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Nginx \u3002 \u5728 Nginx Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u4f60\u7684Nginx\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a /etc/nginx/nginx.conf \uff0c\u4ee5 log_format \u5f00\u5934\u3002 \u5982: log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2aNginx\u793a\u4f8b\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u70b9\u51fb \u521b\u5efa .","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Nginx \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/nginx/#2","text":"","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/nginx/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/nginx/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/nginx/#3-nginx","text":"\u5bf9\u4e8e Nginx \u65e5\u5fd7\uff0cLog Hub \u4f1a\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4 3: \u67e5\u770b Nginx \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/nginx/#_2","text":"","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/single-line-text/","text":"\u5355\u884c\u6587\u672c Log Hub \u4f7f\u7528\u81ea\u5b9a\u4e49 Ruby \u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u89e3\u6790\u65e5\u5fd7\u3002 \u5b83\u652f\u6301\u5355\u884c\u65e5\u5fd7\u683c\u5f0f\u548c\u591a\u8f93\u5165\u683c\u5f0f\u3002 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u5355\u884c\u6587\u672c\u65e5\u5fd7\u3002 Prerequisites \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u5355\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5355\u884c\u6587\u672c \u3002 \u5728 Rubular \u4e2d\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u5148\u9a8c\u8bc1\u5e76\u8f93\u5165\u503c\u3002 \u4f8b\u5982\uff1a (?<remote_addr>\\S+)\\s*-\\s*(?<remote_user>\\S+)\\s*\\[(?<time_local>\\d+/\\S+/\\d+:\\d+:\\d+:\\d+)\\s+\\S+\\]\\s*\"(?<request_method>\\S+)\\s+(?<request_uri>\\S+)\\s+\\S+\"\\s*(?<status>\\S+)\\s*(?<body_bytes_sent>\\S+)\\s*\"(?<http_referer>[^\"]*)\"\\s*\"(?<http_user_agent>[^\"]*)\"\\s*\"(?<http_x_forwarded_for>[^\"]*)\".* \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b\u7684\u5355\u884c\u6587\u672c\u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u5355\u884c\u6587\u672c"},{"location":"implementation-guide/applications/single-line-text/#_1","text":"Log Hub \u4f7f\u7528\u81ea\u5b9a\u4e49 Ruby \u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u89e3\u6790\u65e5\u5fd7\u3002 \u5b83\u652f\u6301\u5355\u884c\u65e5\u5fd7\u683c\u5f0f\u548c\u591a\u8f93\u5165\u683c\u5f0f\u3002 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u5355\u884c\u6587\u672c\u65e5\u5fd7\u3002","title":"\u5355\u884c\u6587\u672c"},{"location":"implementation-guide/applications/single-line-text/#prerequisites","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Prerequisites"},{"location":"implementation-guide/applications/single-line-text/#1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5355\u884c\u6587\u672c \u3002 \u5728 Rubular \u4e2d\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u5148\u9a8c\u8bc1\u5e76\u8f93\u5165\u503c\u3002 \u4f8b\u5982\uff1a (?<remote_addr>\\S+)\\s*-\\s*(?<remote_user>\\S+)\\s*\\[(?<time_local>\\d+/\\S+/\\d+:\\d+:\\d+:\\d+)\\s+\\S+\\]\\s*\"(?<request_method>\\S+)\\s+(?<request_uri>\\S+)\\s+\\S+\"\\s*(?<status>\\S+)\\s*(?<body_bytes_sent>\\S+)\\s*\"(?<http_referer>[^\"]*)\"\\s*\"(?<http_user_agent>[^\"]*)\"\\s*\"(?<http_x_forwarded_for>[^\"]*)\".* \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b\u7684\u5355\u884c\u6587\u672c\u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u5355\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/single-line-text/#2","text":"","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/single-line-text/#_2","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/single-line-text/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/single-line-text/#s3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002","title":"S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/single-line-text/#3-opensearch","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7"},{"location":"implementation-guide/aws-services/","text":"\u6784\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301\u901a\u8fc7\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u5230 AOS\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u7f51\u9875\u63a7\u5236\u53f0 \u6216\u901a\u8fc7 \u72ec\u7acb CloudFormation \u6a21\u677f \u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 Log Hub \u8bfb\u53d6\u6570\u636e\u6e90\u3001\u89e3\u6790\u3001\u6e05\u7406\u6216\u4e30\u5bcc\u3001\u548c\u6444\u53d6\u65e5\u5fd7\u5230 AOS \u57df\u8fdb\u884c\u5206\u6790\u3002\u6b64\u5916\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u6a21\u677f\u5316\u7684\u4eea\u8868\u677f\u4fbf\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u91cd\u8981 AWS \u6258\u7ba1\u670d\u52a1\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\uff0c\u5e76\u4e14\u65e0\u6cd5\u8c03\u6574\u3002 \u652f\u6301\u7684 AWS Services \u5927\u591a\u6570 AWS \u6258\u7ba1\u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 Amazon CloudWatch Logs\u3001Amazon S3\u3001Amazon Kinesis Data Streams \u6216 Amazon Kinesis Firehose\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f Amazon CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u5426 \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 AOS\u3002 Log Hub \u4e2d\u5927\u591a\u6570\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u4eea\u8868\u677f\u3002\u5728\u4f9b\u5e94\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u8f6c\u5230 OpenSearch \u67e5\u770b\u4eea\u8868\u677f\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b AWS \u670d\u52a1\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u5e76\u67e5\u770b\u4eea\u8868\u677f\uff1a Amazon CloudTrail Amazon S3 Amazon RDS/Aurora Amazon CloudFront AWS Lambda Elastic Load Balancing AWS WAF","title":"\u6982\u89c8"},{"location":"implementation-guide/aws-services/#aws","text":"Log Hub \u652f\u6301\u901a\u8fc7\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u5230 AOS\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u7f51\u9875\u63a7\u5236\u53f0 \u6216\u901a\u8fc7 \u72ec\u7acb CloudFormation \u6a21\u677f \u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 Log Hub \u8bfb\u53d6\u6570\u636e\u6e90\u3001\u89e3\u6790\u3001\u6e05\u7406\u6216\u4e30\u5bcc\u3001\u548c\u6444\u53d6\u65e5\u5fd7\u5230 AOS \u57df\u8fdb\u884c\u5206\u6790\u3002\u6b64\u5916\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u6a21\u677f\u5316\u7684\u4eea\u8868\u677f\u4fbf\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u91cd\u8981 AWS \u6258\u7ba1\u670d\u52a1\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\uff0c\u5e76\u4e14\u65e0\u6cd5\u8c03\u6574\u3002","title":"\u6784\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/aws-services/#aws-services","text":"\u5927\u591a\u6570 AWS \u6258\u7ba1\u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 Amazon CloudWatch Logs\u3001Amazon S3\u3001Amazon Kinesis Data Streams \u6216 Amazon Kinesis Firehose\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f Amazon CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u5426 \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 AOS\u3002 Log Hub \u4e2d\u5927\u591a\u6570\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u4eea\u8868\u677f\u3002\u5728\u4f9b\u5e94\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u8f6c\u5230 OpenSearch \u67e5\u770b\u4eea\u8868\u677f\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b AWS \u670d\u52a1\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u5e76\u67e5\u770b\u4eea\u8868\u677f\uff1a Amazon CloudTrail Amazon S3 Amazon RDS/Aurora Amazon CloudFront AWS Lambda Elastic Load Balancing AWS WAF","title":"\u652f\u6301\u7684 AWS Services"},{"location":"implementation-guide/aws-services/cloudfront/","text":"Amazon CloudFront \u65e5\u5fd7 CloudFront \u6807\u51c6\u65e5\u5fd7 \u4e3a\u6bcf\u4e2a\u53d1\u9001\u5230\u5206\u53d1\u7684\u8bf7\u6c42\u63d0\u4f9b\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important CloudFront \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f CloudFront \u5206\u914d ID\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon CloudFront"},{"location":"implementation-guide/aws-services/cloudfront/#amazon-cloudfront","text":"CloudFront \u6807\u51c6\u65e5\u5fd7 \u4e3a\u6bcf\u4e2a\u53d1\u9001\u5230\u5206\u53d1\u7684\u8bf7\u6c42\u63d0\u4f9b\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002","title":"Amazon CloudFront \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/cloudfront/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important CloudFront \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/cloudfront/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f CloudFront \u5206\u914d ID\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudfront/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudfront/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/cloudtrail/","text":"CloudTrail \u65e5\u5fd7 Amazon CloudTrail \u76d1\u63a7\u548c\u8bb0\u5f55\u60a8\u7684 AWS \u57fa\u7840\u8bbe\u65bd\u4e2d\u7684\u8d26\u6237\u6d3b\u52a8\u3002\u5b83\u5c06\u6240\u6709\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684 S3 \u5b58\u50a8\u6876\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 CloudTrail \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u8ddf\u8e2a\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528\u72ec\u7acb\u7684 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudTrail Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon CloudTrail"},{"location":"implementation-guide/aws-services/cloudtrail/#cloudtrail","text":"Amazon CloudTrail \u76d1\u63a7\u548c\u8bb0\u5f55\u60a8\u7684 AWS \u57fa\u7840\u8bbe\u65bd\u4e2d\u7684\u8d26\u6237\u6d3b\u52a8\u3002\u5b83\u5c06\u6240\u6709\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684 S3 \u5b58\u50a8\u6876\u3002","title":"CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/cloudtrail/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 CloudTrail \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/cloudtrail/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u8ddf\u8e2a\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudtrail/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudTrail Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528\u72ec\u7acb\u7684 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudtrail/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/elb/","text":"\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7 ALB \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u8bbf\u95ee\u65e5\u5fd7\uff0c\u7528\u4e8e\u6355\u83b7\u6709\u5173\u53d1\u9001\u5230\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 ALB \u4e3a\u6bcf\u4e2a\u8d1f\u8f7d\u5e73\u8861\u5668\u8282\u70b9\u53d1\u5e03\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6bcf 5 \u5206\u949f\u4e00\u6b21\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 ELB \u65e5\u5fd7\u5b58\u50a8\u6876\u533a\u57df\u5fc5\u987b\u4e0e Log Hub \u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u533a\u57df\u76f8\u540c\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u8d1f\u8f7d\u5747\u8861\u5668\u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Elastic Load Balancing"},{"location":"implementation-guide/aws-services/elb/#alb","text":"ALB \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u8bbf\u95ee\u65e5\u5fd7\uff0c\u7528\u4e8e\u6355\u83b7\u6709\u5173\u53d1\u9001\u5230\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 ALB \u4e3a\u6bcf\u4e2a\u8d1f\u8f7d\u5e73\u8861\u5668\u8282\u70b9\u53d1\u5e03\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6bcf 5 \u5206\u949f\u4e00\u6b21\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/elb/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 ELB \u65e5\u5fd7\u5b58\u50a8\u6876\u533a\u57df\u5fc5\u987b\u4e0e Log Hub \u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u533a\u57df\u76f8\u540c\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/elb/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u8d1f\u8f7d\u5747\u8861\u5668\u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/elb/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/elb/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/include-cfn-common/","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"Include cfn common"},{"location":"implementation-guide/aws-services/include-dashboard/","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Include dashboard"},{"location":"implementation-guide/aws-services/include-supported-service-logs/","text":"\u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f Amazon CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u5426 \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 AOS\u3002","title":"Include supported service logs"},{"location":"implementation-guide/aws-services/lambda/","text":"AWS Lambda \u65e5\u5fd7 AWS Lambda \u4f1a\u4ee3\u8868\u60a8\u81ea\u52a8\u76d1\u63a7 Lambda \u51fd\u6570\u5e76\u5c06\u51fd\u6570\u6307\u6807\u53d1\u9001\u5230 Amazon CloudWatch\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important Lambda \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u80fd\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Lambda \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 Lambda \u51fd\u6570\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Lambda \u51fd\u6570\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Lambda Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4e0a\u9762\u7684\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <Requires input> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u5185\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"AWS Lambda"},{"location":"implementation-guide/aws-services/lambda/#aws-lambda","text":"AWS Lambda \u4f1a\u4ee3\u8868\u60a8\u81ea\u52a8\u76d1\u63a7 Lambda \u51fd\u6570\u5e76\u5c06\u51fd\u6570\u6307\u6807\u53d1\u9001\u5230 Amazon CloudWatch\u3002","title":"AWS Lambda \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/lambda/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important Lambda \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u80fd\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/lambda/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Lambda \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 Lambda \u51fd\u6570\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Lambda \u51fd\u6570\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/lambda/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Lambda Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4e0a\u9762\u7684\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <Requires input> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u5185\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/rds/","text":"Amazon RDS/Aurora \u65e5\u5fd7 \u60a8\u53ef\u4ee5 \u5c06\u6570\u636e\u5e93\u5b9e\u4f8b\u65e5\u5fd7\u53d1\u5e03\u5230 Amazon CloudWatch Logs \u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u5c06\u6570\u636e\u5b58\u50a8\u5728\u9ad8\u5ea6\u8010\u7528\u7684\u5b58\u50a8\u4e2d\uff0c\u5e76\u4f7f\u7528 CloudWatch Logs \u4ee3\u7406\u7ba1\u7406\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u60a8\u7684\u6570\u636e\u5e93\u65e5\u5fd7\u5df2\u542f\u7528\u3002 \u67d0\u4e9b\u6570\u636e\u5e93\u65e5\u5fd7\u9ed8\u8ba4\u672a\u542f\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u53c2\u6570\u4ee5\u542f\u7528\u65e5\u5fd7\u3002 \u8bf7\u53c2\u9605 \u5982\u4f55\u4e3a Amazon RDS MySQL \u6570\u636e\u5e93\u5b9e\u4f8b\u542f\u7528\u548c\u76d1\u63a7\u65e5\u5fd7\uff1f \u4e86\u89e3\u5982\u4f55\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 CloudWatch \u65e5\u5fd7\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 RDS/Aurora MySQL \u53c2\u6570\u7684\u8981\u6c42\u3002 \u53c2\u6570 \u8981\u6c42 Audit Log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 MARIADB_AUDIT_PLUGIN \u9009\u9879\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u7ec4\u3002 General log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a general_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u901a\u7528\u65e5\u5fd7\u3002 Slow query log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a slow_query_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\u3002 Log output \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a log_output = FILE \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u5c06\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5e76\u5c06\u5b83\u4eec\u53d1\u5e03\u5230 CloudWatch Logs\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 RDS \u548c CloudWatch \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon RDS \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u4e3a RDS \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b\u60a8\u7684 RDS \u65e5\u5fd7\u914d\u7f6e\uff0c\u5e76\u4ece CloudWatch \u6444\u53d6\u65e5\u5fd7\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 RDS \u96c6\u7fa4\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \uff0c\u9009\u62e9 \u6570\u636e\u5e93\u7c7b\u578b \u5e76\u5728 \u65e5\u5fd7\u7c7b\u578b\u548c\u4f4d\u7f6e \u4e2d\u8f93\u5165 CloudWatch \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - RDS Log Ingestion \u89e3\u51b3\u65b9\u6848 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8 RDS \u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 RDS/Aurora MySQL","title":"Amazon RDS/Aurora"},{"location":"implementation-guide/aws-services/rds/#amazon-rdsaurora","text":"\u60a8\u53ef\u4ee5 \u5c06\u6570\u636e\u5e93\u5b9e\u4f8b\u65e5\u5fd7\u53d1\u5e03\u5230 Amazon CloudWatch Logs \u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u5c06\u6570\u636e\u5b58\u50a8\u5728\u9ad8\u5ea6\u8010\u7528\u7684\u5b58\u50a8\u4e2d\uff0c\u5e76\u4f7f\u7528 CloudWatch Logs \u4ee3\u7406\u7ba1\u7406\u6570\u636e\u3002","title":"Amazon RDS/Aurora \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/rds/#_1","text":"\u786e\u4fdd\u60a8\u7684\u6570\u636e\u5e93\u65e5\u5fd7\u5df2\u542f\u7528\u3002 \u67d0\u4e9b\u6570\u636e\u5e93\u65e5\u5fd7\u9ed8\u8ba4\u672a\u542f\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u53c2\u6570\u4ee5\u542f\u7528\u65e5\u5fd7\u3002 \u8bf7\u53c2\u9605 \u5982\u4f55\u4e3a Amazon RDS MySQL \u6570\u636e\u5e93\u5b9e\u4f8b\u542f\u7528\u548c\u76d1\u63a7\u65e5\u5fd7\uff1f \u4e86\u89e3\u5982\u4f55\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 CloudWatch \u65e5\u5fd7\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 RDS/Aurora MySQL \u53c2\u6570\u7684\u8981\u6c42\u3002 \u53c2\u6570 \u8981\u6c42 Audit Log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 MARIADB_AUDIT_PLUGIN \u9009\u9879\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u7ec4\u3002 General log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a general_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u901a\u7528\u65e5\u5fd7\u3002 Slow query log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a slow_query_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\u3002 Log output \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a log_output = FILE \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u5c06\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5e76\u5c06\u5b83\u4eec\u53d1\u5e03\u5230 CloudWatch Logs\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/aws-services/rds/#_2","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 RDS \u548c CloudWatch \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/rds/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon RDS \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u4e3a RDS \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b\u60a8\u7684 RDS \u65e5\u5fd7\u914d\u7f6e\uff0c\u5e76\u4ece CloudWatch \u6444\u53d6\u65e5\u5fd7\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 RDS \u96c6\u7fa4\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \uff0c\u9009\u62e9 \u6570\u636e\u5e93\u7c7b\u578b \u5e76\u5728 \u65e5\u5fd7\u7c7b\u578b\u548c\u4f4d\u7f6e \u4e2d\u8f93\u5165 CloudWatch \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/rds/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - RDS Log Ingestion \u89e3\u51b3\u65b9\u6848 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8 RDS \u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/rds/#_3","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/rds/#rdsaurora-mysql","text":"","title":"RDS/Aurora MySQL"},{"location":"implementation-guide/aws-services/s3/","text":"Amazon S3 \u65e5\u5fd7 Amazon S3 \u670d\u52a1\u5668\u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u5bf9\u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u53e6\u4e00\u4e2a S3 \u5b58\u50a8\u6876\u4e2d\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 S3 Bucket \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub\u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon S3 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u5b58\u50a8\u6876\u540d\u79f0 \u548c S3\u8bbf\u95ee\u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - S3 Access Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon S3"},{"location":"implementation-guide/aws-services/s3/#amazon-s3","text":"Amazon S3 \u670d\u52a1\u5668\u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u5bf9\u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u53e6\u4e00\u4e2a S3 \u5b58\u50a8\u6876\u4e2d\u3002","title":"Amazon S3 \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/s3/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 S3 Bucket \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/s3/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon S3 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u5b58\u50a8\u6876\u540d\u79f0 \u548c S3\u8bbf\u95ee\u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/s3/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - S3 Access Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/s3/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/waf/","text":"AWS WAF \u65e5\u5fd7 WAF \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u6709\u5173\u7531\u60a8\u7684 Web ACL \u5206\u6790\u7684\u6d41\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bb0\u5f55\u7684\u4fe1\u606f\u5305\u62ec AWS WAF \u4ece\u60a8\u7684 AWS \u8d44\u6e90\u6536\u5230 Web \u8bf7\u6c42\u7684\u65f6\u95f4\u3001\u6709\u5173\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u4ee5\u53ca\u6709\u5173\u8bf7\u6c42\u5339\u914d\u7684\u89c4\u5219\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important WAF \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u548c Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e0d\u652f\u6301 WAF Classic \u4ea7\u751f\u7684\u65e5\u5fd7. \u60a8\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55 \u4ece WAF Classic \u8fc1\u79fb\u5230\u65b0 AWS WAF . AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \uff08\u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Web ACL \u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - waf Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"AWS WAF"},{"location":"implementation-guide/aws-services/waf/#aws-waf","text":"WAF \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u6709\u5173\u7531\u60a8\u7684 Web ACL \u5206\u6790\u7684\u6d41\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bb0\u5f55\u7684\u4fe1\u606f\u5305\u62ec AWS WAF \u4ece\u60a8\u7684 AWS \u8d44\u6e90\u6536\u5230 Web \u8bf7\u6c42\u7684\u65f6\u95f4\u3001\u6709\u5173\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u4ee5\u53ca\u6709\u5173\u8bf7\u6c42\u5339\u914d\u7684\u89c4\u5219\u7684\u8be6\u7ec6\u4fe1\u606f\u3002","title":"AWS WAF \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/waf/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important WAF \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u548c Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e0d\u652f\u6301 WAF Classic \u4ea7\u751f\u7684\u65e5\u5fd7. \u60a8\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55 \u4ece WAF Classic \u8fc1\u79fb\u5230\u65b0 AWS WAF . AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/waf/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \uff08\u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Web ACL \u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/waf/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - waf Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/waf/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/deployment/","text":"\u6982\u89c8 \u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u8d26\u6237\u4e2d\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u60a8\u8981\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u76ee\u6807\u533a\u57df\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u81f3\u5c11\u80fd\u67091\u4e2a\u7a7a\u7f3a\u521b\u5efa\u65b0\u7684 VPC\u3002 \u81f3\u5c11\u80fd\u521b\u5efa2\u4e2a\u5f39\u6027 IP (EIP) \u5730\u5740\u3002 \u81f3\u5c11\u80fd\u521b\u5efa8\u4e2a S3 \u5b58\u50a8\u6876\u3002 \u5728 \u5fc5\u9700\u7684 AWS \u670d\u52a1 \u4e2d\u5217\u51fa\u7684\u6240\u6709 AWS \u670d\u52a1\u5747\u53ef\u7528\u3002 \u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u60a8\u53ef\u4ee5\u9009\u62e9\u5728 AWS \u6d77\u5916\u533a\u57df\u6216 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u652f\u6301\u533a\u57df\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u53ef\u90e8\u7f72\u533a\u57df \u3002 \u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72 \u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72","title":"\u6982\u89c8"},{"location":"implementation-guide/deployment/#_1","text":"\u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u8d26\u6237\u4e2d\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/deployment/#_2","text":"\u786e\u4fdd\u60a8\u8981\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u76ee\u6807\u533a\u57df\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u81f3\u5c11\u80fd\u67091\u4e2a\u7a7a\u7f3a\u521b\u5efa\u65b0\u7684 VPC\u3002 \u81f3\u5c11\u80fd\u521b\u5efa2\u4e2a\u5f39\u6027 IP (EIP) \u5730\u5740\u3002 \u81f3\u5c11\u80fd\u521b\u5efa8\u4e2a S3 \u5b58\u50a8\u6876\u3002 \u5728 \u5fc5\u9700\u7684 AWS \u670d\u52a1 \u4e2d\u5217\u51fa\u7684\u6240\u6709 AWS \u670d\u52a1\u5747\u53ef\u7528\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/deployment/#_3","text":"\u60a8\u53ef\u4ee5\u9009\u62e9\u5728 AWS \u6d77\u5916\u533a\u57df\u6216 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u652f\u6301\u533a\u57df\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u53ef\u90e8\u7f72\u533a\u57df \u3002 \u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72 \u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72","title":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848"},{"location":"implementation-guide/deployment/china-region/","text":"\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72 \u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 30 \u5206\u949f \u524d\u63d0\u6761\u4ef6 ICP \u8bb8\u53ef\u57df\u3002 Log Hub \u63a7\u5236\u53f0\u901a\u8fc7 CloudFront \u5206\u53d1\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u5206\u53d1\u88ab\u89c6\u4e3a Internet \u4fe1\u606f\u670d\u52a1\u3002\u4e5f\u79f0\u4e3a Log Hub \u63a7\u5236\u53f0\u57df\u540d \u3002 AWS IAM \u4e2d\u7684 SSL \u8bc1\u4e66\u3002 SSL \u8bc1\u4e66\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u7684\u57df\u76f8\u5173\u8054\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4f20\u670d\u52a1\u5668\u8bc1\u4e66 \u3002 \u90e8\u7f72\u6982\u89c8 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef AWS \u4e2d\u56fd\u533a\u57df\u4e0d\u652f\u6301 Cognito \u7528\u6237\u6c60 \u3002 \u5982\u679c\u60a8\u9009\u62e9\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u9700\u8981 OpenID \u8fde\u63a5\u5668 (OIDC) \u5ba2\u6237\u7aef\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684 OpenID \u8fde\u63a5\u5668 (OIDC) \u63d0\u4f9b\u5546\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u9009\u9879 1 \u548c\u9009\u9879 2\u3002 \uff08\u9009\u9879 1\uff09 Authing \u662f\u7b2c\u4e09\u65b9\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 2\uff09 Keycloak \u662f AWS \u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 3\uff09\u5176\u5b83\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5e73\u53f0\uff0c\u5982 Auth0 \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa OIDC \u5ba2\u6237\u7aef\uff0c\u5e76\u83b7\u53d6 client_id \u548c issuer \u3002 (\u9009\u9879 1) Authing.cn OIDC \u5ba2\u6237\u7aef \u767b\u5f55 Authing \u63a7\u5236\u53f0 \u3002 \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u6c60\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u6c60\u3002 \u9009\u62e9\u7528\u6237\u6c60\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 \u5e94\u7528 \u4e0b\u7684 \u81ea\u5efa\u5e94\u7528 \u3002 \u5355\u51fb \u521b\u5efa\u81ea\u5efa\u5e94\u7528 \u6309\u94ae\u3002 \u8f93\u5165 \u5e94\u7528\u540d\u79f0 \u548c \u8ba4\u8bc1\u5730\u5740 \u3002 \u5c06Endpoint Information\u4e2d\u7684 App ID \uff08\u5373 client_id \uff09\u548c Issuer \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5c06 Login Callback URL \u548c Logout Callback URL \u66f4\u65b0\u4e3aIPC\u8bb0\u5f55\u7684\u57df\u540d\u3002 \u8bbe\u7f6e\u4ee5\u4e0b\u6388\u6743\u914d\u7f6e\u3002 \u60a8\u5df2\u7ecf\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u81ea\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002 (\u9009\u9879 2) Keycloak OIDC \u5ba2\u6237\u7aef \u6309\u7167 \u672c\u6307\u5357 \u5728AWS\u4e2d\u56fd\u533a\u57df\u90e8\u7f72 Keycloak \u89e3\u51b3\u65b9\u6848\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55 Keycloak \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 Add Realm \u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a Realm\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 \u8fdb\u5165\u9886\u57df\u8bbe\u7f6e\u9875\u9762\u3002\u9009\u62e9 Endpoints \uff0c\u7136\u540e\u4ece\u5217\u8868\u4e2d\u9009\u62e9 OpenID Endpoint Configuration \u3002 \u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684 JSON \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55 issuer \u503c\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fd4\u56deKeycloak\u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u9009\u62e9 Clients \uff0c\u7136\u540e\u9009\u62e9 Create \u3002 \u8f93\u5165\u5ba2\u6237 ID\uff0c\u5fc5\u987b\u5305\u542b 24 \u4e2a\u5b57\u6bcd\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u6216\u6570\u5b57\u3002\u8bb0\u5f55 Client ID \uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u66f4\u6539Client\u8bbe\u7f6e\uff0c\u5728 Valid Redirect URIs \u5904\u8f93\u5165 https://<Log Hub \u63a7\u5236\u53f0\u57df\u540d> \uff0c\u5728 Web Origins \u8f93\u5165 * \u548c + \u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u680f\u7684 Users \u3002 \u70b9\u51fb Add user \uff0c\u5e76\u8f93\u5165 username \u3002 \u521b\u5efa\u7528\u6237\u540e\uff0c\u9009\u62e9 Credentials \uff0c\u8f93\u5165 Password \u3002 Issuer \u7684\u503c\u7684\u683c\u5f0f\u4e3a https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME> \u3002 \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 IAM \u548c STS \u9650\u5236 \u4e2d\u7684 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId \u65e0 OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider \u65e0 OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain \u65e0 Log Hub \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID \u65e0 IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b64\u89e3\u51b3\u65b9\u6848\u9884\u7f6e CloudFront \u5206\u914d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u83b7\u53d6 WebConsoleUrl \u4f5c\u4e3a\u89e3\u6790\u5730\u5740\u3002 \u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa CNAME \u8bb0\u5f55\uff0c\u6307\u5411\u8be5\u89e3\u6790\u5730\u5740\u3002 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0 \u91cd\u8981 \u60a8\u7684\u767b\u5f55\u51ed\u636e\uff08\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u3002 \u5728\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5728 OIDC \u63d0\u4f9b\u5546\u7684\u7528\u6237\u6c60\u4e2d\u521b\u5efa\u4e86\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u3002 \u767b\u5f55\u5230 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 OIDC Customer Domain URL \u3002 \u9009\u62e9 \u767b\u5f55 Log Hub \uff0c\u7136\u540e\u5bfc\u822a\u5230 OIDC \u63d0\u4f9b\u5546\u3002 \u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u60a8\u53ef\u80fd\u4f1a\u88ab\u8981\u6c42\u66f4\u6539\u9996\u6b21\u767b\u5f55\u7684\u9ed8\u8ba4\u5bc6\u7801\uff0c\u8fd9\u53d6\u51b3\u4e8e\u60a8\u7684 OIDC \u63d0\u4f9b\u5546\u7684\u653f\u7b56\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u90e8\u7f72\u5230\u4e2d\u56fd\u533a\u57df"},{"location":"implementation-guide/deployment/china-region/#aws","text":"\u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 30 \u5206\u949f","title":"\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/china-region/#_1","text":"ICP \u8bb8\u53ef\u57df\u3002 Log Hub \u63a7\u5236\u53f0\u901a\u8fc7 CloudFront \u5206\u53d1\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u5206\u53d1\u88ab\u89c6\u4e3a Internet \u4fe1\u606f\u670d\u52a1\u3002\u4e5f\u79f0\u4e3a Log Hub \u63a7\u5236\u53f0\u57df\u540d \u3002 AWS IAM \u4e2d\u7684 SSL \u8bc1\u4e66\u3002 SSL \u8bc1\u4e66\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u7684\u57df\u76f8\u5173\u8054\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4f20\u670d\u52a1\u5668\u8bc1\u4e66 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/deployment/china-region/#_2","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0","title":"\u90e8\u7f72\u6982\u89c8"},{"location":"implementation-guide/deployment/china-region/#1-oidc","text":"AWS \u4e2d\u56fd\u533a\u57df\u4e0d\u652f\u6301 Cognito \u7528\u6237\u6c60 \u3002 \u5982\u679c\u60a8\u9009\u62e9\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u9700\u8981 OpenID \u8fde\u63a5\u5668 (OIDC) \u5ba2\u6237\u7aef\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684 OpenID \u8fde\u63a5\u5668 (OIDC) \u63d0\u4f9b\u5546\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u9009\u9879 1 \u548c\u9009\u9879 2\u3002 \uff08\u9009\u9879 1\uff09 Authing \u662f\u7b2c\u4e09\u65b9\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 2\uff09 Keycloak \u662f AWS \u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 3\uff09\u5176\u5b83\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5e73\u53f0\uff0c\u5982 Auth0 \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa OIDC \u5ba2\u6237\u7aef\uff0c\u5e76\u83b7\u53d6 client_id \u548c issuer \u3002","title":"\u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/china-region/#1-authingcn-oidc","text":"\u767b\u5f55 Authing \u63a7\u5236\u53f0 \u3002 \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u6c60\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u6c60\u3002 \u9009\u62e9\u7528\u6237\u6c60\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 \u5e94\u7528 \u4e0b\u7684 \u81ea\u5efa\u5e94\u7528 \u3002 \u5355\u51fb \u521b\u5efa\u81ea\u5efa\u5e94\u7528 \u6309\u94ae\u3002 \u8f93\u5165 \u5e94\u7528\u540d\u79f0 \u548c \u8ba4\u8bc1\u5730\u5740 \u3002 \u5c06Endpoint Information\u4e2d\u7684 App ID \uff08\u5373 client_id \uff09\u548c Issuer \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5c06 Login Callback URL \u548c Logout Callback URL \u66f4\u65b0\u4e3aIPC\u8bb0\u5f55\u7684\u57df\u540d\u3002 \u8bbe\u7f6e\u4ee5\u4e0b\u6388\u6743\u914d\u7f6e\u3002 \u60a8\u5df2\u7ecf\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u81ea\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002","title":"(\u9009\u9879 1) Authing.cn OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/china-region/#2-keycloak-oidc","text":"\u6309\u7167 \u672c\u6307\u5357 \u5728AWS\u4e2d\u56fd\u533a\u57df\u90e8\u7f72 Keycloak \u89e3\u51b3\u65b9\u6848\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55 Keycloak \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 Add Realm \u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a Realm\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 \u8fdb\u5165\u9886\u57df\u8bbe\u7f6e\u9875\u9762\u3002\u9009\u62e9 Endpoints \uff0c\u7136\u540e\u4ece\u5217\u8868\u4e2d\u9009\u62e9 OpenID Endpoint Configuration \u3002 \u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684 JSON \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55 issuer \u503c\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fd4\u56deKeycloak\u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u9009\u62e9 Clients \uff0c\u7136\u540e\u9009\u62e9 Create \u3002 \u8f93\u5165\u5ba2\u6237 ID\uff0c\u5fc5\u987b\u5305\u542b 24 \u4e2a\u5b57\u6bcd\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u6216\u6570\u5b57\u3002\u8bb0\u5f55 Client ID \uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u66f4\u6539Client\u8bbe\u7f6e\uff0c\u5728 Valid Redirect URIs \u5904\u8f93\u5165 https://<Log Hub \u63a7\u5236\u53f0\u57df\u540d> \uff0c\u5728 Web Origins \u8f93\u5165 * \u548c + \u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u680f\u7684 Users \u3002 \u70b9\u51fb Add user \uff0c\u5e76\u8f93\u5165 username \u3002 \u521b\u5efa\u7528\u6237\u540e\uff0c\u9009\u62e9 Credentials \uff0c\u8f93\u5165 Password \u3002 Issuer \u7684\u503c\u7684\u683c\u5f0f\u4e3a https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME> \u3002","title":"(\u9009\u9879 2) Keycloak OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/china-region/#2","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 IAM \u548c STS \u9650\u5236 \u4e2d\u7684 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId \u65e0 OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider \u65e0 OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain \u65e0 Log Hub \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID \u65e0 IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808"},{"location":"implementation-guide/deployment/china-region/#3-dns","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u9884\u7f6e CloudFront \u5206\u914d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u83b7\u53d6 WebConsoleUrl \u4f5c\u4e3a\u89e3\u6790\u5730\u5740\u3002 \u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa CNAME \u8bb0\u5f55\uff0c\u6307\u5411\u8be5\u89e3\u6790\u5730\u5740\u3002","title":"\u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790"},{"location":"implementation-guide/deployment/china-region/#4","text":"\u91cd\u8981 \u60a8\u7684\u767b\u5f55\u51ed\u636e\uff08\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u3002 \u5728\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5728 OIDC \u63d0\u4f9b\u5546\u7684\u7528\u6237\u6c60\u4e2d\u521b\u5efa\u4e86\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u3002 \u767b\u5f55\u5230 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 OIDC Customer Domain URL \u3002 \u9009\u62e9 \u767b\u5f55 Log Hub \uff0c\u7136\u540e\u5bfc\u822a\u5230 OIDC \u63d0\u4f9b\u5546\u3002 \u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u60a8\u53ef\u80fd\u4f1a\u88ab\u8981\u6c42\u66f4\u6539\u9996\u6b21\u767b\u5f55\u7684\u9ed8\u8ba4\u5bc6\u7801\uff0c\u8fd9\u53d6\u51b3\u4e8e\u60a8\u7684 OIDC \u63d0\u4f9b\u5546\u7684\u653f\u7b56\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0"},{"location":"implementation-guide/deployment/global-region/","text":"\u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72 \u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 15 \u5206\u949f \u90e8\u7f72\u6982\u8ff0 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u4e2d\u7684 IAM \u548c STS \u9650\u5236 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email \u65e0 \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0 \u6210\u529f\u521b\u5efa\u5806\u6808\u540e\uff0c\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u751f\u6210\u4e00\u4e2a CloudFront \u57df\u540d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540c\u65f6\uff0c\u81ea\u52a8\u751f\u6210\u7684\u4e34\u65f6\u5bc6\u7801\uff08\u4e0d\u5305\u62ec\u5bc6\u7801\u7ed3\u5c3e\u5904\u7684 . \uff09\u5c06\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u5728 \u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u5e76\u8bb0\u5f55\u57df\u540d\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 WebConsoleUrl \uff0c\u7136\u540e\u5bfc\u822a\u5230\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u548c\u4e34\u65f6\u5bc6\u7801\u3002 a. \u8bbe\u7f6e\u65b0\u7684\u5e10\u6237\u5bc6\u7801\u3002 b. \uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u7528\u4e8e\u6062\u590d\u5e10\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u90e8\u7f72\u5230\u6d77\u5916\u533a\u57df"},{"location":"implementation-guide/deployment/global-region/#aws","text":"\u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 15 \u5206\u949f","title":"\u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/global-region/#_1","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0","title":"\u90e8\u7f72\u6982\u8ff0"},{"location":"implementation-guide/deployment/global-region/#1","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u4e2d\u7684 IAM \u548c STS \u9650\u5236 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email \u65e0 \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808"},{"location":"implementation-guide/deployment/global-region/#2","text":"\u6210\u529f\u521b\u5efa\u5806\u6808\u540e\uff0c\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u751f\u6210\u4e00\u4e2a CloudFront \u57df\u540d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540c\u65f6\uff0c\u81ea\u52a8\u751f\u6210\u7684\u4e34\u65f6\u5bc6\u7801\uff08\u4e0d\u5305\u62ec\u5bc6\u7801\u7ed3\u5c3e\u5904\u7684 . \uff09\u5c06\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u5728 \u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u5e76\u8bb0\u5f55\u57df\u540d\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 WebConsoleUrl \uff0c\u7136\u540e\u5bfc\u822a\u5230\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u548c\u4e34\u65f6\u5bc6\u7801\u3002 a. \u8bbe\u7f6e\u65b0\u7684\u5e10\u6237\u5bc6\u7801\u3002 b. \uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u7528\u4e8e\u6062\u590d\u5e10\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/","text":"\u6982\u89c8 \u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u7ba1\u7406 Amazon OpenSearch Service (AOS) \u57df\u3002 AOS \u57df\u4e0e AOS \u96c6\u7fa4\u540c\u4e49\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\uff1a \u5bfc\u5165\u548c\u5220\u9664 AOS \u57df \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u521b\u5efa\u63a8\u8350\u7684\u544a\u8b66 \u60a8\u53ef\u4ee5\u5148\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\uff0c\u4e86\u89e3\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u57fa\u672c\u6b65\u9aa4\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/domains/#_1","text":"\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u7ba1\u7406 Amazon OpenSearch Service (AOS) \u57df\u3002 AOS \u57df\u4e0e AOS \u96c6\u7fa4\u540c\u4e49\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\uff1a \u5bfc\u5165\u548c\u5220\u9664 AOS \u57df \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u521b\u5efa\u63a8\u8350\u7684\u544a\u8b66 \u60a8\u53ef\u4ee5\u5148\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\uff0c\u4e86\u89e3\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u57fa\u672c\u6b65\u9aa4\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/domains/alarms/","text":"\u63a8\u8350\u544a\u8b66 Amazon OpenSearch \u63d0\u4f9b\u4e00\u7ec4 \u63a8\u8350\u7684 CloudWatch \u544a\u8b66 \u6765\u76d1\u63a7 AOS \u57df\u7684\u8fd0\u884c\u72b6\u51b5\u3002 Log Hub \u5e2e\u52a9\u60a8\u81ea\u52a8\u521b\u5efa\u544a\u8b66\uff0c\u5e76\u901a\u8fc7 SNS \u5c06\u901a\u77e5\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\uff08\u6216 SMS\uff09\u3002 \u521b\u5efa\u544a\u8b66 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u4e0b\uff0c\u5728 \u544a\u8b66 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u3002 \u9009\u62e9\u60a8\u8981\u521b\u5efa\u7684\u544a\u8b66\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u8bbe\u7f6e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 log-hub-alarms AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 DomainName <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u540d\u79f0\u3002 Email <\u9700\u8981\u8f93\u5165> \u901a\u77e5\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002\u544a\u8b66\u5c06\u901a\u8fc7 SNS \u53d1\u9001\u5230\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ClusterStatusRed \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u4e3b\u5206\u7247\u53ca\u5176\u526f\u672c\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 ClusterStatusYellow \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u5206\u7247\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 FreeStorageSpace 10 \u662f\u5426\u5728\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4e0b\u964d\u5230\u60a8\u5728 GiB \u4e2d\u8f93\u5165\u7684\u53ef\u7528\u5b58\u50a8\u7a7a\u95f4\u65f6\u542f\u7528\u544a\u8b66\u3002\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u7a7a\u95f4\u7684 25%\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 ClusterIndexWritesBlocked \u662f \u5f53\u60a8\u7684\u96c6\u7fa4\u963b\u6b62\u5199\u5165\u8bf7\u6c42\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 UnreachableNodeNumber 3 \u8282\u70b9\u6700\u5c0f\u503c\u4e3a < x 1 \u5929\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 AutomatedSnapshotFailure \u662f \u81ea\u52a8\u5feb\u7167\u5931\u8d25\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 AutomatedSnapshotFailure \u6700\u5927\u503c >= 1 \u6301\u7eed 1 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 CPUUtilization \u662f \u53d1\u751f\u6301\u7eed\u9ad8 CPU \u4f7f\u7528\u7387\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 CPUUtilization \u6216 WarmCPUUtilization \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 JVMMemoryPressure \u662f JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u53d1\u751f\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 JVMMemoryPressure \u6216 WarmJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 5 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterCPUUtilization \u662f \u4e3b\u8282\u70b9CPU\u6301\u7eed\u9ad8\u4f7f\u7528\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterCPUUtilization \u6700\u5927\u503c >= 50% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterJVMMemoryPressure \u662f \u5f53\u4e3b\u8282\u70b9\u51fa\u73b0 JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyError \u662f \u7981\u7528 KMS \u52a0\u5bc6\u5bc6\u94a5\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 KMSKeyError \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyInaccessible \u662f \u662f\u5426\u5728 KMS \u52a0\u5bc6\u5bc6\u94a5\u5df2\u88ab\u5220\u9664\u6216\u5df2\u64a4\u9500\u5176\u5bf9 OpenSearch \u670d\u52a1\u7684\u6388\u6743\u65f6\u542f\u7528\u544a\u8b66\u3002 KMSKeyInaccessible \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u4f60\u5e94\u8be5\u6536\u5230 \u5927\u7ea6 5 \u5206\u949f\u540e\u51fa\u73b0 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u544a\u8b66\u540e\uff0c\u5c06\u5411\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u53d1\u9001\u4e00\u5c01\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002 \u60a8\u9700\u8981\u5355\u51fb\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684 *\u786e\u8ba4 * \u94fe\u63a5\u3002 \u5220\u9664\u544a\u8b66 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_1","text":"Amazon OpenSearch \u63d0\u4f9b\u4e00\u7ec4 \u63a8\u8350\u7684 CloudWatch \u544a\u8b66 \u6765\u76d1\u63a7 AOS \u57df\u7684\u8fd0\u884c\u72b6\u51b5\u3002 Log Hub \u5e2e\u52a9\u60a8\u81ea\u52a8\u521b\u5efa\u544a\u8b66\uff0c\u5e76\u901a\u8fc7 SNS \u5c06\u901a\u77e5\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\uff08\u6216 SMS\uff09\u3002","title":"\u63a8\u8350\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_2","text":"","title":"\u521b\u5efa\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u4e0b\uff0c\u5728 \u544a\u8b66 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u3002 \u9009\u62e9\u60a8\u8981\u521b\u5efa\u7684\u544a\u8b66\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u8bbe\u7f6e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/alarms/#cloudformation","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 log-hub-alarms AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 DomainName <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u540d\u79f0\u3002 Email <\u9700\u8981\u8f93\u5165> \u901a\u77e5\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002\u544a\u8b66\u5c06\u901a\u8fc7 SNS \u53d1\u9001\u5230\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ClusterStatusRed \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u4e3b\u5206\u7247\u53ca\u5176\u526f\u672c\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 ClusterStatusYellow \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u5206\u7247\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 FreeStorageSpace 10 \u662f\u5426\u5728\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4e0b\u964d\u5230\u60a8\u5728 GiB \u4e2d\u8f93\u5165\u7684\u53ef\u7528\u5b58\u50a8\u7a7a\u95f4\u65f6\u542f\u7528\u544a\u8b66\u3002\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u7a7a\u95f4\u7684 25%\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 ClusterIndexWritesBlocked \u662f \u5f53\u60a8\u7684\u96c6\u7fa4\u963b\u6b62\u5199\u5165\u8bf7\u6c42\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 UnreachableNodeNumber 3 \u8282\u70b9\u6700\u5c0f\u503c\u4e3a < x 1 \u5929\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 AutomatedSnapshotFailure \u662f \u81ea\u52a8\u5feb\u7167\u5931\u8d25\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 AutomatedSnapshotFailure \u6700\u5927\u503c >= 1 \u6301\u7eed 1 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 CPUUtilization \u662f \u53d1\u751f\u6301\u7eed\u9ad8 CPU \u4f7f\u7528\u7387\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 CPUUtilization \u6216 WarmCPUUtilization \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 JVMMemoryPressure \u662f JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u53d1\u751f\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 JVMMemoryPressure \u6216 WarmJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 5 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterCPUUtilization \u662f \u4e3b\u8282\u70b9CPU\u6301\u7eed\u9ad8\u4f7f\u7528\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterCPUUtilization \u6700\u5927\u503c >= 50% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterJVMMemoryPressure \u662f \u5f53\u4e3b\u8282\u70b9\u51fa\u73b0 JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyError \u662f \u7981\u7528 KMS \u52a0\u5bc6\u5bc6\u94a5\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 KMSKeyError \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyInaccessible \u662f \u662f\u5426\u5728 KMS \u52a0\u5bc6\u5bc6\u94a5\u5df2\u88ab\u5220\u9664\u6216\u5df2\u64a4\u9500\u5176\u5bf9 OpenSearch \u670d\u52a1\u7684\u6388\u6743\u65f6\u542f\u7528\u544a\u8b66\u3002 KMSKeyInaccessible \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u4f60\u5e94\u8be5\u6536\u5230 \u5927\u7ea6 5 \u5206\u949f\u540e\u51fa\u73b0 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u544a\u8b66\u540e\uff0c\u5c06\u5411\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u53d1\u9001\u4e00\u5c01\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002 \u60a8\u9700\u8981\u5355\u51fb\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684 *\u786e\u8ba4 * \u94fe\u63a5\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/domains/alarms/#_3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664\u544a\u8b66"},{"location":"implementation-guide/domains/import/","text":"\u57df\u64cd\u4f5c \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u540e\uff0c\u60a8\u53ef\u4ee5\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 AOS \u57df\u3002 \u6ce8\u610f \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u524d\u63d0\u6761\u4ef6 VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 \u5bfc\u5165 AOS \u57df \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u9009\u62e9\u96c6\u7fa4 \u9875\u9762\u4e0a\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002\u4e0b\u62c9\u5217\u8868\u5c06\u4ec5\u663e\u793a\u4e0e\u89e3\u51b3\u65b9\u6848\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u7684\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u7f51\u7edc \u9875\u9762\u7684 \u7f51\u7edc\u521b\u5efa \uff0c \u9009\u62e9 \u624b\u52a8 \u5e76\u70b9\u51fb \u4e0b\u4e00\u6b65 \uff1b \u6216\u9009\u62e9 \u81ea\u52a8 \uff0c\u7136\u540e\u8f6c\u5230\u6b65\u9aa4 9\u3002 \u5728 VPC \u4e0b\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a VPC\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC \u7684 VPC\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0e\u60a8\u7684 AOS \u57df\u76f8\u540c\u7684 VPC\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b50\u7f51\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC/privateSubnet1 \u548c LogHubVpc/DefaultVPC/privateSubnet2 \u7684\u5b50\u7f51\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b89\u5168\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ProcessSecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u5bfc\u5165 \u3002 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\u3002\u60a8\u9700\u8981\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u4ee5\u5141\u8bb8\u65e5\u5fd7\u5904\u7406\u5c42\u8bbf\u95ee\u60a8\u7684 AOS \u57df\u3002 \u6ce8\u610f \u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u521b\u5efa VPC \u5bf9\u7b49\u5e76\u914d\u7f6e\u8def\u7531\u8868\u3002\u60a8\u65e0\u9700\u518d\u6b21\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u6309\u7167\u4ee5\u4e0b\u5185\u5bb9\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u3001\u66f4\u65b0\u5b89\u5168\u7ec4\u548c\u66f4\u65b0\u8def\u7531\u8868\u3002 \u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u627e\u5230\u5bfc\u5165\u7684\u57df\u540d\uff0c\u9009\u62e9\u57df\u540d\u3002 \u9009\u62e9 \u7f51\u7edc \u9009\u9879\u5361\u3002 \u590d\u5236 OpenSearch \u57df\u7f51\u7edc \u548c \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u4e24\u4e2a\u90e8\u5206\u4e2d\u7684 VPC ID\u3002\u60a8\u5c06\u5728\u8fd9\u4e24\u4e2a VPC \u4e4b\u95f4\u521b\u5efa\u5bf9\u7b49\u8fde\u63a5\u3002 \u5bfc\u822a\u5230 VPC \u63a7\u5236\u53f0\u5bf9\u7b49\u8fde\u63a5 \u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u540d\u79f0\uff0c\u4f8b\u5982\uff0c log-hub \u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u672c\u5730 VPC\uff0cVPC ID (\u8bf7\u6c42\u8005) \uff0c\u9009\u62e9 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u7684 VPC ID\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u53e6\u4e00\u4e2a VPC, VPC ID (\u63a5\u6536\u65b9) \uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u7684VPC ID\u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \uff0c\u7136\u540e\u5bfc\u822a\u5230\u5bf9\u7b49\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u3002 \u5355\u51fb \u64cd\u4f5c \u6309\u94ae\u5e76\u9009\u62e9 \u63a5\u53d7\u8bf7\u6c42 \u3002 \u66f4\u65b0\u8def\u7531\u8868 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u63a7\u5236\u53f0\u3002 \u9009\u62e9\u5b50\u7f51\uff0c\u7136\u540e\u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\u3002 \u9009\u62e9\u5b50\u7f51\u5173\u8054\u7684\u8def\u7531\u8868\uff0c\u6253\u5f00\u8def\u7531\u8868\u914d\u7f6e\u9875\u9762\u3002 \u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\uff0c\u7136\u540e\u9009\u62e9 \u7f16\u8f91\u8def\u7531 \u3002 \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531 10.255.0.0/16 \uff08Log Hub \u7684CIDR\uff09\u6307\u5411\u60a8\u521a\u521a\u521b\u5efa\u7684\u5bf9\u7b49\u8fde\u63a5\u3002 \u8fd4\u56de Log Hub \u63a7\u5236\u53f0\u3002 \u5355\u51fb OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\u7684 VPC ID\u3002 \u5728 VPC \u63a7\u5236\u53f0\u4e0a\u9009\u62e9 VPC ID \u5e76\u627e\u5230\u5b83\u7684 IPv4 CIDR \u3002 \u5728 Log Hub \u63a7\u5236\u53f0\u7684 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u90e8\u5206\u4e2d\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u3002 \u91cd\u590d\u6b65\u9aa4 3\u30014\u30015\u30016 \u4ee5\u6dfb\u52a0\u76f8\u53cd\u7684\u8def\u7ebf\u3002\u5373\u914d\u7f6e OpenSearch VPC \u7684 IPv4 CIDR \u6307\u5411\u5bf9\u7b49\u8fde\u63a5\u3002\u60a8\u9700\u8981\u5bf9\u65e5\u5fd7\u5904\u7406\u7f51\u7edc\u7684\u6bcf\u4e2a\u5b50\u7f51\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\u3002 \u66f4\u65b0 OpenSearch \u57df\u7684\u5b89\u5168\u7ec4 \u5728 Log Hub \u63a7\u5236\u53f0\u7684 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\uff0c\u9009\u62e9 \u5b89\u5168\u7ec4 \u4e2d\u7684\u5b89\u5168\u7ec4 ID \u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b89\u5168\u7ec4\u3002 \u5728\u63a7\u5236\u53f0\u4e0a\uff0c\u9009\u62e9 \u7f16\u8f91\u5165\u7ad9\u89c4\u5219 \u3002 \u6dfb\u52a0\u89c4\u5219 \"ALLOW TCP/443 from 10.255.0.0/16\"\u3002 \u9009\u62e9 \u4fdd\u5b58\u89c4\u5219 \u3002 \u5220\u9664 AOS \u57df \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5220\u9664 AOS \u57df\u3002 \u91cd\u8981 \u4ece Log Hub \u4e2d\u5220\u9664\u57df\u5c06 \u4e0d\u4f1a \u5220\u9664\u60a8 AWS \u8d26\u6237\u4e2d\u7684 AOS \u57df\u3002 \u5b83 \u4e0d\u4f1a \u5f71\u54cd\u4efb\u4f55\u73b0\u6709\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u96c6\u7fa4\u64cd\u4f5c"},{"location":"implementation-guide/domains/import/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u540e\uff0c\u60a8\u53ef\u4ee5\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 AOS \u57df\u3002 \u6ce8\u610f \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002","title":"\u57df\u64cd\u4f5c"},{"location":"implementation-guide/domains/import/#_2","text":"VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/domains/import/#aos","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u9009\u62e9\u96c6\u7fa4 \u9875\u9762\u4e0a\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002\u4e0b\u62c9\u5217\u8868\u5c06\u4ec5\u663e\u793a\u4e0e\u89e3\u51b3\u65b9\u6848\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u7684\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u7f51\u7edc \u9875\u9762\u7684 \u7f51\u7edc\u521b\u5efa \uff0c \u9009\u62e9 \u624b\u52a8 \u5e76\u70b9\u51fb \u4e0b\u4e00\u6b65 \uff1b \u6216\u9009\u62e9 \u81ea\u52a8 \uff0c\u7136\u540e\u8f6c\u5230\u6b65\u9aa4 9\u3002 \u5728 VPC \u4e0b\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a VPC\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC \u7684 VPC\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0e\u60a8\u7684 AOS \u57df\u76f8\u540c\u7684 VPC\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b50\u7f51\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC/privateSubnet1 \u548c LogHubVpc/DefaultVPC/privateSubnet2 \u7684\u5b50\u7f51\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b89\u5168\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ProcessSecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u5bfc\u5165 AOS \u57df"},{"location":"implementation-guide/domains/import/#vpc","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\u3002\u60a8\u9700\u8981\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u4ee5\u5141\u8bb8\u65e5\u5fd7\u5904\u7406\u5c42\u8bbf\u95ee\u60a8\u7684 AOS \u57df\u3002 \u6ce8\u610f \u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u521b\u5efa VPC \u5bf9\u7b49\u5e76\u914d\u7f6e\u8def\u7531\u8868\u3002\u60a8\u65e0\u9700\u518d\u6b21\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u6309\u7167\u4ee5\u4e0b\u5185\u5bb9\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u3001\u66f4\u65b0\u5b89\u5168\u7ec4\u548c\u66f4\u65b0\u8def\u7531\u8868\u3002","title":"\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde"},{"location":"implementation-guide/domains/import/#vpc_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u627e\u5230\u5bfc\u5165\u7684\u57df\u540d\uff0c\u9009\u62e9\u57df\u540d\u3002 \u9009\u62e9 \u7f51\u7edc \u9009\u9879\u5361\u3002 \u590d\u5236 OpenSearch \u57df\u7f51\u7edc \u548c \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u4e24\u4e2a\u90e8\u5206\u4e2d\u7684 VPC ID\u3002\u60a8\u5c06\u5728\u8fd9\u4e24\u4e2a VPC \u4e4b\u95f4\u521b\u5efa\u5bf9\u7b49\u8fde\u63a5\u3002 \u5bfc\u822a\u5230 VPC \u63a7\u5236\u53f0\u5bf9\u7b49\u8fde\u63a5 \u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u540d\u79f0\uff0c\u4f8b\u5982\uff0c log-hub \u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u672c\u5730 VPC\uff0cVPC ID (\u8bf7\u6c42\u8005) \uff0c\u9009\u62e9 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u7684 VPC ID\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u53e6\u4e00\u4e2a VPC, VPC ID (\u63a5\u6536\u65b9) \uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u7684VPC ID\u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \uff0c\u7136\u540e\u5bfc\u822a\u5230\u5bf9\u7b49\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u3002 \u5355\u51fb \u64cd\u4f5c \u6309\u94ae\u5e76\u9009\u62e9 \u63a5\u53d7\u8bf7\u6c42 \u3002","title":"\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5"},{"location":"implementation-guide/domains/import/#_3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u63a7\u5236\u53f0\u3002 \u9009\u62e9\u5b50\u7f51\uff0c\u7136\u540e\u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\u3002 \u9009\u62e9\u5b50\u7f51\u5173\u8054\u7684\u8def\u7531\u8868\uff0c\u6253\u5f00\u8def\u7531\u8868\u914d\u7f6e\u9875\u9762\u3002 \u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\uff0c\u7136\u540e\u9009\u62e9 \u7f16\u8f91\u8def\u7531 \u3002 \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531 10.255.0.0/16 \uff08Log Hub \u7684CIDR\uff09\u6307\u5411\u60a8\u521a\u521a\u521b\u5efa\u7684\u5bf9\u7b49\u8fde\u63a5\u3002 \u8fd4\u56de Log Hub \u63a7\u5236\u53f0\u3002 \u5355\u51fb OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\u7684 VPC ID\u3002 \u5728 VPC \u63a7\u5236\u53f0\u4e0a\u9009\u62e9 VPC ID \u5e76\u627e\u5230\u5b83\u7684 IPv4 CIDR \u3002 \u5728 Log Hub \u63a7\u5236\u53f0\u7684 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u90e8\u5206\u4e2d\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u3002 \u91cd\u590d\u6b65\u9aa4 3\u30014\u30015\u30016 \u4ee5\u6dfb\u52a0\u76f8\u53cd\u7684\u8def\u7ebf\u3002\u5373\u914d\u7f6e OpenSearch VPC \u7684 IPv4 CIDR \u6307\u5411\u5bf9\u7b49\u8fde\u63a5\u3002\u60a8\u9700\u8981\u5bf9\u65e5\u5fd7\u5904\u7406\u7f51\u7edc\u7684\u6bcf\u4e2a\u5b50\u7f51\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\u3002","title":"\u66f4\u65b0\u8def\u7531\u8868"},{"location":"implementation-guide/domains/import/#opensearch","text":"\u5728 Log Hub \u63a7\u5236\u53f0\u7684 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\uff0c\u9009\u62e9 \u5b89\u5168\u7ec4 \u4e2d\u7684\u5b89\u5168\u7ec4 ID \u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b89\u5168\u7ec4\u3002 \u5728\u63a7\u5236\u53f0\u4e0a\uff0c\u9009\u62e9 \u7f16\u8f91\u5165\u7ad9\u89c4\u5219 \u3002 \u6dfb\u52a0\u89c4\u5219 \"ALLOW TCP/443 from 10.255.0.0/16\"\u3002 \u9009\u62e9 \u4fdd\u5b58\u89c4\u5219 \u3002","title":"\u66f4\u65b0 OpenSearch \u57df\u7684\u5b89\u5168\u7ec4"},{"location":"implementation-guide/domains/import/#aos_1","text":"\u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5220\u9664 AOS \u57df\u3002 \u91cd\u8981 \u4ece Log Hub \u4e2d\u5220\u9664\u57df\u5c06 \u4e0d\u4f1a \u5220\u9664\u60a8 AWS \u8d26\u6237\u4e2d\u7684 AOS \u57df\u3002 \u5b83 \u4e0d\u4f1a \u5f71\u54cd\u4efb\u4f55\u73b0\u6709\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664 AOS \u57df"},{"location":"implementation-guide/domains/proxy/","text":"\u8bbf\u95ee\u4ee3\u7406 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u4ece Internet \u8bbf\u95ee VPC \u5185\u7684 AOS \u57df\u3002 Log Hub \u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u53ef\u7528\u7684 Nginx cluster \uff0c\u5b83\u5141\u8bb8\u60a8\u4ece Internet \u8bbf\u95ee OpenSearch Dashboards\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 \u4f7f\u7528 SSH \u96a7\u9053 \u8bbf\u95ee AOS \u57df\u3002 \u672c\u8282\u4ecb\u7ecd\u4ee3\u7406\u5806\u6808\u7684\u67b6\u6784\u4ee5\u53ca\u4ee5\u4e0b\u5185\u5bb9\uff1a \u521b\u5efa\u4ee3\u7406 \u521b\u5efa\u5173\u8054\u7684DNS\u8bb0\u5f55 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS \u5220\u9664\u4ee3\u7406 \u67b6\u6784 Log Hub \u521b\u5efa\u4e00\u4e2a Auto Scaling Group (ASG) \u548c\u4e00\u4e2a Application Load Balancer (ALB) \u3002 \u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a \u7528\u6237\u8bbf\u95ee\u4ee3\u7406\u7684\u81ea\u5b9a\u4e49\u57df\uff0c\u8be5\u57df\u9700\u8981\u901a\u8fc7DNS\u670d\u52a1\u89e3\u6790\uff08\u4f8b\u5982\uff0c\u4f7f\u7528AWS\u4e0a\u7684Route 53\uff09\u3002 DNS \u670d\u52a1\u5c06\u6d41\u91cf\u8def\u7531\u5230\u9762\u5411 Internet \u7684 ALB\u3002 ALB \u5c06\u6d41\u91cf\u5206\u914d\u5230 ASG \u5185 Amazon EC2 \u4e0a\u8fd0\u884c\u7684\u540e\u7aef Nginx \u670d\u52a1\u5668\u3002 Nginx \u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 OpenSearch Dashboards\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u4ee3\u7406\u7684 VPC \u4e0e OpenSearch \u670d\u52a1\u4e0d\u540c\uff0c\u5219\u9700\u8981 VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u521b\u5efa\u4ee3\u7406 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u521b\u5efa\u57fa\u4e8e Nginx \u7684\u4ee3\u7406\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd VPC \u4e2d\u7684 AOS \u57df \u53ef\u7528\u3002 \u5728 Amazon Certificate Manager (ACM) \u4e2d\u521b\u5efa\u6216\u4e0a\u4f20\u57df\u5173\u8054\u7684 SSL \u8bc1\u4e66 \u3002 \u786e\u4fdd\u60a8\u62e5\u6709 EC2 \u79c1\u94a5 (.pem) \u6587\u4ef6\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\uff0c\u5728 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u6ce8\u610f \u542f\u7528\u8bbf\u95ee\u4ee3\u7406\u540e\uff0c\u8bbf\u95ee\u4ee3\u7406\u7684\u94fe\u63a5\u5c06\u53ef\u7528\u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \u90e8\u5206\uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 2 \u4e2a\u540d\u4e3a LogHubVPC/DefaultVPC/publicSubnet \u7684\u516c\u6709\u5b50\u7f51\uff0c\u5b83\u4eec\u662f\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u7684\u3002 \u5728 \u516c\u5171\u5b89\u5168\u7ec4 \u4e2d\u9009\u62e9 ALB \u7684\u5b89\u5168\u7ec4\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u540d\u4e3a ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\uff0c\u8be5\u5b89\u5168\u7ec4\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u4e0e\u57df\u540d\u5173\u8054\u7684 Load Balancer SSL Certificate \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Nginx \u8bbf\u95ee\u4ee3\u7406 \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 nginx-for-opensearch AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u4e5f\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e VPCId <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u90e8\u7f72 Nginx \u4ee3\u7406\u8d44\u6e90\u7684 VPC\uff0c\u4f8b\u5982 vpc-bef13dc7 \u3002 PublicSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 ELB \u7684\u516c\u5171\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u516c\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 ELBSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e ELB \u5173\u8054\u7684\u5b89\u5168\u7ec4\uff0c\u4f8b\u5982\uff0c sg-123456 \u3002 ELBDomain <\u9700\u8981\u8f93\u5165> ELB\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f8b\u5982 dashboard.example.com \u3002 ELBDomainCertificateArn <\u9700\u8981\u8f93\u5165> \u4e0e ELBDomain \u5173\u8054\u7684 SSL \u8bc1\u4e66 ARN\u3002\u8bc1\u4e66\u5fc5\u987b\u4ece Amazon Certificate Manager (ACM) \u521b\u5efa\u3002 PrivateSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 Nginx \u5b9e\u4f8b\u7684\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 NginxSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e Nginx \u5b9e\u4f8b\u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u5b89\u5168\u7ec4\u5fc5\u987b\u5141\u8bb8\u6765\u81ea ELB \u5b89\u5168\u7ec4\u7684\u8bbf\u95ee\u3002 KeyName <\u9700\u8981\u8f93\u5165> Nginx \u5b9e\u4f8b\u7684 PEM \u5bc6\u94a5\u540d\u79f0\u3002 EngineType OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 CognitoEndpoint <\u53ef\u9009> OpenSearch \u57df\u7684 Cognito \u7528\u6237\u6c60\u7aef\u70b9 URL\uff0c\u4f8b\u5982\uff0c mydomain.auth.us-east-1.amazoncognito.com \u3002\u5982\u679c\u60a8\u7684 OpenSearch \u57df\u4e0d\u662f\u901a\u8fc7 Cognito \u7528\u6237\u6c60\u8ba4\u8bc1\uff0c\u8bf7\u7559\u7a7a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230 ALB \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u60a8\u53ef\u4ee5\u770b\u5230 \u8d1f\u8f7d\u5747\u8861\u57df\u540d \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee AOS DNS \u8bb0\u5f55\u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\uff0c\u6216\u5355\u51fb \u5e38\u89c4\u914d\u7f6e \u90e8\u5206\u4e2d \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u5220\u9664\u4ee3\u7406 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u4ece Internet \u8bbf\u95ee VPC \u5185\u7684 AOS \u57df\u3002 Log Hub \u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u53ef\u7528\u7684 Nginx cluster \uff0c\u5b83\u5141\u8bb8\u60a8\u4ece Internet \u8bbf\u95ee OpenSearch Dashboards\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 \u4f7f\u7528 SSH \u96a7\u9053 \u8bbf\u95ee AOS \u57df\u3002 \u672c\u8282\u4ecb\u7ecd\u4ee3\u7406\u5806\u6808\u7684\u67b6\u6784\u4ee5\u53ca\u4ee5\u4e0b\u5185\u5bb9\uff1a \u521b\u5efa\u4ee3\u7406 \u521b\u5efa\u5173\u8054\u7684DNS\u8bb0\u5f55 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS \u5220\u9664\u4ee3\u7406","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_2","text":"Log Hub \u521b\u5efa\u4e00\u4e2a Auto Scaling Group (ASG) \u548c\u4e00\u4e2a Application Load Balancer (ALB) \u3002 \u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a \u7528\u6237\u8bbf\u95ee\u4ee3\u7406\u7684\u81ea\u5b9a\u4e49\u57df\uff0c\u8be5\u57df\u9700\u8981\u901a\u8fc7DNS\u670d\u52a1\u89e3\u6790\uff08\u4f8b\u5982\uff0c\u4f7f\u7528AWS\u4e0a\u7684Route 53\uff09\u3002 DNS \u670d\u52a1\u5c06\u6d41\u91cf\u8def\u7531\u5230\u9762\u5411 Internet \u7684 ALB\u3002 ALB \u5c06\u6d41\u91cf\u5206\u914d\u5230 ASG \u5185 Amazon EC2 \u4e0a\u8fd0\u884c\u7684\u540e\u7aef Nginx \u670d\u52a1\u5668\u3002 Nginx \u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 OpenSearch Dashboards\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u4ee3\u7406\u7684 VPC \u4e0e OpenSearch \u670d\u52a1\u4e0d\u540c\uff0c\u5219\u9700\u8981 VPC \u5bf9\u7b49\u4e92\u8fde\u3002","title":"\u67b6\u6784"},{"location":"implementation-guide/domains/proxy/#_3","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u521b\u5efa\u57fa\u4e8e Nginx \u7684\u4ee3\u7406\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd VPC \u4e2d\u7684 AOS \u57df \u53ef\u7528\u3002 \u5728 Amazon Certificate Manager (ACM) \u4e2d\u521b\u5efa\u6216\u4e0a\u4f20\u57df\u5173\u8054\u7684 SSL \u8bc1\u4e66 \u3002 \u786e\u4fdd\u60a8\u62e5\u6709 EC2 \u79c1\u94a5 (.pem) \u6587\u4ef6\u3002","title":"\u521b\u5efa\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\uff0c\u5728 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u6ce8\u610f \u542f\u7528\u8bbf\u95ee\u4ee3\u7406\u540e\uff0c\u8bbf\u95ee\u4ee3\u7406\u7684\u94fe\u63a5\u5c06\u53ef\u7528\u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \u90e8\u5206\uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 2 \u4e2a\u540d\u4e3a LogHubVPC/DefaultVPC/publicSubnet \u7684\u516c\u6709\u5b50\u7f51\uff0c\u5b83\u4eec\u662f\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u7684\u3002 \u5728 \u516c\u5171\u5b89\u5168\u7ec4 \u4e2d\u9009\u62e9 ALB \u7684\u5b89\u5168\u7ec4\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u540d\u4e3a ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\uff0c\u8be5\u5b89\u5168\u7ec4\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u4e0e\u57df\u540d\u5173\u8054\u7684 Load Balancer SSL Certificate \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/proxy/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Nginx \u8bbf\u95ee\u4ee3\u7406 \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 nginx-for-opensearch AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u4e5f\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e VPCId <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u90e8\u7f72 Nginx \u4ee3\u7406\u8d44\u6e90\u7684 VPC\uff0c\u4f8b\u5982 vpc-bef13dc7 \u3002 PublicSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 ELB \u7684\u516c\u5171\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u516c\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 ELBSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e ELB \u5173\u8054\u7684\u5b89\u5168\u7ec4\uff0c\u4f8b\u5982\uff0c sg-123456 \u3002 ELBDomain <\u9700\u8981\u8f93\u5165> ELB\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f8b\u5982 dashboard.example.com \u3002 ELBDomainCertificateArn <\u9700\u8981\u8f93\u5165> \u4e0e ELBDomain \u5173\u8054\u7684 SSL \u8bc1\u4e66 ARN\u3002\u8bc1\u4e66\u5fc5\u987b\u4ece Amazon Certificate Manager (ACM) \u521b\u5efa\u3002 PrivateSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 Nginx \u5b9e\u4f8b\u7684\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 NginxSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e Nginx \u5b9e\u4f8b\u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u5b89\u5168\u7ec4\u5fc5\u987b\u5141\u8bb8\u6765\u81ea ELB \u5b89\u5168\u7ec4\u7684\u8bbf\u95ee\u3002 KeyName <\u9700\u8981\u8f93\u5165> Nginx \u5b9e\u4f8b\u7684 PEM \u5bc6\u94a5\u540d\u79f0\u3002 EngineType OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 CognitoEndpoint <\u53ef\u9009> OpenSearch \u57df\u7684 Cognito \u7528\u6237\u6c60\u7aef\u70b9 URL\uff0c\u4f8b\u5982\uff0c mydomain.auth.us-east-1.amazoncognito.com \u3002\u5982\u679c\u60a8\u7684 OpenSearch \u57df\u4e0d\u662f\u901a\u8fc7 Cognito \u7528\u6237\u6c60\u8ba4\u8bc1\uff0c\u8bf7\u7559\u7a7a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/domains/proxy/#dns","text":"\u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230 ALB \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u60a8\u53ef\u4ee5\u770b\u5230 \u8d1f\u8f7d\u5747\u8861\u57df\u540d \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55"},{"location":"implementation-guide/domains/proxy/#aos","text":"DNS \u8bb0\u5f55\u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\uff0c\u6216\u5355\u51fb \u5e38\u89c4\u914d\u7f6e \u90e8\u5206\u4e2d \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee AOS"},{"location":"implementation-guide/domains/proxy/#_4","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664\u4ee3\u7406"},{"location":"implementation-guide/getting-started/","text":"\u5feb\u901f\u5165\u95e8 \u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u540e\uff0c\u60a8\u53ef\u4ee5\u5148\u9605\u8bfb\u672c\u7ae0\uff0c\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5229\u7528 Log Hub \u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff08\u4ee5 Amazon CloudTrail \u65e5\u5fd7\u4e3a\u4f8b\uff09\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5f00\u59cb \u96c6\u7fa4\u7ba1\u7406 \uff0c\u5e76\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002 \u6b65\u9aa4 \u6b65\u9aa4 1\uff1a\u5bfc\u5165AOS\u57df \u3002 \u5c06\u73b0\u6709 AOS \u57df\u5bfc\u5165\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u4ee3\u7406\uff0c\u5141\u8bb8\u60a8\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u6a21\u677f\u5316\u4eea\u8868\u677f\u3002 \u6b65\u9aa4 3\uff1a\u6444\u53d6 CloudTrail \u65e5\u5fd7 \u3002 \u5c06 CloudTrail \u65e5\u5fd7\u6444\u53d6\u5230\u6307\u5b9a\u7684 AOS \u57df\u3002 \u6b65\u9aa4 4\uff1a\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f \u3002 \u67e5\u770b CloudTrail \u65e5\u5fd7\u7684\u4eea\u8868\u677f\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/getting-started/#_1","text":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u540e\uff0c\u60a8\u53ef\u4ee5\u5148\u9605\u8bfb\u672c\u7ae0\uff0c\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5229\u7528 Log Hub \u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff08\u4ee5 Amazon CloudTrail \u65e5\u5fd7\u4e3a\u4f8b\uff09\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5f00\u59cb \u96c6\u7fa4\u7ba1\u7406 \uff0c\u5e76\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"implementation-guide/getting-started/#_2","text":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165AOS\u57df \u3002 \u5c06\u73b0\u6709 AOS \u57df\u5bfc\u5165\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u4ee3\u7406\uff0c\u5141\u8bb8\u60a8\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u6a21\u677f\u5316\u4eea\u8868\u677f\u3002 \u6b65\u9aa4 3\uff1a\u6444\u53d6 CloudTrail \u65e5\u5fd7 \u3002 \u5c06 CloudTrail \u65e5\u5fd7\u6444\u53d6\u5230\u6307\u5b9a\u7684 AOS \u57df\u3002 \u6b65\u9aa4 4\uff1a\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f \u3002 \u67e5\u770b CloudTrail \u65e5\u5fd7\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/getting-started/1.import-domain/","text":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch \u57df \u9996\u6b21\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u5fc5\u987b\u5148\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 Amazon OpenSearch \u57df \u3002 \u91cd\u8981 \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u524d\u63d0\u6761\u4ef6 VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 \u6b65\u9aa4 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u6b65\u9aa4 1. \u9009\u62e9\u57df \u9875\u9762\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6b65\u9aa4 2. \u914d\u7f6e\u7f51\u7edc \u9875\u9762\uff0c\u5728 \u7f51\u7edc\u521b\u5efa \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u3002\u5982\u679c\u60a8\u7684 Log Hub \u548c OpenSearch \u57df\u4f4d\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684 VPC \u4e2d\uff0c \u81ea\u52a8 \u6a21\u5f0f\u5c06\u5728\u5b83\u4eec\u4e4b\u95f4\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u8868\u3002\u8bf7\u53c2\u9605 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u4e2d\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u5728 \u6b65\u9aa4 3. \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u6b65\u9aa4 1. \u5bfc\u5165 AOS \u57df"},{"location":"implementation-guide/getting-started/1.import-domain/#1-amazon-opensearch","text":"\u9996\u6b21\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u5fc5\u987b\u5148\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 Amazon OpenSearch \u57df \u3002 \u91cd\u8981 \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002","title":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch \u57df"},{"location":"implementation-guide/getting-started/1.import-domain/#_1","text":"VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/getting-started/1.import-domain/#_2","text":"\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u6b65\u9aa4 1. \u9009\u62e9\u57df \u9875\u9762\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6b65\u9aa4 2. \u914d\u7f6e\u7f51\u7edc \u9875\u9762\uff0c\u5728 \u7f51\u7edc\u521b\u5efa \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u3002\u5982\u679c\u60a8\u7684 Log Hub \u548c OpenSearch \u57df\u4f4d\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684 VPC \u4e2d\uff0c \u81ea\u52a8 \u6a21\u5f0f\u5c06\u5728\u5b83\u4eec\u4e4b\u95f4\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u8868\u3002\u8bf7\u53c2\u9605 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u4e2d\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u5728 \u6b65\u9aa4 3. \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/getting-started/2.create-proxy/","text":"\u6b65\u9aa42\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u60a8\u53ef\u4ee5\u521b\u5efa Nginx \u4ee3\u7406\u5e76\u521b\u5efa\u6307\u5411\u8be5\u4ee3\u7406\u7684 DNS \u8bb0\u5f55\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u57df\u7ba1\u7406\u7ae0\u8282\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a Nginx \u4ee3\u7406 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u7684 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5305\u542b LogHubVpc/DefaultVPC/publicSubnetX \u7684\u5b50\u7f51\u3002 \u5bf9\u4e8e \u516c\u5f00\u5b89\u5168\u7ec4 \uff0c\u9009\u62e9\u5305\u542b ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u9002\u7528\u4e8e\u57df\u540d\u7684\u5173\u8054 Load Balancer SSL \u8bc1\u4e66 \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230\u5e94\u7528\u8d1f\u8f7d\u5e73\u8861 (ALB) \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u521b\u5efaDNS\u8bb0\u5f55 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u627e\u5230 Load Balancer Domain \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u5e76\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u6b65\u9aa4 2. \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#2","text":"\u60a8\u53ef\u4ee5\u521b\u5efa Nginx \u4ee3\u7406\u5e76\u521b\u5efa\u6307\u5411\u8be5\u4ee3\u7406\u7684 DNS \u8bb0\u5f55\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u57df\u7ba1\u7406\u7ae0\u8282\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u3002","title":"\u6b65\u9aa42\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#nginx","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u7684 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5305\u542b LogHubVpc/DefaultVPC/publicSubnetX \u7684\u5b50\u7f51\u3002 \u5bf9\u4e8e \u516c\u5f00\u5b89\u5168\u7ec4 \uff0c\u9009\u62e9\u5305\u542b ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u9002\u7528\u4e8e\u57df\u540d\u7684\u5173\u8054 Load Balancer SSL \u8bc1\u4e66 \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230\u5e94\u7528\u8d1f\u8f7d\u5e73\u8861 (ALB) \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002","title":"\u521b\u5efa\u4e00\u4e2a Nginx \u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#dns","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u627e\u5230 Load Balancer Domain \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u5e76\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u521b\u5efaDNS\u8bb0\u5f55"},{"location":"implementation-guide/getting-started/3.build-cloudtrail-pipeline/","text":"\u6b65\u9aa4 3: \u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7 \u60a8\u53ef\u4ee5\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6765\u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7\u3002 \u91cd\u8981 \u786e\u4fdd\u60a8\u7684 CloudTrail \u548c Log Hub \u4f4d\u4e8e\u540c\u4e00 AWS \u533a\u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u5bfc\u5165\u7684\u57df\u3002 \u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u4fdd\u7559\u9ed8\u8ba4\u503c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 3. \u6444\u53d6 CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/getting-started/3.build-cloudtrail-pipeline/#3-amazon-cloudtrail","text":"\u60a8\u53ef\u4ee5\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6765\u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7\u3002 \u91cd\u8981 \u786e\u4fdd\u60a8\u7684 CloudTrail \u548c Log Hub \u4f4d\u4e8e\u540c\u4e00 AWS \u533a\u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u5bfc\u5165\u7684\u57df\u3002 \u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u4fdd\u7559\u9ed8\u8ba4\u503c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 3: \u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/getting-started/4.view-dashboard/","text":"\u6b65\u9aa4 4: \u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f DNS\u8bb0\u5f55 \u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS\u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\u3002 \u6216\u8005\uff0c\u5355\u51fb\u57df\u7684 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u8f93\u5165\u60a8\u7684\u51ed\u8bc1\uff0c\u767b\u5f55\u5230 Amazon OpenSearch Dashboards\u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2AOS\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d\uff0c\u9009\u62e9 Dashboards \u3002 \u9009\u62e9\u81ea\u52a8\u521b\u5efa\u7684 AOS \u4eea\u8868\u677f\u5e76\u5f00\u59cb\u63a2\u7d22\u60a8\u7684\u6570\u636e\u3002","title":"\u6b65\u9aa4 4. \u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/getting-started/4.view-dashboard/#4-aos","text":"DNS\u8bb0\u5f55 \u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS\u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\u3002 \u6216\u8005\uff0c\u5355\u51fb\u57df\u7684 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u8f93\u5165\u60a8\u7684\u51ed\u8bc1\uff0c\u767b\u5f55\u5230 Amazon OpenSearch Dashboards\u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2AOS\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d\uff0c\u9009\u62e9 Dashboards \u3002 \u9009\u62e9\u81ea\u52a8\u521b\u5efa\u7684 AOS \u4eea\u8868\u677f\u5e76\u5f00\u59cb\u63a2\u7d22\u60a8\u7684\u6570\u636e\u3002","title":"\u6b65\u9aa4 4: \u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f"},{"location":"implementation-guide/resources/aws-services/","text":"AWS \u670d\u52a1 AWS CloudFormation Amazon OpenSearch Service Amazon S3 AWS Lambda Amazon CloudFront AWS AppSync Amazon Cognito User Pool AWS Step Functions Amazon DynamoDB AWS Systems Manager Amazon EventBridge Amazon Kinesis Data Streams Amazon Kinesis Data Firehose","title":"AWS \u670d\u52a1"},{"location":"implementation-guide/resources/aws-services/#aws","text":"AWS CloudFormation Amazon OpenSearch Service Amazon S3 AWS Lambda Amazon CloudFront AWS AppSync Amazon Cognito User Pool AWS Step Functions Amazon DynamoDB AWS Systems Manager Amazon EventBridge Amazon Kinesis Data Streams Amazon Kinesis Data Firehose","title":"AWS \u670d\u52a1"},{"location":"implementation-guide/resources/open-ssl/","text":"OpenSSL 1.1 \u5b89\u88c5 Log Hub \u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\uff0c\u9700\u8981 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf (OS) \u5b89\u88c5\u4f9d\u8d56\u9879\u3002 \u5efa\u8bae\u60a8\u81ea\u5df1\u5236\u4f5c\u5b89\u88c5\u4e86 OpenSSL 1.1 \u7684 AMI\u3002 \u91cd\u8981 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5728\u4ee5\u4e0b\u5217\u8868\u4e2d\uff0c\u8fd9\u5e76\u4e0d\u4ee3\u8868\u60a8\u4e0d\u53ef\u4ee5\u4f7f\u7528 Log Hub\u3002\u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 OpenSSL 1.1\u3002 Amazon Linux 2 sudo yum install openssl11 CentOS 7 sudo yum -y install wget gcc unzip perl wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_1-stable.zip unzip OpenSSL_1_1_1-stable.zip cd openssl-OpenSSL_1_1_1-stable ./config sudo make sudo make install echo \"/usr/local/lib64/\" | sudo tee -a /etc/ld.so.conf > /dev/null sudo ldconfig Ubuntu 20.04 OpenSSL \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002 18.04 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Debian GNU/10 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 GNU/11 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Red Hat Enterprise Linux 8.X OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002 7.X sudo yum -y install wget sudo yum -y install ca-certificates echo \"ca_directory=/etc/ssl/certs\" | sudo tee -a /etc/wgetrc > /dev/null wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_1-stable.zip sudo yum -y install gcc unzip perl unzip OpenSSL_1_1_1-stable.zip cd openssl-OpenSSL_1_1_1-stable ./config sudo make sudo make install echo \"/usr/local/lib64/\" | sudo tee -a /etc/ld.so.conf > /dev/null sudo ldconfig SUSE Linux Enterprise Server 15 OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"OpenSSL \u5b89\u88c5"},{"location":"implementation-guide/resources/open-ssl/#openssl-11","text":"Log Hub \u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\uff0c\u9700\u8981 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf (OS) \u5b89\u88c5\u4f9d\u8d56\u9879\u3002 \u5efa\u8bae\u60a8\u81ea\u5df1\u5236\u4f5c\u5b89\u88c5\u4e86 OpenSSL 1.1 \u7684 AMI\u3002 \u91cd\u8981 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5728\u4ee5\u4e0b\u5217\u8868\u4e2d\uff0c\u8fd9\u5e76\u4e0d\u4ee3\u8868\u60a8\u4e0d\u53ef\u4ee5\u4f7f\u7528 Log Hub\u3002\u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 OpenSSL 1.1\u3002","title":"OpenSSL 1.1 \u5b89\u88c5"},{"location":"implementation-guide/resources/open-ssl/#amazon-linux-2","text":"sudo yum install openssl11","title":"Amazon Linux 2"},{"location":"implementation-guide/resources/open-ssl/#centos-7","text":"sudo yum -y install wget gcc unzip perl wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_1-stable.zip unzip OpenSSL_1_1_1-stable.zip cd openssl-OpenSSL_1_1_1-stable ./config sudo make sudo make install echo \"/usr/local/lib64/\" | sudo tee -a /etc/ld.so.conf > /dev/null sudo ldconfig","title":"CentOS 7"},{"location":"implementation-guide/resources/open-ssl/#ubuntu","text":"","title":"Ubuntu"},{"location":"implementation-guide/resources/open-ssl/#2004","text":"OpenSSL \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"20.04"},{"location":"implementation-guide/resources/open-ssl/#1804","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"18.04"},{"location":"implementation-guide/resources/open-ssl/#debian","text":"","title":"Debian"},{"location":"implementation-guide/resources/open-ssl/#gnu10","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"GNU/10"},{"location":"implementation-guide/resources/open-ssl/#gnu11","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"GNU/11"},{"location":"implementation-guide/resources/open-ssl/#red-hat-enterprise-linux","text":"","title":"Red Hat Enterprise Linux"},{"location":"implementation-guide/resources/open-ssl/#8x","text":"OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"8.X"},{"location":"implementation-guide/resources/open-ssl/#7x","text":"sudo yum -y install wget sudo yum -y install ca-certificates echo \"ca_directory=/etc/ssl/certs\" | sudo tee -a /etc/wgetrc > /dev/null wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_1-stable.zip sudo yum -y install gcc unzip perl unzip OpenSSL_1_1_1-stable.zip cd openssl-OpenSSL_1_1_1-stable ./config sudo make sudo make install echo \"/usr/local/lib64/\" | sudo tee -a /etc/ld.so.conf > /dev/null sudo ldconfig","title":"7.X"},{"location":"implementation-guide/resources/open-ssl/#suse-linux-enterprise-server","text":"","title":"SUSE Linux Enterprise Server"},{"location":"implementation-guide/resources/open-ssl/#15","text":"OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"15"}]}