{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u65e5\u5fd7\u901a\uff08Centralized Logging with OpenSearch\uff09\u63d0\u4f9b\u5168\u9762\u7684\u65e5\u5fd7\u7ba1\u7406\u548c\u5206\u6790\u529f\u80fd\uff0c\u5e2e\u52a9\u60a8\u7b80\u5316\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u6784\u5efa\u3002\u672c\u89e3\u51b3\u65b9\u6848\u57fa\u4e8eAmazon OpenSearch Service \u6784\u5efa\uff0c\u53ef\u8ba9\u60a8\u6709\u6548\u5730\u5b8c\u6210\u65e5\u5fd7\u6444\u53d6\u3001\u65e5\u5fd7\u5904\u7406\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002\u672c\u89e3\u51b3\u65b9\u6848\u53ef\u5e94\u7528\u4e8e\u591a\u7c7b\u573a\u666f\uff0c\u4f8b\u5982\u6ee1\u8db3\u5b89\u5168\u548c\u5408\u89c4\u6027\u6cd5\u89c4\uff0c\u5b9e\u73b0\u7cbe\u7ec6\u5316\u7684\u4e1a\u52a1\u8fd0\u8425\uff0c\u6216\u8005\u589e\u5f3aIT\u6545\u969c\u6392\u9664\u548c\u7ef4\u62a4\u3002 \u5982\u679c\u60a8\u60f3\u8981 \u2026 \u9605\u8bfb\u2026 \u4e86\u89e3\u8fd0\u884c\u6b64\u89e3\u51b3\u65b9\u6848\u7684\u6210\u672c \u6210\u672c \u7406\u89e3\u6b64\u89e3\u51b3\u65b9\u6848\u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879 \u5b89\u5168 \u4e86\u89e3\u6b64\u89e3\u51b3\u65b9\u6848\u652f\u6301\u7684AWS\u533a\u57df \u652f\u6301\u7684AWS\u533a\u57df \u5feb\u901f\u5f00\u59cb\u4f7f\u7528\u89e3\u51b3\u65b9\u6848\uff0c\u5bfc\u5165Amazon OpenSearch Service\u57df\uff0c\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\uff0c\u8bbf\u95ee\u5185\u7f6e\u4eea\u8868\u677f \u5feb\u901f\u5165\u95e8 \u5b66\u4e60\u4e0eAmazon OpenSearch Service\u57df\u76f8\u5173\u7684\u64cd\u4f5c \u57df\u7ba1\u7406 \u6307\u5bfc\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u8fc7\u7a0b AWS\u670d\u52a1\u65e5\u5fd7 \u548c \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7 \u672c\u6307\u5357\u4e2d\u7684 \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\u5f15\u5bfc\u60a8\u5b8c\u6210\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u8fc7\u7a0b\uff0c \u96c6\u7fa4\u7ba1\u7406 \u7ae0\u8282\u4ecb\u7ecd\u5982\u4f55\u5728\u65e5\u5fd7\u901a\u7f51\u9875\u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u672c\u5b9e\u65bd\u6307\u5357\u63cf\u8ff0\u4e86\u5728 AWS \u4e91\u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u7684\u67b6\u6784\u6ce8\u610f\u4e8b\u9879\u548c\u914d\u7f6e\u6b65\u9aa4\u3002\u5b83\u5305\u62ec CloudFormation \u6a21\u677f\u7684\u94fe\u63a5\uff0c\u8fd9\u4e9b\u6a21\u677f\u4f7f\u7528 AWS \u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u6700\u4f73\u5b9e\u8df5\u6765\u542f\u52a8\u548c\u914d\u7f6e\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u6240\u9700\u7684 AWS \u670d\u52a1\u3002 \u672c\u6307\u5357\u9002\u7528\u4e8e\u5728 AWS \u4e91\u4e2d\u5177\u6709\u67b6\u6784\u5b9e\u8df5\u7ecf\u9a8c\u7684 IT \u67b6\u6784\u5e08\u3001\u5f00\u53d1\u4eba\u5458\u3001DevOps \u548c\u6570\u636e\u5de5\u7a0b\u5e08\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/alarm/","text":"\u4ee5\u4e0b\u6709\u4e0d\u540c\u7c7b\u578b\u7684\u65e5\u5fd7\u544a\u8b66\uff1a\u65e5\u5fd7\u5904\u7406\u5668\u544a\u8b66\u3001\u7f13\u51b2\u5c42\u544a\u8b66\u4ee5\u53ca\u6e90\u544a\u8b66\uff08\u4ec5\u9002\u7528\u4e8e\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff09\u3002\u5f53\u6ee1\u8db3\u5b9a\u4e49\u7684\u6761\u4ef6\u65f6\uff0c\u5c06\u89e6\u53d1\u8fd9\u4e9b\u544a\u8b66\u3002 \u65e5\u5fd7\u544a\u8b66\u7c7b\u578b \u65e5\u5fd7\u544a\u8b66\u6761\u4ef6 \u63cf\u8ff0 \u65e5\u5fd7\u5904\u7406\u5668\u544a\u8b66 \u57285\u5206\u949f\u5185\u51fa\u73b0\u9519\u8bef\u8c03\u7528\u6b21\u6570 # >= 10\uff0c1\u6b21\u8fde\u7eed \u5f53\u65e5\u5fd7\u5904\u7406\u5668 Lambda \u9519\u8bef\u8c03\u7528\u6b21\u6570\u57285\u5206\u949f\u5185\u5927\u4e8e\u6216\u7b49\u4e8e10\u6b21\uff08\u5305\u62ec5\u5206\u949f\uff09\uff0c\u5c06\u89e6\u53d1\u7535\u5b50\u90ae\u4ef6\u544a\u8b66\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u544a\u8b66 \u57281\u5206\u949f\u5185\u5931\u8d25\u8bb0\u5f55\u6570 # >= 1\uff0c1\u6b21\u8fde\u7eed \u5f53\u5931\u8d25\u8bb0\u5f55\u6570\u57281\u5206\u949f\u7a97\u53e3\u5185\u5927\u4e8e\u6216\u7b49\u4e8e1\u6b21\u65f6\uff0c\u5c06\u89e6\u53d1\u544a\u8b66\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u544a\u8b66 \u6700\u8fd15\u5206\u949f\u5185\u7684\u5e73\u5747\u6267\u884c\u65f6\u957f >= 60000 \u6beb\u79d2 \u5728\u6700\u8fd15\u5206\u949f\u5185\uff0c\u5f53\u65e5\u5fd7\u5904\u7406\u5668 Lambda \u7684\u5e73\u5747\u6267\u884c\u65f6\u95f4\u5927\u4e8e\u6216\u7b49\u4e8e60\u79d2\u65f6\uff0c\u5c06\u89e6\u53d1\u7535\u5b50\u90ae\u4ef6\u544a\u8b66\u3002 \u7f13\u51b2\u5c42\u544a\u8b66 SQS \u6700\u8001\u6d88\u606f\u7684\u5e74\u9f84 >= 30\u5206\u949f \u5f53\u6700\u8001\u7684 SQS \u6d88\u606f\u7684\u5e74\u9f84\u5927\u4e8e\u6216\u7b49\u4e8e30\u5206\u949f\u65f6\uff0c\u8868\u793a\u8be5\u6d88\u606f\u81f3\u5c1130\u5206\u949f\u5185\u672a\u88ab\u6d88\u8017\uff0c\u5c06\u89e6\u53d1\u7535\u5b50\u90ae\u4ef6\u544a\u8b66\u3002 \u6e90\u544a\u8b66\uff08\u4ec5\u9002\u7528\u4e8e\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff09 \u8fc7\u53bb5\u5206\u949f\u5185\u7684 Fluent Bit output_retried_record_total >= 100 \u5f53\u8fc7\u53bb5\u5206\u949f\u5185 Fluent Bit \u8f93\u51fa\u7684\u91cd\u8bd5\u8bb0\u5f55\u603b\u6570\u5927\u4e8e\u6216\u7b49\u4e8e100\u65f6\uff0c\u5c06\u89e6\u53d1\u7535\u5b50\u90ae\u4ef6\u544a\u8b66\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u542f\u7528\u6216\u7981\u7528\u65e5\u5fd7\u544a\u8b66\u3002 \u542f\u7528\u65e5\u5fd7\u544a\u8b66 \u767b\u5f55 Centralized Logging with OpenSearch \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u5728 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u6216 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u6240\u521b\u5efa\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u7136\u540e\u9009\u62e9 \u67e5\u770b\u8be6\u7ec6\u4fe1\u606f \u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u5982\u6709\u9700\u8981\uff0c\u6253\u5f00 \u544a\u8b66 \u5e76\u9009\u62e9\u73b0\u6709\u7684 SNS \u4e3b\u9898\u3002 \u5982\u679c\u9009\u62e9 \u521b\u5efa\u65b0\u7684 SNS \u4e3b\u9898 \uff0c\u5219\u9700\u8981\u4e3a\u65b0\u521b\u5efa\u7684 SNS \u4e3b\u9898\u63d0\u4f9b\u901a\u77e5\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u7981\u7528\u65e5\u5fd7\u544a\u8b66 \u767b\u5f55 Centralized Logging with OpenSearch \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u5728 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u6216 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u6240\u521b\u5efa\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u7136\u540e\u9009\u62e9 \u67e5\u770b\u8be6\u7ec6\u4fe1\u606f \u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u5173\u95ed \u544a\u8b66 \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/alarm/#_1","text":"\u767b\u5f55 Centralized Logging with OpenSearch \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u5728 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u6216 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u6240\u521b\u5efa\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u7136\u540e\u9009\u62e9 \u67e5\u770b\u8be6\u7ec6\u4fe1\u606f \u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u5982\u6709\u9700\u8981\uff0c\u6253\u5f00 \u544a\u8b66 \u5e76\u9009\u62e9\u73b0\u6709\u7684 SNS \u4e3b\u9898\u3002 \u5982\u679c\u9009\u62e9 \u521b\u5efa\u65b0\u7684 SNS \u4e3b\u9898 \uff0c\u5219\u9700\u8981\u4e3a\u65b0\u521b\u5efa\u7684 SNS \u4e3b\u9898\u63d0\u4f9b\u901a\u77e5\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002","title":"\u542f\u7528\u65e5\u5fd7\u544a\u8b66"},{"location":"implementation-guide/alarm/#_2","text":"\u767b\u5f55 Centralized Logging with OpenSearch \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u5728 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u6216 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u6240\u521b\u5efa\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u7136\u540e\u9009\u62e9 \u67e5\u770b\u8be6\u7ec6\u4fe1\u606f \u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u5173\u95ed \u544a\u8b66 \u3002","title":"\u7981\u7528\u65e5\u5fd7\u544a\u8b66"},{"location":"implementation-guide/architecture/","text":"\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u5728 AWS \u4e91\u4e2d\u6784\u5efa\u4ee5\u4e0b\u73af\u5883\u3002 \u56fe1: \u89e3\u51b3\u65b9\u6848\u67b6\u6784\u56fe \u6b64\u89e3\u51b3\u65b9\u6848\u5728\u60a8\u7684 AWS \u4e91\u8d26\u6237\u4e2d\u90e8\u7f72 AWS CloudFormation \u6a21\u677f\u5e76\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\u3002 Amazon CloudFront \u5206\u53d1\u6258\u7ba1\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e2d\u7684\u524d\u7aef Web UI \u8d44\u6e90\u3002 Amazon Cognito \u7528\u6237\u6c60 \u6216 OpenID \u8fde\u63a5\u5668 (OIDC) \u53ef\u63d0\u4f9b\u8eab\u4efd\u8ba4\u8bc1\u3002 AWS AppSync \u63d0\u4f9b\u540e\u7aef GraphQL API\u3002 Amazon DynamoDB \u5c06\u89e3\u51b3\u65b9\u6848\u76f8\u5173\u4fe1\u606f\u5b58\u50a8\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u3002 AWS Lambda \u4e0e\u5176\u5b83 AWS \u670d\u52a1\u4ea4\u4e92\uff0c\u5904\u7406\u7ba1\u7406\u65e5\u5fd7\u7ba1\u9053\u6216\u65e5\u5fd7\u4ee3\u7406\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u5e76\u83b7\u53d6 DynamoDB \u8868\u4e2d\u66f4\u65b0\u7684\u4fe1\u606f\u3002 AWS Step Functions \u6309\u9700\u534f\u8c03\u4e00\u7ec4\u9884\u5b9a\u4e49\u5806\u6808\u7684 AWS CloudFormation \u90e8\u7f72\u7528\u4e8e\u65e5\u5fd7\u7ba1\u9053\u7ba1\u7406\u3002\u65e5\u5fd7\u7ba1\u9053\u5806\u6808\u90e8\u7f72\u5355\u72ec\u7684 AWS \u8d44\u6e90\uff0c\u7528\u4e8e\u6536\u96c6\u548c\u5904\u7406\u65e5\u5fd7\uff0c\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u548c\u53ef\u89c6\u5316\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u6216 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u901a\u8fc7\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u6309\u9700\u521b\u5efa\u3002 AWS Systems Manager \u548c Amazon EventBridge \u7528\u4e8e\u7ba1\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u7684\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f8b\u5982\u4e3a\u5e94\u7528\u670d\u52a1\u5668\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff08Fluent Bit\uff09\u548c\u76d1\u63a7\u4ee3\u7406\u7684\u5065\u5eb7\u72b6\u6001\u3002 Amazon EC2 \u6216 Amazon EKS \u5b89\u88c5 Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u4e0a\u4f20\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch \u57df\u6216 Light Engine \u5206\u6790\u5f15\u64ce\u4e2d\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch \u57df\u6216 Light Engine \u5206\u6790\u5f15\u64ce\u4e2d\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684\u65e5\u5fd7\u7ba1\u9053\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002 AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u901a\u652f\u6301 AWS \u670d\u52a1\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7\u3002 \u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730\uff0c\u5305\u62ec Amazon S3 \u5b58\u50a8\u6876\u3001CloudWatch \u65e5\u5fd7\u7ec4\u3001Kinesis Data Streams \u548c Kinesis Firehose\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\u7a0b\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\u3002 \u6ce8\u610f \u65e5\u5fd7\u901a\u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684\u65e5\u5fd7\u901a\u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002 \u901a\u8fc7 Amazon S3 \u63d0\u53d6\u65e5\u5fd7 \u6ce8\u610f \u672c\u8282\u9002\u7528\u4e8e\uff1a Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\uff0cCloudFront \u6807\u51c6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (S3)\uff0cApplication Load Balancing \u8bbf\u95ee\u65e5\u5fd7\uff0cWAF \u65e5\u5fd7\uff0cVPC \u6d41 \u65e5\u5fd7 (S3)\uff0cAWS Config \u65e5\u5fd7\uff0cAmazon RDS/Aurora \u65e5\u5fd7\uff0cAWS Lambda \u65e5\u5fd7\u3002 \u6b64\u5de5\u4f5c\u6d41\u652f\u6301\u4ee5\u4e0b\u4e24\u4e2a\u7c7b\u522b\uff1a \u76f4\u63a5\u8bb0\u5f55\u5230Amazon S3\u6876\u7684\u65e5\u5fd7(OpenSearch\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u8be5AWS\u670d\u52a1\u53ef\u4ee5\u76f4\u63a5\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230 Amazon S3 \u6876\u3002 \u56fe 2\uff1a\u7528\u4e8e\u5206\u6790\u901a\u8fc7Amazon S3\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u901a\u8fc7Kinesis Data Firehose (KDF) \u8bb0\u5f55\u5230Amazon S3\u6876\u7684\u65e5\u5fd7(OpenSearch\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u8be5AWS\u670d\u52a1\u4e0d\u80fd\u76f4\u63a5\u5c06\u65e5\u5fd7\u653e\u5165 Amazon S3 \u6876\uff0c\u800c\u662f\u53ea\u80fd\u8bb0\u5f55\u5230 Amazon CloudWatch\u3002 \u4f7f\u7528 KDF \u5148\u4eceCloudWatch \u65e5\u5fd7\u7ec4\u8ba2\u9605\u65e5\u5fd7\uff0c\u7136\u540e\u653e\u5165Amazon S3\u6876\u3002 \u56fe 3\uff1a\u7528\u4e8e\u5206\u6790\u901a\u8fc7 KDF \u8bb0\u5f55\u5230 Amazon S3\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\uff08\u65e5\u5fd7\u6876\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\u4f1a\u901a\u8fc7 S3 \u4e8b\u4ef6\u901a\u77e5 \u5411 Amazon SQS \u53d1\u9001\u901a\u77e5\u3002 Amazon SQS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u5c06\u65e5\u5fd7\u63d0\u53d6\u5230 Amazon OpenSearch \u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 S3 \u6876\u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728\u65e5\u5fd7\u901a \u7684\u8d26\u6237\u4e2d\u3002 \u76f4\u63a5\u8bb0\u5f55\u5230Amazon S3\u6876\u7684\u65e5\u5fd7(Light Engine\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u8be5AWS\u670d\u52a1\u53ef\u4ee5\u76f4\u63a5\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230 Amazon S3 \u6876\u3002 \u56fe\uff1a\u7528\u4e8e\u5206\u6790\u901a\u8fc7Amazon S3\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS\u670d\u52a1\u7684\u65e5\u5fd7\u5b58\u50a8\u5728Amazon S3\u5b58\u50a8\u6876\uff08Log Bucket\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\uff0c\u5c06\u4f7f\u7528 S3 \u4e8b\u4ef6\u901a\u77e5\u5c06\u4e8b\u4ef6\u901a\u77e5\u53d1\u9001\u5230 Amazon SQS\u3002 Amazon SQS \u89e6\u53d1 Amazon Lambda \u6267\u884c\u3002 AWS Lambda \u4ece Amazon S3 \u65e5\u5fd7\u5b58\u50a8\u6876\u83b7\u53d6\u5bf9\u8c61\u3002 AWS Lambda \u5c06\u5bf9\u8c61\u653e\u5165\u6682\u5b58\u6876\u4e2d\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u6279\u91cf\u5904\u7406\u5b58\u50a8\u5728\u6682\u5b58\u5b58\u50a8\u6876\u4e2d\u7684\u539f\u59cb\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u5c06\u65e5\u5fd7\u6570\u636e\u8f6c\u6362\u4e3a Apache Parquet \u683c\u5f0f\uff0c\u5e76\u6839\u636e\u65f6\u95f4\u548c\u533a\u57df\u7b49\u6761\u4ef6\u81ea\u52a8\u5bf9\u6240\u6709\u4f20\u5165\u6570\u636e\u8fdb\u884c\u5206\u533a\u3002 \u901a\u8fc7 Amazon Kinesis Data Streams (KDS) \u63d0\u53d6\u65e5\u5fd7 \u6ce8\u610f \u672c\u8282\u9002\u7528\u4e8e\uff1aCloudFront \u5b9e\u65f6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (CloudWatch)\uff0cVPC \u6d41\u65e5\u5fd7 (CloudWatch). \u6b64\u5de5\u4f5c\u6d41\u652f\u6301\u4ee5\u4e0b\u4e24\u4e2a\u7c7b\u522b\uff1a \u76f4\u63a5\u8bb0\u5f55\u5230Amazon KDS \u7684\u5b9e\u65f6\u65e5\u5fd7 \u8be5AWS\u670d\u52a1\u53ef\u4ee5\u76f4\u63a5\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon KDS . \u56fe 4\uff1a\u7528\u4e8e\u5206\u6790 \u901a\u8fc7 KDS \u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u4f7f\u7528Amazon KDS \u8ba2\u9605\u7684\u5b9e\u65f6\u6d41\u65e5\u5fd7 \u8be5AWS\u670d\u52a1\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230 Amazon CloudWatch\u3002\u4f7f\u7528 KDS \u4eceCloudWatch \u65e5\u5fd7\u7ec4\u8ba2\u9605\u5b9e\u65f6\u6d41\u65e5\u5fd7\u3002 \u56fe 5\uff1a\u7528\u4e8e\u5206\u6790 \u901a\u8fc7 KDS\u8ba2\u9605 \u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS\u670d\u52a1\u65e5\u5fd7\u5b9e\u65f6\u7684\u53d1\u9001\u5230 to Kinesis Data Stream. Amazon KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u57df\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 CloudWatch \u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728\u65e5\u5fd7\u901a\u7684\u8d26\u6237\u4e2d\u3002 \u91cd\u8981 \u6b64\u89e3\u51b3\u65b9\u6848\u4e0d\u652f\u6301 CloudFront \u5b9e\u65f6\u65e5\u5fd7\u7684\u8de8\u8d26\u6237\u6444\u53d6\u3002 \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u901a\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u6216\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u6ce8\u610f \u65e5\u5fd7\u901a\u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684\u65e5\u5fd7\u901a \u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002 \u6765\u81ea Amazon EC2 / Amazon EKS \u7684\u65e5\u5fd7 \u6765\u81ea Amazon EC2/ Amazon EKS\u7684\u65e5\u5fd7(OpenSearch\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u56fe 6\uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230\u53ef\u9009\u7684 Log Buffer \uff0c\u6216\u76f4\u63a5\u6444\u53d6\u5230 OpenSearch \u57df\u4e2d\u3002 Log Buffer \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u57df\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u81ea Amazon EC2/ Amazon EKS\u7684\u65e5\u5fd7(Light Engine\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u56fe \uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u5c06\u5176\u53d1\u9001\u5230\u53ef\u9009\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u3002 Log Buffer \u89e6\u53d1 Lambda \u5c06\u65e5\u5fd7\u5b58\u50a8\u6876\u4e2d\u7684\u5bf9\u8c61\u590d\u5236\u5230\u6682\u5b58\u5b58\u50a8\u6876\u3002 Amazon SQS \u542f\u52a8 AWS Lambda\u3002 AWS Lambda \u4ece Amazon S3 \u65e5\u5fd7\u5b58\u50a8\u6876\u83b7\u53d6\u5bf9\u8c61\u3002 AWS Lambda \u5c06\u5bf9\u8c61\u653e\u5165\u6682\u5b58\u6876\u4e2d\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u6279\u91cf\u5904\u7406\u5b58\u50a8\u5728\u6682\u5b58\u5b58\u50a8\u6876\u4e2d\u7684\u539f\u59cb\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u5c06\u65e5\u5fd7\u6570\u636e\u8f6c\u6362\u4e3a Apache Parquet \u683c\u5f0f\uff0c\u5e76\u6839\u636e\u65f6\u95f4\u548c\u533a\u57df\u7b49\u6761\u4ef6\u81ea\u52a8\u5bf9\u6240\u6709\u4f20\u5165\u6570\u636e\u8fdb\u884c\u5206\u533a\u3002 \u6765\u81ea Syslog \u5ba2\u6237\u7aef\u7684\u65e5\u5fd7 \u91cd\u8981 \u8bf7\u786e\u4fdd\u60a8\u7684 Syslog \u751f\u6210\u5668/\u53d1\u9001\u5668\u7684\u5b50\u7f51\u5df2\u8fde\u63a5\u5230\u65e5\u5fd7\u901a\u7684 \u4e24\u4e2a \u79c1\u6709\u5b50\u7f51\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u63d0\u53d6\u65e5\u5fd7\uff0c\u60a8\u9700\u8981\u4f7f\u7528 VPC Peering Connection \u6216 Transit Gateway \u8fde\u63a5\u8fd9\u4e9b VPC\u3002 \u67b6\u6784\u56fe\u4e2d\u7684 NLB \u548c ECS \u5bb9\u5668\u53ea\u4f1a\u5728\u60a8\u521b\u5efa Syslog \u6444\u53d6\u65f6\u63d0\u4f9b\uff0c\u5e76\u5728\u6ca1\u6709 Syslog \u6444\u53d6\u65f6\u81ea\u52a8\u5220\u9664\u3002 \u56fe 7\uff1aSyslog \u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u67b6\u6784 Syslog \u4ee3\u7406\uff08\u5982 Rsyslog \uff09\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u65e5\u5fd7\u901a\u79c1\u6709\u5b50\u7f51\u4e2d\u7684\u7f51\u7edc\u8d1f\u8f7d\u5747\u8861\u5668 (NLB)\u3002NLB \u4f1a\u5c06\u65e5\u5fd7\u8def\u7531\u5230\u7279\u5b9a\u7684 Amazon Elastic Container Service (ECS) Fargate \u670d\u52a1\u3002 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230\u53ef\u9009\u7684 Log Buffer \uff0c\u6216\u76f4\u63a5\u6444\u53d6\u5230 OpenSearch \u57df\u4e2d\u3002 Log Buffer \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230Amazon OpenSearch Service\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002","title":"\u67b6\u6784\u56fe"},{"location":"implementation-guide/architecture/#aws","text":"\u65e5\u5fd7\u901a\u652f\u6301 AWS \u670d\u52a1\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7\u3002 \u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730\uff0c\u5305\u62ec Amazon S3 \u5b58\u50a8\u6876\u3001CloudWatch \u65e5\u5fd7\u7ec4\u3001Kinesis Data Streams \u548c Kinesis Firehose\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\u7a0b\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\u3002 \u6ce8\u610f \u65e5\u5fd7\u901a\u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684\u65e5\u5fd7\u901a\u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002","title":"AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture/#amazon-s3","text":"\u6ce8\u610f \u672c\u8282\u9002\u7528\u4e8e\uff1a Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\uff0cCloudFront \u6807\u51c6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (S3)\uff0cApplication Load Balancing \u8bbf\u95ee\u65e5\u5fd7\uff0cWAF \u65e5\u5fd7\uff0cVPC \u6d41 \u65e5\u5fd7 (S3)\uff0cAWS Config \u65e5\u5fd7\uff0cAmazon RDS/Aurora \u65e5\u5fd7\uff0cAWS Lambda \u65e5\u5fd7\u3002 \u6b64\u5de5\u4f5c\u6d41\u652f\u6301\u4ee5\u4e0b\u4e24\u4e2a\u7c7b\u522b\uff1a \u76f4\u63a5\u8bb0\u5f55\u5230Amazon S3\u6876\u7684\u65e5\u5fd7(OpenSearch\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u8be5AWS\u670d\u52a1\u53ef\u4ee5\u76f4\u63a5\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230 Amazon S3 \u6876\u3002 \u56fe 2\uff1a\u7528\u4e8e\u5206\u6790\u901a\u8fc7Amazon S3\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u901a\u8fc7Kinesis Data Firehose (KDF) \u8bb0\u5f55\u5230Amazon S3\u6876\u7684\u65e5\u5fd7(OpenSearch\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u8be5AWS\u670d\u52a1\u4e0d\u80fd\u76f4\u63a5\u5c06\u65e5\u5fd7\u653e\u5165 Amazon S3 \u6876\uff0c\u800c\u662f\u53ea\u80fd\u8bb0\u5f55\u5230 Amazon CloudWatch\u3002 \u4f7f\u7528 KDF \u5148\u4eceCloudWatch \u65e5\u5fd7\u7ec4\u8ba2\u9605\u65e5\u5fd7\uff0c\u7136\u540e\u653e\u5165Amazon S3\u6876\u3002 \u56fe 3\uff1a\u7528\u4e8e\u5206\u6790\u901a\u8fc7 KDF \u8bb0\u5f55\u5230 Amazon S3\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\uff08\u65e5\u5fd7\u6876\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\u4f1a\u901a\u8fc7 S3 \u4e8b\u4ef6\u901a\u77e5 \u5411 Amazon SQS \u53d1\u9001\u901a\u77e5\u3002 Amazon SQS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u5c06\u65e5\u5fd7\u63d0\u53d6\u5230 Amazon OpenSearch \u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 S3 \u6876\u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728\u65e5\u5fd7\u901a \u7684\u8d26\u6237\u4e2d\u3002 \u76f4\u63a5\u8bb0\u5f55\u5230Amazon S3\u6876\u7684\u65e5\u5fd7(Light Engine\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u8be5AWS\u670d\u52a1\u53ef\u4ee5\u76f4\u63a5\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230 Amazon S3 \u6876\u3002 \u56fe\uff1a\u7528\u4e8e\u5206\u6790\u901a\u8fc7Amazon S3\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS\u670d\u52a1\u7684\u65e5\u5fd7\u5b58\u50a8\u5728Amazon S3\u5b58\u50a8\u6876\uff08Log Bucket\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\uff0c\u5c06\u4f7f\u7528 S3 \u4e8b\u4ef6\u901a\u77e5\u5c06\u4e8b\u4ef6\u901a\u77e5\u53d1\u9001\u5230 Amazon SQS\u3002 Amazon SQS \u89e6\u53d1 Amazon Lambda \u6267\u884c\u3002 AWS Lambda \u4ece Amazon S3 \u65e5\u5fd7\u5b58\u50a8\u6876\u83b7\u53d6\u5bf9\u8c61\u3002 AWS Lambda \u5c06\u5bf9\u8c61\u653e\u5165\u6682\u5b58\u6876\u4e2d\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u6279\u91cf\u5904\u7406\u5b58\u50a8\u5728\u6682\u5b58\u5b58\u50a8\u6876\u4e2d\u7684\u539f\u59cb\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u5c06\u65e5\u5fd7\u6570\u636e\u8f6c\u6362\u4e3a Apache Parquet \u683c\u5f0f\uff0c\u5e76\u6839\u636e\u65f6\u95f4\u548c\u533a\u57df\u7b49\u6761\u4ef6\u81ea\u52a8\u5bf9\u6240\u6709\u4f20\u5165\u6570\u636e\u8fdb\u884c\u5206\u533a\u3002","title":"\u901a\u8fc7 Amazon S3 \u63d0\u53d6\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#amazon-kinesis-data-streams-kds","text":"\u6ce8\u610f \u672c\u8282\u9002\u7528\u4e8e\uff1aCloudFront \u5b9e\u65f6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (CloudWatch)\uff0cVPC \u6d41\u65e5\u5fd7 (CloudWatch). \u6b64\u5de5\u4f5c\u6d41\u652f\u6301\u4ee5\u4e0b\u4e24\u4e2a\u7c7b\u522b\uff1a \u76f4\u63a5\u8bb0\u5f55\u5230Amazon KDS \u7684\u5b9e\u65f6\u65e5\u5fd7 \u8be5AWS\u670d\u52a1\u53ef\u4ee5\u76f4\u63a5\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon KDS . \u56fe 4\uff1a\u7528\u4e8e\u5206\u6790 \u901a\u8fc7 KDS \u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u4f7f\u7528Amazon KDS \u8ba2\u9605\u7684\u5b9e\u65f6\u6d41\u65e5\u5fd7 \u8be5AWS\u670d\u52a1\u5c06\u65e5\u5fd7\u8bb0\u5f55\u5230 Amazon CloudWatch\u3002\u4f7f\u7528 KDS \u4eceCloudWatch \u65e5\u5fd7\u7ec4\u8ba2\u9605\u5b9e\u65f6\u6d41\u65e5\u5fd7\u3002 \u56fe 5\uff1a\u7528\u4e8e\u5206\u6790 \u901a\u8fc7 KDS\u8ba2\u9605 \u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS\u670d\u52a1\u65e5\u5fd7\u5b9e\u65f6\u7684\u53d1\u9001\u5230 to Kinesis Data Stream. Amazon KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u57df\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 CloudWatch \u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728\u65e5\u5fd7\u901a\u7684\u8d26\u6237\u4e2d\u3002 \u91cd\u8981 \u6b64\u89e3\u51b3\u65b9\u6848\u4e0d\u652f\u6301 CloudFront \u5b9e\u65f6\u65e5\u5fd7\u7684\u8de8\u8d26\u6237\u6444\u53d6\u3002","title":"\u901a\u8fc7 Amazon Kinesis Data Streams (KDS) \u63d0\u53d6\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#_1","text":"\u65e5\u5fd7\u901a\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u6216\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u6ce8\u610f \u65e5\u5fd7\u901a\u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684\u65e5\u5fd7\u901a \u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002","title":"\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture/#amazon-ec2-amazon-eks","text":"\u6765\u81ea Amazon EC2/ Amazon EKS\u7684\u65e5\u5fd7(OpenSearch\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u56fe 6\uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230\u53ef\u9009\u7684 Log Buffer \uff0c\u6216\u76f4\u63a5\u6444\u53d6\u5230 OpenSearch \u57df\u4e2d\u3002 Log Buffer \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u57df\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u81ea Amazon EC2/ Amazon EKS\u7684\u65e5\u5fd7(Light Engine\u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce) \u56fe \uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u5c06\u5176\u53d1\u9001\u5230\u53ef\u9009\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u3002 Log Buffer \u89e6\u53d1 Lambda \u5c06\u65e5\u5fd7\u5b58\u50a8\u6876\u4e2d\u7684\u5bf9\u8c61\u590d\u5236\u5230\u6682\u5b58\u5b58\u50a8\u6876\u3002 Amazon SQS \u542f\u52a8 AWS Lambda\u3002 AWS Lambda \u4ece Amazon S3 \u65e5\u5fd7\u5b58\u50a8\u6876\u83b7\u53d6\u5bf9\u8c61\u3002 AWS Lambda \u5c06\u5bf9\u8c61\u653e\u5165\u6682\u5b58\u6876\u4e2d\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u6279\u91cf\u5904\u7406\u5b58\u50a8\u5728\u6682\u5b58\u5b58\u50a8\u6876\u4e2d\u7684\u539f\u59cb\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u5904\u7406\u5668 AWS Step Functions \u5c06\u65e5\u5fd7\u6570\u636e\u8f6c\u6362\u4e3a Apache Parquet \u683c\u5f0f\uff0c\u5e76\u6839\u636e\u65f6\u95f4\u548c\u533a\u57df\u7b49\u6761\u4ef6\u81ea\u52a8\u5bf9\u6240\u6709\u4f20\u5165\u6570\u636e\u8fdb\u884c\u5206\u533a\u3002","title":"\u6765\u81ea Amazon EC2 / Amazon EKS \u7684\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#syslog","text":"\u91cd\u8981 \u8bf7\u786e\u4fdd\u60a8\u7684 Syslog \u751f\u6210\u5668/\u53d1\u9001\u5668\u7684\u5b50\u7f51\u5df2\u8fde\u63a5\u5230\u65e5\u5fd7\u901a\u7684 \u4e24\u4e2a \u79c1\u6709\u5b50\u7f51\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u63d0\u53d6\u65e5\u5fd7\uff0c\u60a8\u9700\u8981\u4f7f\u7528 VPC Peering Connection \u6216 Transit Gateway \u8fde\u63a5\u8fd9\u4e9b VPC\u3002 \u67b6\u6784\u56fe\u4e2d\u7684 NLB \u548c ECS \u5bb9\u5668\u53ea\u4f1a\u5728\u60a8\u521b\u5efa Syslog \u6444\u53d6\u65f6\u63d0\u4f9b\uff0c\u5e76\u5728\u6ca1\u6709 Syslog \u6444\u53d6\u65f6\u81ea\u52a8\u5220\u9664\u3002 \u56fe 7\uff1aSyslog \u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u67b6\u6784 Syslog \u4ee3\u7406\uff08\u5982 Rsyslog \uff09\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u65e5\u5fd7\u901a\u79c1\u6709\u5b50\u7f51\u4e2d\u7684\u7f51\u7edc\u8d1f\u8f7d\u5747\u8861\u5668 (NLB)\u3002NLB \u4f1a\u5c06\u65e5\u5fd7\u8def\u7531\u5230\u7279\u5b9a\u7684 Amazon Elastic Container Service (ECS) Fargate \u670d\u52a1\u3002 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230\u53ef\u9009\u7684 Log Buffer \uff0c\u6216\u76f4\u63a5\u6444\u53d6\u5230 OpenSearch \u57df\u4e2d\u3002 Log Buffer \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230Amazon OpenSearch Service\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002","title":"\u6765\u81ea Syslog \u5ba2\u6237\u7aef\u7684\u65e5\u5fd7"},{"location":"implementation-guide/faq/","text":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 \u4e00\u822c\u95ee\u9898 \u95ee\uff1a\u4ec0\u4e48\u662f\u65e5\u5fd7\u901a\uff1f \u65e5\u5fd7\u901a\u662f\u4e00\u4e2a AWS \u89e3\u51b3\u65b9\u6848\uff0c\u7b80\u5316\u4e86\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u6784\u5efa\u3002\u4f5c\u4e3a Amazon OpenSearch \u670d\u52a1\u7684\u8865\u5145\uff0c\u5b83\u4e3a\u5ba2\u6237\u63d0\u4f9b\u4e86\u6444\u53d6\u548c\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u529f\u80fd\u548c AWS \u670d\u52a1\u65e5\u5fd7\uff0c\u5e76\u4ece\u5f00\u7bb1\u5373\u7528\u7684\u6a21\u677f\u4e2d\u521b\u5efa\u53ef\u89c6\u5316\u7684\u4eea\u8868\u76d8\u3002\u65e5\u5fd7\u901a\u81ea\u52a8\u7ec4\u88c5\u5e95\u5c42\u7684AWS\u670d\u52a1\uff0c\u5e76\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a Web \u63a7\u5236\u53f0\u6765\u7ba1\u7406\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u95ee\uff1a\u8be5\u89e3\u51b3\u65b9\u6848\u4e2d\u652f\u6301\u54ea\u4e9b\u65e5\u5fd7\uff1f \u65e5\u5fd7\u901a\u540c\u65f6\u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u548c EC2/EKS \u5e94\u7528\u65e5\u5fd7\u3002\u8bf7\u53c2\u8003 \u652f\u6301\u7684 AWS \u670d\u52a1 \u3002 \u548c \u652f\u6301\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u683c\u5f0f\u548c\u6765\u6e90 \u4e86\u89e3\u66f4\u591a\u7ec6\u8282\u3002 \u95ee\uff1a\u65e5\u5fd7\u901a\u662f\u5426\u652f\u6301\u4ece\u591a\u4e2aAWS\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff1f \u662f\u7684\u3002\u4ece v1.1.0 \u7248\u5f00\u59cb\uff0c\u65e5\u5fd7\u901a\u652f\u6301\u4ece\u540c\u4e00\u5730\u533a\u7684\u4e0d\u540c AWS \u8d26\u6237\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u5728\u540c\u4e00\u5730\u533a\u7684\u4e0d\u540c AWS \u8d26\u6237\u4e2d\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u95ee\uff1a\u65e5\u5fd7\u901a\u662f\u5426\u652f\u6301\u4ece\u591a\u4e2aAWS\u533a\u57df\u6444\u53d6\u65e5\u5fd7\uff1f \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u5e76\u4e0d\u81ea\u52a8\u4ece\u4e0d\u540c\u7684 AWS \u533a\u57df\u6444\u53d6\u65e5\u5fd7\u3002\u4f60\u9700\u8981\u4ece\u5176\u4ed6\u5730\u533a\u6444\u53d6\u65e5\u5fd7 \u6444\u53d6\u5230\u7531\u65e5\u5fd7\u901a \u63d0\u4f9b\u7684\u7ba1\u7ebf\u4e2d\u3002\u5bf9\u4e8e\u5728 S3 \u6876\u4e2d\u5b58\u50a8\u65e5\u5fd7\u7684AWS\u670d\u52a1\uff0c\u4f60\u53ef\u4ee5\u5229\u7528 S3\u8de8\u533a\u57df\u590d\u5236 \u5c06\u65e5\u5fd7\u590d\u5236\u5230\u65e5\u5fd7\u901a \u90e8\u7f72\u7684\u533a\u57df\uff0c\u5e76\u4f7f\u7528 \u624b\u52a8\u6a21\u5f0f \u5bfc\u5165\u589e\u91cf\u65e5\u5fd7\uff0c\u6307\u5b9a S3 \u6876\u4e2d\u7684\u65e5\u5fd7\u4f4d\u7f6e\u3002\u5bf9\u4e8e EC2 \u548c EKS \u4e0a\u7684\u5e94\u7528\u65e5\u5fd7\uff0c\u4f60\u9700\u8981\u8bbe\u7f6e\u7f51\u7edc\uff08\u4f8b\u5982\uff0cKinesis VPC \u7aef\u70b9\uff0cVPC \u5bf9\u7b49\uff09\u3002 \u5b89\u88c5\u4ee3\u7406\uff0c\u5e76\u914d\u7f6e\u4ee3\u7406\uff0c\u5c06\u65e5\u5fd7\u6444\u5165\u5230\u65e5\u5fd7\u901a \u7ba1\u9053\u3002 \u95ee\uff1a\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u7684\u8bb8\u53ef\u8bc1\u662f\u4ec0\u4e48\uff1f \u672c\u89e3\u51b3\u65b9\u6848\u662f\u6839\u636e Apache-2.0\u8bb8\u53ef\u8bc1 \u63d0\u4f9b\u7684\u3002 \u5b83\u662f\u4e00\u4e2a\u7531 Apache \u8f6f\u4ef6\u57fa\u91d1\u4f1a\u7f16\u5199\u7684\u81ea\u7531\u8f6f\u4ef6\u8bb8\u53ef\u8bc1\u3002 \u5b83\u5141\u8bb8\u7528\u6237\u4e3a\u4efb\u4f55\u76ee\u7684\u4f7f\u7528\u8be5\u8f6f\u4ef6\uff0c\u5206\u53d1\u3001\u4fee\u6539\u8be5\u8f6f\u4ef6\uff0c\u5e76\u6839\u636e\u8bb8\u53ef\u8bc1\u7684\u6761\u6b3e\u5206\u53d1\u8be5\u8f6f\u4ef6\u7684\u4fee\u6539\u7248\u672c\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u7248\u6743\u8d39\u3002 \u95ee\uff1a\u6211\u600e\u6837\u624d\u80fd\u627e\u5230\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u7684\u8def\u7ebf\u56fe\uff1f \u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u4f7f\u7528GitHub\u9879\u76ee\u6765\u7ba1\u7406 \u8def\u7ebf\u56fe \u3002 \u95ee\uff1a\u6211\u5982\u4f55\u63d0\u4ea4\u529f\u80fd\u8bf7\u6c42\u6216\u9519\u8bef\u62a5\u544a\uff1f \u4f60\u53ef\u4ee5\u901a\u8fc7GitHub\u95ee\u9898\u63d0\u4ea4 \u529f\u80fd\u8bf7\u6c42 \u548c \u9519\u8bef\u62a5\u544a \u3002 \u8bbe\u7f6e\u548c\u914d\u7f6e \u95ee\uff1a\u6211\u53ef\u4ee5\u5728\u4efb\u4f55AWS\u533a\u57df\u7684AWS\u4e0a\u90e8\u7f72\u65e5\u5fd7\u901a\u5417\uff1f \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e24\u79cd\u90e8\u7f72\u65b9\u6848\uff1a\u65b9\u6848\u4e00\u4f7f\u7528 Cognito \u7528\u6237\u6c60\uff0c\u65b9\u6848\u4e8c\u4f7f\u7528OpenID\u8fde\u63a5\u3002\u5bf9\u4e8e \u65b9\u6848\u4e00\uff0c\u5ba2\u6237\u53ef\u4ee5\u5728\u6709Amazon Cognito User Pool\u3001AWS AppSync\u3001Amazon Kinesis Data Firehose\uff08\u53ef\u9009\uff09\u7684AWS\u5730\u533a\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u3002 \u5bf9\u4e8e\u65b9\u6848\u4e8c\uff0c\u5ba2\u6237\u53ef\u4ee5\u5728\u6709AWS AppSync\u3001Amazon Kinesis Data Firehose\uff08\u53ef\u9009\uff09\u7684AWS\u5730\u533a\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u3002 \u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u8003 \u652f\u6301\u7684\u90e8\u7f72\u533a\u57df \u3002 \u95ee\uff1a\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u7684\u524d\u63d0\u6761\u4ef6\u662f\u4ec0\u4e48\uff1f \u65e5\u5fd7\u901a\u4e0d\u63d0\u4f9b Amazon OpenSearch \u96c6\u7fa4\uff0c\u4f60\u9700\u8981\u901a\u8fc7 Web \u63a7\u5236\u53f0\u5bfc\u5165\u73b0\u6709\u7684 OpenSearch \u96c6\u7fa4\u3002\u8be5\u96c6\u7fa4 \u5fc5\u987b\u6ee1\u8db3 prerequisites \u4e2d\u6307\u5b9a\u7684\u8981\u6c42\u3002 \u95ee\uff1a\u4e3a\u4ec0\u4e48\u5728AWS\u4e2d\u56fd\u533a\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u65f6\uff0c\u6211\u9700\u8981\u4e00\u4e2a\u6709ICP\u5907\u6848\u7684\u57df\u540d\uff1f \u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u662f\u901a\u8fc7 CloudFront \u5206\u53d1\u7684\uff0c\u5b83\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u4e92\u8054\u7f51\u4fe1\u606f\u670d\u52a1\u3002\u6839\u636e \u6839\u636e\u5f53\u5730\u7684\u89c4\u5b9a\uff0c\u4efb\u4f55\u4e92\u8054\u7f51\u4fe1\u606f\u670d\u52a1\u90fd\u5fc5\u987b\u7ed1\u5b9a\u4e00\u4e2a\u5e26\u6709 ICP\u5907\u6848 \u7684\u57df\u540d\u3002 \u95ee\uff1a\u8be5\u89e3\u51b3\u65b9\u6848\u9002\u7528\u4e8e\u54ea\u4e9b\u7248\u672c\u7684 OpenSearch\uff1f \u65e5\u5fd7\u901a\u652f\u6301 Amazon OpenSearch Service\uff0cAmazon OpenSearch 1.3\u53ca\u4ee5\u4e0a\u3002 \u95ee\uff1a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u7684 OpenSearch \u7684\u7d22\u5f15\u540d\u79f0\u89c4\u5219\u662f\u4ec0\u4e48\uff1f \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u4fee\u6539\u7d22\u5f15\u540d\u79f0\u3002 \u5728\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0c\u5982\u679c\u60a8\u521b\u5efa\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u662f\u5c5e\u4e8e\u670d\u52a1\u65e5\u5fd7\uff0c\u7d22\u5f15\u540d\u79f0\u7531 <index prefix> - <service-type> - <index suffix> -<00000x> \u7ec4\u6210\u3002\u5176\u4e2d index prefix \u60a8\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u540d\u79f0\u3002service-type \u662f\u6839\u636e\u60a8\u9009\u62e9\u7684\u670d\u52a1\u7c7b\u578b\uff0c\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\u3002\u5173\u4e8e index suffix \u60a8\u53ef\u4ee5\u9009\u62e9\u4e0d\u540c\u7684\u540e\u7f00\u6765\u8c03\u6574\u7d22\u5f15\u6eda\u52a8\u65f6\u95f4\u7a97\u53e3\uff0c\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003\u5982\u4e0b\uff1a YYYY-MM-DD-HH\uff1aAmazon OpenSearch \u5c06\u6309\u5c0f\u65f6\u6eda\u52a8\u7d22\u5f15\uff1b YYYY-MM-DD\uff1aAmazon OpenSearch \u5c06\u630924\u5c0f\u65f6\u6eda\u52a8\u7d22\u5f15\uff1b YYYY-MM\uff1aAmazon OpenSearch \u5c06\u630930\u5929\u6eda\u52a8\u7d22\u5f15\uff1b YYYY\uff1aAmazon OpenSearch \u5c06\u6309365\u5929\u6eda\u52a8\u7d22\u5f15\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\u5728 OpenSearch \u4e2d\uff0c\u65f6\u95f4\u91c7\u7528\u7684\u662fUTC 0\u65f6\u533a\u3002 \u5173\u4e8e 00000x \u90e8\u5206\uff0c\u662f Amazon OpenSearch \u4f1a\u81ea\u52a8\u5728\u7d22\u5f15\u540d\u79f0\u540e\u9644\u52a0\u4e00\u4e2a 6 \u4f4d\u6570\u5b57\u7684\u540e\u7f00\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u7d22\u5f15\u89c4\u5219\u4e3a 000001, \u6839\u636e\u7d22\u5f15\u6eda\u52a8\uff0c\u5411\u540e\u4f9d\u6b21\u9012\u589e\uff0c\u4f8b\u5982 000002\uff0c 000003\u3002 \u5982\u679c\u60a8\u521b\u5efa\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u662f\u5c5e\u4e8e\u5e94\u7528\u65e5\u5fd7\uff0c\u7d22\u5f15\u524d\u7f00\u7531 <index prefix> - <index suffix> -<00000x> \u7ec4\u6210\u3002index prefix \u4e0e index suffix \uff0c00000x \u7684\u89c4\u5219\u4e0e\u670d\u52a1\u65e5\u5fd7\u7684\u76f8\u540c\u3002 \u95ee\uff1a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u7684\u7d22\u5f15\u6eda\u52a8\u89c4\u5219\u662f\u4ec0\u4e48\uff1f \u7d22\u5f15\u6eda\u52a8\u7531\u4e24\u4e2a\u56e0\u7d20\u51b3\u5b9a\uff0c\u7b2c\u4e00\u4e2a\u7531\u7d22\u5f15\u540d\u79f0\u4e2d\u7684 index suffix \u51b3\u5b9a\u3002\u7b2c\u4e8c\u4e2a\uff0c\u5982\u679c\u60a8\u542f\u7528\u4e86\u6309\u5bb9\u91cf\u6eda\u52a8\u7d22\u5f15\uff0c\u5f53\u7d22\u5f15\u5927\u5c0f\u7b49\u4e8e\u6216\u8d85\u8fc7\u6307\u5b9a\u5927\u5c0f\u65f6\uff0cAmazon OpenSearch \u5c06\u6eda\u52a8\u60a8\u7684\u7d22\u5f15\uff0c\u800c\u4e0d\u7ba1\u6eda\u52a8\u65f6\u95f4\u7a97\u53e3\u5982\u4f55\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u4e24\u4e2a\u56e0\u7d20\u53ea\u8981\u6709\u4e00\u4e2a\u7b26\u5408\uff0c\u5373\u53ef\u89e6\u53d1\u7d22\u5f15\u6eda\u52a8\u3002\u4f8b\u5982\uff1a\u6211\u4eec\u57282023\u5e741\u67081\u65e5\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u5e76\u4e8e2023\u5e741\u67084\u65e59\u70b9\u5220\u9664\u4e86\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u7d22\u5f15\u540d\u79f0\u662f nginx-YYYY-MM-DD-<00000x> \u3002\u540c\u65f6\uff0c\u6211\u4eec\u542f\u7528\u4e86\u6309\u5bb9\u91cf\u6eda\u52a8\u7d22\u5f15\uff0c\u5e76\u8f93\u5165 300GB \uff0c\u5047\u5982\u521b\u5efa\u540e\u65e5\u5fd7\u6570\u636e\u91cf\u7a81\u589e\uff0c\u6bcf\u96941\u5c0f\u65f6\u5373\u53ef\u8fbe\u5230 300GB \uff0c\u6301\u7eed\u65f6\u95f4\u4e3a2\u5c0f\u65f610\u5206\u949f\uff0c\u4e4b\u540e\u6062\u590d\u6b63\u5e38\uff0c\u6bcf\u65e5\u6570\u636e\u91cf\u4e3a 90GB \u3002\u5219 OpenSearch \u57281\u67081\u65e5\u521b\u5efa\u4e09\u4e2a\u7d22\u5f15\uff0c\u7d22\u5f15\u540d\u79f0\u4e3a nginx-2023-01-01-000001 \uff0cnginx-2023-01-01-000002\uff0cnginx-2023-01-01-000003\uff0c \u4e4b\u540e\u6bcf\u65e5\u521b\u5efa\u4e00\u6761\u7d22\u5f15\uff0c\u5206\u522b\u4e3a\uff1anginx-2023-01-02-000004\uff0c nginx-2023-01-03-000005\uff0cnginx-2023-01-04-000006\u3002 \u95ee\uff1a\u6211\u53ef\u4ee5\u5728\u73b0\u6709 VPC \u4e2d\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u5417\uff1f \u662f\u7684\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65b0 VPC \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u73b0\u6709 VPC \u542f\u52a8\u89e3\u51b3\u65b9\u6848\u3002 \u5f53\u4f7f\u7528\u73b0\u6709\u7684 VPC\uff0c\u9700\u8981\u9009\u62e9VPC\u548c\u5bf9\u5e94\u7684\u5b50\u7f51\u3002 \u53c2\u8003 \u4f7f\u7528 Cognito \u7528\u6237\u6c60\u542f\u52a8 \u6216 \u4f7f\u7528 OpenID Connect \u542f\u52a8 \u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u95ee\uff1a\u4f7f\u7528 Cognito \u7528\u6237\u6c60\u542f\u52a8\u65f6\uff0c\u6211\u6ca1\u6709\u6536\u5230\u5305\u542b\u4e34\u65f6\u5bc6\u7801\u7684\u7535\u5b50\u90ae\u4ef6\u3002 \u5982\u4f55\u91cd\u65b0\u53d1\u9001\u5bc6\u7801\uff1f \u60a8\u7684\u5e10\u6237\u7531 Cognito \u7528\u6237\u6c60\u7ba1\u7406\u3002 \u7b2c\u4e00\u6b21\u91cd\u53d1\u4e34\u65f6\u5bc6\u7801\uff0c\u53ef\u4ee5\u627e\u5230\u7528\u6237\u6c60 \u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684\u7528\u6237\uff0c\u5220\u9664\u5e76\u4f7f\u7528\u76f8\u540c\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u91cd\u65b0\u521b\u5efa\u7528\u6237\u3002 \u5982\u679c\u60a8\u4ecd\u7136\u9047\u5230\u540c\u6837\u7684\u95ee\u9898\uff0c \u5c1d\u8bd5\u4f7f\u7528\u53e6\u4e00\u4e2a\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u95ee\uff1a\u5982\u4f55\u4e3a\u8be5\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u66f4\u591a\u7528\u6237\uff1f \u5982\u679c\u60a8\u4f7f\u7528 Cognito \u7528\u6237\u6c60\u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u8f6c\u5230 AWS \u63a7\u5236\u53f0\uff0c\u627e\u5230\u8be5\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684\u7528\u6237\u6c60\uff0c \u60a8\u53ef\u4ee5\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u5982\u679c\u60a8\u4f7f\u7528 OpenID Connect (OIDC) \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u5e94\u5728 \u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u7684\u7528\u6237\u6c60\u3002 \u8bf7\u6ce8\u610f\uff0c\u6240\u6709\u7528\u6237\u90fd\u5177\u6709\u76f8\u540c\u7684\u6743\u9650\u3002 \u6210\u672c \u95ee\uff1a\u4f7f\u7528\u6b64\u89e3\u51b3\u65b9\u6848\u5982\u4f55\u6536\u8d39\u548c\u8ba1\u8d39\uff1f \u8be5\u89e3\u51b3\u65b9\u6848\u53ef\u514d\u8d39\u4f7f\u7528\uff0c\u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u8be5\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u7684 AWS \u670d\u52a1\u7684\u8d39\u7528\u3002 \u60a8\u53ea\u9700\u4e3a\u4f7f\u7528\u7684\u5185\u5bb9\u4ed8\u8d39\uff0c\u6ca1\u6709\u6700\u4f4e\u8d39\u7528\u6216\u8bbe\u7f6e\u8d39\u7528\u3002 \u6709\u5173\u8be6\u7ec6\u7684\u6210\u672c\u4f30\u7b97\uff0c\u8bf7\u53c2\u9605 \u6210\u672c \u90e8\u5206\u3002 \u95ee\uff1a\u8de8\u8d26\u6237\u6444\u53d6\u4f1a\u4ea7\u751f\u989d\u5916\u8d39\u7528\u5417\uff1f \u4e0d\u4f1a\u3002\u8d39\u7528\u4e0e AWS \u8d26\u6237\u4e2d\u63d0\u53d6\u65e5\u5fd7\u7684\u8d39\u7528\u76f8\u540c\u3002 \u65e5\u5fd7\u6444\u53d6 \u95ee\uff1a\u89e3\u51b3\u65b9\u6848\u4e2d\u4f7f\u7528\u7684\u65e5\u5fd7\u4ee3\u7406\u662f\u4ec0\u4e48\uff1f \u65e5\u5fd7\u901a\u4f7f\u7528 AWS for Fluent Bit \uff0c\u8fd9\u662f\u7531 AWS \u7ef4\u62a4\u7684 Fluent Bit \u7684\u4e00\u4e2a\u53d1\u884c\u7248\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u6b64\u5206\u914d\u4ece Amazon EC2 \u548c Amazon EKS \u63d0\u53d6\u65e5\u5fd7\u3002 \u95ee\uff1a\u6211\u5df2\u7ecf\u5c06\u4f1a\u5458\u8d26\u6237\u7684AWS\u670d\u52a1\u65e5\u5fd7\u5b58\u50a8\u5728\u4e00\u4e2a\u96c6\u4e2d\u7684\u65e5\u5fd7\u8d26\u6237\u4e2d\u3002\u6211\u5e94\u8be5\u5982\u4f55\u4e3a\u4f1a\u5458\u5e10\u6237\u521b\u5efa\u670d\u52a1\u65e5\u5fd7\u6444\u53d6\uff1f \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5728\u96c6\u4e2d\u65e5\u5fd7\u8d26\u6237\u4e2d\u90e8\u7f72\u65b9\u6848\uff0c\u5e76\u6444\u53d6AWS\u670d\u52a1\u65e5\u5fd7 \u4f7f\u7528\u767b\u5f55\u5e10\u6237\u7684 \u624b\u52a8 \u6a21\u5f0f\u3002\u8bf7\u53c2\u9605\u6b64 \u6307\u5357 \u4ee5\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f \u8d1f\u8f7d\u5747\u8861\u5668\u4ee5 \u624b\u52a8 \u6a21\u5f0f\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u5bf9\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 S3 \u7684\u5176\u4ed6\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002 \u95ee\uff1a\u4e3a\u4ec0\u4e48\u5728\u901a\u8fc7 Kinesis Data Streams \u6444\u53d6\u65e5\u5fd7\u65f6\uff0cOpenSearch \u4e2d\u6709\u4e00\u4e9b\u91cd\u590d\u7684\u8bb0\u5f55\uff1f \u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684 Kinesis \u788e\u7247\u6765\u5904\u7406\u4f20\u5165\u7684\u8bf7\u6c42\u3002\u53d1\u751f\u9608\u503c\u9519\u8bef\u65f6 \u5728 Kinesis \u4e2d\uff0cFluent Bit \u4ee3\u7406\u5c06 \u91cd\u8bd5 \u90a3\u4e2a \u5757 \u3002\u4e3a\u907f\u514d\u6b64\u95ee\u9898\uff0c\u60a8\u9700\u8981\u4f30\u8ba1\u65e5\u5fd7\u541e\u5410\u91cf\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684 Kinesis \u5206\u7247\u6570\u3002\u8bf7\u53c2\u9605 Kinesis Data Streams \u914d\u989d\u548c\u9650\u5236 \u3002 \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5185\u7f6e\u529f\u80fd\u6765\u6269\u5c55\u548c\u7f29\u51cf Kinesis \u5206\u7247\uff0c\u8fd9\u5c06\u9700\u8981\u51e0\u5206\u949f\u7684\u65f6\u95f4 \u6269\u5c55\u5230\u6240\u9700\u7684\u6570\u91cf\u3002 \u65e5\u5fd7\u53ef\u89c6\u5316 \u95ee\u3002\u5982\u4f55\u5728 OpenSearch \u4e2d\u627e\u5230\u5185\u7f6e\u4eea\u8868\u677f\uff1f \u8bf7\u53c2\u8003 AWS\u670d\u52a1\u65e5\u5fd7 \u548c \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7 \u81f3 \u67e5\u770b\u662f\u5426\u652f\u6301\u5185\u7f6e\u4eea\u8868\u677f\u3002\u60a8\u8fd8\u9700\u8981\u5728\u521b\u5efa\u65f6\u6253\u5f00 Sample Dashboard \u9009\u9879 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002\u4eea\u8868\u677f\u5c06\u63d2\u5165\u5230 Global Tenant \u4e0b\u7684 Amazon OpenSearch Service \u4e2d\u3002\u60a8\u53ef\u4ee5\u5207\u6362\u5230 \u6765\u81ea OpenSearch \u4eea\u8868\u677f\u53f3\u4e0a\u89d2\u7f16\u7801\u5668\u7684\u5168\u5c40\u79df\u6237\u3002","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"implementation-guide/faq/#_1","text":"","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"},{"location":"implementation-guide/faq/#_2","text":"\u95ee\uff1a\u4ec0\u4e48\u662f\u65e5\u5fd7\u901a\uff1f \u65e5\u5fd7\u901a\u662f\u4e00\u4e2a AWS \u89e3\u51b3\u65b9\u6848\uff0c\u7b80\u5316\u4e86\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u6784\u5efa\u3002\u4f5c\u4e3a Amazon OpenSearch \u670d\u52a1\u7684\u8865\u5145\uff0c\u5b83\u4e3a\u5ba2\u6237\u63d0\u4f9b\u4e86\u6444\u53d6\u548c\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u529f\u80fd\u548c AWS \u670d\u52a1\u65e5\u5fd7\uff0c\u5e76\u4ece\u5f00\u7bb1\u5373\u7528\u7684\u6a21\u677f\u4e2d\u521b\u5efa\u53ef\u89c6\u5316\u7684\u4eea\u8868\u76d8\u3002\u65e5\u5fd7\u901a\u81ea\u52a8\u7ec4\u88c5\u5e95\u5c42\u7684AWS\u670d\u52a1\uff0c\u5e76\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a Web \u63a7\u5236\u53f0\u6765\u7ba1\u7406\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u95ee\uff1a\u8be5\u89e3\u51b3\u65b9\u6848\u4e2d\u652f\u6301\u54ea\u4e9b\u65e5\u5fd7\uff1f \u65e5\u5fd7\u901a\u540c\u65f6\u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u548c EC2/EKS \u5e94\u7528\u65e5\u5fd7\u3002\u8bf7\u53c2\u8003 \u652f\u6301\u7684 AWS \u670d\u52a1 \u3002 \u548c \u652f\u6301\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u683c\u5f0f\u548c\u6765\u6e90 \u4e86\u89e3\u66f4\u591a\u7ec6\u8282\u3002 \u95ee\uff1a\u65e5\u5fd7\u901a\u662f\u5426\u652f\u6301\u4ece\u591a\u4e2aAWS\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff1f \u662f\u7684\u3002\u4ece v1.1.0 \u7248\u5f00\u59cb\uff0c\u65e5\u5fd7\u901a\u652f\u6301\u4ece\u540c\u4e00\u5730\u533a\u7684\u4e0d\u540c AWS \u8d26\u6237\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u5728\u540c\u4e00\u5730\u533a\u7684\u4e0d\u540c AWS \u8d26\u6237\u4e2d\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u95ee\uff1a\u65e5\u5fd7\u901a\u662f\u5426\u652f\u6301\u4ece\u591a\u4e2aAWS\u533a\u57df\u6444\u53d6\u65e5\u5fd7\uff1f \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u5e76\u4e0d\u81ea\u52a8\u4ece\u4e0d\u540c\u7684 AWS \u533a\u57df\u6444\u53d6\u65e5\u5fd7\u3002\u4f60\u9700\u8981\u4ece\u5176\u4ed6\u5730\u533a\u6444\u53d6\u65e5\u5fd7 \u6444\u53d6\u5230\u7531\u65e5\u5fd7\u901a \u63d0\u4f9b\u7684\u7ba1\u7ebf\u4e2d\u3002\u5bf9\u4e8e\u5728 S3 \u6876\u4e2d\u5b58\u50a8\u65e5\u5fd7\u7684AWS\u670d\u52a1\uff0c\u4f60\u53ef\u4ee5\u5229\u7528 S3\u8de8\u533a\u57df\u590d\u5236 \u5c06\u65e5\u5fd7\u590d\u5236\u5230\u65e5\u5fd7\u901a \u90e8\u7f72\u7684\u533a\u57df\uff0c\u5e76\u4f7f\u7528 \u624b\u52a8\u6a21\u5f0f \u5bfc\u5165\u589e\u91cf\u65e5\u5fd7\uff0c\u6307\u5b9a S3 \u6876\u4e2d\u7684\u65e5\u5fd7\u4f4d\u7f6e\u3002\u5bf9\u4e8e EC2 \u548c EKS \u4e0a\u7684\u5e94\u7528\u65e5\u5fd7\uff0c\u4f60\u9700\u8981\u8bbe\u7f6e\u7f51\u7edc\uff08\u4f8b\u5982\uff0cKinesis VPC \u7aef\u70b9\uff0cVPC \u5bf9\u7b49\uff09\u3002 \u5b89\u88c5\u4ee3\u7406\uff0c\u5e76\u914d\u7f6e\u4ee3\u7406\uff0c\u5c06\u65e5\u5fd7\u6444\u5165\u5230\u65e5\u5fd7\u901a \u7ba1\u9053\u3002 \u95ee\uff1a\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u7684\u8bb8\u53ef\u8bc1\u662f\u4ec0\u4e48\uff1f \u672c\u89e3\u51b3\u65b9\u6848\u662f\u6839\u636e Apache-2.0\u8bb8\u53ef\u8bc1 \u63d0\u4f9b\u7684\u3002 \u5b83\u662f\u4e00\u4e2a\u7531 Apache \u8f6f\u4ef6\u57fa\u91d1\u4f1a\u7f16\u5199\u7684\u81ea\u7531\u8f6f\u4ef6\u8bb8\u53ef\u8bc1\u3002 \u5b83\u5141\u8bb8\u7528\u6237\u4e3a\u4efb\u4f55\u76ee\u7684\u4f7f\u7528\u8be5\u8f6f\u4ef6\uff0c\u5206\u53d1\u3001\u4fee\u6539\u8be5\u8f6f\u4ef6\uff0c\u5e76\u6839\u636e\u8bb8\u53ef\u8bc1\u7684\u6761\u6b3e\u5206\u53d1\u8be5\u8f6f\u4ef6\u7684\u4fee\u6539\u7248\u672c\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u7248\u6743\u8d39\u3002 \u95ee\uff1a\u6211\u600e\u6837\u624d\u80fd\u627e\u5230\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u7684\u8def\u7ebf\u56fe\uff1f \u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u4f7f\u7528GitHub\u9879\u76ee\u6765\u7ba1\u7406 \u8def\u7ebf\u56fe \u3002 \u95ee\uff1a\u6211\u5982\u4f55\u63d0\u4ea4\u529f\u80fd\u8bf7\u6c42\u6216\u9519\u8bef\u62a5\u544a\uff1f \u4f60\u53ef\u4ee5\u901a\u8fc7GitHub\u95ee\u9898\u63d0\u4ea4 \u529f\u80fd\u8bf7\u6c42 \u548c \u9519\u8bef\u62a5\u544a \u3002","title":"\u4e00\u822c\u95ee\u9898"},{"location":"implementation-guide/faq/#_3","text":"\u95ee\uff1a\u6211\u53ef\u4ee5\u5728\u4efb\u4f55AWS\u533a\u57df\u7684AWS\u4e0a\u90e8\u7f72\u65e5\u5fd7\u901a\u5417\uff1f \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e24\u79cd\u90e8\u7f72\u65b9\u6848\uff1a\u65b9\u6848\u4e00\u4f7f\u7528 Cognito \u7528\u6237\u6c60\uff0c\u65b9\u6848\u4e8c\u4f7f\u7528OpenID\u8fde\u63a5\u3002\u5bf9\u4e8e \u65b9\u6848\u4e00\uff0c\u5ba2\u6237\u53ef\u4ee5\u5728\u6709Amazon Cognito User Pool\u3001AWS AppSync\u3001Amazon Kinesis Data Firehose\uff08\u53ef\u9009\uff09\u7684AWS\u5730\u533a\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u3002 \u5bf9\u4e8e\u65b9\u6848\u4e8c\uff0c\u5ba2\u6237\u53ef\u4ee5\u5728\u6709AWS AppSync\u3001Amazon Kinesis Data Firehose\uff08\u53ef\u9009\uff09\u7684AWS\u5730\u533a\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u3002 \u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u8003 \u652f\u6301\u7684\u90e8\u7f72\u533a\u57df \u3002 \u95ee\uff1a\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u7684\u524d\u63d0\u6761\u4ef6\u662f\u4ec0\u4e48\uff1f \u65e5\u5fd7\u901a\u4e0d\u63d0\u4f9b Amazon OpenSearch \u96c6\u7fa4\uff0c\u4f60\u9700\u8981\u901a\u8fc7 Web \u63a7\u5236\u53f0\u5bfc\u5165\u73b0\u6709\u7684 OpenSearch \u96c6\u7fa4\u3002\u8be5\u96c6\u7fa4 \u5fc5\u987b\u6ee1\u8db3 prerequisites \u4e2d\u6307\u5b9a\u7684\u8981\u6c42\u3002 \u95ee\uff1a\u4e3a\u4ec0\u4e48\u5728AWS\u4e2d\u56fd\u533a\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u65f6\uff0c\u6211\u9700\u8981\u4e00\u4e2a\u6709ICP\u5907\u6848\u7684\u57df\u540d\uff1f \u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u662f\u901a\u8fc7 CloudFront \u5206\u53d1\u7684\uff0c\u5b83\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u4e92\u8054\u7f51\u4fe1\u606f\u670d\u52a1\u3002\u6839\u636e \u6839\u636e\u5f53\u5730\u7684\u89c4\u5b9a\uff0c\u4efb\u4f55\u4e92\u8054\u7f51\u4fe1\u606f\u670d\u52a1\u90fd\u5fc5\u987b\u7ed1\u5b9a\u4e00\u4e2a\u5e26\u6709 ICP\u5907\u6848 \u7684\u57df\u540d\u3002 \u95ee\uff1a\u8be5\u89e3\u51b3\u65b9\u6848\u9002\u7528\u4e8e\u54ea\u4e9b\u7248\u672c\u7684 OpenSearch\uff1f \u65e5\u5fd7\u901a\u652f\u6301 Amazon OpenSearch Service\uff0cAmazon OpenSearch 1.3\u53ca\u4ee5\u4e0a\u3002 \u95ee\uff1a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u7684 OpenSearch \u7684\u7d22\u5f15\u540d\u79f0\u89c4\u5219\u662f\u4ec0\u4e48\uff1f \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u4fee\u6539\u7d22\u5f15\u540d\u79f0\u3002 \u5728\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0c\u5982\u679c\u60a8\u521b\u5efa\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u662f\u5c5e\u4e8e\u670d\u52a1\u65e5\u5fd7\uff0c\u7d22\u5f15\u540d\u79f0\u7531 <index prefix> - <service-type> - <index suffix> -<00000x> \u7ec4\u6210\u3002\u5176\u4e2d index prefix \u60a8\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u540d\u79f0\u3002service-type \u662f\u6839\u636e\u60a8\u9009\u62e9\u7684\u670d\u52a1\u7c7b\u578b\uff0c\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\u3002\u5173\u4e8e index suffix \u60a8\u53ef\u4ee5\u9009\u62e9\u4e0d\u540c\u7684\u540e\u7f00\u6765\u8c03\u6574\u7d22\u5f15\u6eda\u52a8\u65f6\u95f4\u7a97\u53e3\uff0c\u8be6\u7ec6\u8bf4\u660e\u53c2\u8003\u5982\u4e0b\uff1a YYYY-MM-DD-HH\uff1aAmazon OpenSearch \u5c06\u6309\u5c0f\u65f6\u6eda\u52a8\u7d22\u5f15\uff1b YYYY-MM-DD\uff1aAmazon OpenSearch \u5c06\u630924\u5c0f\u65f6\u6eda\u52a8\u7d22\u5f15\uff1b YYYY-MM\uff1aAmazon OpenSearch \u5c06\u630930\u5929\u6eda\u52a8\u7d22\u5f15\uff1b YYYY\uff1aAmazon OpenSearch \u5c06\u6309365\u5929\u6eda\u52a8\u7d22\u5f15\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\u5728 OpenSearch \u4e2d\uff0c\u65f6\u95f4\u91c7\u7528\u7684\u662fUTC 0\u65f6\u533a\u3002 \u5173\u4e8e 00000x \u90e8\u5206\uff0c\u662f Amazon OpenSearch \u4f1a\u81ea\u52a8\u5728\u7d22\u5f15\u540d\u79f0\u540e\u9644\u52a0\u4e00\u4e2a 6 \u4f4d\u6570\u5b57\u7684\u540e\u7f00\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u7d22\u5f15\u89c4\u5219\u4e3a 000001, \u6839\u636e\u7d22\u5f15\u6eda\u52a8\uff0c\u5411\u540e\u4f9d\u6b21\u9012\u589e\uff0c\u4f8b\u5982 000002\uff0c 000003\u3002 \u5982\u679c\u60a8\u521b\u5efa\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u662f\u5c5e\u4e8e\u5e94\u7528\u65e5\u5fd7\uff0c\u7d22\u5f15\u524d\u7f00\u7531 <index prefix> - <index suffix> -<00000x> \u7ec4\u6210\u3002index prefix \u4e0e index suffix \uff0c00000x \u7684\u89c4\u5219\u4e0e\u670d\u52a1\u65e5\u5fd7\u7684\u76f8\u540c\u3002 \u95ee\uff1a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u7684\u7d22\u5f15\u6eda\u52a8\u89c4\u5219\u662f\u4ec0\u4e48\uff1f \u7d22\u5f15\u6eda\u52a8\u7531\u4e24\u4e2a\u56e0\u7d20\u51b3\u5b9a\uff0c\u7b2c\u4e00\u4e2a\u7531\u7d22\u5f15\u540d\u79f0\u4e2d\u7684 index suffix \u51b3\u5b9a\u3002\u7b2c\u4e8c\u4e2a\uff0c\u5982\u679c\u60a8\u542f\u7528\u4e86\u6309\u5bb9\u91cf\u6eda\u52a8\u7d22\u5f15\uff0c\u5f53\u7d22\u5f15\u5927\u5c0f\u7b49\u4e8e\u6216\u8d85\u8fc7\u6307\u5b9a\u5927\u5c0f\u65f6\uff0cAmazon OpenSearch \u5c06\u6eda\u52a8\u60a8\u7684\u7d22\u5f15\uff0c\u800c\u4e0d\u7ba1\u6eda\u52a8\u65f6\u95f4\u7a97\u53e3\u5982\u4f55\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u4e24\u4e2a\u56e0\u7d20\u53ea\u8981\u6709\u4e00\u4e2a\u7b26\u5408\uff0c\u5373\u53ef\u89e6\u53d1\u7d22\u5f15\u6eda\u52a8\u3002\u4f8b\u5982\uff1a\u6211\u4eec\u57282023\u5e741\u67081\u65e5\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u5e76\u4e8e2023\u5e741\u67084\u65e59\u70b9\u5220\u9664\u4e86\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u7d22\u5f15\u540d\u79f0\u662f nginx-YYYY-MM-DD-<00000x> \u3002\u540c\u65f6\uff0c\u6211\u4eec\u542f\u7528\u4e86\u6309\u5bb9\u91cf\u6eda\u52a8\u7d22\u5f15\uff0c\u5e76\u8f93\u5165 300GB \uff0c\u5047\u5982\u521b\u5efa\u540e\u65e5\u5fd7\u6570\u636e\u91cf\u7a81\u589e\uff0c\u6bcf\u96941\u5c0f\u65f6\u5373\u53ef\u8fbe\u5230 300GB \uff0c\u6301\u7eed\u65f6\u95f4\u4e3a2\u5c0f\u65f610\u5206\u949f\uff0c\u4e4b\u540e\u6062\u590d\u6b63\u5e38\uff0c\u6bcf\u65e5\u6570\u636e\u91cf\u4e3a 90GB \u3002\u5219 OpenSearch \u57281\u67081\u65e5\u521b\u5efa\u4e09\u4e2a\u7d22\u5f15\uff0c\u7d22\u5f15\u540d\u79f0\u4e3a nginx-2023-01-01-000001 \uff0cnginx-2023-01-01-000002\uff0cnginx-2023-01-01-000003\uff0c \u4e4b\u540e\u6bcf\u65e5\u521b\u5efa\u4e00\u6761\u7d22\u5f15\uff0c\u5206\u522b\u4e3a\uff1anginx-2023-01-02-000004\uff0c nginx-2023-01-03-000005\uff0cnginx-2023-01-04-000006\u3002 \u95ee\uff1a\u6211\u53ef\u4ee5\u5728\u73b0\u6709 VPC \u4e2d\u90e8\u7f72\u8be5\u89e3\u51b3\u65b9\u6848\u5417\uff1f \u662f\u7684\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65b0 VPC \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u73b0\u6709 VPC \u542f\u52a8\u89e3\u51b3\u65b9\u6848\u3002 \u5f53\u4f7f\u7528\u73b0\u6709\u7684 VPC\uff0c\u9700\u8981\u9009\u62e9VPC\u548c\u5bf9\u5e94\u7684\u5b50\u7f51\u3002 \u53c2\u8003 \u4f7f\u7528 Cognito \u7528\u6237\u6c60\u542f\u52a8 \u6216 \u4f7f\u7528 OpenID Connect \u542f\u52a8 \u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u95ee\uff1a\u4f7f\u7528 Cognito \u7528\u6237\u6c60\u542f\u52a8\u65f6\uff0c\u6211\u6ca1\u6709\u6536\u5230\u5305\u542b\u4e34\u65f6\u5bc6\u7801\u7684\u7535\u5b50\u90ae\u4ef6\u3002 \u5982\u4f55\u91cd\u65b0\u53d1\u9001\u5bc6\u7801\uff1f \u60a8\u7684\u5e10\u6237\u7531 Cognito \u7528\u6237\u6c60\u7ba1\u7406\u3002 \u7b2c\u4e00\u6b21\u91cd\u53d1\u4e34\u65f6\u5bc6\u7801\uff0c\u53ef\u4ee5\u627e\u5230\u7528\u6237\u6c60 \u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684\u7528\u6237\uff0c\u5220\u9664\u5e76\u4f7f\u7528\u76f8\u540c\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u91cd\u65b0\u521b\u5efa\u7528\u6237\u3002 \u5982\u679c\u60a8\u4ecd\u7136\u9047\u5230\u540c\u6837\u7684\u95ee\u9898\uff0c \u5c1d\u8bd5\u4f7f\u7528\u53e6\u4e00\u4e2a\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u95ee\uff1a\u5982\u4f55\u4e3a\u8be5\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u66f4\u591a\u7528\u6237\uff1f \u5982\u679c\u60a8\u4f7f\u7528 Cognito \u7528\u6237\u6c60\u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u8f6c\u5230 AWS \u63a7\u5236\u53f0\uff0c\u627e\u5230\u8be5\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684\u7528\u6237\u6c60\uff0c \u60a8\u53ef\u4ee5\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u5982\u679c\u60a8\u4f7f\u7528 OpenID Connect (OIDC) \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u5e94\u5728 \u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u7684\u7528\u6237\u6c60\u3002 \u8bf7\u6ce8\u610f\uff0c\u6240\u6709\u7528\u6237\u90fd\u5177\u6709\u76f8\u540c\u7684\u6743\u9650\u3002","title":"\u8bbe\u7f6e\u548c\u914d\u7f6e"},{"location":"implementation-guide/faq/#_4","text":"\u95ee\uff1a\u4f7f\u7528\u6b64\u89e3\u51b3\u65b9\u6848\u5982\u4f55\u6536\u8d39\u548c\u8ba1\u8d39\uff1f \u8be5\u89e3\u51b3\u65b9\u6848\u53ef\u514d\u8d39\u4f7f\u7528\uff0c\u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u8be5\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u7684 AWS \u670d\u52a1\u7684\u8d39\u7528\u3002 \u60a8\u53ea\u9700\u4e3a\u4f7f\u7528\u7684\u5185\u5bb9\u4ed8\u8d39\uff0c\u6ca1\u6709\u6700\u4f4e\u8d39\u7528\u6216\u8bbe\u7f6e\u8d39\u7528\u3002 \u6709\u5173\u8be6\u7ec6\u7684\u6210\u672c\u4f30\u7b97\uff0c\u8bf7\u53c2\u9605 \u6210\u672c \u90e8\u5206\u3002 \u95ee\uff1a\u8de8\u8d26\u6237\u6444\u53d6\u4f1a\u4ea7\u751f\u989d\u5916\u8d39\u7528\u5417\uff1f \u4e0d\u4f1a\u3002\u8d39\u7528\u4e0e AWS \u8d26\u6237\u4e2d\u63d0\u53d6\u65e5\u5fd7\u7684\u8d39\u7528\u76f8\u540c\u3002","title":"\u6210\u672c"},{"location":"implementation-guide/faq/#_5","text":"\u95ee\uff1a\u89e3\u51b3\u65b9\u6848\u4e2d\u4f7f\u7528\u7684\u65e5\u5fd7\u4ee3\u7406\u662f\u4ec0\u4e48\uff1f \u65e5\u5fd7\u901a\u4f7f\u7528 AWS for Fluent Bit \uff0c\u8fd9\u662f\u7531 AWS \u7ef4\u62a4\u7684 Fluent Bit \u7684\u4e00\u4e2a\u53d1\u884c\u7248\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u6b64\u5206\u914d\u4ece Amazon EC2 \u548c Amazon EKS \u63d0\u53d6\u65e5\u5fd7\u3002 \u95ee\uff1a\u6211\u5df2\u7ecf\u5c06\u4f1a\u5458\u8d26\u6237\u7684AWS\u670d\u52a1\u65e5\u5fd7\u5b58\u50a8\u5728\u4e00\u4e2a\u96c6\u4e2d\u7684\u65e5\u5fd7\u8d26\u6237\u4e2d\u3002\u6211\u5e94\u8be5\u5982\u4f55\u4e3a\u4f1a\u5458\u5e10\u6237\u521b\u5efa\u670d\u52a1\u65e5\u5fd7\u6444\u53d6\uff1f \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5728\u96c6\u4e2d\u65e5\u5fd7\u8d26\u6237\u4e2d\u90e8\u7f72\u65b9\u6848\uff0c\u5e76\u6444\u53d6AWS\u670d\u52a1\u65e5\u5fd7 \u4f7f\u7528\u767b\u5f55\u5e10\u6237\u7684 \u624b\u52a8 \u6a21\u5f0f\u3002\u8bf7\u53c2\u9605\u6b64 \u6307\u5357 \u4ee5\u83b7\u53d6\u5e94\u7528\u7a0b\u5e8f \u8d1f\u8f7d\u5747\u8861\u5668\u4ee5 \u624b\u52a8 \u6a21\u5f0f\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u5bf9\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 S3 \u7684\u5176\u4ed6\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002 \u95ee\uff1a\u4e3a\u4ec0\u4e48\u5728\u901a\u8fc7 Kinesis Data Streams \u6444\u53d6\u65e5\u5fd7\u65f6\uff0cOpenSearch \u4e2d\u6709\u4e00\u4e9b\u91cd\u590d\u7684\u8bb0\u5f55\uff1f \u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684 Kinesis \u788e\u7247\u6765\u5904\u7406\u4f20\u5165\u7684\u8bf7\u6c42\u3002\u53d1\u751f\u9608\u503c\u9519\u8bef\u65f6 \u5728 Kinesis \u4e2d\uff0cFluent Bit \u4ee3\u7406\u5c06 \u91cd\u8bd5 \u90a3\u4e2a \u5757 \u3002\u4e3a\u907f\u514d\u6b64\u95ee\u9898\uff0c\u60a8\u9700\u8981\u4f30\u8ba1\u65e5\u5fd7\u541e\u5410\u91cf\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684 Kinesis \u5206\u7247\u6570\u3002\u8bf7\u53c2\u9605 Kinesis Data Streams \u914d\u989d\u548c\u9650\u5236 \u3002 \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5185\u7f6e\u529f\u80fd\u6765\u6269\u5c55\u548c\u7f29\u51cf Kinesis \u5206\u7247\uff0c\u8fd9\u5c06\u9700\u8981\u51e0\u5206\u949f\u7684\u65f6\u95f4 \u6269\u5c55\u5230\u6240\u9700\u7684\u6570\u91cf\u3002","title":"\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/faq/#_6","text":"\u95ee\u3002\u5982\u4f55\u5728 OpenSearch \u4e2d\u627e\u5230\u5185\u7f6e\u4eea\u8868\u677f\uff1f \u8bf7\u53c2\u8003 AWS\u670d\u52a1\u65e5\u5fd7 \u548c \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7 \u81f3 \u67e5\u770b\u662f\u5426\u652f\u6301\u5185\u7f6e\u4eea\u8868\u677f\u3002\u60a8\u8fd8\u9700\u8981\u5728\u521b\u5efa\u65f6\u6253\u5f00 Sample Dashboard \u9009\u9879 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002\u4eea\u8868\u677f\u5c06\u63d2\u5165\u5230 Global Tenant \u4e0b\u7684 Amazon OpenSearch Service \u4e2d\u3002\u60a8\u53ef\u4ee5\u5207\u6362\u5230 \u6765\u81ea OpenSearch \u4eea\u8868\u677f\u53f3\u4e0a\u89d2\u7f16\u7801\u5668\u7684\u5168\u5c40\u79df\u6237\u3002","title":"\u65e5\u5fd7\u53ef\u89c6\u5316"},{"location":"implementation-guide/include-dashboard/","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Include dashboard"},{"location":"implementation-guide/monitoring/","text":"\u6307\u6807\u7c7b\u578b \u5728\u65e5\u5fd7\u901a\uff08Centralized Logging with OpenSearch\uff09\u63a7\u5236\u53f0\u4e0a\uff0c\u4ee5\u4e0b\u7c7b\u578b\u7684\u6307\u6807\u662f\u53ef\u7528\u7684\u3002 \u65e5\u5fd7\u6e90\u6307\u6807 Fluent Bit FluentBitOutputProcRecords - \u8be5\u8f93\u51fa\u5b9e\u4f8b\u6210\u529f\u53d1\u9001\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf\u3002\u8fd9\u662f\u7531\u6b64\u8f93\u51fa\u53d1\u9001\u7684\u6240\u6709\u552f\u4e00\u5757\u7684\u603b\u8bb0\u5f55\u6570\u3002\u5982\u679c\u8bb0\u5f55\u672a\u6210\u529f\u53d1\u9001\uff0c\u5219\u4e0d\u8ba1\u5165\u6b64\u6307\u6807\u3002 FluentBitOutputProcBytes - \u8be5\u8f93\u51fa\u5b9e\u4f8b\u6210\u529f\u53d1\u9001\u7684\u65e5\u5fd7\u8bb0\u5f55\u5b57\u8282\u6570\u3002\u8fd9\u662f\u7531\u6b64\u8f93\u51fa\u53d1\u9001\u7684\u6240\u6709\u552f\u4e00\u5757\u7684\u603b\u5b57\u8282\u5927\u5c0f\u3002\u5982\u679c\u7531\u4e8e\u67d0\u4e9b\u9519\u8bef\u672a\u53d1\u9001\u8bb0\u5f55\uff0c\u5219\u4e0d\u8ba1\u5165\u6b64\u6307\u6807\u3002 FluentBitOutputDroppedRecords - \u88ab\u8f93\u51fa\u4e22\u5f03\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf\u3002\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u9047\u5230\u4e86\u65e0\u6cd5\u6062\u590d\u7684\u9519\u8bef\u6216\u8005\u91cd\u8bd5\u8d85\u65f6\u3002 FluentBitOutputErrors - \u9047\u5230\u9519\u8bef\u7684\u5757\u6570\uff08\u65e0\u8bba\u662f\u65e0\u6cd5\u6062\u590d\u7684\u8fd8\u662f\u53ef\u6062\u590d\u7684\uff09\u3002\u8fd9\u662f\u5757\u5931\u8d25\u7684\u6b21\u6570\uff0c\u4e0e\u60a8\u5728Fluent Bit\u65e5\u5fd7\u8f93\u51fa\u4e2d\u770b\u5230\u7684\u9519\u8bef\u6d88\u606f\u6570\u76ee\u65e0\u5173\u3002 FluentBitOutputRetriedRecords - \u7ecf\u5386\u91cd\u8bd5\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u662f\u5728\u5757\u7ea7\u522b\u8ba1\u7b97\u7684\uff0c\u5f53\u6574\u4e2a\u5757\u88ab\u6807\u8bb0\u4e3a\u91cd\u8bd5\u65f6\uff0c\u8ba1\u6570\u4f1a\u589e\u52a0\u3002\u8f93\u51fa\u63d2\u4ef6\u53ef\u80fd\u4f1a\u6267\u884c\u591a\u4e2a\u751f\u6210\u8bb8\u591a\u9519\u8bef\u6d88\u606f\u7684\u64cd\u4f5c\uff0c\u4ece\u800c\u4e0a\u4f20\u5355\u4e2a\u5757\u3002 FluentBitOutputRetriesFailed - \u91cd\u8bd5\u4e3a\u5757\u8fc7\u671f\u7684\u6b21\u6570\u3002\u6bcf\u4e2a\u63d2\u4ef6\u90fd\u914d\u7f6e\u4e86\u9002\u7528\u4e8e\u5757\u7684 Retry_Limit \u3002\u4e00\u65e6\u5757\u7684\u91cd\u8bd5\u9650\u5236\u8fbe\u5230\uff0c\u5757\u5c06\u88ab\u4e22\u5f03\uff0c\u6b64\u6307\u6807\u4f1a\u589e\u52a0\u3002 FluentBitOutputRetries - \u6b64\u8f93\u51fa\u5b9e\u4f8b\u4e3a\u5757\u8bf7\u6c42\u91cd\u8bd5\u7684\u6b21\u6570\u3002 \u7f51\u7edc\u8d1f\u8f7d\u5747\u8861\u5668 SyslogNLBActiveFlowCount - \u5ba2\u6237\u7aef\u5230\u76ee\u6807\u7684\u5e76\u53d1\u6d41\uff08\u6216\u8fde\u63a5\uff09\u603b\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecSYN_SENT\u548cESTABLISHED\u72b6\u6001\u7684\u8fde\u63a5\u3002TCP\u8fde\u63a5\u5728\u8d1f\u8f7d\u5747\u8861\u5668\u4e0a\u4e0d\u4f1a\u7ec8\u6b62\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u6253\u5f00\u5230\u76ee\u6807\u7684TCP\u8fde\u63a5\u7b97\u4f5c\u5355\u4e2a\u6d41\u3002 SyslogNLBProcessedBytes - \u8d1f\u8f7d\u5747\u8861\u5668\u5904\u7406\u7684\u5b57\u8282\u6570\u603b\u91cf\uff0c\u5305\u62ecTCP/IP\u5934\u90e8\u3002\u6b64\u8ba1\u6570\u5305\u62ec\u4e0e\u76ee\u6807\u4e4b\u95f4\u7684\u6d41\u91cf\uff0c\u51cf\u53bb\u5065\u5eb7\u68c0\u67e5\u6d41\u91cf\u3002 \u7f13\u51b2\u533a\u6307\u6807 \u65e5\u5fd7\u7f13\u51b2\u533a\u662f\u65e5\u5fd7\u4ee3\u7406\u4e0eOpenSearch\u96c6\u7fa4\u4e4b\u95f4\u7684\u7f13\u51b2\u5c42\u3002\u4ee3\u7406\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230\u7f13\u51b2\u5c42\uff0c\u7136\u540e\u5c06\u5176\u5904\u7406\u5e76\u4f20\u9001\u5230OpenSearch\u96c6\u7fa4\u3002\u7f13\u51b2\u5c42\u662f\u4e00\u79cd\u4fdd\u62a4OpenSearch\u96c6\u7fa4\u514d\u53d7\u8fc7\u8f7d\u7684\u65b9\u5f0f\u3002 Kinesis\u6570\u636e\u6d41 KDSIncomingBytes \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6210\u529f\u653e\u5165Kinesis\u6d41\u4e2d\u7684\u5b57\u8282\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecPutRecord\u548cPutRecords\u64cd\u4f5c\u7684\u5b57\u8282\u3002\u6700\u5c0f\u3001\u6700\u5927\u548c\u5e73\u5747\u7edf\u8ba1\u6570\u636e\u8868\u793a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6d41\u7684\u5355\u4e2a\u653e\u5165\u64cd\u4f5c\u7684\u5b57\u8282\u6570\u3002 KDSIncomingRecords \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6210\u529f\u653e\u5165Kinesis\u6d41\u4e2d\u7684\u8bb0\u5f55\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecPutRecord\u548cPutRecords\u64cd\u4f5c\u7684\u8bb0\u5f55\u8ba1\u6570\u3002\u6700\u5c0f\u3001\u6700\u5927\u548c\u5e73\u5747\u7edf\u8ba1\u6570\u636e\u8868\u793a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6d41\u7684\u5355\u4e2a\u653e\u5165\u64cd\u4f5c\u7684\u8bb0\u5f55\u6570\u3002 KDSPutRecordBytes \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u4f7f\u7528PutRecord\u64cd\u4f5c\u653e\u5165Kinesis\u6d41\u4e2d\u7684\u5b57\u8282\u6570\u3002 KDSThrottledRecords \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u7531\u4e8e\u9650\u6d41\u800c\u88ab\u62d2\u7edd\u7684\u8bb0\u5f55\u6570\uff0c\u6bcf\u4e2aKinesis\u6570\u636e\u6d41\u7684PutRecords\u64cd\u4f5c\u3002 KDSWriteProvisionedThroughputExceeded \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u7531\u4e8e\u9650\u6d41\u800c\u88ab\u62d2\u7edd\u7684\u8bb0\u5f55\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecPutRecord\u548cPutRecords\u64cd\u4f5c\u7684\u9650\u6d41\u3002\u6b64\u6307\u6807\u901a\u5e38\u4f7f\u7528\u5e73\u5747\u7edf\u8ba1\u6570\u636e\u3002 \u5f53\u6700\u5c0f\u7edf\u8ba1\u6570\u636e\u5177\u6709\u975e\u96f6\u503c\u65f6\uff0c\u6d41\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u5c06\u88ab\u9650\u5236\u3002 \u5f53\u6700\u5927\u7edf\u8ba1\u6570\u636e\u7684\u503c\u4e3a0\u65f6\uff0c\u6d41\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u4e0d\u4f1a\u88ab\u9650\u5236\u3002 SQS SQSNumberOfMessagesSent - \u6dfb\u52a0\u5230\u961f\u5217\u7684\u6d88\u606f\u6570\u3002 SQSNumberOfMessagesDeleted - \u4ece\u961f\u5217\u4e2d\u5220\u9664\u7684\u6d88\u606f\u6570\u3002 Amazon SQS\u4e3a\u6bcf\u4e2a\u6210\u529f\u4f7f\u7528\u6709\u6548\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u7684\u5220\u9664\u64cd\u4f5c\u53d1\u51faNumberOfMessagesDeleted\u6307\u6807\uff0c\u5305\u62ec\u91cd\u590d\u5220\u9664\u3002\u4ee5\u4e0b\u60c5\u51b5\u53ef\u80fd\u5bfc\u81f4NumberOfMessagesDeleted\u6307\u6807\u7684\u503c\u9ad8\u4e8e\u9884\u671f\uff1a \u5bf9\u5c5e\u4e8e\u540c\u4e00\u6d88\u606f\u7684\u4e0d\u540c\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u8c03\u7528DeleteMessage\u64cd\u4f5c\uff1a\u5982\u679c\u6d88\u606f\u5728\u53ef\u89c1\u6027\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u672a\u88ab\u5904\u7406\uff0c\u8be5\u6d88\u606f\u5c06\u53ef\u4f9b\u5176\u4ed6\u53ef\u4ee5\u5904\u7406\u5e76\u518d\u6b21\u5220\u9664\u7684\u6d88\u8d39\u8005\u4f7f\u7528\uff0c\u4ece\u800c\u589e\u52a0NumberOfMessagesDeleted\u6307\u6807\u7684\u503c\u3002 \u5bf9\u76f8\u540c\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u8c03\u7528DeleteMessage\u64cd\u4f5c\uff1a\u5982\u679c\u6d88\u606f\u88ab\u5904\u7406\u5e76\u5220\u9664\uff0c\u4f46\u60a8\u518d\u6b21\u4f7f\u7528\u76f8\u540c\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u8c03\u7528DeleteMessage\u64cd\u4f5c\uff0c\u5c06\u8fd4\u56de\u6210\u529f\u72b6\u6001\uff0c\u4ece\u800c\u589e\u52a0NumberOfMessagesDeleted\u6307\u6807\u7684\u503c\u3002 SQSApproximateNumberOfMessagesVisible - \u53ef\u4ee5\u4ece\u961f\u5217\u68c0\u7d22\u7684\u6d88\u606f\u6570\u3002 SQSApproximateAgeOfOldestMessage - \u961f\u5217\u4e2d\u6700\u65e7\u7684\u672a\u5220\u9664\u6d88\u606f\u7684\u8fd1\u4f3c\u5e74\u9f84\u3002 \u5728\u6d88\u606f\u88ab\u63a5\u6536\u4e09\u6b21\uff08\u6216\u66f4\u591a\u6b21\uff09\u4e14\u672a\u88ab\u5904\u7406\u4e4b\u540e\uff0c\u8be5\u6d88\u606f\u88ab\u79fb\u52a8\u5230\u961f\u5217\u7684\u672b\u5c3e\uff0cApproximateAgeOfOldestMessage\u6307\u6807\u6307\u5411\u672a\u88ab\u63a5\u6536\u8d85\u8fc7\u4e09\u6b21\u7684\u7b2c\u4e8c\u65e7\u6d88\u606f\u3002\u5373\u4f7f\u961f\u5217\u5177\u6709\u91cd\u8bd5\u7b56\u7565\uff0c\u6b64\u64cd\u4f5c\u4ecd\u4f1a\u53d1\u751f\u3002 \u56e0\u4e3a\u5355\u4e2a\u6bd2\u4e38\u6d88\u606f\uff08\u591a\u6b21\u63a5\u6536\u4f46\u4ece\u672a\u5220\u9664\uff09\u53ef\u80fd\u4f1a\u626d\u66f2\u6b64\u6307\u6807\uff0c\u6240\u4ee5\u5728\u6210\u529f\u6d88\u8d39\u6bd2\u4e38\u6d88\u606f\u4e4b\u524d\uff0c\u4e0d\u4f1a\u5c06\u6bd2\u4e38\u6d88\u606f\u7684\u5e74\u9f84\u5305\u62ec\u5728\u5185\u3002 \u5f53\u961f\u5217\u5177\u6709\u91cd\u8bd5\u7b56\u7565\u65f6\uff0c\u6d88\u606f\u5728\u914d\u7f6e\u7684 \u6700\u5927\u63a5\u6536\u6b21\u6570 \u540e\u5c06\u79fb\u52a8\u5230\u6b7b\u4fe1\u961f\u5217\u3002\u5f53\u6d88\u606f\u79fb\u52a8\u5230\u6b7b\u4fe1\u961f\u5217\u65f6\uff0c\u6b7b\u4fe1\u961f\u5217\u7684ApproximateAgeOfOldestMessage\u6307\u6807\u8868\u793a\u6d88\u606f\u79fb\u52a8\u5230\u6b7b\u4fe1\u961f\u5217\u7684\u65f6\u95f4\uff08\u800c\u4e0d\u662f\u6d88\u606f\u53d1\u9001\u7684\u539f\u59cb\u65f6\u95f4\uff09\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u6307\u6807 \u65e5\u5fd7\u5904\u7406\u5668Lambda\u8d1f\u8d23\u5bf9\u6570\u636e\u6267\u884c\u6700\u7ec8\u5904\u7406\uff0c\u5e76\u5c06\u5176\u6279\u91cf\u5199\u5165OpenSearch\u3002 TotalLogs \u2013 Lambda\u51fd\u6570\u5904\u7406\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u603b\u6570\u3002 ExcludedLogs \u2013 \u7531\u4e8e\u8fc7\u6ee4\u6216\u5176\u4ed6\u6761\u4ef6\u800c\u88ab\u6392\u9664\u5728\u5916\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u6570\u3002 LoadedLogs \u2013 \u6210\u529f\u5904\u7406\u5e76\u52a0\u8f7d\u5230OpenSearch\u4e2d\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u6570\u3002 FailedLogs \u2013 \u672a\u80fd\u88ab\u5904\u7406\u6216\u52a0\u8f7d\u5230OpenSearch\u4e2d\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u6570\u3002 ConcurrentExecutions \u2013 \u5904\u7406\u4e8b\u4ef6\u7684\u51fd\u6570\u5b9e\u4f8b\u6570\u3002\u5982\u679c\u6b64\u6570\u8fbe\u5230\u60a8\u5728\u8be5\u533a\u57df\u7684 \u5e76\u53d1\u6267\u884c\u9650\u989d \uff0c\u6216\u51fd\u6570\u7684 \u9884\u7559\u5e76\u53d1\u9650\u5236 \uff0c\u5219Lambda\u4f1a\u5bf9\u5176\u4ed6\u8c03\u7528\u8bf7\u6c42\u8fdb\u884c\u9650\u6d41\u3002 Duration \u2013 \u51fd\u6570\u4ee3\u7801\u5904\u7406\u4e8b\u4ef6\u6240\u9700\u7684\u65f6\u95f4\u3002\u5bf9\u4e8e\u4e00\u4e2a\u8c03\u7528\u7684\u8ba1\u8d39\u65f6\u957f\uff0c\u662f\u5c06Duration\u7684\u503c\u56db\u820d\u4e94\u5165\u5230\u6700\u8fd1\u7684\u6beb\u79d2\u3002 Throttles \u2013 \u88ab\u9650\u6d41\u7684\u8c03\u7528\u8bf7\u6c42\u6570\u3002\u5f53\u6240\u6709\u51fd\u6570\u5b9e\u4f8b\u90fd\u5728\u5904\u7406\u8bf7\u6c42\u4e14\u6ca1\u6709\u53ef\u7528\u7684\u5e76\u53d1\u6570\u8fdb\u884c\u6269\u5c55\u65f6\uff0cLambda\u5c06\u4f7f\u7528TooManyRequestsException\u9519\u8bef\u62d2\u7edd\u9644\u52a0\u8bf7\u6c42\u3002\u88ab\u9650\u6d41\u7684\u8bf7\u6c42\u548c\u5176\u4ed6\u8c03\u7528\u9519\u8bef\u65e2\u4e0d\u8ba1\u5165\u8c03\u7528\u6b21\u6570\uff0c\u4e5f\u4e0d\u8ba1\u5165\u9519\u8bef\u6b21\u6570\u3002 Invocations \u2013 \u51fd\u6570\u4ee3\u7801\u88ab\u8c03\u7528\u7684\u6b21\u6570\uff0c\u5305\u62ec\u6210\u529f\u8c03\u7528\u548c\u5bfc\u81f4\u51fd\u6570\u9519\u8bef\u7684\u8c03\u7528\u3002\u5982\u679c\u8c03\u7528\u8bf7\u6c42\u88ab\u9650\u6d41\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u5bfc\u81f4\u8c03\u7528\u9519\u8bef\uff0c\u5219\u4e0d\u8bb0\u5f55\u8c03\u7528\u6b21\u6570\u3002Invocations\u7684\u503c\u7b49\u4e8e\u8ba1\u8d39\u7684\u8bf7\u6c42\u6b21\u6570\u3002","title":"\u76d1\u63a7"},{"location":"implementation-guide/monitoring/#_1","text":"\u5728\u65e5\u5fd7\u901a\uff08Centralized Logging with OpenSearch\uff09\u63a7\u5236\u53f0\u4e0a\uff0c\u4ee5\u4e0b\u7c7b\u578b\u7684\u6307\u6807\u662f\u53ef\u7528\u7684\u3002","title":"\u6307\u6807\u7c7b\u578b"},{"location":"implementation-guide/monitoring/#_2","text":"","title":"\u65e5\u5fd7\u6e90\u6307\u6807"},{"location":"implementation-guide/monitoring/#fluent-bit","text":"FluentBitOutputProcRecords - \u8be5\u8f93\u51fa\u5b9e\u4f8b\u6210\u529f\u53d1\u9001\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf\u3002\u8fd9\u662f\u7531\u6b64\u8f93\u51fa\u53d1\u9001\u7684\u6240\u6709\u552f\u4e00\u5757\u7684\u603b\u8bb0\u5f55\u6570\u3002\u5982\u679c\u8bb0\u5f55\u672a\u6210\u529f\u53d1\u9001\uff0c\u5219\u4e0d\u8ba1\u5165\u6b64\u6307\u6807\u3002 FluentBitOutputProcBytes - \u8be5\u8f93\u51fa\u5b9e\u4f8b\u6210\u529f\u53d1\u9001\u7684\u65e5\u5fd7\u8bb0\u5f55\u5b57\u8282\u6570\u3002\u8fd9\u662f\u7531\u6b64\u8f93\u51fa\u53d1\u9001\u7684\u6240\u6709\u552f\u4e00\u5757\u7684\u603b\u5b57\u8282\u5927\u5c0f\u3002\u5982\u679c\u7531\u4e8e\u67d0\u4e9b\u9519\u8bef\u672a\u53d1\u9001\u8bb0\u5f55\uff0c\u5219\u4e0d\u8ba1\u5165\u6b64\u6307\u6807\u3002 FluentBitOutputDroppedRecords - \u88ab\u8f93\u51fa\u4e22\u5f03\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf\u3002\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u9047\u5230\u4e86\u65e0\u6cd5\u6062\u590d\u7684\u9519\u8bef\u6216\u8005\u91cd\u8bd5\u8d85\u65f6\u3002 FluentBitOutputErrors - \u9047\u5230\u9519\u8bef\u7684\u5757\u6570\uff08\u65e0\u8bba\u662f\u65e0\u6cd5\u6062\u590d\u7684\u8fd8\u662f\u53ef\u6062\u590d\u7684\uff09\u3002\u8fd9\u662f\u5757\u5931\u8d25\u7684\u6b21\u6570\uff0c\u4e0e\u60a8\u5728Fluent Bit\u65e5\u5fd7\u8f93\u51fa\u4e2d\u770b\u5230\u7684\u9519\u8bef\u6d88\u606f\u6570\u76ee\u65e0\u5173\u3002 FluentBitOutputRetriedRecords - \u7ecf\u5386\u91cd\u8bd5\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u662f\u5728\u5757\u7ea7\u522b\u8ba1\u7b97\u7684\uff0c\u5f53\u6574\u4e2a\u5757\u88ab\u6807\u8bb0\u4e3a\u91cd\u8bd5\u65f6\uff0c\u8ba1\u6570\u4f1a\u589e\u52a0\u3002\u8f93\u51fa\u63d2\u4ef6\u53ef\u80fd\u4f1a\u6267\u884c\u591a\u4e2a\u751f\u6210\u8bb8\u591a\u9519\u8bef\u6d88\u606f\u7684\u64cd\u4f5c\uff0c\u4ece\u800c\u4e0a\u4f20\u5355\u4e2a\u5757\u3002 FluentBitOutputRetriesFailed - \u91cd\u8bd5\u4e3a\u5757\u8fc7\u671f\u7684\u6b21\u6570\u3002\u6bcf\u4e2a\u63d2\u4ef6\u90fd\u914d\u7f6e\u4e86\u9002\u7528\u4e8e\u5757\u7684 Retry_Limit \u3002\u4e00\u65e6\u5757\u7684\u91cd\u8bd5\u9650\u5236\u8fbe\u5230\uff0c\u5757\u5c06\u88ab\u4e22\u5f03\uff0c\u6b64\u6307\u6807\u4f1a\u589e\u52a0\u3002 FluentBitOutputRetries - \u6b64\u8f93\u51fa\u5b9e\u4f8b\u4e3a\u5757\u8bf7\u6c42\u91cd\u8bd5\u7684\u6b21\u6570\u3002","title":"Fluent Bit"},{"location":"implementation-guide/monitoring/#_3","text":"SyslogNLBActiveFlowCount - \u5ba2\u6237\u7aef\u5230\u76ee\u6807\u7684\u5e76\u53d1\u6d41\uff08\u6216\u8fde\u63a5\uff09\u603b\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecSYN_SENT\u548cESTABLISHED\u72b6\u6001\u7684\u8fde\u63a5\u3002TCP\u8fde\u63a5\u5728\u8d1f\u8f7d\u5747\u8861\u5668\u4e0a\u4e0d\u4f1a\u7ec8\u6b62\uff0c\u56e0\u6b64\u5ba2\u6237\u7aef\u6253\u5f00\u5230\u76ee\u6807\u7684TCP\u8fde\u63a5\u7b97\u4f5c\u5355\u4e2a\u6d41\u3002 SyslogNLBProcessedBytes - \u8d1f\u8f7d\u5747\u8861\u5668\u5904\u7406\u7684\u5b57\u8282\u6570\u603b\u91cf\uff0c\u5305\u62ecTCP/IP\u5934\u90e8\u3002\u6b64\u8ba1\u6570\u5305\u62ec\u4e0e\u76ee\u6807\u4e4b\u95f4\u7684\u6d41\u91cf\uff0c\u51cf\u53bb\u5065\u5eb7\u68c0\u67e5\u6d41\u91cf\u3002","title":"\u7f51\u7edc\u8d1f\u8f7d\u5747\u8861\u5668"},{"location":"implementation-guide/monitoring/#_4","text":"\u65e5\u5fd7\u7f13\u51b2\u533a\u662f\u65e5\u5fd7\u4ee3\u7406\u4e0eOpenSearch\u96c6\u7fa4\u4e4b\u95f4\u7684\u7f13\u51b2\u5c42\u3002\u4ee3\u7406\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230\u7f13\u51b2\u5c42\uff0c\u7136\u540e\u5c06\u5176\u5904\u7406\u5e76\u4f20\u9001\u5230OpenSearch\u96c6\u7fa4\u3002\u7f13\u51b2\u5c42\u662f\u4e00\u79cd\u4fdd\u62a4OpenSearch\u96c6\u7fa4\u514d\u53d7\u8fc7\u8f7d\u7684\u65b9\u5f0f\u3002","title":"\u7f13\u51b2\u533a\u6307\u6807"},{"location":"implementation-guide/monitoring/#kinesis","text":"KDSIncomingBytes \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6210\u529f\u653e\u5165Kinesis\u6d41\u4e2d\u7684\u5b57\u8282\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecPutRecord\u548cPutRecords\u64cd\u4f5c\u7684\u5b57\u8282\u3002\u6700\u5c0f\u3001\u6700\u5927\u548c\u5e73\u5747\u7edf\u8ba1\u6570\u636e\u8868\u793a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6d41\u7684\u5355\u4e2a\u653e\u5165\u64cd\u4f5c\u7684\u5b57\u8282\u6570\u3002 KDSIncomingRecords \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6210\u529f\u653e\u5165Kinesis\u6d41\u4e2d\u7684\u8bb0\u5f55\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecPutRecord\u548cPutRecords\u64cd\u4f5c\u7684\u8bb0\u5f55\u8ba1\u6570\u3002\u6700\u5c0f\u3001\u6700\u5927\u548c\u5e73\u5747\u7edf\u8ba1\u6570\u636e\u8868\u793a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u6d41\u7684\u5355\u4e2a\u653e\u5165\u64cd\u4f5c\u7684\u8bb0\u5f55\u6570\u3002 KDSPutRecordBytes \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u4f7f\u7528PutRecord\u64cd\u4f5c\u653e\u5165Kinesis\u6d41\u4e2d\u7684\u5b57\u8282\u6570\u3002 KDSThrottledRecords \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u7531\u4e8e\u9650\u6d41\u800c\u88ab\u62d2\u7edd\u7684\u8bb0\u5f55\u6570\uff0c\u6bcf\u4e2aKinesis\u6570\u636e\u6d41\u7684PutRecords\u64cd\u4f5c\u3002 KDSWriteProvisionedThroughputExceeded \u2013 \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u7531\u4e8e\u9650\u6d41\u800c\u88ab\u62d2\u7edd\u7684\u8bb0\u5f55\u6570\u3002\u6b64\u6307\u6807\u5305\u62ecPutRecord\u548cPutRecords\u64cd\u4f5c\u7684\u9650\u6d41\u3002\u6b64\u6307\u6807\u901a\u5e38\u4f7f\u7528\u5e73\u5747\u7edf\u8ba1\u6570\u636e\u3002 \u5f53\u6700\u5c0f\u7edf\u8ba1\u6570\u636e\u5177\u6709\u975e\u96f6\u503c\u65f6\uff0c\u6d41\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u5c06\u88ab\u9650\u5236\u3002 \u5f53\u6700\u5927\u7edf\u8ba1\u6570\u636e\u7684\u503c\u4e3a0\u65f6\uff0c\u6d41\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u4e0d\u4f1a\u88ab\u9650\u5236\u3002","title":"Kinesis\u6570\u636e\u6d41"},{"location":"implementation-guide/monitoring/#sqs","text":"SQSNumberOfMessagesSent - \u6dfb\u52a0\u5230\u961f\u5217\u7684\u6d88\u606f\u6570\u3002 SQSNumberOfMessagesDeleted - \u4ece\u961f\u5217\u4e2d\u5220\u9664\u7684\u6d88\u606f\u6570\u3002 Amazon SQS\u4e3a\u6bcf\u4e2a\u6210\u529f\u4f7f\u7528\u6709\u6548\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u7684\u5220\u9664\u64cd\u4f5c\u53d1\u51faNumberOfMessagesDeleted\u6307\u6807\uff0c\u5305\u62ec\u91cd\u590d\u5220\u9664\u3002\u4ee5\u4e0b\u60c5\u51b5\u53ef\u80fd\u5bfc\u81f4NumberOfMessagesDeleted\u6307\u6807\u7684\u503c\u9ad8\u4e8e\u9884\u671f\uff1a \u5bf9\u5c5e\u4e8e\u540c\u4e00\u6d88\u606f\u7684\u4e0d\u540c\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u8c03\u7528DeleteMessage\u64cd\u4f5c\uff1a\u5982\u679c\u6d88\u606f\u5728\u53ef\u89c1\u6027\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u672a\u88ab\u5904\u7406\uff0c\u8be5\u6d88\u606f\u5c06\u53ef\u4f9b\u5176\u4ed6\u53ef\u4ee5\u5904\u7406\u5e76\u518d\u6b21\u5220\u9664\u7684\u6d88\u8d39\u8005\u4f7f\u7528\uff0c\u4ece\u800c\u589e\u52a0NumberOfMessagesDeleted\u6307\u6807\u7684\u503c\u3002 \u5bf9\u76f8\u540c\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u8c03\u7528DeleteMessage\u64cd\u4f5c\uff1a\u5982\u679c\u6d88\u606f\u88ab\u5904\u7406\u5e76\u5220\u9664\uff0c\u4f46\u60a8\u518d\u6b21\u4f7f\u7528\u76f8\u540c\u63a5\u6536\u5904\u7406\u7a0b\u5e8f\u8c03\u7528DeleteMessage\u64cd\u4f5c\uff0c\u5c06\u8fd4\u56de\u6210\u529f\u72b6\u6001\uff0c\u4ece\u800c\u589e\u52a0NumberOfMessagesDeleted\u6307\u6807\u7684\u503c\u3002 SQSApproximateNumberOfMessagesVisible - \u53ef\u4ee5\u4ece\u961f\u5217\u68c0\u7d22\u7684\u6d88\u606f\u6570\u3002 SQSApproximateAgeOfOldestMessage - \u961f\u5217\u4e2d\u6700\u65e7\u7684\u672a\u5220\u9664\u6d88\u606f\u7684\u8fd1\u4f3c\u5e74\u9f84\u3002 \u5728\u6d88\u606f\u88ab\u63a5\u6536\u4e09\u6b21\uff08\u6216\u66f4\u591a\u6b21\uff09\u4e14\u672a\u88ab\u5904\u7406\u4e4b\u540e\uff0c\u8be5\u6d88\u606f\u88ab\u79fb\u52a8\u5230\u961f\u5217\u7684\u672b\u5c3e\uff0cApproximateAgeOfOldestMessage\u6307\u6807\u6307\u5411\u672a\u88ab\u63a5\u6536\u8d85\u8fc7\u4e09\u6b21\u7684\u7b2c\u4e8c\u65e7\u6d88\u606f\u3002\u5373\u4f7f\u961f\u5217\u5177\u6709\u91cd\u8bd5\u7b56\u7565\uff0c\u6b64\u64cd\u4f5c\u4ecd\u4f1a\u53d1\u751f\u3002 \u56e0\u4e3a\u5355\u4e2a\u6bd2\u4e38\u6d88\u606f\uff08\u591a\u6b21\u63a5\u6536\u4f46\u4ece\u672a\u5220\u9664\uff09\u53ef\u80fd\u4f1a\u626d\u66f2\u6b64\u6307\u6807\uff0c\u6240\u4ee5\u5728\u6210\u529f\u6d88\u8d39\u6bd2\u4e38\u6d88\u606f\u4e4b\u524d\uff0c\u4e0d\u4f1a\u5c06\u6bd2\u4e38\u6d88\u606f\u7684\u5e74\u9f84\u5305\u62ec\u5728\u5185\u3002 \u5f53\u961f\u5217\u5177\u6709\u91cd\u8bd5\u7b56\u7565\u65f6\uff0c\u6d88\u606f\u5728\u914d\u7f6e\u7684 \u6700\u5927\u63a5\u6536\u6b21\u6570 \u540e\u5c06\u79fb\u52a8\u5230\u6b7b\u4fe1\u961f\u5217\u3002\u5f53\u6d88\u606f\u79fb\u52a8\u5230\u6b7b\u4fe1\u961f\u5217\u65f6\uff0c\u6b7b\u4fe1\u961f\u5217\u7684ApproximateAgeOfOldestMessage\u6307\u6807\u8868\u793a\u6d88\u606f\u79fb\u52a8\u5230\u6b7b\u4fe1\u961f\u5217\u7684\u65f6\u95f4\uff08\u800c\u4e0d\u662f\u6d88\u606f\u53d1\u9001\u7684\u539f\u59cb\u65f6\u95f4\uff09\u3002","title":"SQS"},{"location":"implementation-guide/monitoring/#_5","text":"\u65e5\u5fd7\u5904\u7406\u5668Lambda\u8d1f\u8d23\u5bf9\u6570\u636e\u6267\u884c\u6700\u7ec8\u5904\u7406\uff0c\u5e76\u5c06\u5176\u6279\u91cf\u5199\u5165OpenSearch\u3002 TotalLogs \u2013 Lambda\u51fd\u6570\u5904\u7406\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u603b\u6570\u3002 ExcludedLogs \u2013 \u7531\u4e8e\u8fc7\u6ee4\u6216\u5176\u4ed6\u6761\u4ef6\u800c\u88ab\u6392\u9664\u5728\u5916\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u6570\u3002 LoadedLogs \u2013 \u6210\u529f\u5904\u7406\u5e76\u52a0\u8f7d\u5230OpenSearch\u4e2d\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u6570\u3002 FailedLogs \u2013 \u672a\u80fd\u88ab\u5904\u7406\u6216\u52a0\u8f7d\u5230OpenSearch\u4e2d\u7684\u65e5\u5fd7\u8bb0\u5f55\u6216\u4e8b\u4ef6\u6570\u3002 ConcurrentExecutions \u2013 \u5904\u7406\u4e8b\u4ef6\u7684\u51fd\u6570\u5b9e\u4f8b\u6570\u3002\u5982\u679c\u6b64\u6570\u8fbe\u5230\u60a8\u5728\u8be5\u533a\u57df\u7684 \u5e76\u53d1\u6267\u884c\u9650\u989d \uff0c\u6216\u51fd\u6570\u7684 \u9884\u7559\u5e76\u53d1\u9650\u5236 \uff0c\u5219Lambda\u4f1a\u5bf9\u5176\u4ed6\u8c03\u7528\u8bf7\u6c42\u8fdb\u884c\u9650\u6d41\u3002 Duration \u2013 \u51fd\u6570\u4ee3\u7801\u5904\u7406\u4e8b\u4ef6\u6240\u9700\u7684\u65f6\u95f4\u3002\u5bf9\u4e8e\u4e00\u4e2a\u8c03\u7528\u7684\u8ba1\u8d39\u65f6\u957f\uff0c\u662f\u5c06Duration\u7684\u503c\u56db\u820d\u4e94\u5165\u5230\u6700\u8fd1\u7684\u6beb\u79d2\u3002 Throttles \u2013 \u88ab\u9650\u6d41\u7684\u8c03\u7528\u8bf7\u6c42\u6570\u3002\u5f53\u6240\u6709\u51fd\u6570\u5b9e\u4f8b\u90fd\u5728\u5904\u7406\u8bf7\u6c42\u4e14\u6ca1\u6709\u53ef\u7528\u7684\u5e76\u53d1\u6570\u8fdb\u884c\u6269\u5c55\u65f6\uff0cLambda\u5c06\u4f7f\u7528TooManyRequestsException\u9519\u8bef\u62d2\u7edd\u9644\u52a0\u8bf7\u6c42\u3002\u88ab\u9650\u6d41\u7684\u8bf7\u6c42\u548c\u5176\u4ed6\u8c03\u7528\u9519\u8bef\u65e2\u4e0d\u8ba1\u5165\u8c03\u7528\u6b21\u6570\uff0c\u4e5f\u4e0d\u8ba1\u5165\u9519\u8bef\u6b21\u6570\u3002 Invocations \u2013 \u51fd\u6570\u4ee3\u7801\u88ab\u8c03\u7528\u7684\u6b21\u6570\uff0c\u5305\u62ec\u6210\u529f\u8c03\u7528\u548c\u5bfc\u81f4\u51fd\u6570\u9519\u8bef\u7684\u8c03\u7528\u3002\u5982\u679c\u8c03\u7528\u8bf7\u6c42\u88ab\u9650\u6d41\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u5bfc\u81f4\u8c03\u7528\u9519\u8bef\uff0c\u5219\u4e0d\u8bb0\u5f55\u8c03\u7528\u6b21\u6570\u3002Invocations\u7684\u503c\u7b49\u4e8e\u8ba1\u8d39\u7684\u8bf7\u6c42\u6b21\u6570\u3002","title":"\u65e5\u5fd7\u5904\u7406\u5668\u6307\u6807"},{"location":"implementation-guide/release-notes/","text":"\u65e5\u671f \u66f4\u65b0\u8bb0\u5f55 2023 \u5e74 6 \u6708 \u4fee\u590dEKS Fluent-Bit\u90e8\u7f72\u914d\u7f6e\u751f\u6210\u95ee\u9898 2023 \u5e74 4 \u6708 \u4fee\u590d\u7531\u4e8eS3 ACL \u53d8\u5316\u800c\u5bfc\u81f4\u7684\u90e8\u7f72\u5931\u8d25\u95ee\u9898 2023 \u5e74 3 \u6708 \u9996\u6b21\u53d1\u5e03\u7248\u672c 1.0.0 2023 \u5e74 8 \u6708 \u53d1\u5e03\u7248\u672c 2.0.0 \u6dfb\u52a0\u4e86\u4eceS3\u5b58\u50a8\u6876\u6301\u7eed\u6216\u6309\u9700\u6444\u53d6\u65e5\u5fd7\u7684\u529f\u80fd \u5728\u89e3\u51b3\u65b9\u6848\u63a7\u5236\u53f0\u4e2d\u6dfb\u52a0\u4e86\u65e5\u5fd7\u7ba1\u9053\u76d1\u63a7\u4eea\u8868\u677f \u652f\u6301\u4e00\u952e\u542f\u7528\u7ba1\u9053\u544a\u8b66 \u5728\u521b\u5efa\u5b9e\u4f8b\u7ec4\u65f6\u6dfb\u52a0\u4e86\u81ea\u52a8\u9644\u52a0\u6240\u9700IAM\u7b56\u7565\u7684\u9009\u9879 \u5728\u65e5\u5fd7\u4ee3\u7406\u5b89\u88c5\u5931\u8d25\u65f6\u5728\u63a7\u5236\u53f0\u4e0a\u663e\u793a\u9519\u8bef\u6d88\u606f \u901a\u8fc7\u5141\u8bb8\u5ba2\u6237\u6307\u5b9a\u65e5\u5fd7\u6e90\uff0c\u66f4\u65b0\u4e86\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u521b\u5efa\u6d41\u7a0b \u5728\u5bfc\u5165\u57df\u6216\u9009\u62e9\u57df\u4ee5\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u65f6\uff0c\u5bf9OpenSearch\u57df\u8fdb\u884c\u4e86\u9a8c\u8bc1 \u652f\u6301\u5728AL2023\u5b9e\u4f8b\u4e0a\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u652f\u6301\u5c06\u4e0eCloudFront\u5173\u8054\u7684WAF\u91c7\u6837\u65e5\u5fd7\u4ece\u5176\u4ed6\u533a\u57df\uff08us-east-1\u4ee5\u5916\u7684\u533a\u57df\uff09\u6444\u53d6\u5230OpenSearch\u4e2d \u5141\u8bb8\u5728\u4e0d\u540c\u7684OpenSearch\u57df\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u7d22\u5f15\u540d\u79f0 2023 \u5e74 11 \u6708 \u53d1\u5e03\u7248\u672c 2.1.0 \u63a8\u51fa\u8f7b\u91cf\u7ea7\u65e5\u5fd7\u5206\u6790\u5f15\u64ce\uff0c\u57fa\u4e8eAthena\u7684\u65e0\u670d\u52a1\u5668\u3001\u63d0\u4f9b\u5177\u6709\u6210\u672c\u6548\u76ca\u7684\u5206\u6790\u5f15\u64ce\uff0c\u7528\u4e8e\u5206\u6790\u4f4e\u9891\u8bbf\u95ee\u65e5\u5fd7 \u65b0\u589e OpenSearch Ingestion\uff0c\u4ee5\u63d0\u4f9b\u66f4\u591a\u65e5\u5fd7\u5904\u7406\u529f\u80fd\u3002OSI \u53ef\u4ee5\u914d\u7f6e\u8ba1\u7b97\u8d44\u6e90 (OCU) \u5e76\u6309\u6444\u53d6\u5bb9\u91cf\u4ed8\u8d39 \u652f\u6301\u89e3\u6790\u5d4c\u5957JSON\u683c\u5f0f\u7684\u65e5\u5fd7 \u652f\u6301\u624b\u52a8\u4ece\u6307\u5b9a\u5b58\u50a8\u6876\u4e2d\u63d0\u53d6 CloudTrail \u65e5\u5fd7 \u4fee\u590d\u521b\u5efa\u5b9e\u4f8b\u7ec4\u65f6\u65e0\u6cd5\u5217\u51fa\u5b9e\u4f8b\u7684\u95ee\u9898 \u4fee\u590d\u4ece Auto Scaling \u7ec4\u542f\u52a8 EC2 \u5b9e\u4f8b\u65e0\u6cd5\u901a\u8fc7\u5065\u5eb7\u68c0\u67e5\u95ee\u9898 2023 \u5e74 12 \u6708 \u53d1\u5e03\u7248\u672c 2.1.1 \u4fee\u590d\u4e86\u4ee5\u4e0b\u95ee\u9898\uff1a \u5b9e\u4f8b\u4e0d\u5e94\u6dfb\u52a0\u5230\u540c\u4e00\u4e2a\u5b9e\u4f8b\u7ec4\u4e2d \u65e0\u6cd5\u5728\u963f\u8054\u914b\u5730\u533a\u90e8\u7f72 CLO \u5f53\u65e5\u5fd7\u914d\u7f6e\u4e2d\u672a\u6307\u5b9a\u65f6\u95f4\u952e\u65f6\uff0c\u5728\u8f7b\u91cf\u5206\u6790\u5f15\u64ce\u4e2d\u5f15\u8d77\u65e5\u5fd7\u6444\u53d6\u9519\u8bef 2024 \u5e74 3 \u6708 \u53d1\u5e03\u7248\u672c 2.1.2 \u4fee\u590d\u4e86\u4ee5\u4e0b\u95ee\u9898: \u89e3\u51b3\u4e86\u4e00\u4e2a\u4ece\u65e9\u4e8e 2.1.0 \u7248\u672c\u5347\u7ea7\u65f6\u4f1a\u5bfc\u81f4\u4e22\u5931 S3 \u901a\u77e5\u7684\u9519\u8bef\uff0c\u4ece\u800c\u963b\u6b62\u4ece S3 \u7f13\u51b2\u533a\u6b63\u786e\u6536\u96c6\u65e5\u5fd7\u3002 \u89e3\u51b3\u4e86\u5728\u65e5\u5fd7\u914d\u7f6e\u4e2d\u5305\u542b \"@timestamp\" \u5b57\u6bb5\u4f1a\u5bfc\u81f4\u521b\u5efa index_templates \u5931\u8d25\u7684\u95ee\u9898\uff0c\u4ece\u800c\u65e0\u6cd5\u5c06\u6570\u636e\u5199\u5165 OpenSearch\u3002 \u4fee\u590d\u4e86 Log Processor Lambda \u4e2d\u7531\u4e8e\u7f3a\u5c11 \"batch_size\" \u53d8\u91cf\u800c\u5bfc\u81f4\u5904\u7406\u5931\u8d25\u7684\u9519\u8bef\u3002 \u89e3\u51b3\u4e86\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u90e8\u7f72\u95ee\u9898\uff0c\u4e4b\u524d\u65e0\u6cd5\u8de8\u8d26\u6237\u90e8\u7f72 Lambda \u7ba1\u9053\u3002 \u4fee\u6b63\u4e86 ELB \u670d\u52a1\u65e5\u5fd7\u89e3\u6790\u5668\u5bfc\u81f4\u5927\u91cf\u65e5\u5fd7\u884c\u88ab\u7701\u7565\u7684\u95ee\u9898\u3002 \u4fee\u6539\u4e86\u5728\u73b0\u6709 OpenSearch \u7d22\u5f15\u4e2d\u521b\u5efa\u7ba1\u9053\u65f6\u663e\u793a\u7684\u4e0d\u51c6\u786e\u8b66\u544a\u6d88\u606f\u3002 \u89e3\u51b3\u4e86\u5728 Application Logs \u4e2d\u5220\u9664\u5b9e\u4f8b\u7ec4\u65f6\u663e\u793a\u4e0d\u6b63\u786e\u9519\u8bef\u6d88\u606f\u7684\u95ee\u9898\u3002","title":"\u66f4\u65b0\u8bb0\u5f55"},{"location":"implementation-guide/solution-components/","text":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6 \u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a \u57df\u7ba1\u7406 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (Amazon OpenSearch Service) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 Amazon OpenSearch Service \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 Amazon OpenSearch Service \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a Amazon OpenSearch Service \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002 \u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002\u65e5\u5fd7\u901a \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/solution-components/#_1","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/solution-components/#_2","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (Amazon OpenSearch Service) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 Amazon OpenSearch Service \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 Amazon OpenSearch Service \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a Amazon OpenSearch Service \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002","title":"\u57df\u7ba1\u7406"},{"location":"implementation-guide/solution-components/#_3","text":"\u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002\u65e5\u5fd7\u901a \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002","title":"\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/solution-components/#_4","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002","title":"\u670d\u52a1\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/solution-components/#_5","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/source/","text":"\u8bbf\u95ee\u6211\u4eec\u7684 GitHub \u4ed3\u5e93 \u6765\u4e0b\u8f7d\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u7684\u6e90\u4ee3\u7801\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u6a21\u677f\u662f\u4f7f\u7528 AWS Cloud Development Kit (CDK) \u751f\u6210\u7684\u3002\u8bf7\u53c2\u8003 README.md \u6587\u4ef6\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002","title":"\u5f00\u53d1\u8005\u8d44\u6e90"},{"location":"implementation-guide/trouble-shooting/","text":"\u6545\u969c\u6392\u67e5 \u4ee5\u4e0b\u4ecb\u7ecd\u5728\u4f7f\u7528\u65e5\u5fd7\u901a\u65f6\u53ef\u80fd\u9047\u5230\u7684\u9519\u8bef\u6216\u95ee\u9898\uff0c\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002 Error: Failed to assume service-linked role arn:x:x:x:/AWSServiceRoleForAppSync \u51fa\u73b0\u6b64\u9519\u8bef\u7684\u539f\u56e0\u662f\u8be5\u8d26\u6237\u4ece\u672a\u4f7f\u7528\u8fc7 AWS AppSync \u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u518d\u6b21\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u6a21\u677f\u3002\u5f53\u60a8\u9047\u5230\u9519\u8bef\u65f6\uff0cAWS \u5df2\u7ecf\u81ea\u52a8\u521b\u5efa\u4e86\u89d2\u8272\u3002 \u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 AWS CloudShell \u6216\u672c\u5730\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b AWS CLI \u547d\u4ee4\u4ee5\u94fe\u63a5 AppSync \u89d2\u8272\uff1a aws iam create-service-linked-role --aws-service-name appsync.amazonaws.com Error: Unable to add backend role \u65e5\u5fd7\u901a\u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 Amazon OpenSearch Service \u57df\u3002 \u60a8\u9700\u8981\u8f6c\u5230 Amazon OpenSearch Service \u63a7\u5236\u53f0\uff0c\u5e76\u7f16\u8f91 Amazon OpenSearch Service \u57df\u7684 \u8bbf\u95ee\u7b56\u7565 \u3002 Error\uff1aUser xxx is not authorized to perform sts:AssumeRole on resource \u5982\u679c\u60a8\u53d1\u73b0\u8be5\u9519\u8bef\uff0c\u8bf7\u5148\u786e\u4fdd\u60a8\u5728 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u8bbe\u7f6e \u4e2d\u6b63\u786e\u586b\u5199\u4e86\u6240\u6709\u4fe1\u606f\u3002\u7136\u540e\u8bf7\u7b49\u5f85\u5927\u7ea61\u5206\u949f\u5de6\u53f3\u540e\u518d\u91cd\u8bd5\u3002 \u65e5\u5fd7\u901a\u4f7f\u7528\u4e86 AssumeRole \u6765\u5217\u51fa\u6216\u521b\u5efa\u60a8\u6210\u5458\u8d26\u6237\u4e2d\u7684 AWS \u8d44\u6e90\u3002 \u8fd9\u4e9b IAM \u89d2\u8272\u662f\u5728\u60a8 \u8bbe\u7f6e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u65f6\u88ab\u521b\u5efa\u7684\uff0c\u4ed6\u4eec\u9700\u8981\u51e0\u79d2\u949f\u6216\u8005\u51e0\u5206\u949f\u7684\u65f6\u95f4\u624d\u80fd\u751f\u6548\u3002 Error: PutRecords API responded with error='InvalidSignatureException' Fluent-bit agent \u62a5\u9519 PutRecords API responded with error='InvalidSignatureException', message='The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.' \u8bf7\u91cd\u542f fluent-bit agent. \u6bd4\u5982\u5728 Amazon Linux2 \u7684 EC2 \u4e2d, \u8fd0\u884c\u4e00\u4e0b\u547d\u4ee4: sudo service fluent-bit restart Error: PutRecords API responded with error='AccessDeniedException' Fluent-bit agent \u5728 EKS \u96c6\u7fa4\u4e2d\u5411 Kinesis \u53d1\u9001\u65e5\u5fd7\u65f6\u6c47\u62a5\u4e86 \"AccessDeniedException\" \u9519\u8bef\u3002\u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u8bbe\u7f6e IAM \u89d2\u8272\u4fe1\u4efb\u5173\u7cfb\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0: \u6253\u5f00\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9\u8981\u68c0\u67e5\u7684EKS\u96c6\u7fa4\u3002 \u70b9\u51fb IAM \u89d2\u8272 ARN \uff0c \u8fd9\u4f1a\u5728 AWS \u63a7\u5236\u53f0\u4e2d\u6253\u5f00 IAM \u89d2\u8272\u3002 \u9009\u62e9 \u4fe1\u4efb\u5173\u7cfb \u9009\u9879\u5361\u4ee5\u9a8c\u8bc1 OIDC \u63d0\u4f9b\u65b9, \u670d\u52a1\u8d26\u6237\u547d\u540d\u7a7a\u95f4\u4ee5\u53ca\u6761\u4ef6\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u524d\u5f80 Amazon EKS IAM role configuration \u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u3002 \u6211\u7684 CloudFormation \u5806\u6808\u5728\u66f4\u65b0\u5806\u6808\u65f6\u88ab\u5361\u5728\u5220\u9664 AWS::Lambda::Function \u8d44\u6e90\u4e0a\u3002\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f Lambda\u51fd\u6570\u9a7b\u7559\u5728\u4e00\u4e2aVPC\u4e2d\uff0c\u4f60\u9700\u8981\u7b49\u5f85\u76f8\u5173\u7684ENI\u8d44\u6e90\u88ab\u5220\u9664\u3002 \u91cd\u542f EC2 \u5b9e\u4f8b\u540e\uff0c\u4ee3\u7406\u72b6\u6001\u4e3a\u79bb\u7ebf\uff0c\u5982\u4f55\u8ba9\u5b83\u5728\u5b9e\u4f8b\u91cd\u542f\u65f6\u81ea\u52a8\u542f\u52a8\uff1f \u8fd9\u79cd\u60c5\u51b5\u901a\u5e38\u53d1\u751f\u5728\u4f60\u5df2\u7ecf\u5b89\u88c5\u4e86\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f46\u662f\u5728\u4f60\u521b\u5efa\u4efb\u4f55\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\u5b9e\u4f8b\u53d1\u751f\u91cd\u542f\u3002\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u65e5\u5fd7\u6444\u53d6\uff0c\u65e5\u5fd7\u4ee3\u7406\u5c06\u81ea\u52a8\u91cd\u65b0\u542f\u52a8\u3002\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 systemctl status fluent-bit \u6765\u68c0\u67e5\u5b9e\u4f8b\u5185\u90e8\u7684\u72b6\u6001\u6765\u68c0\u67e5\u5b83\u5728\u5b9e\u4f8b\u4e2d\u7684\u72b6\u6001\u3002 \u6211\u5df2\u7ecf\u5207\u6362 global tenant\u3002\u4f46\u662f\uff0c\u6211\u4ecd\u7136\u65e0\u6cd5\u5728 OpenSearch \u4e2d\u627e\u5230\u4eea\u8868\u677f\u3002 \u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u65e5\u5fd7\u901a \u5728\u521b\u5efa\u7d22\u5f15\u6a21\u677f\u548c\u4eea\u8868\u677f\u65f6\u6536\u5230\u4e86\u6765\u81ea OpenSearch \u7684 403 \u9519\u8bef\u3002\u53ef\u4ee5\u901a\u8fc7\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u624b\u52a8\u91cd\u65b0\u8fd0\u884c Lambda \u51fd\u6570\u6765\u89e3\u51b3\u3002 \u6253\u5f00\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\uff0c\u5e76\u627e\u5230\u6709\u6b64\u95ee\u9898\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u3002 \u590d\u5236 ID \u90e8\u5206\u7684\u524d 5 \u4e2a\u5b57\u7b26\u3002\u4f8b\u5982\uff0c\u4f60\u5e94\u8be5\u4ece ID c169cb23-88f3-4a7e-90d7-4ab4bc18982c \u590d\u5236 c169c \u3002 \u8f6c\u5230 AWS\u63a7\u5236\u53f0 > Lambda\u3002\u7c98\u8d34\u5728\u51fd\u6570\u8fc7\u6ee4\u5668\u4e2d\u3002\u8fd9\u5c06\u8fc7\u6ee4\u6240\u6709\u4e3a\u8fd9\u4e2a AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u521b\u5efa\u7684 lambda \u51fd\u6570\u3002 \u70b9\u51fb\u540d\u79f0\u5305\u542b \"OpenSearchHelperFn\" \u7684 Lambda \u51fd\u6570\u3002 \u5728 \u6d4b\u8bd5 \u6807\u7b7e\u4e2d\uff0c\u7528\u4efb\u4f55\u4e8b\u4ef6\u540d\u79f0\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u4ef6\u3002 \u70b9\u51fb \u6d4b\u8bd5 \u6309\u94ae\u6765\u89e6\u53d1 Lambda\uff0c\u5e76\u7b49\u5f85 Lambda \u51fd\u6570\u7684\u5b8c\u6210\u3002 \u4eea\u8868\u677f\u5e94\u8be5\u53ef\u4ee5\u5728 OpenSearch \u4e2d\u4f7f\u7528\u3002 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u663e\u793aError: version `GLIBC_2.25' not found \u8fd9\u4e2a\u9519\u8bef\u662f\u7531\u4e8e glibc \u7248\u672c\u8fc7\u4f4e. \u5bf9\u4e8e1.2\u4ee5\u4e0a\u7248\u672c\u7684\u65e5\u5fd7\u901a, \u9700\u8981 glibc-2.25 \u6216\u4ee5\u4e0a\u7248\u672c, \u6240\u4ee5\u60a8\u9700\u8981\u5148\u5347\u7ea7EC2\u5185\u7684glibc\u5e93\u6587\u4ef6\u3002 \u4ee5\u4e0b\u5206\u522b\u662f\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4f7f\u7528\u7684\u5347\u7ea7\u547d\u4ee4: \u91cd\u8981 \u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u5148\u5728\u6d4b\u8bd5\u73af\u5883\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u3002\u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e25\u91cd\u635f\u5931\u3002 Redhat 7.9 \u5bf9\u4e8e Redhat 7.9, \u6574\u4e2a\u5347\u7ea7\u8fc7\u7a0b\u5927\u6982\u82b1\u8d39\u4e24\u5c0f\u65f6, \u8bf7\u81f3\u5c11\u4fdd\u8bc1\u673a\u5668\u670910GiB\u4ee5\u4e0a\u7684\u786c\u76d8\u7a7a\u95f4. # \u5b89\u88c5\u5e93\u6587\u4ef6 yum install -y gcc gcc-c++ m4 python3 bison fontconfig-devel libXpm-devel texinfo bzip2 wget echo /usr/local/lib >> /etc/ld.so.conf # \u521b\u5efa tmp \u76ee\u5f55 mkdir -p /tmp/library cd /tmp/library # \u5b89\u88c5 gmp-6.1.0 wget https://ftp.gnu.org/gnu/gmp/gmp-6.1.0.tar.bz2 tar xjvf gmp-6.1.0.tar.bz2 cd gmp-6.1.0 ./configure --prefix=/usr/local make && make install ldconfig cd .. # \u5b89\u88c5 mpfr-3.1.4 wget https://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2 tar xjvf mpfr-3.1.4.tar.bz2 cd mpfr-3.1.4 ./configure --with-gmp=/usr/local --prefix=/usr/local make && make install ldconfig cd .. # \u5b89\u88c5 mpc-1.0.3 wget https://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz tar xzvf mpc-1.0.3.tar.gz cd mpc-1.0.3 ./configure --prefix=/usr/local make && make install ldconfig cd .. # \u5b89\u88c5 gcc-9.3.0 wget https://ftp.gnu.org/gnu/gcc/gcc-9.3.0/gcc-9.3.0.tar.gz tar xzvf gcc-9.3.0.tar.gz cd gcc-9.3.0 mkdir build cd build/ ../configure --enable-checking=release --enable-language=c,c++ --disable-multilib --prefix=/usr make -j4 && make install ldconfig cd ../.. # \u5b89\u88c5 make-4.3 wget https://ftp.gnu.org/gnu/make/make-4.3.tar.gz tar xzvf make-4.3.tar.gz cd make-4.3 mkdir build cd build ../configure --prefix=/usr make && make install cd ../.. # \u5b89\u88c5 glibc-2.31 wget https://ftp.gnu.org/gnu/glibc/glibc-2.31.tar.gz tar xzvf glibc-2.31.tar.gz cd glibc-2.31 mkdir build cd build/ ../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin --disable-sanity-checks --disable-werror make all && make install make localedata/install-locales # \u6e05\u7406 tmp \u76ee\u5f55 cd /tmp rm -rf /tmp/library Ubuntu 22 sudo ln -s /snap/core20/1623/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 sudo ln -s /snap/core20/1623/usr/lib/x86_64-linux-gnu/libssl.so.1.1 /usr/lib/x86_64-linux-gnu/libssl.so.1.1 sudo ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Amazon Linux 2023 sudo su - yum install -y wget perl unzip gcc zlib-devel mkdir /tmp/openssl cd /tmp/openssl wget https://www.openssl.org/source/openssl-1.1.1s.tar.gz tar xzvf openssl-1.1.1s.tar.gz cd openssl-1.1.1s ./config --prefix=/usr/local/openssl11 --openssldir=/usr/local/openssl11 shared zlib make make install echo /usr/local/openssl11/lib/ >> /etc/ld.so.conf ldconfig","title":"\u6545\u969c\u6392\u67e5"},{"location":"implementation-guide/trouble-shooting/#_1","text":"\u4ee5\u4e0b\u4ecb\u7ecd\u5728\u4f7f\u7528\u65e5\u5fd7\u901a\u65f6\u53ef\u80fd\u9047\u5230\u7684\u9519\u8bef\u6216\u95ee\u9898\uff0c\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002","title":"\u6545\u969c\u6392\u67e5"},{"location":"implementation-guide/trouble-shooting/#error-failed-to-assume-service-linked-role-arnxxxawsserviceroleforappsync","text":"\u51fa\u73b0\u6b64\u9519\u8bef\u7684\u539f\u56e0\u662f\u8be5\u8d26\u6237\u4ece\u672a\u4f7f\u7528\u8fc7 AWS AppSync \u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u518d\u6b21\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u6a21\u677f\u3002\u5f53\u60a8\u9047\u5230\u9519\u8bef\u65f6\uff0cAWS \u5df2\u7ecf\u81ea\u52a8\u521b\u5efa\u4e86\u89d2\u8272\u3002 \u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 AWS CloudShell \u6216\u672c\u5730\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b AWS CLI \u547d\u4ee4\u4ee5\u94fe\u63a5 AppSync \u89d2\u8272\uff1a aws iam create-service-linked-role --aws-service-name appsync.amazonaws.com","title":"Error: Failed to assume service-linked role arn:x:x:x:/AWSServiceRoleForAppSync"},{"location":"implementation-guide/trouble-shooting/#error-unable-to-add-backend-role","text":"\u65e5\u5fd7\u901a\u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 Amazon OpenSearch Service \u57df\u3002 \u60a8\u9700\u8981\u8f6c\u5230 Amazon OpenSearch Service \u63a7\u5236\u53f0\uff0c\u5e76\u7f16\u8f91 Amazon OpenSearch Service \u57df\u7684 \u8bbf\u95ee\u7b56\u7565 \u3002","title":"Error: Unable to add backend role"},{"location":"implementation-guide/trouble-shooting/#erroruser-xxx-is-not-authorized-to-perform-stsassumerole-on-resource","text":"\u5982\u679c\u60a8\u53d1\u73b0\u8be5\u9519\u8bef\uff0c\u8bf7\u5148\u786e\u4fdd\u60a8\u5728 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u8bbe\u7f6e \u4e2d\u6b63\u786e\u586b\u5199\u4e86\u6240\u6709\u4fe1\u606f\u3002\u7136\u540e\u8bf7\u7b49\u5f85\u5927\u7ea61\u5206\u949f\u5de6\u53f3\u540e\u518d\u91cd\u8bd5\u3002 \u65e5\u5fd7\u901a\u4f7f\u7528\u4e86 AssumeRole \u6765\u5217\u51fa\u6216\u521b\u5efa\u60a8\u6210\u5458\u8d26\u6237\u4e2d\u7684 AWS \u8d44\u6e90\u3002 \u8fd9\u4e9b IAM \u89d2\u8272\u662f\u5728\u60a8 \u8bbe\u7f6e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u65f6\u88ab\u521b\u5efa\u7684\uff0c\u4ed6\u4eec\u9700\u8981\u51e0\u79d2\u949f\u6216\u8005\u51e0\u5206\u949f\u7684\u65f6\u95f4\u624d\u80fd\u751f\u6548\u3002","title":"Error\uff1aUser xxx is not authorized to perform sts:AssumeRole on resource"},{"location":"implementation-guide/trouble-shooting/#error-putrecords-api-responded-with-errorinvalidsignatureexception","text":"Fluent-bit agent \u62a5\u9519 PutRecords API responded with error='InvalidSignatureException', message='The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.' \u8bf7\u91cd\u542f fluent-bit agent. \u6bd4\u5982\u5728 Amazon Linux2 \u7684 EC2 \u4e2d, \u8fd0\u884c\u4e00\u4e0b\u547d\u4ee4: sudo service fluent-bit restart","title":"Error: PutRecords API responded with error='InvalidSignatureException'"},{"location":"implementation-guide/trouble-shooting/#error-putrecords-api-responded-with-erroraccessdeniedexception","text":"Fluent-bit agent \u5728 EKS \u96c6\u7fa4\u4e2d\u5411 Kinesis \u53d1\u9001\u65e5\u5fd7\u65f6\u6c47\u62a5\u4e86 \"AccessDeniedException\" \u9519\u8bef\u3002\u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u8bbe\u7f6e IAM \u89d2\u8272\u4fe1\u4efb\u5173\u7cfb\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0: \u6253\u5f00\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9\u8981\u68c0\u67e5\u7684EKS\u96c6\u7fa4\u3002 \u70b9\u51fb IAM \u89d2\u8272 ARN \uff0c \u8fd9\u4f1a\u5728 AWS \u63a7\u5236\u53f0\u4e2d\u6253\u5f00 IAM \u89d2\u8272\u3002 \u9009\u62e9 \u4fe1\u4efb\u5173\u7cfb \u9009\u9879\u5361\u4ee5\u9a8c\u8bc1 OIDC \u63d0\u4f9b\u65b9, \u670d\u52a1\u8d26\u6237\u547d\u540d\u7a7a\u95f4\u4ee5\u53ca\u6761\u4ef6\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u524d\u5f80 Amazon EKS IAM role configuration \u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u3002","title":"Error: PutRecords API responded with error='AccessDeniedException'"},{"location":"implementation-guide/trouble-shooting/#cloudformation-awslambdafunction","text":"Lambda\u51fd\u6570\u9a7b\u7559\u5728\u4e00\u4e2aVPC\u4e2d\uff0c\u4f60\u9700\u8981\u7b49\u5f85\u76f8\u5173\u7684ENI\u8d44\u6e90\u88ab\u5220\u9664\u3002","title":"\u6211\u7684 CloudFormation \u5806\u6808\u5728\u66f4\u65b0\u5806\u6808\u65f6\u88ab\u5361\u5728\u5220\u9664 AWS::Lambda::Function \u8d44\u6e90\u4e0a\u3002\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f"},{"location":"implementation-guide/trouble-shooting/#ec2","text":"\u8fd9\u79cd\u60c5\u51b5\u901a\u5e38\u53d1\u751f\u5728\u4f60\u5df2\u7ecf\u5b89\u88c5\u4e86\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f46\u662f\u5728\u4f60\u521b\u5efa\u4efb\u4f55\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\u5b9e\u4f8b\u53d1\u751f\u91cd\u542f\u3002\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u65e5\u5fd7\u6444\u53d6\uff0c\u65e5\u5fd7\u4ee3\u7406\u5c06\u81ea\u52a8\u91cd\u65b0\u542f\u52a8\u3002\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 systemctl status fluent-bit \u6765\u68c0\u67e5\u5b9e\u4f8b\u5185\u90e8\u7684\u72b6\u6001\u6765\u68c0\u67e5\u5b83\u5728\u5b9e\u4f8b\u4e2d\u7684\u72b6\u6001\u3002","title":"\u91cd\u542f EC2 \u5b9e\u4f8b\u540e\uff0c\u4ee3\u7406\u72b6\u6001\u4e3a\u79bb\u7ebf\uff0c\u5982\u4f55\u8ba9\u5b83\u5728\u5b9e\u4f8b\u91cd\u542f\u65f6\u81ea\u52a8\u542f\u52a8\uff1f"},{"location":"implementation-guide/trouble-shooting/#global-tenant-opensearch","text":"\u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u65e5\u5fd7\u901a \u5728\u521b\u5efa\u7d22\u5f15\u6a21\u677f\u548c\u4eea\u8868\u677f\u65f6\u6536\u5230\u4e86\u6765\u81ea OpenSearch \u7684 403 \u9519\u8bef\u3002\u53ef\u4ee5\u901a\u8fc7\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u624b\u52a8\u91cd\u65b0\u8fd0\u884c Lambda \u51fd\u6570\u6765\u89e3\u51b3\u3002 \u6253\u5f00\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\uff0c\u5e76\u627e\u5230\u6709\u6b64\u95ee\u9898\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u3002 \u590d\u5236 ID \u90e8\u5206\u7684\u524d 5 \u4e2a\u5b57\u7b26\u3002\u4f8b\u5982\uff0c\u4f60\u5e94\u8be5\u4ece ID c169cb23-88f3-4a7e-90d7-4ab4bc18982c \u590d\u5236 c169c \u3002 \u8f6c\u5230 AWS\u63a7\u5236\u53f0 > Lambda\u3002\u7c98\u8d34\u5728\u51fd\u6570\u8fc7\u6ee4\u5668\u4e2d\u3002\u8fd9\u5c06\u8fc7\u6ee4\u6240\u6709\u4e3a\u8fd9\u4e2a AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u521b\u5efa\u7684 lambda \u51fd\u6570\u3002 \u70b9\u51fb\u540d\u79f0\u5305\u542b \"OpenSearchHelperFn\" \u7684 Lambda \u51fd\u6570\u3002 \u5728 \u6d4b\u8bd5 \u6807\u7b7e\u4e2d\uff0c\u7528\u4efb\u4f55\u4e8b\u4ef6\u540d\u79f0\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u4ef6\u3002 \u70b9\u51fb \u6d4b\u8bd5 \u6309\u94ae\u6765\u89e6\u53d1 Lambda\uff0c\u5e76\u7b49\u5f85 Lambda \u51fd\u6570\u7684\u5b8c\u6210\u3002 \u4eea\u8868\u677f\u5e94\u8be5\u53ef\u4ee5\u5728 OpenSearch \u4e2d\u4f7f\u7528\u3002","title":"\u6211\u5df2\u7ecf\u5207\u6362 global tenant\u3002\u4f46\u662f\uff0c\u6211\u4ecd\u7136\u65e0\u6cd5\u5728 OpenSearch \u4e2d\u627e\u5230\u4eea\u8868\u677f\u3002"},{"location":"implementation-guide/trouble-shooting/#fluent-bit-error-version-glibc_225-not-found","text":"\u8fd9\u4e2a\u9519\u8bef\u662f\u7531\u4e8e glibc \u7248\u672c\u8fc7\u4f4e. \u5bf9\u4e8e1.2\u4ee5\u4e0a\u7248\u672c\u7684\u65e5\u5fd7\u901a, \u9700\u8981 glibc-2.25 \u6216\u4ee5\u4e0a\u7248\u672c, \u6240\u4ee5\u60a8\u9700\u8981\u5148\u5347\u7ea7EC2\u5185\u7684glibc\u5e93\u6587\u4ef6\u3002 \u4ee5\u4e0b\u5206\u522b\u662f\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4f7f\u7528\u7684\u5347\u7ea7\u547d\u4ee4: \u91cd\u8981 \u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u5148\u5728\u6d4b\u8bd5\u73af\u5883\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u3002\u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e25\u91cd\u635f\u5931\u3002","title":"Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u663e\u793aError: version `GLIBC_2.25' not found"},{"location":"implementation-guide/trouble-shooting/#redhat-79","text":"\u5bf9\u4e8e Redhat 7.9, \u6574\u4e2a\u5347\u7ea7\u8fc7\u7a0b\u5927\u6982\u82b1\u8d39\u4e24\u5c0f\u65f6, \u8bf7\u81f3\u5c11\u4fdd\u8bc1\u673a\u5668\u670910GiB\u4ee5\u4e0a\u7684\u786c\u76d8\u7a7a\u95f4. # \u5b89\u88c5\u5e93\u6587\u4ef6 yum install -y gcc gcc-c++ m4 python3 bison fontconfig-devel libXpm-devel texinfo bzip2 wget echo /usr/local/lib >> /etc/ld.so.conf # \u521b\u5efa tmp \u76ee\u5f55 mkdir -p /tmp/library cd /tmp/library # \u5b89\u88c5 gmp-6.1.0 wget https://ftp.gnu.org/gnu/gmp/gmp-6.1.0.tar.bz2 tar xjvf gmp-6.1.0.tar.bz2 cd gmp-6.1.0 ./configure --prefix=/usr/local make && make install ldconfig cd .. # \u5b89\u88c5 mpfr-3.1.4 wget https://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2 tar xjvf mpfr-3.1.4.tar.bz2 cd mpfr-3.1.4 ./configure --with-gmp=/usr/local --prefix=/usr/local make && make install ldconfig cd .. # \u5b89\u88c5 mpc-1.0.3 wget https://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz tar xzvf mpc-1.0.3.tar.gz cd mpc-1.0.3 ./configure --prefix=/usr/local make && make install ldconfig cd .. # \u5b89\u88c5 gcc-9.3.0 wget https://ftp.gnu.org/gnu/gcc/gcc-9.3.0/gcc-9.3.0.tar.gz tar xzvf gcc-9.3.0.tar.gz cd gcc-9.3.0 mkdir build cd build/ ../configure --enable-checking=release --enable-language=c,c++ --disable-multilib --prefix=/usr make -j4 && make install ldconfig cd ../.. # \u5b89\u88c5 make-4.3 wget https://ftp.gnu.org/gnu/make/make-4.3.tar.gz tar xzvf make-4.3.tar.gz cd make-4.3 mkdir build cd build ../configure --prefix=/usr make && make install cd ../.. # \u5b89\u88c5 glibc-2.31 wget https://ftp.gnu.org/gnu/glibc/glibc-2.31.tar.gz tar xzvf glibc-2.31.tar.gz cd glibc-2.31 mkdir build cd build/ ../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin --disable-sanity-checks --disable-werror make all && make install make localedata/install-locales # \u6e05\u7406 tmp \u76ee\u5f55 cd /tmp rm -rf /tmp/library","title":"Redhat 7.9"},{"location":"implementation-guide/trouble-shooting/#ubuntu-22","text":"sudo ln -s /snap/core20/1623/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 sudo ln -s /snap/core20/1623/usr/lib/x86_64-linux-gnu/libssl.so.1.1 /usr/lib/x86_64-linux-gnu/libssl.so.1.1 sudo ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"Ubuntu 22"},{"location":"implementation-guide/trouble-shooting/#amazon-linux-2023","text":"sudo su - yum install -y wget perl unzip gcc zlib-devel mkdir /tmp/openssl cd /tmp/openssl wget https://www.openssl.org/source/openssl-1.1.1s.tar.gz tar xzvf openssl-1.1.1s.tar.gz cd openssl-1.1.1s ./config --prefix=/usr/local/openssl11 --openssldir=/usr/local/openssl11 shared zlib make make install echo /usr/local/openssl11/lib/ >> /etc/ld.so.conf ldconfig","title":"Amazon Linux 2023"},{"location":"implementation-guide/uninstall/","text":"\u5378\u8f7d\u89e3\u51b3\u65b9\u6848 \u8b66\u544a \u5982\u679c\u5728\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\u4e4b\u524d\u5220\u9664\u65e5\u5fd7\u901a\u4e3b\u5806\u6808\uff0c\u60a8\u5c06\u9047\u5230 IAM \u89d2\u8272\u4e22\u5931\u9519\u8bef\u3002 \u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u542f\u52a8\u989d\u5916\u7684 CloudFormation \u5806\u6808\u4ee5\u6444\u53d6\u65e5\u5fd7\u3002 \u5982\u679c\u8981\u5378\u89e3\u51b3\u65b9\u6848\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u5148\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\uff08\u5305\u62ec AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff09\u3002 \u6b65\u9aa4 1. \u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053 \u91cd\u8981 \u8bf7\u5728\u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u524d\uff0c\u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u5185\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6\u3002 \u767b\u9646\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u4e00\u6761\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u67e5\u770b\u8be6\u60c5\u3002 \u5728 \u6444\u53d6 \u9009\u9879\u5361\u4e2d, \u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u4e2d\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6\u3002 \u5378\u8f7d/\u505c\u7528 Fluent Bit \u4ee3\u7406\u3002 EC2 (\u53ef\u9009): \u4ece EC2 \u5b9e\u4f8b\u7ec4\u4e2d\u5220\u9664\u65e5\u5fd7\u63d0\u53d6\u540e\u3002 Fluent Bit \u5c06\u81ea\u52a8\u505c\u6b62\u53d1\u9001\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u60a8\u7684\u5b9e\u4f8b\u4e2d\u505c\u6b62 Fluent Bit\u3002 \u4ee5\u4e0b\u662f\u505c\u6b62 Fluent Bit \u4ee3\u7406\u7684\u547d\u4ee4\u3002 sudo service fluent-bit stop sudo systemctl disable fluent-bit.service EKS DaemonSet (\u5fc5\u9700): \u5982\u679c\u60a8\u9009\u62e9\u4f7f\u7528 DaemonSet \u90e8\u7f72 Fluent Bit \u4ee3\u7406\uff0c\u5219\u9700\u8981\u5220\u9664\u60a8\u7684 Fluent Bit \u4ee3\u7406\u3002 \u5426\u5219\uff0c\u4ee3\u7406\u5c06\u7ee7\u7eed\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u65e5\u5fd7\u901a \u7ba1\u9053\u3002 kubectl delete -f ~/fluent-bit-logging.yaml EKS SideCar\uff08\u5fc5\u9700\uff09: \u8bf7\u5728\u60a8\u7684 .yaml \u6587\u4ef6\u4e2d\u5220\u9664 Fluent Bit\uff0c\u5e76\u91cd\u542f\u60a8\u7684\u5e94\u7528. \u5220\u9664\u8be5\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5bf9\u4e8e\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u8bf7\u91cd\u590d\u7b2c2\u6b65\u81f3\u7b2c5\u6b65\u6765\u5220\u9664\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\u3002 \u6b65\u9aa4 2. \u5220\u9664 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0, \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u8bf7\u9010\u4e00\u5220\u9664\u60a8\u521b\u5efa\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u3002 \u6b65\u9aa4 3. \u6e05\u9664\u5bfc\u5165\u7684 Amazon OpenSearch Service \u57df \u5220\u9664\u8bbf\u95ee\u4ee3\u7406 \u3002 \u5220\u9664\u65e5\u5fd7\u901a \u521b\u5efa\u7684\u544a\u8b66 \u3002 \u5220\u9664\u65e5\u5fd7\u901a \u7684 VPC \u548c Amazon OpenSearch Service \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002 \u524d\u5f80 AWS VPC \u63a7\u5236\u53f0 \u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u70b9\u51fb \u5bf9\u7b49\u8fde\u63a5 \u3002 \u627e\u5230\u5e76\u5220\u9664\u65e5\u5fd7\u901a \u7684 VPC \u548c Amazon OpenSearch Service \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002\u5982\u679c\u60a8\u5728\u5bfc\u5165 OpenSearch \u57df\u65f6\u6ca1\u6709\u4f7f\u7528\u201c\u81ea\u52a8\u201d\u6a21\u5f0f\uff0c\u60a8\u53ef\u80fd\u6ca1\u6709\u5bf9\u7b49\u8fde\u63a5\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5220\u9664\u5bfc\u5165\u7684 Amazon OpenSearch Service \u57df\u3002 (\u4ece\u65e5\u5fd7\u901a \u4e2d\u5220\u9664 Amazon OpenSearch Service \u57df\u4e0d\u4f1a\u5f71\u54cd\u5230 AWS \u8d26\u6237\u4e2d\u7684 Amazon OpenSearch Service \u57df\u3002) \u6b65\u9aa4 4. \u5220\u9664\u89e3\u51b3\u65b9\u6848\u5806\u6808 \u8bbf\u95ee CloudFormation \u63a7\u5236\u53f0 \u3002 \u627e\u5230\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 (\u53ef\u9009) \u5220\u9664\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684 S3 \u6876\u3002 \u91cd\u8981 \u5305\u542b LoggingBucket \u5b57\u6bb5\u7684 S3 \u6876\u662f\u65e5\u5fd7\u901a \u521b\u5efa\u7684\u65e5\u5fd7\u6876. \u60a8\u53ef\u80fd\u5df2\u7ecf\u5728\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u65f6\u542f\u7528\u4e86\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\uff0c\u5e76\u5c06\u65e5\u5fd7\u6536\u96c6\u5230\u8be5 S3 \u6876\u4e2d\u3002 \u5220\u9664\u8be5 S3 \u6876\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\u53d1\u9001\u5931\u8d25\u3002 \u627e\u5230\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u5806\u6808\uff0c\u70b9\u51fb \u8d44\u6e90 \u9009\u9879\u5361\u3002 \u5728\u641c\u7d22\u680f\u4e2d\u8f93\u5165 AWS::S3::Bucket \u3002\u8fd9\u6837\u80fd\u663e\u793a\u6240\u6709\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684 S3 \u6876, S3 \u6876\u7684\u540d\u5b57\u53ef\u4ee5\u5728 Physical ID \u8fd9\u4e00\u680f\u4e2d\u770b\u5230\u3002 \u767b\u9646 AWS \u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5e76\u524d\u5f80 S3 \u670d\u52a1\u3002\u901a\u8fc7 S3 \u6876\u7684\u540d\u5b57\u627e\u5230\u5bf9\u5e94\u7684 S3 \u6876\u3002 \u6e05\u7a7a \u5e76 \u5220\u9664 \u8be5 S3 \u6876. \u5220\u9664\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002","title":"\u5378\u8f7d\u89e3\u51b3\u65b9\u6848"},{"location":"implementation-guide/uninstall/#_1","text":"\u8b66\u544a \u5982\u679c\u5728\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\u4e4b\u524d\u5220\u9664\u65e5\u5fd7\u901a\u4e3b\u5806\u6808\uff0c\u60a8\u5c06\u9047\u5230 IAM \u89d2\u8272\u4e22\u5931\u9519\u8bef\u3002 \u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u542f\u52a8\u989d\u5916\u7684 CloudFormation \u5806\u6808\u4ee5\u6444\u53d6\u65e5\u5fd7\u3002 \u5982\u679c\u8981\u5378\u89e3\u51b3\u65b9\u6848\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\u5148\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\uff08\u5305\u62ec AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff09\u3002","title":"\u5378\u8f7d\u89e3\u51b3\u65b9\u6848"},{"location":"implementation-guide/uninstall/#1","text":"\u91cd\u8981 \u8bf7\u5728\u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u524d\uff0c\u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u5185\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6\u3002 \u767b\u9646\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u4e00\u6761\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u67e5\u770b\u8be6\u60c5\u3002 \u5728 \u6444\u53d6 \u9009\u9879\u5361\u4e2d, \u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u4e2d\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6\u3002 \u5378\u8f7d/\u505c\u7528 Fluent Bit \u4ee3\u7406\u3002 EC2 (\u53ef\u9009): \u4ece EC2 \u5b9e\u4f8b\u7ec4\u4e2d\u5220\u9664\u65e5\u5fd7\u63d0\u53d6\u540e\u3002 Fluent Bit \u5c06\u81ea\u52a8\u505c\u6b62\u53d1\u9001\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u60a8\u7684\u5b9e\u4f8b\u4e2d\u505c\u6b62 Fluent Bit\u3002 \u4ee5\u4e0b\u662f\u505c\u6b62 Fluent Bit \u4ee3\u7406\u7684\u547d\u4ee4\u3002 sudo service fluent-bit stop sudo systemctl disable fluent-bit.service EKS DaemonSet (\u5fc5\u9700): \u5982\u679c\u60a8\u9009\u62e9\u4f7f\u7528 DaemonSet \u90e8\u7f72 Fluent Bit \u4ee3\u7406\uff0c\u5219\u9700\u8981\u5220\u9664\u60a8\u7684 Fluent Bit \u4ee3\u7406\u3002 \u5426\u5219\uff0c\u4ee3\u7406\u5c06\u7ee7\u7eed\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u65e5\u5fd7\u901a \u7ba1\u9053\u3002 kubectl delete -f ~/fluent-bit-logging.yaml EKS SideCar\uff08\u5fc5\u9700\uff09: \u8bf7\u5728\u60a8\u7684 .yaml \u6587\u4ef6\u4e2d\u5220\u9664 Fluent Bit\uff0c\u5e76\u91cd\u542f\u60a8\u7684\u5e94\u7528. \u5220\u9664\u8be5\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5bf9\u4e8e\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u8bf7\u91cd\u590d\u7b2c2\u6b65\u81f3\u7b2c5\u6b65\u6765\u5220\u9664\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 1. \u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/uninstall/#2-aws","text":"\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0, \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u8bf7\u9010\u4e00\u5220\u9664\u60a8\u521b\u5efa\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 2. \u5220\u9664 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/uninstall/#3-amazon-opensearch-service","text":"\u5220\u9664\u8bbf\u95ee\u4ee3\u7406 \u3002 \u5220\u9664\u65e5\u5fd7\u901a \u521b\u5efa\u7684\u544a\u8b66 \u3002 \u5220\u9664\u65e5\u5fd7\u901a \u7684 VPC \u548c Amazon OpenSearch Service \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002 \u524d\u5f80 AWS VPC \u63a7\u5236\u53f0 \u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u70b9\u51fb \u5bf9\u7b49\u8fde\u63a5 \u3002 \u627e\u5230\u5e76\u5220\u9664\u65e5\u5fd7\u901a \u7684 VPC \u548c Amazon OpenSearch Service \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002\u5982\u679c\u60a8\u5728\u5bfc\u5165 OpenSearch \u57df\u65f6\u6ca1\u6709\u4f7f\u7528\u201c\u81ea\u52a8\u201d\u6a21\u5f0f\uff0c\u60a8\u53ef\u80fd\u6ca1\u6709\u5bf9\u7b49\u8fde\u63a5\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5220\u9664\u5bfc\u5165\u7684 Amazon OpenSearch Service \u57df\u3002 (\u4ece\u65e5\u5fd7\u901a \u4e2d\u5220\u9664 Amazon OpenSearch Service \u57df\u4e0d\u4f1a\u5f71\u54cd\u5230 AWS \u8d26\u6237\u4e2d\u7684 Amazon OpenSearch Service \u57df\u3002)","title":"\u6b65\u9aa4 3. \u6e05\u9664\u5bfc\u5165\u7684 Amazon OpenSearch Service \u57df"},{"location":"implementation-guide/uninstall/#4","text":"\u8bbf\u95ee CloudFormation \u63a7\u5236\u53f0 \u3002 \u627e\u5230\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 (\u53ef\u9009) \u5220\u9664\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684 S3 \u6876\u3002 \u91cd\u8981 \u5305\u542b LoggingBucket \u5b57\u6bb5\u7684 S3 \u6876\u662f\u65e5\u5fd7\u901a \u521b\u5efa\u7684\u65e5\u5fd7\u6876. \u60a8\u53ef\u80fd\u5df2\u7ecf\u5728\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u65f6\u542f\u7528\u4e86\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\uff0c\u5e76\u5c06\u65e5\u5fd7\u6536\u96c6\u5230\u8be5 S3 \u6876\u4e2d\u3002 \u5220\u9664\u8be5 S3 \u6876\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\u53d1\u9001\u5931\u8d25\u3002 \u627e\u5230\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u5806\u6808\uff0c\u70b9\u51fb \u8d44\u6e90 \u9009\u9879\u5361\u3002 \u5728\u641c\u7d22\u680f\u4e2d\u8f93\u5165 AWS::S3::Bucket \u3002\u8fd9\u6837\u80fd\u663e\u793a\u6240\u6709\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u7684 S3 \u6876, S3 \u6876\u7684\u540d\u5b57\u53ef\u4ee5\u5728 Physical ID \u8fd9\u4e00\u680f\u4e2d\u770b\u5230\u3002 \u767b\u9646 AWS \u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5e76\u524d\u5f80 S3 \u670d\u52a1\u3002\u901a\u8fc7 S3 \u6876\u7684\u540d\u5b57\u627e\u5230\u5bf9\u5e94\u7684 S3 \u6876\u3002 \u6e05\u7a7a \u5e76 \u5220\u9664 \u8be5 S3 \u6876. \u5220\u9664\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002","title":"\u6b65\u9aa4 4. \u5220\u9664\u89e3\u51b3\u65b9\u6848\u5806\u6808"},{"location":"implementation-guide/applications/","text":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u901a\u652f\u6301\u4ece\u4ee5\u4e0b\u65e5\u5fd7\u6e90\u6444\u53d6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff1a EC2\u5b9e\u4f8b : \u65e5\u5fd7\u901a\u4f1a\u81ea\u52a8\u5b89\u88c5 log agent (Fluent Bit 1.9), \u6536\u96c6 EC2 \u5b9e\u4f8b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon OpenSearch\u3002 EKS\u96c6\u7fa4 : \u65e5\u5fd7\u901a\u5c06\u751f\u6210\u4e00\u4f53\u5316\u914d\u7f6e\u6587\u4ef6\u4f9b\u5ba2\u6237\u5c06 log agent (Fluent Bit 1.9) \u90e8\u7f72\u4e3a DaemonSet \u6216 Sidecar\u3002 \u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u540e\uff0c\u65e5\u5fd7\u901a\u5c06\u5f00\u59cb\u6536\u96c6 pod \u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Amazon OpenSearch\u3002 Amazon S3 : \u65e5\u5fd7\u901a\u65e2\u53ef\u4ee5\u8fde\u7eed\u63d0\u53d6\u6307\u5b9a Amazon S3 \u4f4d\u7f6e\u4e2d\u7684\u65e5\u5fd7\uff0c\u4e5f\u53ef\u4ee5\u6267\u884c\u4e00\u6b21\u6027\u63d0\u53d6\u3002 \u60a8\u8fd8\u53ef\u4ee5\u6839\u636e Amazon S3 \u524d\u7f00\u8fc7\u6ee4\u65e5\u5fd7\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u65e5\u5fd7\u914d\u7f6e\u6765\u89e3\u6790\u65e5\u5fd7\u3002 Syslog : \u5bf9\u4e8e Syslog\uff0c\u65e5\u5fd7\u901a\u5c06\u901a\u8fc7 UDP \u6216 TCP \u534f\u8bae\u6536\u96c6 Syslog \u65e5\u5fd7\u3002 Amazon OpenSearch Service \u670d\u52a1\u9002\u7528\u4e8e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u9891\u7e41\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u5168\u6587\u641c\u7d22\u529f\u80fd\u3002 \u4ece2.1.0\u7248\u672c\u5f00\u59cb\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5f00\u59cb\u652f\u6301\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Light Engine\uff0c\u9002\u7528\u4e8e\u975e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u975e\u9891\u7e41\u7684\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u7c7b\u4f3cSQL\u7684\u641c\u7d22\u529f\u80fd\u3002\u5f53\u60a8\u9009\u62e9Amazon EC2\u5b9e\u4f8b\u7ec4\u6216Amazon EKS\u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u65f6\u53ef\u4f7f\u7528 Light Engine\u3002 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u5411\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6dfb\u52a0\u66f4\u591a\u65e5\u5fd7\u6e90\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6dfb\u52a0\u65b0\u7684\u65e5\u5fd7\u6e90 \u3002 \u91cd\u8981 \u5982\u679c\u60a8\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528\u65e5\u5fd7\u901a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff0c\u5efa\u8bae\u60a8\u5148\u4e86\u89e3\u6982\u5ff5\u4ee5\u53ca\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u65e5\u5fd7\u6e90\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u65e5\u5fd7\u6e90 \u4e0b\u8868\u5217\u51fa\u4e86\u6bcf\u4e2a\u65e5\u5fd7\u6e90\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u3002 \u6709\u5173\u5982\u4f55\u4e3a\u6bcf\u79cd\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Log Config . Log \u683c\u5f0f EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6876 Syslog Nginx \u662f \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u662f \u5426 \u591a\u884c\u6587\u672c (Spring Boot) \u662f \u662f \u662f \u5426 Syslog RFC5424/RFC3164 \u5426 \u5426 \u5426 \u662f Syslog \u81ea\u5b9a\u4e49 \u5426 \u5426 \u5426 \u662f \u6982\u5ff5 \u4e0b\u9762\u4ecb\u7ecd\u7684\u6982\u5ff5\u53ef\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u8981\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u9700\u8981\u6570\u636e\u7ba1\u9053\u3002\u7ba1\u9053\u4e0d\u4ec5\u7f13\u51b2\u4f20\u8f93\u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u6e05\u7406\u6216\u9884\u5904\u7406\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06 IP \u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u3002\u76ee\u524d\uff0cKinesis Data Stream \u7528\u4f5c\u6570\u636e\u7f13\u51b2\u3002 \u65e5\u5fd7\u6444\u53d6 (Log Ingestion) \u65e5\u5fd7\u6444\u53d6\u4e3a\u65e5\u5fd7\u901a\u4f7f\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u914d\u7f6e\u65e5\u5fd7\u6e90\u3001\u65e5\u5fd7\u7c7b\u578b\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u4e4b\u540e\uff0c\u65e5\u5fd7\u901a\u5c06\u5f00\u59cb\u4ece\u65e5\u5fd7\u6e90\u6536\u96c6\u7279\u5b9a\u7c7b\u578b\u7684\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u65e5\u5fd7\u4ee3\u7406 (Log Agent) \u65e5\u5fd7\u4ee3\u7406\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u8bfb\u53d6\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0cOpenSearch\uff09\u3002 \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u4ec5\u652f\u6301\u81ea\u52a8\u5b89\u88c5\u7684 Fluent Bit 1.9 \u65e5\u5fd7\u4ee3\u7406\u3002 Fluent Bit \u4ee3\u7406\u5177\u6709 OpenSSL 1.1 \u7684\u4f9d\u8d56\u9879\u3002\u8981\u4e86\u89e3\u5982\u4f55\u5728 Linux \u5b9e\u4f8b\u4e0a \u5b89\u88c5 OpenSSL\uff0c\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002\u901a\u8fc7\u6b64 \u94fe\u63a5 \u67e5\u770b Fluent Bit \u652f\u6301\u7684\u5e73\u53f0\u3002 \u65e5\u5fd7\u7f13\u51b2\u533a\uff08Log Buffer\uff09 \u65e5\u5fd7\u7f13\u51b2\u533a\u662f\u65e5\u5fd7\u4ee3\u7406\u548c OpenSearch \u96c6\u7fa4\u4e4b\u95f4\u7684\u7f13\u51b2\u5c42\u3002 \u65e5\u5fd7\u4ee3\u7406\u4e0a\u4f20\u65e5\u5fd7\u5230\u7f13\u51b2\u533a\uff0c\u7136\u540e\u7ecf\u8fc7\u5904\u7406\u540e\uff0c\u4f20\u9012\u5230 OpenSearch \u96c6\u7fa4\u4e2d\u3002 \u5728\u9ad8\u6d41\u91cf\u573a\u666f\u4e0b\uff0c\u7f13\u51b2\u533a\u662f\u4fdd\u62a4OpenSearch\u96c6\u7fa4\u8d1f\u8f7d\u8fc7\u9ad8\u7684\u4e00\u79cd\u65b9\u5f0f\u3002 \u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u7c7b\u578b\u7684\u7f13\u51b2\u5c42\u3002 Amazon S3 \u65e5\u5fd7\u4ee3\u7406\u5b9a\u671f\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230 Amazon S3 \u5b58\u50a8\u6876\u3002 \u4f20\u9012\u5230 Amazon S3 \u5b58\u50a8\u6876\u7684\u6570\u636e\u4f20\u8f93\u9891\u7387\u662f\u60a8\u5728\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u914d\u7f6e\u65f6\uff0c\u901a\u8fc7 \u7f13\u51b2\u533a\u5927\u5c0f \uff08\u9ed8\u8ba4\u503c\u4e3a 50 MB\uff09\u548c \u7f13\u51b2\u95f4\u9694 \uff08\u9ed8\u8ba4\u503c\u4e3a 60 \u79d2\uff09\u8fd9\u4e24\u4e2a\u53c2\u6570\u503c\u51b3\u5b9a\u3002\u8fd9\u4e24\u4e2a\u53c2\u6570\u8c01\u5148\u6ee1\u8db3\uff0c\u8c01\u5c06\u4f18\u5148\u89e6\u53d1\u6570\u636e\u4f20\u9001\u5230 Amazon S3\u3002\u5982\u679c\u60a8\u53ef\u4ee5\u627f\u53d7\u65e5\u5fd7\u6444\u53d6\u7684\u5206\u949f\u7ea7\u5ef6\u8fdf\uff0c\u8bf7\u4f7f\u7528\u6b64\u9009\u9879\u3002 Amazon Kinesis Data Streams \u65e5\u5fd7\u4ee3\u7406\u5728\u51e0\u79d2\u949f\u5185\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230 Amazon Kinesis Data Streams\u3002 \u4f20\u9012\u5230 Amazon Kinesis Data Streams \u6570\u636e\u4f20\u8f93\u9891\u7387\u662f\u60a8\u5728\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u914d\u7f6e\u65f6\uff0c\u901a\u8fc7 \u7f13\u51b2\u533a\u5927\u5c0f \uff08\u9ed8\u8ba4\u503c\u4e3a 10 MB\uff09\u548c \u7f13\u51b2\u95f4\u9694 \uff08\u9ed8\u8ba4\u503c\u4e3a 5 \u79d2\uff09\u8fd9\u4e24\u4e2a\u53c2\u6570\u503c\u51b3\u5b9a\u3002\u8fd9\u4e24\u4e2a\u53c2\u6570\u8c01\u5148\u6ee1\u8db3\uff0c\u8c01\u5c06\u4f18\u5148\u89e6\u53d1\u6570\u636e\u4f20\u9001\u5230 Amazon Kinesis Data Streams\u3002\u5982\u679c\u60a8\u9700\u8981\u5b9e\u65f6\u65e5\u5fd7\u6444\u53d6\uff0c\u8bf7\u4f7f\u7528\u6b64\u9009\u9879\u3002 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\uff0c\u65e5\u5fd7\u7f13\u51b2\u533a\u662f\u53ef\u9009\u7684\u3002\u5bf9\u4e8e\u6240\u6709\u7c7b\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u8fd8\u63d0\u4f9b\u4e86\u4e00\u79cd\u6ca1\u6709\u4efb\u4f55\u7f13\u51b2\u5c42\u7684\u6444\u53d6\u65e5\u5fd7\u65b9\u5f0f\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4ec5\u63a8\u8350\u60a8\u5728\u65e5\u5fd7\u91cf\u5c0f\u60c5\u51b5\u65f6\u624d\u4f7f\u7528\u6b64\u9009\u9879\uff0c\u5e76\u4e14\u60a8\u6709\u8db3\u591f\u7684\u4fe1\u5fc3\uff0c\u8ba4\u4e3a\u4e0d\u4f1a\u89e6\u53d1 OpenSearch \u7aef\u9608\u503c\u3002 \u65e5\u5fd7\u6e90 (Log Source) \u65e5\u5fd7\u6e90\u662f\u6307\u60a8\u5e0c\u671b\u65e5\u5fd7\u901a\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 Amazon \u670d\u52a1\u3002\u652f\u6301\u7684\u65e5\u5fd7\u6e90\u6709\uff1a \u5b9e\u4f8b\u7ec4\uff08Instance Group\uff09 EKS\u96c6\u7fa4\uff08EKS Cluster\uff09 Amazon S3 Syslog \u5b9e\u4f8b\u7ec4 (Instance Group) \u5b9e\u4f8b\u7ec4\u662f\u60a8\u8981\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 EC2 \u5b9e\u4f8b\u7684\u96c6\u5408\u3002\u65e5\u5fd7\u901a \u5c06\u5e2e\u52a9\u60a8\u5728\u7ec4\u5185\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4e2d\u5b89\u88c5\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u754c\u9762\u9009\u62e9\u4efb\u610f EC2 \u5b9e\u4f8b\u6216\u8005\u9009\u62e9\u4e00\u4e2a EC2 Auto Scaling \u7ec4 \u3002 EKS \u96c6\u7fa4 (EKS Cluster) \u65e5\u5fd7\u901a\u4e2d\u7684 EKS \u96c6\u7fa4\u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon EKS\u3002\u65e5\u5fd7\u901a \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar\u3002 Amazon S3 \u65e5\u5fd7\u901a\u652f\u6301\u6536\u96c6\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e2d\u7684\u65e5\u5fd7\u3002 Syslog \u65e5\u5fd7\u901a\u5c06\u901a\u8fc7 UDP \u6216 TCP \u534f\u8bae\u6536\u96c6 syslog \u65e5\u5fd7\u3002 \u65e5\u5fd7\u914d\u7f6e (Log Config) \u65e5\u5fd7\u914d\u7f6e\u662f\u4e00\u79cd\u914d\u7f6e\uff0c\u5b83\u544a\u8bc9\u65e5\u5fd7\u901a\u65e5\u5fd7\u5728\u65e5\u5fd7\u6e90\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u3001\u60a8\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7c7b\u578b\u3001\u65e5\u5fd7\u884c\u5305\u542b\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/applications/#_1","text":"\u65e5\u5fd7\u901a\u652f\u6301\u4ece\u4ee5\u4e0b\u65e5\u5fd7\u6e90\u6444\u53d6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff1a EC2\u5b9e\u4f8b : \u65e5\u5fd7\u901a\u4f1a\u81ea\u52a8\u5b89\u88c5 log agent (Fluent Bit 1.9), \u6536\u96c6 EC2 \u5b9e\u4f8b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon OpenSearch\u3002 EKS\u96c6\u7fa4 : \u65e5\u5fd7\u901a\u5c06\u751f\u6210\u4e00\u4f53\u5316\u914d\u7f6e\u6587\u4ef6\u4f9b\u5ba2\u6237\u5c06 log agent (Fluent Bit 1.9) \u90e8\u7f72\u4e3a DaemonSet \u6216 Sidecar\u3002 \u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u540e\uff0c\u65e5\u5fd7\u901a\u5c06\u5f00\u59cb\u6536\u96c6 pod \u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Amazon OpenSearch\u3002 Amazon S3 : \u65e5\u5fd7\u901a\u65e2\u53ef\u4ee5\u8fde\u7eed\u63d0\u53d6\u6307\u5b9a Amazon S3 \u4f4d\u7f6e\u4e2d\u7684\u65e5\u5fd7\uff0c\u4e5f\u53ef\u4ee5\u6267\u884c\u4e00\u6b21\u6027\u63d0\u53d6\u3002 \u60a8\u8fd8\u53ef\u4ee5\u6839\u636e Amazon S3 \u524d\u7f00\u8fc7\u6ee4\u65e5\u5fd7\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u65e5\u5fd7\u914d\u7f6e\u6765\u89e3\u6790\u65e5\u5fd7\u3002 Syslog : \u5bf9\u4e8e Syslog\uff0c\u65e5\u5fd7\u901a\u5c06\u901a\u8fc7 UDP \u6216 TCP \u534f\u8bae\u6536\u96c6 Syslog \u65e5\u5fd7\u3002 Amazon OpenSearch Service \u670d\u52a1\u9002\u7528\u4e8e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u9891\u7e41\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u5168\u6587\u641c\u7d22\u529f\u80fd\u3002 \u4ece2.1.0\u7248\u672c\u5f00\u59cb\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5f00\u59cb\u652f\u6301\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Light Engine\uff0c\u9002\u7528\u4e8e\u975e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u975e\u9891\u7e41\u7684\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u7c7b\u4f3cSQL\u7684\u641c\u7d22\u529f\u80fd\u3002\u5f53\u60a8\u9009\u62e9Amazon EC2\u5b9e\u4f8b\u7ec4\u6216Amazon EKS\u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u65f6\u53ef\u4f7f\u7528 Light Engine\u3002 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u5411\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6dfb\u52a0\u66f4\u591a\u65e5\u5fd7\u6e90\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6dfb\u52a0\u65b0\u7684\u65e5\u5fd7\u6e90 \u3002 \u91cd\u8981 \u5982\u679c\u60a8\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528\u65e5\u5fd7\u901a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff0c\u5efa\u8bae\u60a8\u5148\u4e86\u89e3\u6982\u5ff5\u4ee5\u53ca\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u65e5\u5fd7\u6e90\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/#_2","text":"\u4e0b\u8868\u5217\u51fa\u4e86\u6bcf\u4e2a\u65e5\u5fd7\u6e90\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u3002 \u6709\u5173\u5982\u4f55\u4e3a\u6bcf\u79cd\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Log Config . Log \u683c\u5f0f EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6876 Syslog Nginx \u662f \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u662f \u5426 \u591a\u884c\u6587\u672c (Spring Boot) \u662f \u662f \u662f \u5426 Syslog RFC5424/RFC3164 \u5426 \u5426 \u5426 \u662f Syslog \u81ea\u5b9a\u4e49 \u5426 \u5426 \u5426 \u662f","title":"\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/#_3","text":"\u4e0b\u9762\u4ecb\u7ecd\u7684\u6982\u5ff5\u53ef\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u7684\u5de5\u4f5c\u539f\u7406\u3002","title":"\u6982\u5ff5"},{"location":"implementation-guide/applications/#_4","text":"\u8981\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u9700\u8981\u6570\u636e\u7ba1\u9053\u3002\u7ba1\u9053\u4e0d\u4ec5\u7f13\u51b2\u4f20\u8f93\u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u6e05\u7406\u6216\u9884\u5904\u7406\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06 IP \u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u3002\u76ee\u524d\uff0cKinesis Data Stream \u7528\u4f5c\u6570\u636e\u7f13\u51b2\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/#log-ingestion","text":"\u65e5\u5fd7\u6444\u53d6\u4e3a\u65e5\u5fd7\u901a\u4f7f\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u914d\u7f6e\u65e5\u5fd7\u6e90\u3001\u65e5\u5fd7\u7c7b\u578b\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u4e4b\u540e\uff0c\u65e5\u5fd7\u901a\u5c06\u5f00\u59cb\u4ece\u65e5\u5fd7\u6e90\u6536\u96c6\u7279\u5b9a\u7c7b\u578b\u7684\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch\u3002","title":"\u65e5\u5fd7\u6444\u53d6 (Log Ingestion)"},{"location":"implementation-guide/applications/#log-agent","text":"\u65e5\u5fd7\u4ee3\u7406\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u8bfb\u53d6\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0cOpenSearch\uff09\u3002 \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u4ec5\u652f\u6301\u81ea\u52a8\u5b89\u88c5\u7684 Fluent Bit 1.9 \u65e5\u5fd7\u4ee3\u7406\u3002 Fluent Bit \u4ee3\u7406\u5177\u6709 OpenSSL 1.1 \u7684\u4f9d\u8d56\u9879\u3002\u8981\u4e86\u89e3\u5982\u4f55\u5728 Linux \u5b9e\u4f8b\u4e0a \u5b89\u88c5 OpenSSL\uff0c\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002\u901a\u8fc7\u6b64 \u94fe\u63a5 \u67e5\u770b Fluent Bit \u652f\u6301\u7684\u5e73\u53f0\u3002","title":"\u65e5\u5fd7\u4ee3\u7406 (Log Agent)"},{"location":"implementation-guide/applications/#log-buffer","text":"\u65e5\u5fd7\u7f13\u51b2\u533a\u662f\u65e5\u5fd7\u4ee3\u7406\u548c OpenSearch \u96c6\u7fa4\u4e4b\u95f4\u7684\u7f13\u51b2\u5c42\u3002 \u65e5\u5fd7\u4ee3\u7406\u4e0a\u4f20\u65e5\u5fd7\u5230\u7f13\u51b2\u533a\uff0c\u7136\u540e\u7ecf\u8fc7\u5904\u7406\u540e\uff0c\u4f20\u9012\u5230 OpenSearch \u96c6\u7fa4\u4e2d\u3002 \u5728\u9ad8\u6d41\u91cf\u573a\u666f\u4e0b\uff0c\u7f13\u51b2\u533a\u662f\u4fdd\u62a4OpenSearch\u96c6\u7fa4\u8d1f\u8f7d\u8fc7\u9ad8\u7684\u4e00\u79cd\u65b9\u5f0f\u3002 \u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u7c7b\u578b\u7684\u7f13\u51b2\u5c42\u3002 Amazon S3 \u65e5\u5fd7\u4ee3\u7406\u5b9a\u671f\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230 Amazon S3 \u5b58\u50a8\u6876\u3002 \u4f20\u9012\u5230 Amazon S3 \u5b58\u50a8\u6876\u7684\u6570\u636e\u4f20\u8f93\u9891\u7387\u662f\u60a8\u5728\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u914d\u7f6e\u65f6\uff0c\u901a\u8fc7 \u7f13\u51b2\u533a\u5927\u5c0f \uff08\u9ed8\u8ba4\u503c\u4e3a 50 MB\uff09\u548c \u7f13\u51b2\u95f4\u9694 \uff08\u9ed8\u8ba4\u503c\u4e3a 60 \u79d2\uff09\u8fd9\u4e24\u4e2a\u53c2\u6570\u503c\u51b3\u5b9a\u3002\u8fd9\u4e24\u4e2a\u53c2\u6570\u8c01\u5148\u6ee1\u8db3\uff0c\u8c01\u5c06\u4f18\u5148\u89e6\u53d1\u6570\u636e\u4f20\u9001\u5230 Amazon S3\u3002\u5982\u679c\u60a8\u53ef\u4ee5\u627f\u53d7\u65e5\u5fd7\u6444\u53d6\u7684\u5206\u949f\u7ea7\u5ef6\u8fdf\uff0c\u8bf7\u4f7f\u7528\u6b64\u9009\u9879\u3002 Amazon Kinesis Data Streams \u65e5\u5fd7\u4ee3\u7406\u5728\u51e0\u79d2\u949f\u5185\u5c06\u65e5\u5fd7\u4e0a\u4f20\u5230 Amazon Kinesis Data Streams\u3002 \u4f20\u9012\u5230 Amazon Kinesis Data Streams \u6570\u636e\u4f20\u8f93\u9891\u7387\u662f\u60a8\u5728\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u914d\u7f6e\u65f6\uff0c\u901a\u8fc7 \u7f13\u51b2\u533a\u5927\u5c0f \uff08\u9ed8\u8ba4\u503c\u4e3a 10 MB\uff09\u548c \u7f13\u51b2\u95f4\u9694 \uff08\u9ed8\u8ba4\u503c\u4e3a 5 \u79d2\uff09\u8fd9\u4e24\u4e2a\u53c2\u6570\u503c\u51b3\u5b9a\u3002\u8fd9\u4e24\u4e2a\u53c2\u6570\u8c01\u5148\u6ee1\u8db3\uff0c\u8c01\u5c06\u4f18\u5148\u89e6\u53d1\u6570\u636e\u4f20\u9001\u5230 Amazon Kinesis Data Streams\u3002\u5982\u679c\u60a8\u9700\u8981\u5b9e\u65f6\u65e5\u5fd7\u6444\u53d6\uff0c\u8bf7\u4f7f\u7528\u6b64\u9009\u9879\u3002 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\uff0c\u65e5\u5fd7\u7f13\u51b2\u533a\u662f\u53ef\u9009\u7684\u3002\u5bf9\u4e8e\u6240\u6709\u7c7b\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u8fd8\u63d0\u4f9b\u4e86\u4e00\u79cd\u6ca1\u6709\u4efb\u4f55\u7f13\u51b2\u5c42\u7684\u6444\u53d6\u65e5\u5fd7\u65b9\u5f0f\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4ec5\u63a8\u8350\u60a8\u5728\u65e5\u5fd7\u91cf\u5c0f\u60c5\u51b5\u65f6\u624d\u4f7f\u7528\u6b64\u9009\u9879\uff0c\u5e76\u4e14\u60a8\u6709\u8db3\u591f\u7684\u4fe1\u5fc3\uff0c\u8ba4\u4e3a\u4e0d\u4f1a\u89e6\u53d1 OpenSearch \u7aef\u9608\u503c\u3002","title":"\u65e5\u5fd7\u7f13\u51b2\u533a\uff08Log Buffer\uff09"},{"location":"implementation-guide/applications/#log-source","text":"\u65e5\u5fd7\u6e90\u662f\u6307\u60a8\u5e0c\u671b\u65e5\u5fd7\u901a\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 Amazon \u670d\u52a1\u3002\u652f\u6301\u7684\u65e5\u5fd7\u6e90\u6709\uff1a \u5b9e\u4f8b\u7ec4\uff08Instance Group\uff09 EKS\u96c6\u7fa4\uff08EKS Cluster\uff09 Amazon S3 Syslog","title":"\u65e5\u5fd7\u6e90 (Log Source)"},{"location":"implementation-guide/applications/#instance-group","text":"\u5b9e\u4f8b\u7ec4\u662f\u60a8\u8981\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 EC2 \u5b9e\u4f8b\u7684\u96c6\u5408\u3002\u65e5\u5fd7\u901a \u5c06\u5e2e\u52a9\u60a8\u5728\u7ec4\u5185\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4e2d\u5b89\u88c5\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u754c\u9762\u9009\u62e9\u4efb\u610f EC2 \u5b9e\u4f8b\u6216\u8005\u9009\u62e9\u4e00\u4e2a EC2 Auto Scaling \u7ec4 \u3002","title":"\u5b9e\u4f8b\u7ec4 (Instance Group)"},{"location":"implementation-guide/applications/#eks-eks-cluster","text":"\u65e5\u5fd7\u901a\u4e2d\u7684 EKS \u96c6\u7fa4\u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon EKS\u3002\u65e5\u5fd7\u901a \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar\u3002","title":"EKS \u96c6\u7fa4 (EKS Cluster)"},{"location":"implementation-guide/applications/#amazon-s3","text":"\u65e5\u5fd7\u901a\u652f\u6301\u6536\u96c6\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e2d\u7684\u65e5\u5fd7\u3002","title":"Amazon S3"},{"location":"implementation-guide/applications/#syslog","text":"\u65e5\u5fd7\u901a\u5c06\u901a\u8fc7 UDP \u6216 TCP \u534f\u8bae\u6536\u96c6 syslog \u65e5\u5fd7\u3002","title":"Syslog"},{"location":"implementation-guide/applications/#log-config","text":"\u65e5\u5fd7\u914d\u7f6e\u662f\u4e00\u79cd\u914d\u7f6e\uff0c\u5b83\u544a\u8bc9\u65e5\u5fd7\u901a\u65e5\u5fd7\u5728\u65e5\u5fd7\u6e90\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u3001\u60a8\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7c7b\u578b\u3001\u65e5\u5fd7\u884c\u5305\u542b\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u3002","title":"\u65e5\u5fd7\u914d\u7f6e (Log Config)"},{"location":"implementation-guide/applications/create-log-config/","text":"\u65e5\u5fd7\u914d\u7f6e \u65e5\u5fd7\u901a\u652f\u6301\u4e3a\u4ee5\u4e0b\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u914d\u7f6e\uff1a JSON Apache Nginx Syslog Single-line text Multi-line text \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u65e5\u5fd7\u6765\u6e90 \u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u4e3a\u6bcf\u79cd\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u914d\u7f6e\u3002 \u521b\u5efa\u4e00\u4e2a JSON \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 JSON \u3002 \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b JSON \u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982\u679c\u60a8\u7684 Json \u65e5\u5fd7 Sample Log \u4e3a\u5d4c\u5957 Json\uff0c\u70b9\u51fb Pase Log \u6309\u94ae\u4e4b\u540e\u5c06\u4f1a\u5c55\u793a\u6bcf\u4e00\u5c42\u7684\u5b57\u6bb5\u7c7b\u578b\u9009\u9879\u5217\u8868\u3002\u60a8\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u5c42\u5b57\u6bb5\u8bbe\u7f6e\u5176\u5bf9\u5e94\u7684\u5b57\u6bb5\u7c7b\u578b\u3002\u5982\u679c\u60a8\u70b9\u51fb Remove \u6309\u94ae\u5220\u9664\u67d0\u4e2a\u5b57\u6bb5\u3002\u5219\u8be5\u5b57\u6bb5\u7684\u7c7b\u578b\u5c06\u4f1a\u7531 OpenSearch \u81ea\u52a8\u63a8\u65ad\u3002 \u793a\u4f8b: {\"timestamp\": \"2023-11-06T08:29:55.266Z\", \"correlationId\": \"566829027325526589\", \"processInfo\": { \"startTime\": \"2023-11-06T08:29:55.266Z\", \"hostname\": \"ltvtix0apidev01\", \"domainId\": \"e6826d97-a60f-45cb-93e1-b4bb5a7add29\", \"groupId\": \"group-2\", \"groupName\": \"grp_dev_bba\", \"serviceId\": \"instance-1\", \"serviceName\": \"ins_dev_bba\", \"version\": \"7.7.20210130\" }, \"transactionSummary\": { \"path\": \"https://www.leadmission-critical.info/relationships\", \"protocol\": \"https\", \"protocolSrc\": \"97\", \"status\": \"exception\", \"serviceContexts\": [ { \"service\": \"NSC_APP-117127_DCTM_Get Documentum Token\", \"monitor\": true, \"client\": \"Pass Through\", \"org\": null, \"app\": null, \"method\": \"getTokenUsingPOST\", \"status\": \"exception\", \"duration\": 25270 } ] } } \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u5bf9\u4e8e\u5d4c\u5957 Json \u7684 Time Key \u5fc5\u987b\u5728\u7b2c\u4e00\u5c42\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 \u8fc7\u6ee4\u5668 \u90e8\u5206\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u542f\u7528\u5e76\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u6765\u8fc7\u6ee4\u65e5\u5fd7\u3002\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6536\u96c6\u7b26\u5408\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u521b\u5efa\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u914d\u7f6e Apache HTTP Server (httpd) \u80fd\u591f\u5c06\u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e\u65e5\u5fd7\u901a\u6444\u53d6 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Apache HTTP \u670d\u52a1\u5668 \u3002 \u5728 Apache Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/httpd/conf/httpd.conf \uff0c\u4ee5 LogFormat \u5f00\u5934\u3002 \u5982: LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [22/Dec/2021:06:48:57 +0000] \"GET /xxx HTTP/1.1\" 404 196 \"-\" \"curl/7.79.1\" \u9009\u62e9 \u521b\u5efa \u3002 \u521b\u5efa\u4e00\u4e2a Nginx \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Nginx \u3002 \u5728 Nginx Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u4f60\u7684Nginx\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a /etc/nginx/nginx.conf \uff0c\u4ee5 log_format \u5f00\u5934\u3002 \u5982: log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2aNginx\u793a\u4f8b\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \uff08\u53ef\u9009\uff09\u5728 \u8fc7\u6ee4\u5668 \u90e8\u5206\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u542f\u7528\u5e76\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u6765\u8fc7\u6ee4\u65e5\u5fd7\u3002\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6536\u96c6\u7b26\u5408\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u7684\u65e5\u5fd7\u3002 \u70b9\u51fb \u521b\u5efa \u3002 \u521b\u5efa\u4e00\u4e2a Syslog \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Syslog \u3002\u65e5\u5fd7\u901a\u540c\u65f6\u4e5f\u652f\u6301JSON\u683c\u5f0f\u7684\u6216\u8005\u5355\u884c\u6587\u672c\u683c\u5f0f\u7684 Syslog\u3002 RFC5424 \u7c98\u8d34\u793a\u4f8b RFC5424 \u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a <35>1 2013-10-11T22:14:15Z client_machine su - - - 'su root' failed for joe on /dev/pts/2 \u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u4f8b\u5982: %Y-%m-%dT%H:%M:%SZ \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002 RFC3164 \u7c98\u8d34\u793a\u4f8b RFC3164 \u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a <35>Oct 12 22:14:15 client_machine su: 'su root' failed for joe on /dev/pts/2 \u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u7531\u4e8e RFC3164 \u7684\u65f6\u95f4\u6233\u4e2d\u6ca1\u6709\u5e74\u4efd\uff0c\u56e0\u6b64\u65e0\u6cd5\u5728 Amazon OpenSearch \u7684\u53d1\u73b0\u754c\u9762\u4e2d\u663e\u793a\u4e3a\u65f6\u95f4\u76f4\u65b9\u56fe\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u4f8b\u5982: %b %m %H:%M:%S \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u81ea\u5b9a\u4e49 \u5728 Syslog Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Syslog \u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/rsyslog.conf \uff0c\u4ee5 template \u6216 $template \u5f00\u5934\u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa Syslog \u6d88\u606f\u683c\u5f0f . \u4f8b\u5982: <%pri%>1 %timestamp:::date-rfc3339% %HOSTNAME% %app-name% %procid% %msgid% %msg%\\n \u5728 Sample log parsing \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Nginx \u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a <35>1 2013-10-11T22:14:15.003Z client_machine su - - 'su root' failed for joe on /dev/pts/2 \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u521b\u5efa\u4e00\u4e2a\u5355\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5355\u884c\u6587\u672c \u3002 \u5728 Rubular \u4e2d\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u5148\u9a8c\u8bc1\u5e76\u8f93\u5165\u503c\u3002 \u4f8b\u5982\uff1a (?<remote_addr>\\S+)\\s*-\\s*(?<remote_user>\\S+)\\s*\\[(?<time_local>\\d+/\\S+/\\d+:\\d+:\\d+:\\d+)\\s+\\S+\\]\\s*\"(?<request_method>\\S+)\\s+(?<request_uri>\\S+)\\s+\\S+\"\\s*(?<status>\\S+)\\s*(?<body_bytes_sent>\\S+)\\s*\"(?<http_referer>[^\"]*)\"\\s*\"(?<http_user_agent>[^\"]*)\"\\s*\"(?<http_x_forwarded_for>[^\"]*)\".* \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b\u7684\u5355\u884c\u6587\u672c\u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u521b\u5efa\u4e00\u4e2a\u591a\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u591a\u884c\u6587\u672c \u3002 Java - Spring Boot \u5bf9\u4e8eJava Spring Boot \u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u63d0\u4f9b\u7b80\u5355\u7684\u65e5\u5fd7\u683c\u5f0f\u3002 \u4f8b\u5982\uff1a %d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger : %msg%n \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 \u8fc7\u6ee4\u5668 \u90e8\u5206\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u542f\u7528\u5e76\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u6765\u8fc7\u6ee4\u65e5\u5fd7\u3002\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6536\u96c6\u7b26\u5408\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u81ea\u5b9a\u4e49\u683c\u5f0f \u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e00\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002 \u4f8b\u5982\uff1a (?<time>\\d{4}-\\d{2}-\\d{2}\\s*\\d{2}:\\d{2}:\\d{2}.\\d{3})\\s*(?<message>goroutine\\s*\\d\\s*\\[.+\\]:) \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2023-07-12 10:32:26.400 goroutine 1 [chan receive]: runtime.gopark(0x4739b8, 0xc420024178, 0x46fcd7, 0xc, 0xc420028e17, 0x3) /usr/local/go/src/runtime/proc.go:280 +0x12c fp=0xc420053e30 sp=0xc420053e00 pc=0x42503c runtime.goparkunlock(0xc420024178, 0x46fcd7, 0xc, 0x1000f010040c217, 0x3) /usr/local/go/src/runtime/proc.go:286 +0x5e fp=0xc420053e70 sp=0xc420053e30 pc=0x42512e runtime.chanrecv(0xc420024120, 0x0, 0xc420053f01, 0x4512d8) /usr/local/go/src/runtime/chan.go:506 +0x304 fp=0xc420053f20 sp=0xc420053e70 pc=0x4046b4 runtime.chanrecv1(0xc420024120, 0x0) /usr/local/go/src/runtime/chan.go:388 +0x2b fp=0xc420053f50 sp=0xc420053f20 pc=0x40439b main.main() foo.go:9 +0x6f fp=0xc420053f80 sp=0xc420053f50 pc=0x4512ef runtime.main() /usr/local/go/src/runtime/proc.go:185 +0x20d fp=0xc420053fe0 sp=0xc420053f80 pc=0x424bad runtime.goexit() /usr/local/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc420053fe8 sp=0xc420053fe0 pc=0x44b4d1 \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#_1","text":"\u65e5\u5fd7\u901a\u652f\u6301\u4e3a\u4ee5\u4e0b\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u914d\u7f6e\uff1a JSON Apache Nginx Syslog Single-line text Multi-line text \u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u65e5\u5fd7\u6765\u6e90 \u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u4e3a\u6bcf\u79cd\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u914d\u7f6e\u3002","title":"\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#json","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 JSON \u3002 \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b JSON \u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982\u679c\u60a8\u7684 Json \u65e5\u5fd7 Sample Log \u4e3a\u5d4c\u5957 Json\uff0c\u70b9\u51fb Pase Log \u6309\u94ae\u4e4b\u540e\u5c06\u4f1a\u5c55\u793a\u6bcf\u4e00\u5c42\u7684\u5b57\u6bb5\u7c7b\u578b\u9009\u9879\u5217\u8868\u3002\u60a8\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u5c42\u5b57\u6bb5\u8bbe\u7f6e\u5176\u5bf9\u5e94\u7684\u5b57\u6bb5\u7c7b\u578b\u3002\u5982\u679c\u60a8\u70b9\u51fb Remove \u6309\u94ae\u5220\u9664\u67d0\u4e2a\u5b57\u6bb5\u3002\u5219\u8be5\u5b57\u6bb5\u7684\u7c7b\u578b\u5c06\u4f1a\u7531 OpenSearch \u81ea\u52a8\u63a8\u65ad\u3002 \u793a\u4f8b: {\"timestamp\": \"2023-11-06T08:29:55.266Z\", \"correlationId\": \"566829027325526589\", \"processInfo\": { \"startTime\": \"2023-11-06T08:29:55.266Z\", \"hostname\": \"ltvtix0apidev01\", \"domainId\": \"e6826d97-a60f-45cb-93e1-b4bb5a7add29\", \"groupId\": \"group-2\", \"groupName\": \"grp_dev_bba\", \"serviceId\": \"instance-1\", \"serviceName\": \"ins_dev_bba\", \"version\": \"7.7.20210130\" }, \"transactionSummary\": { \"path\": \"https://www.leadmission-critical.info/relationships\", \"protocol\": \"https\", \"protocolSrc\": \"97\", \"status\": \"exception\", \"serviceContexts\": [ { \"service\": \"NSC_APP-117127_DCTM_Get Documentum Token\", \"monitor\": true, \"client\": \"Pass Through\", \"org\": null, \"app\": null, \"method\": \"getTokenUsingPOST\", \"status\": \"exception\", \"duration\": 25270 } ] } } \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u5bf9\u4e8e\u5d4c\u5957 Json \u7684 Time Key \u5fc5\u987b\u5728\u7b2c\u4e00\u5c42\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 \u8fc7\u6ee4\u5668 \u90e8\u5206\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u542f\u7528\u5e76\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u6765\u8fc7\u6ee4\u65e5\u5fd7\u3002\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6536\u96c6\u7b26\u5408\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u521b\u5efa\u4e00\u4e2a JSON \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#apache-http","text":"Apache HTTP Server (httpd) \u80fd\u591f\u5c06\u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e\u65e5\u5fd7\u901a\u6444\u53d6 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Apache HTTP \u670d\u52a1\u5668 \u3002 \u5728 Apache Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/httpd/conf/httpd.conf \uff0c\u4ee5 LogFormat \u5f00\u5934\u3002 \u5982: LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [22/Dec/2021:06:48:57 +0000] \"GET /xxx HTTP/1.1\" 404 196 \"-\" \"curl/7.79.1\" \u9009\u62e9 \u521b\u5efa \u3002","title":"\u521b\u5efa\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#nginx","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Nginx \u3002 \u5728 Nginx Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u4f60\u7684Nginx\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a /etc/nginx/nginx.conf \uff0c\u4ee5 log_format \u5f00\u5934\u3002 \u5982: log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2aNginx\u793a\u4f8b\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \uff08\u53ef\u9009\uff09\u5728 \u8fc7\u6ee4\u5668 \u90e8\u5206\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u542f\u7528\u5e76\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u6765\u8fc7\u6ee4\u65e5\u5fd7\u3002\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6536\u96c6\u7b26\u5408\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u7684\u65e5\u5fd7\u3002 \u70b9\u51fb \u521b\u5efa \u3002","title":"\u521b\u5efa\u4e00\u4e2a Nginx \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#syslog","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Syslog \u3002\u65e5\u5fd7\u901a\u540c\u65f6\u4e5f\u652f\u6301JSON\u683c\u5f0f\u7684\u6216\u8005\u5355\u884c\u6587\u672c\u683c\u5f0f\u7684 Syslog\u3002","title":"\u521b\u5efa\u4e00\u4e2a Syslog \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#rfc5424","text":"\u7c98\u8d34\u793a\u4f8b RFC5424 \u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a <35>1 2013-10-11T22:14:15Z client_machine su - - - 'su root' failed for joe on /dev/pts/2 \u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u4f8b\u5982: %Y-%m-%dT%H:%M:%SZ \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"RFC5424"},{"location":"implementation-guide/applications/create-log-config/#rfc3164","text":"\u7c98\u8d34\u793a\u4f8b RFC3164 \u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a <35>Oct 12 22:14:15 client_machine su: 'su root' failed for joe on /dev/pts/2 \u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u7531\u4e8e RFC3164 \u7684\u65f6\u95f4\u6233\u4e2d\u6ca1\u6709\u5e74\u4efd\uff0c\u56e0\u6b64\u65e0\u6cd5\u5728 Amazon OpenSearch \u7684\u53d1\u73b0\u754c\u9762\u4e2d\u663e\u793a\u4e3a\u65f6\u95f4\u76f4\u65b9\u56fe\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u4f8b\u5982: %b %m %H:%M:%S \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"RFC3164"},{"location":"implementation-guide/applications/create-log-config/#_2","text":"\u5728 Syslog Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Syslog \u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/rsyslog.conf \uff0c\u4ee5 template \u6216 $template \u5f00\u5934\u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa Syslog \u6d88\u606f\u683c\u5f0f . \u4f8b\u5982: <%pri%>1 %timestamp:::date-rfc3339% %HOSTNAME% %app-name% %procid% %msgid% %msg%\\n \u5728 Sample log parsing \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Nginx \u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a <35>1 2013-10-11T22:14:15.003Z client_machine su - - 'su root' failed for joe on /dev/pts/2 \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u81ea\u5b9a\u4e49"},{"location":"implementation-guide/applications/create-log-config/#_3","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5355\u884c\u6587\u672c \u3002 \u5728 Rubular \u4e2d\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u5148\u9a8c\u8bc1\u5e76\u8f93\u5165\u503c\u3002 \u4f8b\u5982\uff1a (?<remote_addr>\\S+)\\s*-\\s*(?<remote_user>\\S+)\\s*\\[(?<time_local>\\d+/\\S+/\\d+:\\d+:\\d+:\\d+)\\s+\\S+\\]\\s*\"(?<request_method>\\S+)\\s+(?<request_uri>\\S+)\\s+\\S+\"\\s*(?<status>\\S+)\\s*(?<body_bytes_sent>\\S+)\\s*\"(?<http_referer>[^\"]*)\"\\s*\"(?<http_user_agent>[^\"]*)\"\\s*\"(?<http_x_forwarded_for>[^\"]*)\".* \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b\u7684\u5355\u884c\u6587\u672c\u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 Filter \u90e8\u5206\uff0c\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u8fc7\u6ee4\u65e5\u5fd7\u3002\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6444\u5165\u4e0e\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u5339\u914d\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u521b\u5efa\u4e00\u4e2a\u5355\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#_4","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u591a\u884c\u6587\u672c \u3002","title":"\u521b\u5efa\u4e00\u4e2a\u591a\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/create-log-config/#java-spring-boot","text":"\u5bf9\u4e8eJava Spring Boot \u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u63d0\u4f9b\u7b80\u5355\u7684\u65e5\u5fd7\u683c\u5f0f\u3002 \u4f8b\u5982\uff1a %d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger : %msg%n \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \uff08\u53ef\u9009\uff09\u5728 \u8fc7\u6ee4\u5668 \u90e8\u5206\uff0c\u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u542f\u7528\u5e76\u6dfb\u52a0\u4e00\u4e9b\u6761\u4ef6\u6765\u8fc7\u6ee4\u65e5\u5fd7\u3002\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5c06\u4ec5\u6536\u96c6\u7b26\u5408\u6240\u6709\u6307\u5b9a\u6761\u4ef6\u7684\u65e5\u5fd7\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"Java - Spring Boot"},{"location":"implementation-guide/applications/create-log-config/#_5","text":"\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e00\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002 \u4f8b\u5982\uff1a (?<time>\\d{4}-\\d{2}-\\d{2}\\s*\\d{2}:\\d{2}:\\d{2}.\\d{3})\\s*(?<message>goroutine\\s*\\d\\s*\\[.+\\]:) \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2023-07-12 10:32:26.400 goroutine 1 [chan receive]: runtime.gopark(0x4739b8, 0xc420024178, 0x46fcd7, 0xc, 0xc420028e17, 0x3) /usr/local/go/src/runtime/proc.go:280 +0x12c fp=0xc420053e30 sp=0xc420053e00 pc=0x42503c runtime.goparkunlock(0xc420024178, 0x46fcd7, 0xc, 0x1000f010040c217, 0x3) /usr/local/go/src/runtime/proc.go:286 +0x5e fp=0xc420053e70 sp=0xc420053e30 pc=0x42512e runtime.chanrecv(0xc420024120, 0x0, 0xc420053f01, 0x4512d8) /usr/local/go/src/runtime/chan.go:506 +0x304 fp=0xc420053f20 sp=0xc420053e70 pc=0x4046b4 runtime.chanrecv1(0xc420024120, 0x0) /usr/local/go/src/runtime/chan.go:388 +0x2b fp=0xc420053f50 sp=0xc420053f20 pc=0x40439b main.main() foo.go:9 +0x6f fp=0xc420053f80 sp=0xc420053f50 pc=0x4512ef runtime.main() /usr/local/go/src/runtime/proc.go:185 +0x20d fp=0xc420053fe0 sp=0xc420053f80 pc=0x424bad runtime.goexit() /usr/local/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc420053fe8 sp=0xc420053fe0 pc=0x44b4d1 \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 \u3002 \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u81ea\u5b9a\u4e49\u683c\u5f0f"},{"location":"implementation-guide/applications/create-log-source/","text":"\u5728\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u5148\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u65e5\u5fd7\u901a\u652f\u6301\u4ee5\u4e0b\u65e5\u5fd7\u6e90\uff1a Amazon EC2 \u5b9e\u4f8b\u7ec4 Amazon EKS \u96c6\u7fa4 Amazon S3 Syslog \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6982\u5ff5 \u3002 Amazon EC2 \u5b9e\u4f8b\u7ec4 \u4e00\u4e2a\u5b9e\u4f8b\u7ec4\u4ee3\u8868\u4e86\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\uff0c\u8fd9\u4f7f\u5f97\u89e3\u51b3\u65b9\u6848\u80fd\u591f\u5feb\u901f\u5730\u5c06 Log Config \u4e0e\u591a\u4e2a EC2 \u5b9e\u4f8b\u5173\u8054\u3002\u65e5\u5fd7\u901a \u4f7f\u7528 Systems Manager Agent(SSM Agent) \u6765\u5b89\u88c5/\u914d\u7f6e Fluent Bit agent\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams \u3002 \u524d\u63d0\u6761\u4ef6 Make sure the instances meet the following requirements: SSM Agent \u5b89\u88c5\u5728\u5b9e\u4f8b\u4e0a\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5728 Linux \u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 SSM Agent AmazonSSMManagedInstanceCore \u7b56\u7565\u4e0e\u5b9e\u4f8b\u76f8\u5173\u8054\u3002 \u5df2\u5b89\u88c5 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee AWS Systems Manager\u3002 \u5982\u679c\u9009\u62e9 Amazon Kinesis Data Streams \u4f5c\u4e3a Log Buffer , \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon Kinesis Data Streams\u3002 \u5982\u679c\u9009\u62e9 Amazon S3 \u4f5c\u4e3a Log Buffer , \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon S3\u3002 \u5b9e\u4f8b\u7684\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\u4f7f\u7528 Fluent Bit\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 Supported Platform \u3002 (\u9009\u9879 1) \u9009\u62e9\u5b9e\u4f8b\u521b\u5efa\u5b9e\u4f8b\u7ec4 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u914d\u7f6e \u90e8\u5206\uff0c\u9009\u62e9 \u5b9e\u4f8b \u9009\u9879\uff0c\u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0 5 \u4e2a\u6807\u7b7e\u6765\u8fc7\u6ee4\u5b9e\u4f8b\u3002 \u9a8c\u8bc1\u6240\u6709\u9009\u4e2d\u7684\u5b9e\u4f8b \u72b6\u6001 \u90fd\u662f \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9009\u4e2d\u7684\u5b9e\u4f8b\u201c\u72b6\u6001\u201d\u4e3a\u7a7a\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u6309\u94ae\uff0c\u7b49\u5f85 \u72b6\u6001 \u53d8\u4e3a \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237\u8bbe\u7f6e \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u8de8\u8d26\u6237\u7684\u5b9e\u4f8b\u7ec4\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u91cd\u8981 \u5728 \u7531\u5149\u73af\u65b0\u7f51\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5317\u4eac\uff09\u533a\u57df (cn-north-1)\u548c\u7531\u897f\u4e91\u6570\u636e\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5b81\u590f\uff09\u533a\u57df (cn-northwest-1) \u533a\u57df\u7684 Ubuntu \u5b9e\u4f8b\u4e0a\u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u4f1a\u5bfc\u81f4\u5b89\u88c5\u9519\u8bef\u3002 Fluent Bit \u5b89\u88c5\u5305\u4e0d\u80fd \u4e0b\u8f7d\u6210\u529f\u3002 \u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 (\u9009\u9879 2) \u9009\u62e9 Auto Scaling \u7ec4\u521b\u5efa\u5b9e\u4f8b\u7ec4 \u5f53\u4f7f\u7528 Amazon EC2 Auto Scaling \u7ec4\u521b\u5efa\u5b9e\u4f8b\u7ec4\u65f6\uff0c\u5c06\u4f1a\u751f\u6210\u4e00\u4e2ashell \u811a\u672c\uff0c \u60a8\u9700\u8981\u6dfb\u52a0\u5230 EC2 User Data \u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u914d\u7f6e \u90e8\u5206\uff0c\u9009\u62e9 Auto Scaling \u7ec4 \u9009\u9879\u3002 \u5728 Auto Scaling \u7ec4 \u90e8\u5206, \u9009\u62e9\u8981\u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684Auto Scaling\u7ec4\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237\u8bbe\u7f6e \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u8de8\u8d26\u6237\u7684\u5b9e\u4f8b\u7ec4\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 Instance Group \u521b\u5efa Log Ingestion \u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684 Shell Script\u3002 \u590d\u5236 shell \u811a\u672c\u5e76\u66f4\u65b0 Auto Scaling \u7ec4\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u3002\u5982\u679c\u9700\u8981\uff0cshell \u811a\u672c\u5c06\u81ea\u52a8\u5b89\u88c5 Fluent Bit\u3001SSM \u4ee3\u7406\uff0c\u5e76\u4e0b\u8f7d Fluent Bit \u914d\u7f6e\u3002 \u4e00\u65e6\u60a8\u66f4\u65b0\u4e86\u542f\u52a8\u914d\u7f6e\u6216\u542f\u52a8\u6a21\u677f\uff0c\u60a8\u9700\u8981\u542f\u52a8 instance refresh \u6765\u66f4\u65b0 Auto Scaling \u7ec4\u4e2d\u7684\u5b9e\u4f8b\u3002 \u65b0\u542f\u52a8\u7684\u5b9e\u4f8b\u4f1a\u5c06\u65e5\u5fd7\u63d0\u53d6\u5230 OpenSearch \u96c6\u7fa4\u6216 Log Buffer \u5c42\u3002 Amazon EKS cluster \u65e5\u5fd7\u901a\u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002\u65e5\u5fd7\u901a\u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u91cd\u8981 \u65e5\u5fd7\u901a\u4e0d\u652f\u6301\u5c06\u4e00\u4e2a EKS \u96c6\u7fa4\u4e2d\u7684\u65e5\u5fd7\u540c\u65f6\u53d1\u9001\u5230\u591a\u4e2a Amazon OpenSearch \u57df\u3002 \u786e\u4fdd EKS \u96c6\u7fa4\u7684 VPC \u5df2\u8fde\u63a5\u5230 Amazon OpenSearch Service \u96c6\u7fa4\u7684 VPC\uff0c\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\u3002\u6709\u5173\u8fde\u63a5 VPC \u7684\u65b9\u6cd5\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 VPC Connectivity \u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS Cluster \u3002 \u5355\u51fb \u5bfc\u5165\u96c6\u7fa4 \u6309\u94ae\u3002 \u9009\u62e9\u65e5\u5fd7\u901a \u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684 EKS \u96c6\u7fa4 \u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237 \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u5bfc\u5165\u4e00\u4e2a\u5176\u4ed6\u8d26\u6237\u7684 EKS \u96c6\u7fa4\u3002 \u9009\u62e9 DaemonSet \u6216 Sidecar \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\u7684\u90e8\u7f72\u6a21\u5f0f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6307\u5b9a\u65e5\u5fd7\u901a \u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u7684 Amazon OpenSearch \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5efa\u7acb EKS \u548c OpenSearch \u4e4b\u95f4\u7684 VPC \u5bf9\u7b49\u8fde\u63a5\u3002 \u521b\u5efa\u5e76\u63a5\u53d7 VPC \u5bf9\u7b49\u8fde\u63a5 \u4e3a VPC \u5bf9\u7b49\u8fde\u63a5\u66f4\u65b0\u8def\u7531\u8868 \u66f4\u65b0\u60a8\u7684\u5b89\u5168\u7ec4\u4ee5\u5f15\u7528\u5bf9\u7b49 VPC \u7ec4 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 Amazon S3 S3 \u5728\u65e5\u5fd7\u901a\u4e2d\u6307\u7684\u662f\u60a8\u60f3\u8981\u4ece\u4e2d\u6536\u96c6\u5b58\u50a8\u5728\u60a8\u6876\u4e2d\u7684\u5e94\u7528\u65e5\u5fd7\u7684 Amazon S3\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 \u6301\u7eed\u52a0\u8f7d \u6216 \u4e00\u6b21\u6027\u52a0\u8f7d \u6765\u521b\u5efa\u60a8\u7684\u5bfc\u5165\u4efb\u52a1\u3002 \u91cd\u8981 \u6301\u7eed\u52a0\u8f7d \u8868\u793a\u5f53\u65b0\u6587\u4ef6\u4f20\u9001\u5230\u6307\u5b9a\u7684 S3 \u4f4d\u7f6e\u65f6\uff0c\u5bfc\u5165\u4f5c\u4e1a\u5c06\u8fd0\u884c\u3002 \u4e00\u6b21\u6027\u52a0\u8f7d \u8868\u793a\u5bfc\u5165\u5de5\u4f5c\u5c06\u5728\u521b\u5efa\u65f6\u8fd0\u884c\uff0c\u5e76\u4e14\u53ea\u4f1a\u8fd0\u884c\u4e00\u6b21\u4ee5\u52a0\u8f7d\u6307\u5b9a\u4f4d\u7f6e\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u3002 Syslog \u91cd\u8981 \u8bf7\u786e\u4fdd\u60a8\u7684 Syslog \u751f\u6210\u5668/\u53d1\u9001\u8005\u7684\u5b50\u7f51\u8fde\u63a5\u5230\u65e5\u5fd7\u901a \u7684 \u4e24\u4e2a \u79c1\u6709\u5b50\u7f51\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u63d0\u53d6\u65e5\u5fd7\u3002 \u6709\u5173\u8fde\u63a5 VPC \u7684\u65b9\u6cd5\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 VPC Connectivity \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7aef\u53e3\u53f7\u7684 UDP \u6216 TCP \u534f\u8bae\u5728\u65e5\u5fd7\u901a\u4e2d\u6536\u96c6syslog\u3002Syslog \u662f\u6307Linux\u5b9e\u4f8b\u3001\u8def\u7531\u5668\u6216\u7f51\u7edc\u8bbe\u5907\u4ea7\u751f\u7684\u65e5\u5fd7\u3002\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Wikipedia \u7684 Syslog \u3002 \u6dfb\u52a0\u65b0\u7684\u65e5\u5fd7\u6e90 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u540e\uff0c\u5c31\u6709\u4e00\u4e2a\u65e5\u5fd7\u6e90\u3002 \u60a8\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u9009\u62e9\u5c06\u66f4\u591a\u65e5\u5fd7\u6e90\u6dfb\u52a0\u5230\u65e5\u5fd7\u7ba1\u9053\u4e2d\uff1a \u767b\u5f55\u5230\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c \u5728 Log Analytics Pipelines , \u9009\u62e9 Application Log \u3002 \u901a\u8fc7\u5355\u51fb\u5176\u6765\u9009\u62e9\u65e5\u5fd7\u7ba1\u9053\u7684 ID \u3002 \u9009\u62e9 Create a source \u3002 \u6309\u7167 Amazon EC2 instance group , Amazon EKS cluster , Amazon S3 , or Syslog \u7684\u64cd\u4f5c\u6307\u5357\uff0c\u6839\u636e\u60a8\u7684\u9700\u8981\u521b\u5efa\u65e5\u5fd7\u6e90\u3002","title":"\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#amazon-ec2","text":"\u4e00\u4e2a\u5b9e\u4f8b\u7ec4\u4ee3\u8868\u4e86\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\uff0c\u8fd9\u4f7f\u5f97\u89e3\u51b3\u65b9\u6848\u80fd\u591f\u5feb\u901f\u5730\u5c06 Log Config \u4e0e\u591a\u4e2a EC2 \u5b9e\u4f8b\u5173\u8054\u3002\u65e5\u5fd7\u901a \u4f7f\u7528 Systems Manager Agent(SSM Agent) \u6765\u5b89\u88c5/\u914d\u7f6e Fluent Bit agent\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams \u3002","title":"Amazon EC2 \u5b9e\u4f8b\u7ec4"},{"location":"implementation-guide/applications/create-log-source/#_1","text":"Make sure the instances meet the following requirements: SSM Agent \u5b89\u88c5\u5728\u5b9e\u4f8b\u4e0a\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5728 Linux \u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 SSM Agent AmazonSSMManagedInstanceCore \u7b56\u7565\u4e0e\u5b9e\u4f8b\u76f8\u5173\u8054\u3002 \u5df2\u5b89\u88c5 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee AWS Systems Manager\u3002 \u5982\u679c\u9009\u62e9 Amazon Kinesis Data Streams \u4f5c\u4e3a Log Buffer , \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon Kinesis Data Streams\u3002 \u5982\u679c\u9009\u62e9 Amazon S3 \u4f5c\u4e3a Log Buffer , \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon S3\u3002 \u5b9e\u4f8b\u7684\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\u4f7f\u7528 Fluent Bit\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 Supported Platform \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/create-log-source/#1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u914d\u7f6e \u90e8\u5206\uff0c\u9009\u62e9 \u5b9e\u4f8b \u9009\u9879\uff0c\u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0 5 \u4e2a\u6807\u7b7e\u6765\u8fc7\u6ee4\u5b9e\u4f8b\u3002 \u9a8c\u8bc1\u6240\u6709\u9009\u4e2d\u7684\u5b9e\u4f8b \u72b6\u6001 \u90fd\u662f \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9009\u4e2d\u7684\u5b9e\u4f8b\u201c\u72b6\u6001\u201d\u4e3a\u7a7a\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u6309\u94ae\uff0c\u7b49\u5f85 \u72b6\u6001 \u53d8\u4e3a \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237\u8bbe\u7f6e \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u8de8\u8d26\u6237\u7684\u5b9e\u4f8b\u7ec4\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u91cd\u8981 \u5728 \u7531\u5149\u73af\u65b0\u7f51\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5317\u4eac\uff09\u533a\u57df (cn-north-1)\u548c\u7531\u897f\u4e91\u6570\u636e\u8fd0\u8425\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u56fd\uff08\u5b81\u590f\uff09\u533a\u57df (cn-northwest-1) \u533a\u57df\u7684 Ubuntu \u5b9e\u4f8b\u4e0a\u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u4f1a\u5bfc\u81f4\u5b89\u88c5\u9519\u8bef\u3002 Fluent Bit \u5b89\u88c5\u5305\u4e0d\u80fd \u4e0b\u8f7d\u6210\u529f\u3002 \u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002","title":"(\u9009\u9879 1) \u9009\u62e9\u5b9e\u4f8b\u521b\u5efa\u5b9e\u4f8b\u7ec4"},{"location":"implementation-guide/applications/create-log-source/#2-auto-scaling","text":"\u5f53\u4f7f\u7528 Amazon EC2 Auto Scaling \u7ec4\u521b\u5efa\u5b9e\u4f8b\u7ec4\u65f6\uff0c\u5c06\u4f1a\u751f\u6210\u4e00\u4e2ashell \u811a\u672c\uff0c \u60a8\u9700\u8981\u6dfb\u52a0\u5230 EC2 User Data \u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u914d\u7f6e \u90e8\u5206\uff0c\u9009\u62e9 Auto Scaling \u7ec4 \u9009\u9879\u3002 \u5728 Auto Scaling \u7ec4 \u90e8\u5206, \u9009\u62e9\u8981\u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684Auto Scaling\u7ec4\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237\u8bbe\u7f6e \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u8de8\u8d26\u6237\u7684\u5b9e\u4f8b\u7ec4\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 Instance Group \u521b\u5efa Log Ingestion \u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684 Shell Script\u3002 \u590d\u5236 shell \u811a\u672c\u5e76\u66f4\u65b0 Auto Scaling \u7ec4\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u3002\u5982\u679c\u9700\u8981\uff0cshell \u811a\u672c\u5c06\u81ea\u52a8\u5b89\u88c5 Fluent Bit\u3001SSM \u4ee3\u7406\uff0c\u5e76\u4e0b\u8f7d Fluent Bit \u914d\u7f6e\u3002 \u4e00\u65e6\u60a8\u66f4\u65b0\u4e86\u542f\u52a8\u914d\u7f6e\u6216\u542f\u52a8\u6a21\u677f\uff0c\u60a8\u9700\u8981\u542f\u52a8 instance refresh \u6765\u66f4\u65b0 Auto Scaling \u7ec4\u4e2d\u7684\u5b9e\u4f8b\u3002 \u65b0\u542f\u52a8\u7684\u5b9e\u4f8b\u4f1a\u5c06\u65e5\u5fd7\u63d0\u53d6\u5230 OpenSearch \u96c6\u7fa4\u6216 Log Buffer \u5c42\u3002","title":"(\u9009\u9879 2) \u9009\u62e9 Auto Scaling \u7ec4\u521b\u5efa\u5b9e\u4f8b\u7ec4"},{"location":"implementation-guide/applications/create-log-source/#amazon-eks-cluster","text":"\u65e5\u5fd7\u901a\u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002\u65e5\u5fd7\u901a\u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u91cd\u8981 \u65e5\u5fd7\u901a\u4e0d\u652f\u6301\u5c06\u4e00\u4e2a EKS \u96c6\u7fa4\u4e2d\u7684\u65e5\u5fd7\u540c\u65f6\u53d1\u9001\u5230\u591a\u4e2a Amazon OpenSearch \u57df\u3002 \u786e\u4fdd EKS \u96c6\u7fa4\u7684 VPC \u5df2\u8fde\u63a5\u5230 Amazon OpenSearch Service \u96c6\u7fa4\u7684 VPC\uff0c\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\u3002\u6709\u5173\u8fde\u63a5 VPC \u7684\u65b9\u6cd5\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 VPC Connectivity \u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS Cluster \u3002 \u5355\u51fb \u5bfc\u5165\u96c6\u7fa4 \u6309\u94ae\u3002 \u9009\u62e9\u65e5\u5fd7\u901a \u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684 EKS \u96c6\u7fa4 \u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237 \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u5bfc\u5165\u4e00\u4e2a\u5176\u4ed6\u8d26\u6237\u7684 EKS \u96c6\u7fa4\u3002 \u9009\u62e9 DaemonSet \u6216 Sidecar \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\u7684\u90e8\u7f72\u6a21\u5f0f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6307\u5b9a\u65e5\u5fd7\u901a \u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u7684 Amazon OpenSearch \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5efa\u7acb EKS \u548c OpenSearch \u4e4b\u95f4\u7684 VPC \u5bf9\u7b49\u8fde\u63a5\u3002 \u521b\u5efa\u5e76\u63a5\u53d7 VPC \u5bf9\u7b49\u8fde\u63a5 \u4e3a VPC \u5bf9\u7b49\u8fde\u63a5\u66f4\u65b0\u8def\u7531\u8868 \u66f4\u65b0\u60a8\u7684\u5b89\u5168\u7ec4\u4ee5\u5f15\u7528\u5bf9\u7b49 VPC \u7ec4 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"Amazon EKS cluster"},{"location":"implementation-guide/applications/create-log-source/#amazon-s3","text":"S3 \u5728\u65e5\u5fd7\u901a\u4e2d\u6307\u7684\u662f\u60a8\u60f3\u8981\u4ece\u4e2d\u6536\u96c6\u5b58\u50a8\u5728\u60a8\u6876\u4e2d\u7684\u5e94\u7528\u65e5\u5fd7\u7684 Amazon S3\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 \u6301\u7eed\u52a0\u8f7d \u6216 \u4e00\u6b21\u6027\u52a0\u8f7d \u6765\u521b\u5efa\u60a8\u7684\u5bfc\u5165\u4efb\u52a1\u3002 \u91cd\u8981 \u6301\u7eed\u52a0\u8f7d \u8868\u793a\u5f53\u65b0\u6587\u4ef6\u4f20\u9001\u5230\u6307\u5b9a\u7684 S3 \u4f4d\u7f6e\u65f6\uff0c\u5bfc\u5165\u4f5c\u4e1a\u5c06\u8fd0\u884c\u3002 \u4e00\u6b21\u6027\u52a0\u8f7d \u8868\u793a\u5bfc\u5165\u5de5\u4f5c\u5c06\u5728\u521b\u5efa\u65f6\u8fd0\u884c\uff0c\u5e76\u4e14\u53ea\u4f1a\u8fd0\u884c\u4e00\u6b21\u4ee5\u52a0\u8f7d\u6307\u5b9a\u4f4d\u7f6e\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u3002","title":"Amazon S3"},{"location":"implementation-guide/applications/create-log-source/#syslog","text":"\u91cd\u8981 \u8bf7\u786e\u4fdd\u60a8\u7684 Syslog \u751f\u6210\u5668/\u53d1\u9001\u8005\u7684\u5b50\u7f51\u8fde\u63a5\u5230\u65e5\u5fd7\u901a \u7684 \u4e24\u4e2a \u79c1\u6709\u5b50\u7f51\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u63d0\u53d6\u65e5\u5fd7\u3002 \u6709\u5173\u8fde\u63a5 VPC \u7684\u65b9\u6cd5\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 VPC Connectivity \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7aef\u53e3\u53f7\u7684 UDP \u6216 TCP \u534f\u8bae\u5728\u65e5\u5fd7\u901a\u4e2d\u6536\u96c6syslog\u3002Syslog \u662f\u6307Linux\u5b9e\u4f8b\u3001\u8def\u7531\u5668\u6216\u7f51\u7edc\u8bbe\u5907\u4ea7\u751f\u7684\u65e5\u5fd7\u3002\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Wikipedia \u7684 Syslog \u3002","title":"Syslog"},{"location":"implementation-guide/applications/create-log-source/#_2","text":"\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u540e\uff0c\u5c31\u6709\u4e00\u4e2a\u65e5\u5fd7\u6e90\u3002 \u60a8\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u9009\u62e9\u5c06\u66f4\u591a\u65e5\u5fd7\u6e90\u6dfb\u52a0\u5230\u65e5\u5fd7\u7ba1\u9053\u4e2d\uff1a \u767b\u5f55\u5230\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c \u5728 Log Analytics Pipelines , \u9009\u62e9 Application Log \u3002 \u901a\u8fc7\u5355\u51fb\u5176\u6765\u9009\u62e9\u65e5\u5fd7\u7ba1\u9053\u7684 ID \u3002 \u9009\u62e9 Create a source \u3002 \u6309\u7167 Amazon EC2 instance group , Amazon EKS cluster , Amazon S3 , or Syslog \u7684\u64cd\u4f5c\u6307\u5357\uff0c\u6839\u636e\u60a8\u7684\u9700\u8981\u521b\u5efa\u65e5\u5fd7\u6e90\u3002","title":"\u6dfb\u52a0\u65b0\u7684\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/ec2-pipeline/","text":"Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u5b9e\u4f8b\u7ec4\u4ee3\u8868\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\uff0c\u8fd9\u4f7f\u5f97\u89e3\u51b3\u65b9\u6848\u80fd\u591f\u5feb\u901f\u5c06\u65e5\u5fd7\u914d\u7f6e\u4e0e\u591a\u4e2a EC2 \u5b9e\u4f8b\u5173\u8054\u3002 \u65e5\u5fd7\u901a\u4f7f\u7528 Systems Manager \u4ee3\u7406\uff08SSM \u4ee3\u7406\uff09\u6765\u5b89\u88c5/\u914d\u7f6e Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams\u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece EC2 \u5b9e\u4f8b\u7ec4\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002 \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\uff08Amazon OpenSearch\uff09 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb \u5b9e\u4f8b\u7ec4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Amazon OpenSearch \uff0c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 . \u9009\u62e9\u60a8\u5df2\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u95ef\u5c06\u5b9e\u4f8b\u7ec4\uff0c \u5728\u53f3\u4e0a\u89d2\u9009\u62e9\u9009\u62e9 \u521b\u5efa\u5b9e\u4f8b\u7ec4 , \u7136\u540e\u6839\u636e \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u7684\u6587\u6863\u6765\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002 \u5b8c\u6210\u540e, \u9009\u62e9 \u5237\u65b0 \u5e76\u9009\u62e9\u6700\u65b0\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4. (\u4ec5\u9650\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4) \u5982\u679c\u60a8\u7684\u5b9e\u4f8b\u7ec4\u662f\u57fa\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4\u521b\u5efa\u7684\uff0c\u5728\u6444\u53d6\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u521b\u5efa\u201d\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5b9e\u4f8b\u7ec4\u7684\u8be6\u7ec6\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684Shell\u811a\u672c\u3002\u590d\u5236\u8be5shell\u811a\u672c\u5e76\u66f4\u65b0\u81ea\u52a8\u6269\u5c55\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u4e2d\u7684\u7528\u6237\u6570\u636e\u3002 \u4fdd\u6301\u9ed8\u8ba4\u7684 \u6743\u9650\u6388\u4e88\u65b9\u6cd5 \u3002 (\u53ef\u9009) \u5982\u679c\u60a8\u9009\u62e9 \u6211\u4f1a\u5728\u7ba1\u9053\u521b\u5efa\u540e\u624b\u52a8\u6dfb\u52a0\u4ee5\u4e0b\u6240\u9700\u7684\u6743\u9650 , \u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\uff1a \u70b9\u51fb \u5c55\u5f00\u67e5\u770b\u6240\u9700\u7684\u6743\u9650 \u5e76\u590d\u5236\u63d0\u4f9b\u7684JSON\u7b56\u7565\u3002 \u8f6c\u5230 AWS Management Console \u3002 \u5728\u5de6\u4fa7\u680f\uff0c\u9009\u62e9 IAM , \u5e76\u4ece Access management \u4e0b\u9762\u9009\u62e9 \u7b56\u7565 \u3002 \u9009\u62e9 \u521b\u5efa\u7b56\u7565 \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u5c06 <YOUR ACCOUNT ID> \u66ff\u6362\u4e3a\u60a8\u7684\u8d26\u6237ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 , \u7136\u540e\u4e3a\u6b64\u7b56\u7565\u8f93\u5165\u540d\u79f0\u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684EC2\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u6388\u4e88\u65e5\u5fd7\u4ee3\u7406\u53d1\u9001\u65e5\u5fd7\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u52a8\u6269\u5c55\u7ec4\uff0c\u5219\u9700\u8981\u66f4\u65b0\u4e0e\u81ea\u52a8\u6269\u5c55\u7ec4\u5173\u8054\u7684IAM\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u6709\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6587\u6863\u6765\u66f4\u65b0\u60a8\u7684[\u542f\u52a8\u6a21\u677f][launch-template]\u6216[\u542f\u52a8\u914d\u7f6e][launch-configuration]\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e . \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u6216 Kinesis Data Streams \u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u6709\u7f13\u51b2\u5c42\uff0c\u8bf7\u9009\u62e9 \u65e0 \u3002\u8bf7\u53c2\u9605 \u65e5\u5fd7\u7f13\u51b2 \u83b7\u53d6\u5173\u4e8e\u9009\u62e9\u9002\u5f53\u7f13\u51b2\u5c42\u7684\u66f4\u591a\u4fe1\u606f\u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 S3 Bucket\u524d\u7f00 AppLogs/<index-prefix>/year=%Y/month=%m/day=%d \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u6587\u4ef6\u4ea4\u4ed8\u7ed9S3\u6876\u65f6\u6dfb\u52a0\u524d\u7f00\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 Kinesis Data Streams\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 \u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> Kinesis Data Streams\u7684\u5206\u7247\u6570\u91cf\u3002\u6bcf\u4e2a\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u5bb9\u7eb31,000\u4e2a\u8bb0\u5f55\uff0c\u5e76\u4e14\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002 \u542f\u7528\u81ea\u52a8\u7f29\u653e \u5426 \u8be5\u89e3\u51b3\u65b9\u6848\u6bcf5\u5206\u949f\u76d1\u89c6\u4e00\u6b21Kinesis Data Streams\u7684\u5229\u7528\u7387\uff0c\u5e76\u81ea\u52a8\u7f29\u653e\u5206\u7247\u7684\u6570\u91cf\u3002\u89e3\u51b3\u65b9\u6848\u572824\u5c0f\u65f6\u5185\u6700\u591a\u7f29\u653e8\u6b21\u3002 \u6700\u5927\u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> \u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u7f29\u653e\uff0c\u5219\u9700\u8981\u3002\u6700\u5927\u7684\u5206\u7247\u6570\u91cf\u3002 \u91cd\u8981 \u5982\u679c\u5728Kinesis Data Streams\uff08KDS\uff09\u4e2d\u53d1\u751f\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728OpenSearch\u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u7684\u65e5\u5fd7\u3002\u8fd9\u662f\u56e0\u4e3aFluent Bit\u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 (\u5305\u542b\u591a\u4e2a\u8bb0\u5f55)\u4e0a\u4f20\u65e5\u5fd7\uff0c\u5e76\u5728\u4e0a\u4f20\u5931\u8d25\u65f6\u91cd\u8bd5\u8be5\u5757\u3002\u6bcf\u4e2aKDS\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u652f\u6301\u5199\u51651,000\u6761\u8bb0\u5f55\uff0c\u6700\u5927\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002\u8bf7\u4f30\u7b97\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u91cf\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\u4e2d\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002 \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\uff08Light Engine\uff09 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb \u5b9e\u4f8b\u7ec4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Light Engine \uff0c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 . \u9009\u62e9\u60a8\u5df2\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u95ef\u5c06\u5b9e\u4f8b\u7ec4\uff0c \u5728\u53f3\u4e0a\u89d2\u9009\u62e9\u9009\u62e9 \u521b\u5efa\u5b9e\u4f8b\u7ec4 , \u7136\u540e\u6839\u636e \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u7684\u6587\u6863\u6765\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002 \u5b8c\u6210\u540e, \u9009\u62e9 \u5237\u65b0 \u5e76\u9009\u62e9\u6700\u65b0\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4. (\u4ec5\u9650\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4) \u5982\u679c\u60a8\u7684\u5b9e\u4f8b\u7ec4\u662f\u57fa\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4\u521b\u5efa\u7684\uff0c\u5728\u6444\u53d6\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u521b\u5efa\u201d\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5b9e\u4f8b\u7ec4\u7684\u8be6\u7ec6\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684Shell\u811a\u672c\u3002\u590d\u5236\u8be5shell\u811a\u672c\u5e76\u66f4\u65b0\u81ea\u52a8\u6269\u5c55\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u4e2d\u7684\u7528\u6237\u6570\u636e\u3002 \u4fdd\u6301\u9ed8\u8ba4\u7684 \u6743\u9650\u6388\u4e88\u65b9\u6cd5 \u3002 (\u53ef\u9009) \u5982\u679c\u60a8\u9009\u62e9 \u6211\u4f1a\u5728\u7ba1\u9053\u521b\u5efa\u540e\u624b\u52a8\u6dfb\u52a0\u4ee5\u4e0b\u6240\u9700\u7684\u6743\u9650 , \u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\uff1a \u70b9\u51fb \u5c55\u5f00\u67e5\u770b\u6240\u9700\u7684\u6743\u9650 \u5e76\u590d\u5236\u63d0\u4f9b\u7684JSON\u7b56\u7565\u3002 \u8f6c\u5230 AWS Management Console \u3002 \u5728\u5de6\u4fa7\u680f\uff0c\u9009\u62e9 IAM , \u5e76\u4ece Access management \u4e0b\u9762\u9009\u62e9 \u7b56\u7565 \u3002 \u9009\u62e9 \u521b\u5efa\u7b56\u7565 \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u5c06 <YOUR ACCOUNT ID> \u66ff\u6362\u4e3a\u60a8\u7684\u8d26\u6237ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 , \u7136\u540e\u4e3a\u6b64\u7b56\u7565\u8f93\u5165\u540d\u79f0\u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684EC2\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u6388\u4e88\u65e5\u5fd7\u4ee3\u7406\u53d1\u9001\u65e5\u5fd7\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u52a8\u6269\u5c55\u7ec4\uff0c\u5219\u9700\u8981\u66f4\u65b0\u4e0e\u81ea\u52a8\u6269\u5c55\u7ec4\u5173\u8054\u7684IAM\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u6709\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6587\u6863\u6765\u66f4\u65b0\u60a8\u7684[\u542f\u52a8\u6a21\u677f][launch-template]\u6216[\u542f\u52a8\u914d\u7f6e][launch-configuration]\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e . \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 Lambda\u4f1a\u4f5c\u4e3aLight Engine\u7684\u9ed8\u8ba4\u65e5\u5fd7\u5904\u7406\u5668\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u5f00\u542f\u5e94\u7528\u544a\u8b66\uff0c\u5e76\u6309\u9700\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"EC2 \u5b9e\u4f8b\u7ec4"},{"location":"implementation-guide/applications/ec2-pipeline/#amazon-ec2","text":"\u5b9e\u4f8b\u7ec4\u4ee3\u8868\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\uff0c\u8fd9\u4f7f\u5f97\u89e3\u51b3\u65b9\u6848\u80fd\u591f\u5feb\u901f\u5c06\u65e5\u5fd7\u914d\u7f6e\u4e0e\u591a\u4e2a EC2 \u5b9e\u4f8b\u5173\u8054\u3002 \u65e5\u5fd7\u901a\u4f7f\u7528 Systems Manager \u4ee3\u7406\uff08SSM \u4ee3\u7406\uff09\u6765\u5b89\u88c5/\u914d\u7f6e Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams\u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece EC2 \u5b9e\u4f8b\u7ec4\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002","title":"Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/ec2-pipeline/#amazon-opensearch","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\uff08Amazon OpenSearch\uff09"},{"location":"implementation-guide/applications/ec2-pipeline/#_1","text":"\u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002","title":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210"},{"location":"implementation-guide/applications/ec2-pipeline/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb \u5b9e\u4f8b\u7ec4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Amazon OpenSearch \uff0c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 . \u9009\u62e9\u60a8\u5df2\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u95ef\u5c06\u5b9e\u4f8b\u7ec4\uff0c \u5728\u53f3\u4e0a\u89d2\u9009\u62e9\u9009\u62e9 \u521b\u5efa\u5b9e\u4f8b\u7ec4 , \u7136\u540e\u6839\u636e \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u7684\u6587\u6863\u6765\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002 \u5b8c\u6210\u540e, \u9009\u62e9 \u5237\u65b0 \u5e76\u9009\u62e9\u6700\u65b0\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4. (\u4ec5\u9650\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4) \u5982\u679c\u60a8\u7684\u5b9e\u4f8b\u7ec4\u662f\u57fa\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4\u521b\u5efa\u7684\uff0c\u5728\u6444\u53d6\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u521b\u5efa\u201d\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5b9e\u4f8b\u7ec4\u7684\u8be6\u7ec6\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684Shell\u811a\u672c\u3002\u590d\u5236\u8be5shell\u811a\u672c\u5e76\u66f4\u65b0\u81ea\u52a8\u6269\u5c55\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u4e2d\u7684\u7528\u6237\u6570\u636e\u3002 \u4fdd\u6301\u9ed8\u8ba4\u7684 \u6743\u9650\u6388\u4e88\u65b9\u6cd5 \u3002 (\u53ef\u9009) \u5982\u679c\u60a8\u9009\u62e9 \u6211\u4f1a\u5728\u7ba1\u9053\u521b\u5efa\u540e\u624b\u52a8\u6dfb\u52a0\u4ee5\u4e0b\u6240\u9700\u7684\u6743\u9650 , \u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\uff1a \u70b9\u51fb \u5c55\u5f00\u67e5\u770b\u6240\u9700\u7684\u6743\u9650 \u5e76\u590d\u5236\u63d0\u4f9b\u7684JSON\u7b56\u7565\u3002 \u8f6c\u5230 AWS Management Console \u3002 \u5728\u5de6\u4fa7\u680f\uff0c\u9009\u62e9 IAM , \u5e76\u4ece Access management \u4e0b\u9762\u9009\u62e9 \u7b56\u7565 \u3002 \u9009\u62e9 \u521b\u5efa\u7b56\u7565 \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u5c06 <YOUR ACCOUNT ID> \u66ff\u6362\u4e3a\u60a8\u7684\u8d26\u6237ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 , \u7136\u540e\u4e3a\u6b64\u7b56\u7565\u8f93\u5165\u540d\u79f0\u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684EC2\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u6388\u4e88\u65e5\u5fd7\u4ee3\u7406\u53d1\u9001\u65e5\u5fd7\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u52a8\u6269\u5c55\u7ec4\uff0c\u5219\u9700\u8981\u66f4\u65b0\u4e0e\u81ea\u52a8\u6269\u5c55\u7ec4\u5173\u8054\u7684IAM\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u6709\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6587\u6863\u6765\u66f4\u65b0\u60a8\u7684[\u542f\u52a8\u6a21\u677f][launch-template]\u6216[\u542f\u52a8\u914d\u7f6e][launch-configuration]\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e . \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u6216 Kinesis Data Streams \u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u6709\u7f13\u51b2\u5c42\uff0c\u8bf7\u9009\u62e9 \u65e0 \u3002\u8bf7\u53c2\u9605 \u65e5\u5fd7\u7f13\u51b2 \u83b7\u53d6\u5173\u4e8e\u9009\u62e9\u9002\u5f53\u7f13\u51b2\u5c42\u7684\u66f4\u591a\u4fe1\u606f\u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 S3 Bucket\u524d\u7f00 AppLogs/<index-prefix>/year=%Y/month=%m/day=%d \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u6587\u4ef6\u4ea4\u4ed8\u7ed9S3\u6876\u65f6\u6dfb\u52a0\u524d\u7f00\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 Kinesis Data Streams\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 \u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> Kinesis Data Streams\u7684\u5206\u7247\u6570\u91cf\u3002\u6bcf\u4e2a\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u5bb9\u7eb31,000\u4e2a\u8bb0\u5f55\uff0c\u5e76\u4e14\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002 \u542f\u7528\u81ea\u52a8\u7f29\u653e \u5426 \u8be5\u89e3\u51b3\u65b9\u6848\u6bcf5\u5206\u949f\u76d1\u89c6\u4e00\u6b21Kinesis Data Streams\u7684\u5229\u7528\u7387\uff0c\u5e76\u81ea\u52a8\u7f29\u653e\u5206\u7247\u7684\u6570\u91cf\u3002\u89e3\u51b3\u65b9\u6848\u572824\u5c0f\u65f6\u5185\u6700\u591a\u7f29\u653e8\u6b21\u3002 \u6700\u5927\u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> \u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u7f29\u653e\uff0c\u5219\u9700\u8981\u3002\u6700\u5927\u7684\u5206\u7247\u6570\u91cf\u3002 \u91cd\u8981 \u5982\u679c\u5728Kinesis Data Streams\uff08KDS\uff09\u4e2d\u53d1\u751f\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728OpenSearch\u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u7684\u65e5\u5fd7\u3002\u8fd9\u662f\u56e0\u4e3aFluent Bit\u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 (\u5305\u542b\u591a\u4e2a\u8bb0\u5f55)\u4e0a\u4f20\u65e5\u5fd7\uff0c\u5e76\u5728\u4e0a\u4f20\u5931\u8d25\u65f6\u91cd\u8bd5\u8be5\u5757\u3002\u6bcf\u4e2aKDS\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u652f\u6301\u5199\u51651,000\u6761\u8bb0\u5f55\uff0c\u6700\u5927\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002\u8bf7\u4f30\u7b97\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u91cf\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\u4e2d\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/ec2-pipeline/#light-engine","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\uff08Light Engine\uff09"},{"location":"implementation-guide/applications/ec2-pipeline/#_3","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb \u5b9e\u4f8b\u7ec4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Light Engine \uff0c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 . \u9009\u62e9\u60a8\u5df2\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u95ef\u5c06\u5b9e\u4f8b\u7ec4\uff0c \u5728\u53f3\u4e0a\u89d2\u9009\u62e9\u9009\u62e9 \u521b\u5efa\u5b9e\u4f8b\u7ec4 , \u7136\u540e\u6839\u636e \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u7684\u6587\u6863\u6765\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002 \u5b8c\u6210\u540e, \u9009\u62e9 \u5237\u65b0 \u5e76\u9009\u62e9\u6700\u65b0\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4. (\u4ec5\u9650\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4) \u5982\u679c\u60a8\u7684\u5b9e\u4f8b\u7ec4\u662f\u57fa\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4\u521b\u5efa\u7684\uff0c\u5728\u6444\u53d6\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u521b\u5efa\u201d\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5b9e\u4f8b\u7ec4\u7684\u8be6\u7ec6\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684Shell\u811a\u672c\u3002\u590d\u5236\u8be5shell\u811a\u672c\u5e76\u66f4\u65b0\u81ea\u52a8\u6269\u5c55\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u4e2d\u7684\u7528\u6237\u6570\u636e\u3002 \u4fdd\u6301\u9ed8\u8ba4\u7684 \u6743\u9650\u6388\u4e88\u65b9\u6cd5 \u3002 (\u53ef\u9009) \u5982\u679c\u60a8\u9009\u62e9 \u6211\u4f1a\u5728\u7ba1\u9053\u521b\u5efa\u540e\u624b\u52a8\u6dfb\u52a0\u4ee5\u4e0b\u6240\u9700\u7684\u6743\u9650 , \u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\uff1a \u70b9\u51fb \u5c55\u5f00\u67e5\u770b\u6240\u9700\u7684\u6743\u9650 \u5e76\u590d\u5236\u63d0\u4f9b\u7684JSON\u7b56\u7565\u3002 \u8f6c\u5230 AWS Management Console \u3002 \u5728\u5de6\u4fa7\u680f\uff0c\u9009\u62e9 IAM , \u5e76\u4ece Access management \u4e0b\u9762\u9009\u62e9 \u7b56\u7565 \u3002 \u9009\u62e9 \u521b\u5efa\u7b56\u7565 \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u5c06 <YOUR ACCOUNT ID> \u66ff\u6362\u4e3a\u60a8\u7684\u8d26\u6237ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 , \u7136\u540e\u4e3a\u6b64\u7b56\u7565\u8f93\u5165\u540d\u79f0\u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684EC2\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u6388\u4e88\u65e5\u5fd7\u4ee3\u7406\u53d1\u9001\u65e5\u5fd7\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u52a8\u6269\u5c55\u7ec4\uff0c\u5219\u9700\u8981\u66f4\u65b0\u4e0e\u81ea\u52a8\u6269\u5c55\u7ec4\u5173\u8054\u7684IAM\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u6709\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6587\u6863\u6765\u66f4\u65b0\u60a8\u7684[\u542f\u52a8\u6a21\u677f][launch-template]\u6216[\u542f\u52a8\u914d\u7f6e][launch-configuration]\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e . \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 Lambda\u4f1a\u4f5c\u4e3aLight Engine\u7684\u9ed8\u8ba4\u65e5\u5fd7\u5904\u7406\u5668\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u5f00\u542f\u5e94\u7528\u544a\u8b66\uff0c\u5e76\u6309\u9700\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/eks-pipeline/","text":"Amazon EKS\u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u65e5\u5fd7\u901a\u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002\u65e5\u5fd7\u901a\u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece EKS\u96c6\u7fa4\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002 \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\uff08Amazon OpenSearch\uff09 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb EKS\u96c6\u7fa4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Amazon OpenSarch \uff0c \u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u5b58\u50a8\u65e5\u5fd7\u7684 AWS \u8d26\u6237\u3002 \u9009\u62e9EKS\u96c6\u7fa4\uff0c\u5982\u679c\u4f60\u8fd8\u6709\u6ca1\u6709\u5bfc\u5165\u96c6\u7fa4\uff0c\u9009\u62e9 \u5bfc\u5165\u96c6\u7fa4 , \u53c2\u8003 EKS \u96c6\u7fa4 \u64cd\u4f5c\u6587\u6863\u6765\u5bfc\u5165EKS\u96c6\u7fa4\u3002\u7136\u540e\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u65b0\u5bfc\u5165\u7684EKS\u96c6\u7fa4\u3002 \u5355\u51fb \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u6216 Kinesis Data Streams \u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u6709\u7f13\u51b2\u5c42\uff0c\u8bf7\u9009\u62e9 \u65e0 \u3002\u8bf7\u53c2\u9605 \u65e5\u5fd7\u7f13\u51b2 \u83b7\u53d6\u5173\u4e8e\u9009\u62e9\u9002\u5f53\u7f13\u51b2\u5c42\u7684\u66f4\u591a\u4fe1\u606f\u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 S3 Bucket\u524d\u7f00 AppLogs/<index-prefix>/year=%Y/month=%m/day=%d \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u6587\u4ef6\u4ea4\u4ed8\u7ed9S3\u6876\u65f6\u6dfb\u52a0\u524d\u7f00\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 Kinesis Data Streams\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 \u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> Kinesis Data Streams\u7684\u5206\u7247\u6570\u91cf\u3002\u6bcf\u4e2a\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u5bb9\u7eb31,000\u4e2a\u8bb0\u5f55\uff0c\u5e76\u4e14\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002 \u542f\u7528\u81ea\u52a8\u7f29\u653e \u5426 \u8be5\u89e3\u51b3\u65b9\u6848\u6bcf5\u5206\u949f\u76d1\u89c6\u4e00\u6b21Kinesis Data Streams\u7684\u5229\u7528\u7387\uff0c\u5e76\u81ea\u52a8\u7f29\u653e\u5206\u7247\u7684\u6570\u91cf\u3002\u89e3\u51b3\u65b9\u6848\u572824\u5c0f\u65f6\u5185\u6700\u591a\u7f29\u653e8\u6b21\u3002 \u6700\u5927\u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> \u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u7f29\u653e\uff0c\u5219\u9700\u8981\u3002\u6700\u5927\u7684\u5206\u7247\u6570\u91cf\u3002 \u91cd\u8981 \u5982\u679c\u5728Kinesis Data Streams\uff08KDS\uff09\u4e2d\u53d1\u751f\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728OpenSearch\u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u7684\u65e5\u5fd7\u3002\u8fd9\u662f\u56e0\u4e3aFluent Bit\u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 (\u5305\u542b\u591a\u4e2a\u8bb0\u5f55)\u4e0a\u4f20\u65e5\u5fd7\uff0c\u5e76\u5728\u4e0a\u4f20\u5931\u8d25\u65f6\u91cd\u8bd5\u8be5\u5757\u3002\u6bcf\u4e2aKDS\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u652f\u6301\u5199\u51651,000\u6761\u8bb0\u5f55\uff0c\u6700\u5927\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002\u8bf7\u4f30\u7b97\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u91cf\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\u4e2d\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002 \u7528Light Engine \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\uff08Light Engine\uff09 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb \u5b9e\u4f8b\u7ec4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Light Engine \uff0c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 . \u9009\u62e9\u60a8\u5df2\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u95ef\u5c06\u5b9e\u4f8b\u7ec4\uff0c \u5728\u53f3\u4e0a\u89d2\u9009\u62e9\u9009\u62e9 \u521b\u5efa\u5b9e\u4f8b\u7ec4 , \u7136\u540e\u6839\u636e \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u7684\u6587\u6863\u6765\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002 \u5b8c\u6210\u540e, \u9009\u62e9 \u5237\u65b0 \u5e76\u9009\u62e9\u6700\u65b0\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4. (\u4ec5\u9650\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4) \u5982\u679c\u60a8\u7684\u5b9e\u4f8b\u7ec4\u662f\u57fa\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4\u521b\u5efa\u7684\uff0c\u5728\u6444\u53d6\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u521b\u5efa\u201d\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5b9e\u4f8b\u7ec4\u7684\u8be6\u7ec6\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684Shell\u811a\u672c\u3002\u590d\u5236\u8be5shell\u811a\u672c\u5e76\u66f4\u65b0\u81ea\u52a8\u6269\u5c55\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u4e2d\u7684\u7528\u6237\u6570\u636e\u3002 \u4fdd\u6301\u9ed8\u8ba4\u7684 \u6743\u9650\u6388\u4e88\u65b9\u6cd5 \u3002 (\u53ef\u9009) \u5982\u679c\u60a8\u9009\u62e9 \u6211\u4f1a\u5728\u7ba1\u9053\u521b\u5efa\u540e\u624b\u52a8\u6dfb\u52a0\u4ee5\u4e0b\u6240\u9700\u7684\u6743\u9650 , \u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\uff1a \u70b9\u51fb \u5c55\u5f00\u67e5\u770b\u6240\u9700\u7684\u6743\u9650 \u5e76\u590d\u5236\u63d0\u4f9b\u7684JSON\u7b56\u7565\u3002 \u8f6c\u5230 AWS Management Console \u3002 \u5728\u5de6\u4fa7\u680f\uff0c\u9009\u62e9 IAM , \u5e76\u4ece Access management \u4e0b\u9762\u9009\u62e9 \u7b56\u7565 \u3002 \u9009\u62e9 \u521b\u5efa\u7b56\u7565 \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u5c06 <YOUR ACCOUNT ID> \u66ff\u6362\u4e3a\u60a8\u7684\u8d26\u6237ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 , \u7136\u540e\u4e3a\u6b64\u7b56\u7565\u8f93\u5165\u540d\u79f0\u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684EC2\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u6388\u4e88\u65e5\u5fd7\u4ee3\u7406\u53d1\u9001\u65e5\u5fd7\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u52a8\u6269\u5c55\u7ec4\uff0c\u5219\u9700\u8981\u66f4\u65b0\u4e0e\u81ea\u52a8\u6269\u5c55\u7ec4\u5173\u8054\u7684IAM\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u6709\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6587\u6863\u6765\u66f4\u65b0\u60a8\u7684[\u542f\u52a8\u6a21\u677f][launch-template]\u6216[\u542f\u52a8\u914d\u7f6e][launch-configuration]\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e . \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 Lambda\u4f1a\u4f5c\u4e3aLight Engine\u7684\u9ed8\u8ba4\u65e5\u5fd7\u5904\u7406\u5668\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u5f00\u542f\u5e94\u7528\u544a\u8b66\uff0c\u5e76\u6309\u9700\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"EKS \u96c6\u7fa4"},{"location":"implementation-guide/applications/eks-pipeline/#amazon-eks","text":"\u65e5\u5fd7\u901a\u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002\u65e5\u5fd7\u901a\u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece EKS\u96c6\u7fa4\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002","title":"Amazon EKS\u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/eks-pipeline/#amazon-opensearch","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\uff08Amazon OpenSearch\uff09"},{"location":"implementation-guide/applications/eks-pipeline/#_1","text":"\u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002","title":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210"},{"location":"implementation-guide/applications/eks-pipeline/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb EKS\u96c6\u7fa4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Amazon OpenSarch \uff0c \u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u5b58\u50a8\u65e5\u5fd7\u7684 AWS \u8d26\u6237\u3002 \u9009\u62e9EKS\u96c6\u7fa4\uff0c\u5982\u679c\u4f60\u8fd8\u6709\u6ca1\u6709\u5bfc\u5165\u96c6\u7fa4\uff0c\u9009\u62e9 \u5bfc\u5165\u96c6\u7fa4 , \u53c2\u8003 EKS \u96c6\u7fa4 \u64cd\u4f5c\u6587\u6863\u6765\u5bfc\u5165EKS\u96c6\u7fa4\u3002\u7136\u540e\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u65b0\u5bfc\u5165\u7684EKS\u96c6\u7fa4\u3002 \u5355\u51fb \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u6216 Kinesis Data Streams \u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u6709\u7f13\u51b2\u5c42\uff0c\u8bf7\u9009\u62e9 \u65e0 \u3002\u8bf7\u53c2\u9605 \u65e5\u5fd7\u7f13\u51b2 \u83b7\u53d6\u5173\u4e8e\u9009\u62e9\u9002\u5f53\u7f13\u51b2\u5c42\u7684\u66f4\u591a\u4fe1\u606f\u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 S3 Bucket\u524d\u7f00 AppLogs/<index-prefix>/year=%Y/month=%m/day=%d \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u6587\u4ef6\u4ea4\u4ed8\u7ed9S3\u6876\u65f6\u6dfb\u52a0\u524d\u7f00\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 Kinesis Data Streams\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 \u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> Kinesis Data Streams\u7684\u5206\u7247\u6570\u91cf\u3002\u6bcf\u4e2a\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u5bb9\u7eb31,000\u4e2a\u8bb0\u5f55\uff0c\u5e76\u4e14\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002 \u542f\u7528\u81ea\u52a8\u7f29\u653e \u5426 \u8be5\u89e3\u51b3\u65b9\u6848\u6bcf5\u5206\u949f\u76d1\u89c6\u4e00\u6b21Kinesis Data Streams\u7684\u5229\u7528\u7387\uff0c\u5e76\u81ea\u52a8\u7f29\u653e\u5206\u7247\u7684\u6570\u91cf\u3002\u89e3\u51b3\u65b9\u6848\u572824\u5c0f\u65f6\u5185\u6700\u591a\u7f29\u653e8\u6b21\u3002 \u6700\u5927\u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> \u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u7f29\u653e\uff0c\u5219\u9700\u8981\u3002\u6700\u5927\u7684\u5206\u7247\u6570\u91cf\u3002 \u91cd\u8981 \u5982\u679c\u5728Kinesis Data Streams\uff08KDS\uff09\u4e2d\u53d1\u751f\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728OpenSearch\u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u7684\u65e5\u5fd7\u3002\u8fd9\u662f\u56e0\u4e3aFluent Bit\u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 (\u5305\u542b\u591a\u4e2a\u8bb0\u5f55)\u4e0a\u4f20\u65e5\u5fd7\uff0c\u5e76\u5728\u4e0a\u4f20\u5931\u8d25\u65f6\u91cd\u8bd5\u8be5\u5757\u3002\u6bcf\u4e2aKDS\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u652f\u6301\u5199\u51651,000\u6761\u8bb0\u5f55\uff0c\u6700\u5927\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002\u8bf7\u4f30\u7b97\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u91cf\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\u4e2d\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/eks-pipeline/#light-engine","text":"","title":"\u7528Light Engine \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/applications/eks-pipeline/#light-engine_1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb \u5b9e\u4f8b\u7ec4 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u9009\u62e9 Light Engine \uff0c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 . \u9009\u62e9\u60a8\u5df2\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u95ef\u5c06\u5b9e\u4f8b\u7ec4\uff0c \u5728\u53f3\u4e0a\u89d2\u9009\u62e9\u9009\u62e9 \u521b\u5efa\u5b9e\u4f8b\u7ec4 , \u7136\u540e\u6839\u636e \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u7684\u6587\u6863\u6765\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002 \u5b8c\u6210\u540e, \u9009\u62e9 \u5237\u65b0 \u5e76\u9009\u62e9\u6700\u65b0\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4. (\u4ec5\u9650\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4) \u5982\u679c\u60a8\u7684\u5b9e\u4f8b\u7ec4\u662f\u57fa\u4e8e\u81ea\u52a8\u6269\u5c55\u7ec4\u521b\u5efa\u7684\uff0c\u5728\u6444\u53d6\u72b6\u6001\u53d8\u4e3a\u201c\u5df2\u521b\u5efa\u201d\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5b9e\u4f8b\u7ec4\u7684\u8be6\u7ec6\u9875\u9762\u4e2d\u627e\u5230\u751f\u6210\u7684Shell\u811a\u672c\u3002\u590d\u5236\u8be5shell\u811a\u672c\u5e76\u66f4\u65b0\u81ea\u52a8\u6269\u5c55\u7684 \u542f\u52a8\u914d\u7f6e \u6216 \u542f\u52a8\u6a21\u677f \u4e2d\u7684\u7528\u6237\u6570\u636e\u3002 \u4fdd\u6301\u9ed8\u8ba4\u7684 \u6743\u9650\u6388\u4e88\u65b9\u6cd5 \u3002 (\u53ef\u9009) \u5982\u679c\u60a8\u9009\u62e9 \u6211\u4f1a\u5728\u7ba1\u9053\u521b\u5efa\u540e\u624b\u52a8\u6dfb\u52a0\u4ee5\u4e0b\u6240\u9700\u7684\u6743\u9650 , \u7ee7\u7eed\u5982\u4e0b\u64cd\u4f5c\uff1a \u70b9\u51fb \u5c55\u5f00\u67e5\u770b\u6240\u9700\u7684\u6743\u9650 \u5e76\u590d\u5236\u63d0\u4f9b\u7684JSON\u7b56\u7565\u3002 \u8f6c\u5230 AWS Management Console \u3002 \u5728\u5de6\u4fa7\u680f\uff0c\u9009\u62e9 IAM , \u5e76\u4ece Access management \u4e0b\u9762\u9009\u62e9 \u7b56\u7565 \u3002 \u9009\u62e9 \u521b\u5efa\u7b56\u7565 \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u5c06 <YOUR ACCOUNT ID> \u66ff\u6362\u4e3a\u60a8\u7684\u8d26\u6237ID\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 , \u7136\u540e\u4e3a\u6b64\u7b56\u7565\u8f93\u5165\u540d\u79f0\u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684EC2\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u6388\u4e88\u65e5\u5fd7\u4ee3\u7406\u53d1\u9001\u65e5\u5fd7\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u52a8\u6269\u5c55\u7ec4\uff0c\u5219\u9700\u8981\u66f4\u65b0\u4e0e\u81ea\u52a8\u6269\u5c55\u7ec4\u5173\u8054\u7684IAM\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u6709\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6587\u6863\u6765\u66f4\u65b0\u60a8\u7684[\u542f\u52a8\u6a21\u677f][launch-template]\u6216[\u542f\u52a8\u914d\u7f6e][launch-configuration]\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e . \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 Lambda\u4f1a\u4f5c\u4e3aLight Engine\u7684\u9ed8\u8ba4\u65e5\u5fd7\u5904\u7406\u5668\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u5f00\u542f\u5e94\u7528\u544a\u8b66\uff0c\u5e76\u6309\u9700\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\uff08Light Engine\uff09"},{"location":"implementation-guide/applications/include-supported-app-logs/","text":"\u4e0b\u8868\u5217\u51fa\u4e86\u6bcf\u4e2a\u65e5\u5fd7\u6e90\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u3002 \u6709\u5173\u5982\u4f55\u4e3a\u6bcf\u79cd\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Log Config . Log \u683c\u5f0f EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6876 Syslog Nginx \u662f \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u662f \u5426 \u591a\u884c\u6587\u672c (Spring Boot) \u662f \u662f \u662f \u5426 Syslog RFC5424/RFC3164 \u5426 \u5426 \u5426 \u662f Syslog \u81ea\u5b9a\u4e49 \u5426 \u5426 \u5426 \u662f","title":"Include supported app logs"},{"location":"implementation-guide/applications/s3-pipeline/","text":"Amazon S3 \u4f5c\u4e3a \u65e5\u5fd7\u6e90 \u5bf9\u4e8e Amazon S3\uff0c\u65e5\u5fd7\u901a\u65e2\u53ef\u4ee5\u8fde\u7eed\u63d0\u53d6\u6307\u5b9a S3 \u4f4d\u7f6e\u4e2d\u7684\u65e5\u5fd7\u6216\u6267\u884c\u4e00\u6b21\u6027\u63d0\u53d6\u3002\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e S3 \u524d\u7f00\u8fc7\u6ee4\u65e5\u5fd7\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u65e5\u5fd7\u914d\u7f6e\u89e3\u6790\u65e5\u5fd7\u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece S3\u6876\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb S3\u6876 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u6876\uff0c\u5e76\u6309\u7167\u4f60\u7684\u5b9e\u9645\u9700\u6c42\u8f93\u5165 \u524d\u7f00\u8fc7\u6ee4\u5668 \uff08\u53ef\u9009\uff09\u3002 \u6839\u636e\u60a8\u7684\u9700\u6c42\u9009\u62e9 \u5bfc\u5165\u6a21\u5f0f \u3002\u5982\u679c\u60a8\u60f3\u6301\u7eed\u5730\u6444\u53d6\u65e5\u5fd7\uff0c\u8bf7\u9009\u62e9 \u6301\u7eed\u52a0\u8f7d \uff1b\u5982\u679c\u60a8\u53ea\u9700\u8981\u6444\u53d6\u65e5\u5fd7\u4e00\u6b21\uff0c\u8bf7\u9009\u62e9 \u4e00\u6b21\u6027\u52a0\u8f7d \u3002 \u5982\u679c\u60a8\u7684\u65e5\u5fd7\u6587\u4ef6\u5df2\u538b\u7f29\uff0c\u8bf7\u6307\u5b9a \u538b\u7f29\u683c\u5f0f \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 I\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"S3"},{"location":"implementation-guide/applications/s3-pipeline/#amazon-s3","text":"\u5bf9\u4e8e Amazon S3\uff0c\u65e5\u5fd7\u901a\u65e2\u53ef\u4ee5\u8fde\u7eed\u63d0\u53d6\u6307\u5b9a S3 \u4f4d\u7f6e\u4e2d\u7684\u65e5\u5fd7\u6216\u6267\u884c\u4e00\u6b21\u6027\u63d0\u53d6\u3002\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e S3 \u524d\u7f00\u8fc7\u6ee4\u65e5\u5fd7\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u65e5\u5fd7\u914d\u7f6e\u89e3\u6790\u65e5\u5fd7\u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece S3\u6876\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002","title":"Amazon S3 \u4f5c\u4e3a \u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/s3-pipeline/#_1","text":"\u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002","title":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210"},{"location":"implementation-guide/applications/s3-pipeline/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb S3\u6876 \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u6876\uff0c\u5e76\u6309\u7167\u4f60\u7684\u5b9e\u9645\u9700\u6c42\u8f93\u5165 \u524d\u7f00\u8fc7\u6ee4\u5668 \uff08\u53ef\u9009\uff09\u3002 \u6839\u636e\u60a8\u7684\u9700\u6c42\u9009\u62e9 \u5bfc\u5165\u6a21\u5f0f \u3002\u5982\u679c\u60a8\u60f3\u6301\u7eed\u5730\u6444\u53d6\u65e5\u5fd7\uff0c\u8bf7\u9009\u62e9 \u6301\u7eed\u52a0\u8f7d \uff1b\u5982\u679c\u60a8\u53ea\u9700\u8981\u6444\u53d6\u65e5\u5fd7\u4e00\u6b21\uff0c\u8bf7\u9009\u62e9 \u4e00\u6b21\u6027\u52a0\u8f7d \u3002 \u5982\u679c\u60a8\u7684\u65e5\u5fd7\u6587\u4ef6\u5df2\u538b\u7f29\uff0c\u8bf7\u6307\u5b9a \u538b\u7f29\u683c\u5f0f \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 I\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/syslog-pipeline/","text":"Syslog \u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u65e5\u5fd7\u901a\u5c06\u901a\u8fc7 UDP \u6216 TCP \u534f\u8bae\u6536\u96c6\u7cfb\u7edf\u65e5\u5fd7\u65e5\u5fd7\u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece Syslog \u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002 \u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb Syslog endpoint \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 UDP \u6216 TCP \u5e76\u5e26\u6709\u81ea\u5b9a\u4e49\u7aef\u53e3\u53f7\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 I\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u6216 Kinesis Data Streams \u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u6709\u7f13\u51b2\u5c42\uff0c\u8bf7\u9009\u62e9 \u65e0 \u3002\u8bf7\u53c2\u9605 \u65e5\u5fd7\u7f13\u51b2 \u83b7\u53d6\u5173\u4e8e\u9009\u62e9\u9002\u5f53\u7f13\u51b2\u5c42\u7684\u66f4\u591a\u4fe1\u606f\u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 S3 Bucket\u524d\u7f00 AppLogs/<index-prefix>/year=%Y/month=%m/day=%d \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u6587\u4ef6\u4ea4\u4ed8\u7ed9S3\u6876\u65f6\u6dfb\u52a0\u524d\u7f00\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 Kinesis Data Streams\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 \u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> Kinesis Data Streams\u7684\u5206\u7247\u6570\u91cf\u3002\u6bcf\u4e2a\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u5bb9\u7eb31,000\u4e2a\u8bb0\u5f55\uff0c\u5e76\u4e14\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002 \u542f\u7528\u81ea\u52a8\u7f29\u653e \u5426 \u8be5\u89e3\u51b3\u65b9\u6848\u6bcf5\u5206\u949f\u76d1\u89c6\u4e00\u6b21Kinesis Data Streams\u7684\u5229\u7528\u7387\uff0c\u5e76\u81ea\u52a8\u7f29\u653e\u5206\u7247\u7684\u6570\u91cf\u3002\u89e3\u51b3\u65b9\u6848\u572824\u5c0f\u65f6\u5185\u6700\u591a\u7f29\u653e8\u6b21\u3002 \u6700\u5927\u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> \u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u7f29\u653e\uff0c\u5219\u9700\u8981\u3002\u6700\u5927\u7684\u5206\u7247\u6570\u91cf\u3002 \u91cd\u8981 \u5982\u679c\u5728Kinesis Data Streams\uff08KDS\uff09\u4e2d\u53d1\u751f\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728OpenSearch\u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u7684\u65e5\u5fd7\u3002\u8fd9\u662f\u56e0\u4e3aFluent Bit\u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 (\u5305\u542b\u591a\u4e2a\u8bb0\u5f55)\u4e0a\u4f20\u65e5\u5fd7\uff0c\u5e76\u5728\u4e0a\u4f20\u5931\u8d25\u65f6\u91cd\u8bd5\u8be5\u5757\u3002\u6bcf\u4e2aKDS\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u652f\u6301\u5199\u51651,000\u6761\u8bb0\u5f55\uff0c\u6700\u5927\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002\u8bf7\u4f30\u7b97\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u91cf\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\u4e2d\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"Syslog"},{"location":"implementation-guide/applications/syslog-pipeline/#syslog","text":"\u65e5\u5fd7\u901a\u5c06\u901a\u8fc7 UDP \u6216 TCP \u534f\u8bae\u6536\u96c6\u7cfb\u7edf\u65e5\u5fd7\u65e5\u5fd7\u3002 \u672c\u6587\u5c06\u6307\u5bfc\u60a8\u5982\u4f55\u4ece Syslog \u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u521b\u5efa\u65e5\u5fd7\u7ba1\u9053\u3002","title":"Syslog \u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/syslog-pipeline/#_1","text":"\u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002","title":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210"},{"location":"implementation-guide/applications/syslog-pipeline/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u7ba1\u9053 \u3002 \u5355\u51fb Syslog endpoint \u4f5c\u4e3a\u65e5\u5fd7\u6e90, \u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 UDP \u6216 TCP \u5e76\u5e26\u6709\u81ea\u5b9a\u4e49\u7aef\u53e3\u53f7\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u60a8\u5df2\u4e3a\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 \u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528 Amazon EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u5bf9\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u8fdb\u884c\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u8f93\u5165 \u65e5\u5fd7\u8def\u5f84 \u6307\u5b9a\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u4f4d\u7f6e\u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 I\u5982\u679c\u60a8\u6ca1\u6709\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u627e\u5230\u6240\u9700\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u8bf7\u9009\u62e9 \u521b\u5efa\u65b0\u7684 , \u5e76\u53c2\u8003 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5728 \u7d22\u5f15\u540d\u79f0 \u4e2d\u5c0f\u5199\u6307\u5b9a\u3002 \u5728 \u7f13\u51b2\u533a \u90e8\u5206\u4e2d\uff0c\u9009\u62e9 S3 \u6216 Kinesis Data Streams \u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u6709\u7f13\u51b2\u5c42\uff0c\u8bf7\u9009\u62e9 \u65e0 \u3002\u8bf7\u53c2\u9605 \u65e5\u5fd7\u7f13\u51b2 \u83b7\u53d6\u5173\u4e8e\u9009\u62e9\u9002\u5f53\u7f13\u51b2\u5c42\u7684\u66f4\u591a\u4fe1\u606f\u3002 S3\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 S3 Bucket \u89e3\u51b3\u65b9\u6848\u5c06\u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6876\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6876\u6765\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\u3002 S3 Bucket\u524d\u7f00 AppLogs/<index-prefix>/year=%Y/month=%m/day=%d \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u6587\u4ef6\u4ea4\u4ed8\u7ed9S3\u6876\u65f6\u6dfb\u52a0\u524d\u7f00\u3002 \u7f13\u51b2\u5927\u5c0f 50 MiB \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u4e4b\u524d\u5728\u65e5\u5fd7\u4ee3\u7406\u7aef\u7f13\u5b58\u7684\u65e5\u5fd7\u6570\u636e\u7684\u6700\u5927\u5927\u5c0f\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u7f13\u51b2\u95f4\u9694 60\u79d2 \u65e5\u5fd7\u4ee3\u7406\u5c06\u65e5\u5fd7\u4ea4\u4ed8\u7ed9S3\u7684\u6700\u5927\u95f4\u9694\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u6570\u636e\u4ea4\u4ed8\u9891\u7387 \u3002 \u6570\u636e\u8bb0\u5f55\u7684\u538b\u7f29 Gzip \u65e5\u5fd7\u4ee3\u7406\u5728\u5c06\u5b83\u4eec\u4ea4\u4ed8\u7ed9S3\u6876\u4e4b\u524d\u4f1a\u538b\u7f29\u8bb0\u5f55\u3002 Kinesis Data Streams\u7f13\u51b2\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 \u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> Kinesis Data Streams\u7684\u5206\u7247\u6570\u91cf\u3002\u6bcf\u4e2a\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u5bb9\u7eb31,000\u4e2a\u8bb0\u5f55\uff0c\u5e76\u4e14\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002 \u542f\u7528\u81ea\u52a8\u7f29\u653e \u5426 \u8be5\u89e3\u51b3\u65b9\u6848\u6bcf5\u5206\u949f\u76d1\u89c6\u4e00\u6b21Kinesis Data Streams\u7684\u5229\u7528\u7387\uff0c\u5e76\u81ea\u52a8\u7f29\u653e\u5206\u7247\u7684\u6570\u91cf\u3002\u89e3\u51b3\u65b9\u6848\u572824\u5c0f\u65f6\u5185\u6700\u591a\u7f29\u653e8\u6b21\u3002 \u6700\u5927\u5206\u7247\u6570\u91cf <\u9700\u8981\u8f93\u5165> \u5982\u679c\u542f\u7528\u4e86\u81ea\u52a8\u7f29\u653e\uff0c\u5219\u9700\u8981\u3002\u6700\u5927\u7684\u5206\u7247\u6570\u91cf\u3002 \u91cd\u8981 \u5982\u679c\u5728Kinesis Data Streams\uff08KDS\uff09\u4e2d\u53d1\u751f\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728OpenSearch\u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u7684\u65e5\u5fd7\u3002\u8fd9\u662f\u56e0\u4e3aFluent Bit\u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 (\u5305\u542b\u591a\u4e2a\u8bb0\u5f55)\u4e0a\u4f20\u65e5\u5fd7\uff0c\u5e76\u5728\u4e0a\u4f20\u5931\u8d25\u65f6\u91cd\u8bd5\u8be5\u5757\u3002\u6bcf\u4e2aKDS\u5206\u7247\u6bcf\u79d2\u6700\u591a\u53ef\u652f\u6301\u5199\u51651,000\u6761\u8bb0\u5f55\uff0c\u6700\u5927\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d21MB\u3002\u8bf7\u4f30\u7b97\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u91cf\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9aOpenSearch\u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch\u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u5929\u6570\u4ee5\u7ba1\u7406Amazon OpenSearch Service\u7d22\u5f15\u751f\u547d\u5468\u671f\u3002\u4e0eOpenSearch\u4e00\u8d77\u7684\u4e2d\u592e\u5316\u65e5\u5fd7\u5c06\u4e3a\u8fd9\u4e2a\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406(ISM) \u653f\u7b56\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\u4e2d\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u542f\u7528 \u8b66\u62a5 \u5e76\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684SNS\u4e3b\u9898\u3002\u5982\u679c\u60a8\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684SNS\u4e3b\u9898 \uff0c\u8bf7\u4e3a\u65b0\u7684SNS\u4e3b\u9898\u63d0\u4f9b\u4e00\u4e2a\u540d\u79f0\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u5982\u679c\u9700\u8981\uff0c\u8bf7\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u8f6c\u53d8\u4e3a\u201c\u6d3b\u52a8\u201d\u72b6\u6001\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture-details/services-in-this-solution/","text":"\u4ee5\u4e0b AWS \u670d\u52a1\u5305\u62ec\u5728\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\uff1a AWS \u670d\u52a1 \u63cf\u8ff0 Amazon CloudFront \u7528\u4e8e\u5206\u53d1\u524d\u7aef Web UI \u8d44\u4ea7\u3002 Amazon S3 \u7528\u4e8e\u5b58\u50a8\u9759\u6001 Web \u8d44\u4ea7\uff08\u524d\u7aef\u7528\u6237\u754c\u9762\uff09\uff0c\u540c\u65f6\u4e5f\u5c06\u5176\u7528\u4f5c\u65e5\u5fd7\u4f20\u8f93\u7684\u6570\u636e\u7f13\u51b2\u533a\u3002 Amazon Cognito \u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\uff08\u5728 AWS \u533a\u57df\u5185\uff09\u3002 AWS AppSync \u7528\u4e8e\u63d0\u4f9b\u540e\u7aef GraphQL API\u3002 Amazon DynamoDB \u7528\u4e8e\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u76f8\u5173\u4fe1\u606f\u4f5c\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u3002 AWS Lambda \u7528\u4e8e\u4e0e\u5176\u4ed6 AWS \u670d\u52a1\u4ea4\u4e92\uff0c\u5904\u7406\u7ba1\u7406\u65e5\u5fd7\u7ba1\u9053\u6216\u65e5\u5fd7\u4ee3\u7406\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u5e76\u83b7\u53d6\u5728 DynamoDB \u8868\u4e2d\u66f4\u65b0\u7684\u4fe1\u606f\u3002 AWS Step Functions \u7528\u4e8e\u7f16\u6392\u6309\u9700 AWS CloudFormation \u90e8\u7f72\u4e00\u7ec4\u9884\u5b9a\u4e49\u5806\u6808\uff0c\u7528\u4e8e\u65e5\u5fd7\u7ba1\u9053\u7ba1\u7406\u3002 AWS CloudFormation \u7528\u4e8e\u4e3a\u7ba1\u9053\u7684\u6a21\u5757\u548c\u89e3\u51b3\u65b9\u6848 Web \u63a7\u5236\u53f0\u63d0\u4f9b AWS \u8d44\u6e90\u3002 AWS Systems Manager \u7528\u4e8e\u7ba1\u7406\u4ece\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u7684\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f8b\u5982\u4e3a\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff08Fluent Bit\uff09\u3002 Amazon Kinesis Data Streams \u7528\u4e8e\u8ba2\u9605\u6765\u81ea CloudWatch \u65e5\u5fd7\u7ec4\u7684\u65e5\u5fd7\u6216\u4f5c\u4e3a\u65e5\u5fd7\u4f20\u8f93\u7684\u6570\u636e\u7f13\u51b2\u533a\uff0c\u7136\u540e\u542f\u52a8\u65e5\u5fd7\u5904\u7406 Lambda \u8fdb\u7a0b\u3002 Amazon Kinesis Data Firehose \u7528\u4e8e\u8ba2\u9605\u6765\u81ea CloudWatch \u65e5\u5fd7\u7ec4\u7684\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u653e\u5165 Amazon S3\u3002 Amazon SQS \u7528\u4e8e\u63a5\u6536 Amazon S3 \u4e8b\u4ef6\u901a\u77e5\uff0c\u7136\u540e\u542f\u52a8\u65e5\u5fd7\u5904\u7406 Lambda \u8fdb\u7a0b\u3002","title":"AWS \u670d\u52a1"},{"location":"implementation-guide/architecture-details/solution-components/","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a \u57df\u7ba1\u7406 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (Amazon OpenSearch Service) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 Amazon OpenSearch Service \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 Amazon OpenSearch Service \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a Amazon OpenSearch Service \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002 \u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002\u65e5\u5fd7\u901a \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/architecture-details/solution-components/#_1","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (Amazon OpenSearch Service) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 Amazon OpenSearch Service \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 Amazon OpenSearch Service \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a Amazon OpenSearch Service \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002","title":"\u57df\u7ba1\u7406"},{"location":"implementation-guide/architecture-details/solution-components/#_2","text":"\u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002\u65e5\u5fd7\u901a \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002","title":"\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture-details/solution-components/#_3","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002","title":"\u670d\u52a1\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/architecture-details/solution-components/#_4","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u9075\u5faa\u4e86 AWS Well-Architected \u6846\u67b6 \u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u8be5\u6846\u67b6\u53ef\u5e2e\u52a9\u5ba2\u6237\u5728\u4e91\u4e2d\u8bbe\u8ba1\u548c\u8fd0\u8425\u53ef\u9760\u3001\u5b89\u5168\u3001\u9ad8\u6548\u548c\u5177\u6709\u6210\u672c\u6548\u76ca\u7684\u5de5\u4f5c\u8d1f\u8f7d\u3002 \u672c\u8282\u4ecb\u7ecd\u4e86\u5728\u6784\u5efa\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 Well-Architected \u6846\u67b6\u7684\u8bbe\u8ba1\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u8fd0\u7ef4\u5353\u8d8a \u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u8fd0\u7ef4\u5353\u8d8a\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u5728\u5404\u4e2a\u9636\u6bb5\u5c06\u6307\u6807\u3001\u65e5\u5fd7\u548c\u8ffd\u8e2a\u6570\u636e\u63a8\u9001\u5230 Amazon CloudWatch\uff0c\u4ee5\u63d0\u4f9b\u5bf9\u57fa\u7840\u67b6\u6784\u3001\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u3001Amazon ECS \u96c6\u7fa4\u3001Lambda \u51fd\u6570\u3001Step Function \u5de5\u4f5c\u6d41\u4ee5\u53ca\u5176\u4f59\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6\u7684\u53ef\u89c2\u5bdf\u6027\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u8fd8\u4e3a\u6bcf\u4e2a\u7ba1\u9053\u76d1\u63a7\u521b\u5efa\u4e86 CloudWatch \u4eea\u8868\u677f\u3002 \u5b89\u5168\u6027 \u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u5b89\u5168\u6027\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 Web \u63a7\u5236\u53f0\u7528\u6237\u901a\u8fc7 Amazon Cognito \u6216 OpenID Connect \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u3002 \u6240\u6709\u7684\u670d\u52a1\u95f4\u901a\u4fe1\u90fd\u4f7f\u7528 AWS IAM \u89d2\u8272\u3002 \u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u6240\u6709\u89d2\u8272\u90fd\u9075\u5faa\u6700\u5c0f\u7279\u6743\u8bbf\u95ee\u539f\u5219\uff0c\u5373\u4ec5\u5305\u542b\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u6240\u9700\u7684\u6700\u4f4e\u6743\u9650\u3002 \u53ef\u9760\u6027 \u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u53ef\u9760\u6027\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 AWS \u65e0\u670d\u52a1\u5668\u670d\u52a1\uff08\u4f8b\u5982\uff0cAWS AppSync\u3001Amazon DynamoDB\u3001AWS Lambda\u3001AWS Step Functions\u3001Amazon S3 \u548c Amazon SQS\uff09\uff0c\u4ee5\u786e\u4fdd\u9ad8\u53ef\u7528\u6027\u5e76\u4ece\u670d\u52a1\u6545\u969c\u4e2d\u6062\u590d\u3002 \u89e3\u51b3\u65b9\u6848\u7684\u914d\u7f6e\u7ba1\u7406\u5185\u5bb9\u5b58\u50a8\u5728 Amazon DynamoDB \u4e2d\uff0c\u6240\u6709\u6570\u636e\u5b58\u50a8\u5728\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\u4e0a\uff0c\u5e76\u81ea\u52a8\u5728 AWS \u533a\u57df\u5185\u7684\u591a\u4e2a\u53ef\u7528\u533a\uff08AZ\uff09\u4e4b\u95f4\u8fdb\u884c\u590d\u5236\uff0c\u63d0\u4f9b\u5185\u7f6e\u7684\u9ad8\u53ef\u7528\u6027\u548c\u6570\u636e\u8010\u4e45\u6027\u3002 \u6027\u80fd\u6548\u7387 \u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u6027\u80fd\u6548\u7387\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u53ef\u4ee5\u5728\u652f\u6301\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u7684 AWS \u670d\u52a1\u7684\u4efb\u4f55\u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\uff0c\u4f8b\u5982\uff1aAmazon S3\u3001Amazon ECS\u3001\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \u4f7f\u7528\u65e0\u670d\u52a1\u5668\u67b6\u6784\u6d88\u9664\u4e86\u60a8\u8fd0\u884c\u548c\u7ef4\u62a4\u4f20\u7edf\u8ba1\u7b97\u6d3b\u52a8\u7684\u7269\u7406\u670d\u52a1\u5668\u7684\u9700\u6c42\u3002 \u6bcf\u5929\u81ea\u52a8\u6d4b\u8bd5\u548c\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u89e3\u51b3\u65b9\u6848\u67b6\u6784\u5e08\u548c\u4e13\u5bb6\u4f1a\u5b9a\u671f\u5ba1\u67e5\u89e3\u51b3\u65b9\u6848\uff0c\u4ee5\u5bfb\u627e\u5b9e\u9a8c\u548c\u6539\u8fdb\u7684\u9886\u57df\u3002 \u6210\u672c\u4f18\u5316 \u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u6210\u672c\u4f18\u5316\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u4f7f\u7528\u81ea\u52a8\u4f38\u7f29\u7ec4\uff0c\u4f7f\u8ba1\u7b97\u6210\u672c\u4ec5\u4e0e\u6444\u53d6\u548c\u5904\u7406\u7684\u6570\u636e\u91cf\u76f8\u5173\u3002 \u4f7f\u7528\u65e0\u670d\u52a1\u5668\u670d\u52a1\uff0c\u5982 Amazon S3\u3001Amazon DynamoDB\u3001AWS Lambda \u7b49\uff0c\u4ee5\u4fbf\u5ba2\u6237\u53ea\u9700\u4e3a\u5b9e\u9645\u4f7f\u7528\u7684\u8d44\u6e90\u4ed8\u8d39\u3002 \u53ef\u6301\u7eed\u6027 \u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u53ef\u6301\u7eed\u6027\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u89e3\u51b3\u65b9\u6848\u7684\u65e0\u670d\u52a1\u5668\u8bbe\u8ba1\uff08\u4f7f\u7528 Amazon Kinesis Data Streams\u3001Amazon S3\u3001AWS Lambda\uff09\u548c\u6258\u7ba1\u670d\u52a1\u7684\u4f7f\u7528\uff08\u4f8b\u5982 Amazon ECS\uff09\u65e8\u5728\u964d\u4f4e\u4e0e\u6301\u7eed\u8fd0\u884c\u672c\u5730\u670d\u52a1\u5668\u7684\u78b3\u8db3\u8ff9\u76f8\u6bd4\u7684\u78b3\u8db3\u8ff9\u3002","title":"AWS Well-Architected \u652f\u67f1"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/#_1","text":"\u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u8fd0\u7ef4\u5353\u8d8a\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u5728\u5404\u4e2a\u9636\u6bb5\u5c06\u6307\u6807\u3001\u65e5\u5fd7\u548c\u8ffd\u8e2a\u6570\u636e\u63a8\u9001\u5230 Amazon CloudWatch\uff0c\u4ee5\u63d0\u4f9b\u5bf9\u57fa\u7840\u67b6\u6784\u3001\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u3001Amazon ECS \u96c6\u7fa4\u3001Lambda \u51fd\u6570\u3001Step Function \u5de5\u4f5c\u6d41\u4ee5\u53ca\u5176\u4f59\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6\u7684\u53ef\u89c2\u5bdf\u6027\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u8fd8\u4e3a\u6bcf\u4e2a\u7ba1\u9053\u76d1\u63a7\u521b\u5efa\u4e86 CloudWatch \u4eea\u8868\u677f\u3002","title":"\u8fd0\u7ef4\u5353\u8d8a"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/#_2","text":"\u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u5b89\u5168\u6027\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 Web \u63a7\u5236\u53f0\u7528\u6237\u901a\u8fc7 Amazon Cognito \u6216 OpenID Connect \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u3002 \u6240\u6709\u7684\u670d\u52a1\u95f4\u901a\u4fe1\u90fd\u4f7f\u7528 AWS IAM \u89d2\u8272\u3002 \u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u6240\u6709\u89d2\u8272\u90fd\u9075\u5faa\u6700\u5c0f\u7279\u6743\u8bbf\u95ee\u539f\u5219\uff0c\u5373\u4ec5\u5305\u542b\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u6240\u9700\u7684\u6700\u4f4e\u6743\u9650\u3002","title":"\u5b89\u5168\u6027"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/#_3","text":"\u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u53ef\u9760\u6027\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 AWS \u65e0\u670d\u52a1\u5668\u670d\u52a1\uff08\u4f8b\u5982\uff0cAWS AppSync\u3001Amazon DynamoDB\u3001AWS Lambda\u3001AWS Step Functions\u3001Amazon S3 \u548c Amazon SQS\uff09\uff0c\u4ee5\u786e\u4fdd\u9ad8\u53ef\u7528\u6027\u5e76\u4ece\u670d\u52a1\u6545\u969c\u4e2d\u6062\u590d\u3002 \u89e3\u51b3\u65b9\u6848\u7684\u914d\u7f6e\u7ba1\u7406\u5185\u5bb9\u5b58\u50a8\u5728 Amazon DynamoDB \u4e2d\uff0c\u6240\u6709\u6570\u636e\u5b58\u50a8\u5728\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\u4e0a\uff0c\u5e76\u81ea\u52a8\u5728 AWS \u533a\u57df\u5185\u7684\u591a\u4e2a\u53ef\u7528\u533a\uff08AZ\uff09\u4e4b\u95f4\u8fdb\u884c\u590d\u5236\uff0c\u63d0\u4f9b\u5185\u7f6e\u7684\u9ad8\u53ef\u7528\u6027\u548c\u6570\u636e\u8010\u4e45\u6027\u3002","title":"\u53ef\u9760\u6027"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/#_4","text":"\u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u6027\u80fd\u6548\u7387\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u53ef\u4ee5\u5728\u652f\u6301\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u7684 AWS \u670d\u52a1\u7684\u4efb\u4f55\u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\uff0c\u4f8b\u5982\uff1aAmazon S3\u3001Amazon ECS\u3001\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \u4f7f\u7528\u65e0\u670d\u52a1\u5668\u67b6\u6784\u6d88\u9664\u4e86\u60a8\u8fd0\u884c\u548c\u7ef4\u62a4\u4f20\u7edf\u8ba1\u7b97\u6d3b\u52a8\u7684\u7269\u7406\u670d\u52a1\u5668\u7684\u9700\u6c42\u3002 \u6bcf\u5929\u81ea\u52a8\u6d4b\u8bd5\u548c\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u89e3\u51b3\u65b9\u6848\u67b6\u6784\u5e08\u548c\u4e13\u5bb6\u4f1a\u5b9a\u671f\u5ba1\u67e5\u89e3\u51b3\u65b9\u6848\uff0c\u4ee5\u5bfb\u627e\u5b9e\u9a8c\u548c\u6539\u8fdb\u7684\u9886\u57df\u3002","title":"\u6027\u80fd\u6548\u7387"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/#_5","text":"\u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u6210\u672c\u4f18\u5316\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u4f7f\u7528\u81ea\u52a8\u4f38\u7f29\u7ec4\uff0c\u4f7f\u8ba1\u7b97\u6210\u672c\u4ec5\u4e0e\u6444\u53d6\u548c\u5904\u7406\u7684\u6570\u636e\u91cf\u76f8\u5173\u3002 \u4f7f\u7528\u65e0\u670d\u52a1\u5668\u670d\u52a1\uff0c\u5982 Amazon S3\u3001Amazon DynamoDB\u3001AWS Lambda \u7b49\uff0c\u4ee5\u4fbf\u5ba2\u6237\u53ea\u9700\u4e3a\u5b9e\u9645\u4f7f\u7528\u7684\u8d44\u6e90\u4ed8\u8d39\u3002","title":"\u6210\u672c\u4f18\u5316"},{"location":"implementation-guide/architecture-overview/well-architected-pillars/#_6","text":"\u672c\u8282\u63cf\u8ff0\u4e86\u5728\u8bbe\u8ba1\u6b64\u89e3\u51b3\u65b9\u6848\u65f6\u5982\u4f55\u5e94\u7528 \u53ef\u6301\u7eed\u6027\u652f\u67f1 \u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002 \u89e3\u51b3\u65b9\u6848\u7684\u65e0\u670d\u52a1\u5668\u8bbe\u8ba1\uff08\u4f7f\u7528 Amazon Kinesis Data Streams\u3001Amazon S3\u3001AWS Lambda\uff09\u548c\u6258\u7ba1\u670d\u52a1\u7684\u4f7f\u7528\uff08\u4f8b\u5982 Amazon ECS\uff09\u65e8\u5728\u964d\u4f4e\u4e0e\u6301\u7eed\u8fd0\u884c\u672c\u5730\u670d\u52a1\u5668\u7684\u78b3\u8db3\u8ff9\u76f8\u6bd4\u7684\u78b3\u8db3\u8ff9\u3002","title":"\u53ef\u6301\u7eed\u6027"},{"location":"implementation-guide/aws-services/","text":"\u6784\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u901a\u652f\u6301\u901a\u8fc7\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 \u65e5\u5fd7\u901a\u7f51\u9875\u63a7\u5236\u53f0 \u6216\u901a\u8fc7 \u72ec\u7acb CloudFormation \u6a21\u677f \u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u65e5\u5fd7\u901a\u8bfb\u53d6\u6570\u636e\u6e90\u3001\u89e3\u6790\u3001\u6e05\u7406\u6216\u4e30\u5bcc\u3001\u548c\u6444\u53d6\u65e5\u5fd7\u5230 Amazon OpenSearch Service \u57df\u8fdb\u884c\u5206\u6790\u3002\u6b64\u5916\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u6a21\u677f\u5316\u7684\u4eea\u8868\u677f\u4fbf\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 Amazon OpenSearch Service \u670d\u52a1\u9002\u7528\u4e8e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u9891\u7e41\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u5168\u6587\u641c\u7d22\u529f\u80fd\u3002 \u4ece2.1.0\u7248\u672c\u5f00\u59cb\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5f00\u59cb\u652f\u6301\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Light Engine\uff0c\u9002\u7528\u4e8e\u975e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u975e\u9891\u7e41\u7684\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u7c7b\u4f3cSQL\u7684\u641c\u7d22\u529f\u80fd\u3002Amazon CloudFront\u65e5\u5fd7\u3001ALB \u65e5\u5fd7\u548cAWS WAF\u65e5\u5fd7\u76ee\u524d\u652f\u6301 Light Engine\u3002 \u91cd\u8981 AWS \u6258\u7ba1\u670d\u52a1\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u652f\u6301\u7684 AWS Services \u5927\u591a\u6570 AWS \u6258\u7ba1\u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 Amazon CloudWatch Logs\u3001Amazon S3\u3001Amazon Kinesis Data Streams \u6216 Amazon Kinesis Firehose\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f AWS CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u662f Amazon VPC Flow logs S3 \u662f \u662f AWS Config N/A S3 \u662f \u662f \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 Amazon OpenSearch Service\u3002 \u65e5\u5fd7\u901a\u4e2d\u5927\u591a\u6570\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u4eea\u8868\u677f\u3002\u5728\u4f9b\u5e94\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u8f6c\u5230 OpenSearch \u67e5\u770b\u4eea\u8868\u677f\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b AWS \u670d\u52a1\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u5e76\u67e5\u770b\u4eea\u8868\u677f\uff1a AWS CloudTrail Amazon S3 Amazon RDS/Aurora Amazon CloudFront AWS Lambda Elastic Load Balancing AWS WAF Amazon VPC AWS Config \u8de8\u533a\u57df\u65e5\u5fd7\u5bfc\u5165 \u5728\u4e00\u4e2a\u533a\u57df\u4e2d\u90e8\u7f72\u4f7f\u7528 OpenSearch \u7684\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u529f\u80fd\u540e\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5141\u8bb8\u60a8\u5904\u7406\u6765\u81ea\u53e6\u4e00\u4e2a\u533a\u57df\u7684\u670d\u52a1\u65e5\u5fd7\u3002 \u6ce8\u610f \u5bf9\u4e8e Amazon RDS/Aurora \u548c AWS Lambda \u670d\u52a1\u65e5\u5fd7\uff0c\u4e0d\u652f\u6301\u6b64\u529f\u80fd\u3002 \u91cd\u8981 \u670d\u52a1\u6240\u5728\u7684\u533a\u57df\u88ab\u79f0\u4e3a\u201c\u6e90\u533a\u57df\u201d\uff0c\u800c\u90e8\u7f72\u6709 OpenSearch \u96c6\u4e2d\u5f0f\u65e5\u5fd7\u63a7\u5236\u53f0\u7684\u533a\u57df\u88ab\u79f0\u4e3a\u201c\u65e5\u5fd7\u533a\u57df\u201d\u3002 \u5bf9\u4e8e AWS CloudTrail\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\u8ddf\u8e2a\uff0c\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u65e5\u5fd7\u533a\u57df\u7684 S3 \u5b58\u50a8\u6876\u4e2d\uff0c\u5e76\u4e14\u60a8\u53ef\u4ee5\u5728\u5217\u8868\u4e2d\u627e\u5230 CloudTrail\u3002\u8981\u4e86\u89e3\u5982\u4f55\u521b\u5efa\u65b0\u7684\u8ddf\u8e2a\uff0c\u8bf7\u53c2\u9605 \u521b\u5efa\u8ddf\u8e2a \u3002 \u5bf9\u4e8e\u5176\u4ed6\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 S3 \u5b58\u50a8\u6876\u4e2d\u7684\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u624b\u52a8\u5c06\u65e5\u5fd7\u4f20\u8f93\u5230\u65e5\u5fd7\u533a\u57df\u7684 S3 \u5b58\u50a8\u6876\u4e2d\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 S3 \u8de8\u533a\u57df\u590d\u5236\u529f\u80fd\uff09\u3002 \u60a8\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5b9e\u65bd\u8de8\u533a\u57df\u65e5\u5fd7\u8bb0\u5f55\uff1a \u5c06\u53e6\u4e00\u4e2a\u533a\u57df\u4e2d\u7684\u670d\u52a1\u65e5\u5fd7\u4f4d\u7f6e\u8bbe\u7f6e\u4e3a\u65e5\u5fd7\u533a\u57df\uff08\u4f8b\u5982 Amazon WAF\uff09\uff0c\u6216\u4f7f\u7528 \u8de8\u533a\u57df\u590d\u5236 (CRR) \u5c06\u65e5\u5fd7\u4ece\u6e90\u533a\u57df\u81ea\u52a8\u590d\u5236\u5230\u65e5\u5fd7\u533a\u57df\u3002 \u5728\u89e3\u51b3\u65b9\u6848\u63a7\u5236\u53f0\u4e2d\uff0c\u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u7ba1\u9053 \u3002 \u5728 \u9009\u62e9 AWS \u670d\u52a1 \u533a\u57df\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u670d\u52a1\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u521b\u5efa\u65b9\u6cd5 \u4e2d\uff0c\u9009\u62e9 \u624b\u52a8 \uff0c\u7136\u540e\u8f93\u5165\u8d44\u6e90\u540d\u79f0\u548c S3 \u65e5\u5fd7\u4f4d\u7f6e\u53c2\u6570\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u8bbe\u7f6e OpenSearch \u57df \u548c \u65e5\u5fd7\u751f\u547d\u5468\u671f \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u521b\u5efa\u7ba1\u9053\u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 OpenSearch \u4eea\u8868\u677f\u53d1\u73b0\u65e5\u5fd7\u5e76\u67e5\u770b\u4eea\u8868\u677f\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/aws-services/#aws","text":"\u65e5\u5fd7\u901a\u652f\u6301\u901a\u8fc7\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 \u65e5\u5fd7\u901a\u7f51\u9875\u63a7\u5236\u53f0 \u6216\u901a\u8fc7 \u72ec\u7acb CloudFormation \u6a21\u677f \u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u65e5\u5fd7\u901a\u8bfb\u53d6\u6570\u636e\u6e90\u3001\u89e3\u6790\u3001\u6e05\u7406\u6216\u4e30\u5bcc\u3001\u548c\u6444\u53d6\u65e5\u5fd7\u5230 Amazon OpenSearch Service \u57df\u8fdb\u884c\u5206\u6790\u3002\u6b64\u5916\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u6a21\u677f\u5316\u7684\u4eea\u8868\u677f\u4fbf\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 Amazon OpenSearch Service \u670d\u52a1\u9002\u7528\u4e8e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u9891\u7e41\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u5168\u6587\u641c\u7d22\u529f\u80fd\u3002 \u4ece2.1.0\u7248\u672c\u5f00\u59cb\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5f00\u59cb\u652f\u6301\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Light Engine\uff0c\u9002\u7528\u4e8e\u975e\u5b9e\u65f6\u65e5\u5fd7\u5206\u6790\u548c\u975e\u9891\u7e41\u7684\u67e5\u8be2\uff0c\u5e76\u5177\u6709\u7c7b\u4f3cSQL\u7684\u641c\u7d22\u529f\u80fd\u3002Amazon CloudFront\u65e5\u5fd7\u3001ALB \u65e5\u5fd7\u548cAWS WAF\u65e5\u5fd7\u76ee\u524d\u652f\u6301 Light Engine\u3002 \u91cd\u8981 AWS \u6258\u7ba1\u670d\u52a1\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u6784\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/aws-services/#aws-services","text":"\u5927\u591a\u6570 AWS \u6258\u7ba1\u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 Amazon CloudWatch Logs\u3001Amazon S3\u3001Amazon Kinesis Data Streams \u6216 Amazon Kinesis Firehose\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f AWS CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u662f Amazon VPC Flow logs S3 \u662f \u662f AWS Config N/A S3 \u662f \u662f \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 Amazon OpenSearch Service\u3002 \u65e5\u5fd7\u901a\u4e2d\u5927\u591a\u6570\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u4eea\u8868\u677f\u3002\u5728\u4f9b\u5e94\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u8f6c\u5230 OpenSearch \u67e5\u770b\u4eea\u8868\u677f\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b AWS \u670d\u52a1\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u5e76\u67e5\u770b\u4eea\u8868\u677f\uff1a AWS CloudTrail Amazon S3 Amazon RDS/Aurora Amazon CloudFront AWS Lambda Elastic Load Balancing AWS WAF Amazon VPC AWS Config","title":"\u652f\u6301\u7684 AWS Services"},{"location":"implementation-guide/aws-services/#_1","text":"\u5728\u4e00\u4e2a\u533a\u57df\u4e2d\u90e8\u7f72\u4f7f\u7528 OpenSearch \u7684\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u529f\u80fd\u540e\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5141\u8bb8\u60a8\u5904\u7406\u6765\u81ea\u53e6\u4e00\u4e2a\u533a\u57df\u7684\u670d\u52a1\u65e5\u5fd7\u3002 \u6ce8\u610f \u5bf9\u4e8e Amazon RDS/Aurora \u548c AWS Lambda \u670d\u52a1\u65e5\u5fd7\uff0c\u4e0d\u652f\u6301\u6b64\u529f\u80fd\u3002 \u91cd\u8981 \u670d\u52a1\u6240\u5728\u7684\u533a\u57df\u88ab\u79f0\u4e3a\u201c\u6e90\u533a\u57df\u201d\uff0c\u800c\u90e8\u7f72\u6709 OpenSearch \u96c6\u4e2d\u5f0f\u65e5\u5fd7\u63a7\u5236\u53f0\u7684\u533a\u57df\u88ab\u79f0\u4e3a\u201c\u65e5\u5fd7\u533a\u57df\u201d\u3002 \u5bf9\u4e8e AWS CloudTrail\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\u8ddf\u8e2a\uff0c\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u65e5\u5fd7\u533a\u57df\u7684 S3 \u5b58\u50a8\u6876\u4e2d\uff0c\u5e76\u4e14\u60a8\u53ef\u4ee5\u5728\u5217\u8868\u4e2d\u627e\u5230 CloudTrail\u3002\u8981\u4e86\u89e3\u5982\u4f55\u521b\u5efa\u65b0\u7684\u8ddf\u8e2a\uff0c\u8bf7\u53c2\u9605 \u521b\u5efa\u8ddf\u8e2a \u3002 \u5bf9\u4e8e\u5176\u4ed6\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 S3 \u5b58\u50a8\u6876\u4e2d\u7684\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u624b\u52a8\u5c06\u65e5\u5fd7\u4f20\u8f93\u5230\u65e5\u5fd7\u533a\u57df\u7684 S3 \u5b58\u50a8\u6876\u4e2d\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 S3 \u8de8\u533a\u57df\u590d\u5236\u529f\u80fd\uff09\u3002 \u60a8\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5b9e\u65bd\u8de8\u533a\u57df\u65e5\u5fd7\u8bb0\u5f55\uff1a \u5c06\u53e6\u4e00\u4e2a\u533a\u57df\u4e2d\u7684\u670d\u52a1\u65e5\u5fd7\u4f4d\u7f6e\u8bbe\u7f6e\u4e3a\u65e5\u5fd7\u533a\u57df\uff08\u4f8b\u5982 Amazon WAF\uff09\uff0c\u6216\u4f7f\u7528 \u8de8\u533a\u57df\u590d\u5236 (CRR) \u5c06\u65e5\u5fd7\u4ece\u6e90\u533a\u57df\u81ea\u52a8\u590d\u5236\u5230\u65e5\u5fd7\u533a\u57df\u3002 \u5728\u89e3\u51b3\u65b9\u6848\u63a7\u5236\u53f0\u4e2d\uff0c\u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa\u4e00\u4e2a\u7ba1\u9053 \u3002 \u5728 \u9009\u62e9 AWS \u670d\u52a1 \u533a\u57df\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u670d\u52a1\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u521b\u5efa\u65b9\u6cd5 \u4e2d\uff0c\u9009\u62e9 \u624b\u52a8 \uff0c\u7136\u540e\u8f93\u5165\u8d44\u6e90\u540d\u79f0\u548c S3 \u65e5\u5fd7\u4f4d\u7f6e\u53c2\u6570\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u8bbe\u7f6e OpenSearch \u57df \u548c \u65e5\u5fd7\u751f\u547d\u5468\u671f \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u521b\u5efa\u7ba1\u9053\u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 OpenSearch \u4eea\u8868\u677f\u53d1\u73b0\u65e5\u5fd7\u5e76\u67e5\u770b\u4eea\u8868\u677f\u3002","title":"\u8de8\u533a\u57df\u65e5\u5fd7\u5bfc\u5165"},{"location":"implementation-guide/aws-services/cloudfront/","text":"Amazon CloudFront \u65e5\u5fd7 CloudFront \u6807\u51c6\u65e5\u5fd7 \u4e3a\u6bcf\u4e2a\u53d1\u9001\u5230\u5206\u53d1\u7684\u8bf7\u6c42\u63d0\u4f9b\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 Important CloudFront \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Amazon OpenSearch\uff09 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 Amazon OpenSearch \uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f CloudFront \u5206\u914d ID\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN. \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK. Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 Plugins <\u53ef\u9009\u8f93\u5165> \u7528\u9017\u53f7\u5206\u9694\u7684\u63d2\u4ef6\u5217\u8868\uff0c\u5982\u679c\u65e0\u9700\u4f7f\u7528\u63d2\u4ef6\uff0c\u8bf7\u7559\u7a7a\u3002 \u5408\u6cd5\u8f93\u5165\u4e3a user_agent \uff0c geo_ip \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Total Requests log event \u663e\u793a Amazon CloudFront \u63a5\u6536\u7684\u603b\u89c2\u4f17\u8bf7\u6c42\u6b21\u6570\uff0c\u5305\u62ec\u6240\u6709 HTTP \u65b9\u6cd5\u4ee5\u53ca HTTP \u548c HTTPS \u8bf7\u6c42\u3002 Edge Locations x-edge-location \u663e\u793a\u4ee3\u8868 CloudFront \u8fb9\u7f18\u670d\u52a1\u5668\u4f4d\u7f6e\u6bd4\u4f8b\u7684\u997c\u56fe\u3002 Request History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Unique Visitors c-ip \u663e\u793a\u7531\u5ba2\u6237\u7aef IP \u5730\u5740\u8bc6\u522b\u7684\u552f\u4e00\u8bbf\u5ba2\u3002 Cache Hit Rate sc-bytes \u663e\u793a\u4ece CloudFront \u7f13\u5b58\u76f4\u63a5\u4e3a\u60a8\u7684\u89c2\u4f17\u8bf7\u6c42\u63d0\u4f9b\u5185\u5bb9\u7684\u6bd4\u4f8b\uff0c\u800c\u4e0d\u662f\u53bb\u539f\u59cb\u670d\u52a1\u5668\u83b7\u53d6\u5185\u5bb9\u3002 Result Type x-edge-response-result-type \u663e\u793a\u5bf9\u6240\u9009 CloudFront \u5206\u53d1\u7684\u547d\u4e2d\u3001\u672a\u547d\u4e2d\u548c\u9519\u8bef\u7684\u767e\u5206\u6bd4\uff1a Hit - \u6765\u81ea CloudFront \u8fb9\u7f18\u7f13\u5b58\u7684\u5bf9\u8c61\u7684\u89c2\u4f17\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Hit \u7684\u8bf7\u6c42\u3002 Miss - \u5bf9\u8c61\u4e0d\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u5fc5\u987b\u4ece\u60a8\u7684\u6e90\u83b7\u53d6\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Miss \u7684\u8bf7\u6c42\u3002 Error - \u5bfc\u81f4\u9519\u8bef\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u6ca1\u6709\u63d0\u4f9b\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Error\u3001LimitExceeded \u6216 CapacityExceeded \u7684\u8bf7\u6c42\u3002 \u56fe\u8868\u4e0d\u5305\u62ec\u5237\u65b0\u547d\u4e2d-\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u4f46\u5df2\u8fc7\u671f\u7684\u5bf9\u8c61\u7684\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u5237\u65b0\u547d\u4e2d\u662f x-edge-response-result-type \u503c\u4e3a RefreshHit \u7684\u8bf7\u6c42\u3002 Top Miss URI cs-uri-stem cs-method \u663e\u793a\u4e0d\u5728\u7f13\u5b58\u4e2d\u7684\u524d 10 \u4e2a\u8bf7\u6c42\u5bf9\u8c61\u3002 Bandwidth cs-bytes sc-bytes \u63d0\u4f9b\u6765\u81ea CloudFront \u8fb9\u7f18\u4f4d\u7f6e\u7684\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\u3002 Bandwidth History cs-bytes sc-bytes \u663e\u793a\u6765\u81ea CloudFront \u8fb9\u7f18\u4f4d\u7f6e\u7684\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Top Client IPs c-ip \u63d0\u4f9b\u8bbf\u95ee\u60a8\u7684 Amazon CloudFront \u7684\u524d 10 \u4e2a IP \u5730\u5740\u3002 Status Code Count sc-status \u663e\u793a\u6309 HTTP \u72b6\u6001\u4ee3\u7801\uff08\u4f8b\u5982 200\u3001404\u3001403 \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Status History @timestamp sc-status \u663e\u793a Amazon CloudFront \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code sc-status \u6807\u8bc6\u5bf9 EC2 \u8d44\u6e90\u8fdb\u884c\u66f4\u6539\u7684\u7528\u6237\u6216 IAM \u89d2\u8272\uff0c\u534f\u52a9\u8ffd\u8e2a\u548c\u4fee\u6539\u7684\u8d23\u4efb\u3002 Average Time Taken time-taken \u6b64\u53ef\u89c6\u5316\u8ba1\u7b97\u5e76\u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\uff08\u4f8b\u5982 GET\u3001PUT \u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u7b49\uff09\u3002 Average Time History time-taken time-to-first-byte @timestamp \u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Http Method cs-method \u4f7f\u7528\u997c\u56fe\u663e\u793a\u6309 http \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\uff08\u4f8b\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Average Time To First Byte time-to-first-byte \u63d0\u4f9b\u539f\u59cb\u670d\u52a1\u5668\u54cd\u5e94\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u54cd\u5e94\u6240\u9700\u7684\u5e73\u5747\u65f6\u95f4\u3002 Top Request URIs cs-uri-stem cs-method \u63d0\u4f9b\u8bbf\u95ee\u60a8\u7684 CloudFront \u7684\u524d 10 \u4e2a\u8bf7\u6c42 URIs\u3002 Top User Agents cs-user-agent \u63d0\u4f9b\u8bbf\u95ee\u60a8\u7684 CloudFront \u7684\u524d 10 \u4e2a\u7528\u6237\u4ee3\u7406\u3002 Edge Location Heatmap x-edge-location x-edge-result-type \u663e\u793a\u4ee3\u8868\u6bcf\u4e2a\u8fb9\u7f18\u4f4d\u7f6e\u7684\u7ed3\u679c\u7c7b\u578b\u7684\u70ed\u56fe\u3002 Top Referers cs-referer \u4e0e Amazon CloudFront \u8bbf\u95ee\u7684\u524d 10 \u4e2a\u5f15\u8350\u8005\u3002 Top Countries or Regions c_country \u4e0e Amazon CloudFront \u8bbf\u95ee\u7684\u524d 10 \u4e2a\u56fd\u5bb6\u3002 \u6837\u54c1\u4eea\u8868\u677f \u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Light Engine\uff09 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 Light Engine \uff0c \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u65e5\u5fd7\u5904\u7406 \u4e2d\u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709 \u5b9a\u4f4d \u548c \u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406 \uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\uff0c\u6211\u4eec\u5df2\u7ecf\u4e3a\u4f60\u9884\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8868\u540d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 Pipeline settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Pipeline Id <\u9700\u8981\u8f93\u5165> pipeline\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u60a8\u9700\u8981\u521b\u5efa\u591a\u4e2aELB pipeline\uff0c\u5c06\u4e0d\u540c\u7684CloudFront\u65e5\u5fd7\u5199\u5165\u5230\u4e0d\u540c\u7684\u8868\u4e2d\u65f6\uff0c\u5219\u5fc5\u987b\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7 uuidgenerator \u751f\u6210\u552f\u4e00\u7684\u3002 Staging Bucket Prefix AWSLogs/CloudFrontLogs \u65e5\u5fd7\u5728\u4e34\u65f6\u5b58\u50a8\u533a\u7684\u5b58\u653e\u76ee\u5f55\uff0c\u4e0d\u540cpipeline\u8981\u4fdd\u8bc1Prefix\u7684\u552f\u4e00\u6027\u4e14\u65e0\u91cd\u53e0\u3002 Destination settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Centralized Bucket Name <\u9700\u8981\u8f93\u5165> \u8f93\u5165centralized\u7684s3 bucket\u540d\u79f0\uff0c\u4f8b\u5982centralized-logging-bucket\u3002 Centralized Bucket Prefix datalake \u8f93\u5165centralized bucket\u7684\u8def\u5f84\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3adatalake\uff0c\u610f\u5473\u7740\u60a8\u7684\u6570\u636e\u5e93\u7684location\u4e3as3://{Centralized Bucket Name}/{Centralized Bucket Prefix}/amazon_cl_centralized\u3002 Centralized Table Name CloudFront \u6570\u636e\u5199\u5165\u5230Centralized\u6570\u636e\u5e93\u7684\u8868\u540d\u79f0\uff0c\u6309\u9700\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u503c\u4e3aCloudFront\u3002 Enrichment Plugins <\u53ef\u9009\u8f93\u5165> \u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709\u5b9a\u4f4d\u548c\u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406\uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 Scheduler settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 LogProcessor Schedule Expression rate(5 minutes) \u6267\u884c\u6570\u636e\u52a0\u5de5\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21LogProcessorr\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogMerger Schedule Expression cron(0 1 * ? ) \u6267\u884c\u6570\u636e\u6587\u4ef6\u5408\u5e76\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59291\u70b9\u6267\u884cLogMerger,\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogArchive Schedule Expression cron(0 2 * ? ) \u6267\u884c\u6570\u636e\u5f52\u6863\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59292\u70b9\u6267\u884cLogArchive\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 Age to Merge 7 \u5c0f\u6587\u4ef6\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a7\uff0c\u8868\u793a\u4f1a\u5bf97\u5929\u4ee5\u524d\u7684\u65e5\u5fd7\u8fdb\u884c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Age to Archive 30 \u65e5\u5fd7\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a30\uff0c\u8868\u793a30\u5929\u4ee5\u524d\u7684\u6570\u636e\u4f1a\u8fdb\u884c\u5f52\u6863\u5220\u9664\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Notification settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Notification Service SNS \u544a\u8b66\u901a\u77e5\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528China\uff0c\u5219\u53ea\u80fd\u9009\u62e9SNS\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528Global\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528SNS\u6216SES\u65b9\u5f0f\u3002 Recipients <\u9700\u8981\u8f93\u5165> \u544a\u8b66\u901a\u77e5\uff0c\u5982\u679cNotification Service\u4e3aSNS\uff0c\u5219\u6b64\u5904\u8f93\u5165SNS\u7684Topic arn\uff0c\u786e\u4fdd\u6709\u6743\u9650\uff0c\u5982\u679cNotification Service\u4e3aSES\uff0c\u5219\u6b64\u5904\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u786e\u4fdd\u90ae\u4ef6\u5730\u5740\u5df2\u5728SES\u4e2dVerified identities\uff0c\u521b\u5efa\u4e3bstack\u8f93\u5165\u7684adminEmail\u9ed8\u8ba4\u4f1a\u53d1\u9001\u9a8c\u8bc1\u90ae\u4ef6\u3002 Dashboard settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Import Dashboards FALSE \u662f\u5426\u5bfc\u5165Dashboard\u5230Grafana\u4e2d\uff0c\u9ed8\u8ba4\u503c\u4e3afalse\uff0c\u5982\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5fc5\u987b\u586b\u5199Grafana URL\u548cGrafana Service Account Token\u3002 Grafana URL <\u53ef\u9009\u8f93\u5165> Grafana\u8bbf\u95ee\u7684URL\uff0c\u4f8b\u5982https://cloudfront-72277319.us-west-2.elb.amazonaws.com\u3002 Grafana Service Account Token <\u53ef\u9009\u8f93\u5165> Grafana Service Account Token\uff1aGrafana\u4e2d\u521b\u5efa\u7684Service Account Token\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 Visualization Name Source Field Description Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Total Requests log event \u663e\u793a Amazon CloudFront \u63a5\u6536\u7684\u603b\u89c2\u4f17\u8bf7\u6c42\u6b21\u6570\uff0c\u5305\u62ec\u6240\u6709 HTTP \u65b9\u6cd5\u4ee5\u53ca HTTP \u548c HTTPS \u8bf7\u6c42\u3002 Unique Vistors c-ip \u663e\u793a\u7531\u5ba2\u6237\u7aef IP \u5730\u5740\u8bc6\u522b\u7684\u552f\u4e00\u8bbf\u5ba2\u3002 Requests History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Request By Edge Location x-edge-location \u663e\u793a\u4ee3\u8868 CloudFront \u8fb9\u7f18\u670d\u52a1\u5668\u4f4d\u7f6e\u6bd4\u4f8b\u7684\u997c\u56fe\u3002 HTTP Status Code sc-status \u663e\u793a\u6309 HTTP \u72b6\u6001\u4ee3\u7801\uff08\u4f8b\u5982 200\u3001404\u3001403 \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Status Code History sc-status \u663e\u793a Amazon CloudFront \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pie sc-status \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u4ee3\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Processing Time time-taken time-to-first-byte \u6b64\u53ef\u89c6\u5316\u8ba1\u7b97\u5e76\u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\uff08\u4f8b\u5982 GET\u3001PUT \u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u7b49\uff09\u3002 Avg. Processing Time History time-taken time-to-first-byte \u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 HTTP Method cs-method \u4f7f\u7528\u997c\u56fe\u663e\u793a\u6309 http \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\uff08\u4f8b\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Total Bytes cs-bytes sc-bytes \u63d0\u4f9b\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\uff0c\u5305\u62ec\u603b\u5b57\u8282\u6570\u4f20\u8f93\u3002 Response Bytes History cs-bytes sc-bytes \u663e\u793a\u63a5\u6536\u5b57\u8282\u6570\u548c\u53d1\u9001\u5b57\u8282\u6570\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Edge Response Type x-edge-response-result-type \u663e\u793a\u5bf9\u6240\u9009 CloudFront \u5206\u53d1\u7684\u547d\u4e2d\u3001\u672a\u547d\u4e2d\u548c\u9519\u8bef\u7684\u767e\u5206\u6bd4\uff1a Hit - \u6765\u81ea CloudFront \u8fb9\u7f18\u7f13\u5b58\u7684\u5bf9\u8c61\u7684\u89c2\u4f17\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Hit \u7684\u8bf7\u6c42\u3002 Miss - \u5bf9\u8c61\u4e0d\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u5fc5\u987b\u4ece\u60a8\u7684\u6e90\u83b7\u53d6\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Miss \u7684\u8bf7\u6c42\u3002 Error - \u5bfc\u81f4\u9519\u8bef\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u6ca1\u6709\u63d0\u4f9b\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Error\u3001LimitExceeded \u6216 CapacityExceeded \u7684\u8bf7\u6c42\u3002 \u56fe\u8868\u4e0d\u5305\u62ec\u5237\u65b0\u547d\u4e2d-\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u4f46\u5df2\u8fc7\u671f\u7684\u5bf9\u8c61\u7684\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u5237\u65b0\u547d\u4e2d\u662f x-edge-response-result-type \u503c\u4e3a RefreshHit \u7684\u8bf7\u6c42\u3002 Requests / Origin Requests log event \u663e\u793a\u5bf9 CloudFront \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\u548c\u56de\u6e90\u7684\u8bf7\u6c42\u6b21\u6570\u3002 Requests / Origin Requests Latency log event time-taken \u663e\u793a\u4ece\u5ba2\u6237\u7aef\u5230 CloudFront \u7684\u8bf7\u6c42\u65f6\u5ef6\u548c\u56de\u6e90\u8bf7\u6c42\u65f6\u5ef6\u3002 Top 20 URLs with most requests log event \u6839\u636e\u8bf7\u6c42\u6570\u91cf\u7edf\u8ba1\u7684\u524d 20 \u4e2a URL\u3002 Requests 3xx / 4xx / 5xx error rate log event sc-status \u663e\u793a\u4ece\u5ba2\u6237\u7aef\u5230 CloudFront \u7684 3xx/4xx/5xx \u72b6\u6001\u7801\u6bd4\u4f8b\u3002 Origin Requests 3xx / 4xx / 5xx error rate log eventsc-status \u663e\u793a\u4ece CloudFront \u5230\u6e90\u7684 3xx/4xx/5xx \u72b6\u6001\u7801\u6bd4\u4f8b\u3002 Top Referring Domains cs(Referer) \u6839\u636e\u8bf7\u6c42\u4e2d\u7684 Referer \u6807\u5934\u7edf\u8ba1\u7684\u524d 20 \u4e2a\u57df\u540d\u3002 Top User Agents cs(User-Agent) \u6839\u636e\u8bf7\u6c42\u4e2d\u7684 User-Agent \u6807\u5934\u7edf\u8ba1\u7684\u524d 20 \u4e2a\u7528\u6237\u4ee3\u7406\u3002 Viewer Country x-edge-location clientCountry x-countryname \u4f7f\u7528\u5730\u56fe\u663e\u793a\u89c2\u4f17\u56fd\u5bb6/\u5730\u533a\u7684\u5206\u5e03\u3002 Viewer City x-edge-location clientCountry clientCity \u4f7f\u7528\u5730\u56fe\u663e\u793a\u89c2\u4f17\u57ce\u5e02\u7684\u5206\u5e03\u3002 SSL Protocol Version ssl-protocol \u663e\u793a\u4f7f\u7528\u7684 SSL \u534f\u8bae\u7248\u672c\u7684\u6bd4\u4f8b\u3002 SSL Cipher Suite ssl-cipher \u663e\u793a\u4f7f\u7528\u7684 SSL \u5bc6\u7801\u5957\u4ef6\u7684\u6bd4\u4f8b\u3002 SSL Handshake Time ssl-handshake-time \u663e\u793a SSL \u63e1\u624b\u65f6\u95f4\u7684\u5206\u5e03\u3002 SSL Handshake Time History ssl-handshake-time \u663e\u793a SSL \u63e1\u624b\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 SSL Handshake Failures ssl-handshake-failures \u663e\u793a SSL \u63e1\u624b\u5931\u8d25\u7684\u6b21\u6570\u3002 SSL Handshake Failures History ssl-handshake-failures \u663e\u793a SSL \u63e1\u624b\u5931\u8d25\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Cache Hit Rate x-edge-response-result-type \u663e\u793a CloudFront \u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7684\u6bd4\u4f8b\u3002 Cache Hit Rate History x-edge-response-result-type \u663e\u793a CloudFront \u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Cache Hit Rate by File Extension x-edge-response-result-type cs-uri-extension \u663e\u793a\u4e0d\u540c\u6587\u4ef6\u6269\u5c55\u540d\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Content Type x-edge-response-result-type cs(Content-Type) \u663e\u793a\u4e0d\u540c\u5185\u5bb9\u7c7b\u578b\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by HTTP Method x-edge-response-result-type cs-method \u663e\u793a\u4e0d\u540c HTTP \u65b9\u6cd5\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by HTTP Status Code x-edge-response-result-type sc-status \u663e\u793a\u4e0d\u540c HTTP \u72b6\u6001\u7801\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Query String x-edge-response-result-type cs-uri-query \u663e\u793a\u5e26\u6709\u4e0d\u540c\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Host Header x-edge-response-result-type cs(Host) \u663e\u793a\u4e0d\u540c\u4e3b\u673a\u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Referer Header x-edge-response-result-type cs(Referer) \u663e\u793a\u4e0d\u540c Referer \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by User Agent Header x-edge-response-result-type cs(User-Agent) \u663e\u793a\u4e0d\u540c User-Agent \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Cookie Header x-edge-response-result-type cs(Cookie) \u663e\u793a\u4e0d\u540c Cookie \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Accept-Encoding Header x-edge-response-result-type cs(Accept-Encoding) \u663e\u793a\u4e0d\u540c Accept-Encoding \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Content Encoding x-edge-response-result-type cs(Content-Encoding) \u663e\u793a\u4e0d\u540c\u5185\u5bb9\u7f16\u7801\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Vary Header x-edge-response-result-type cs(Vary) \u663e\u793a\u4e0d\u540c Vary \u5934\u7684\u8fb9\u7f18","title":"Amazon CloudFront"},{"location":"implementation-guide/aws-services/cloudfront/#amazon-cloudfront","text":"CloudFront \u6807\u51c6\u65e5\u5fd7 \u4e3a\u6bcf\u4e2a\u53d1\u9001\u5230\u5206\u53d1\u7684\u8bf7\u6c42\u63d0\u4f9b\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 Important CloudFront \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"Amazon CloudFront \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/cloudfront/#amazon-opensearch","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Amazon OpenSearch\uff09"},{"location":"implementation-guide/aws-services/cloudfront/#_1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 Amazon OpenSearch \uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f CloudFront \u5206\u914d ID\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudfront/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN. \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK. Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 Plugins <\u53ef\u9009\u8f93\u5165> \u7528\u9017\u53f7\u5206\u9694\u7684\u63d2\u4ef6\u5217\u8868\uff0c\u5982\u679c\u65e0\u9700\u4f7f\u7528\u63d2\u4ef6\uff0c\u8bf7\u7559\u7a7a\u3002 \u5408\u6cd5\u8f93\u5165\u4e3a user_agent \uff0c geo_ip \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudfront/#_2","text":"\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Total Requests log event \u663e\u793a Amazon CloudFront \u63a5\u6536\u7684\u603b\u89c2\u4f17\u8bf7\u6c42\u6b21\u6570\uff0c\u5305\u62ec\u6240\u6709 HTTP \u65b9\u6cd5\u4ee5\u53ca HTTP \u548c HTTPS \u8bf7\u6c42\u3002 Edge Locations x-edge-location \u663e\u793a\u4ee3\u8868 CloudFront \u8fb9\u7f18\u670d\u52a1\u5668\u4f4d\u7f6e\u6bd4\u4f8b\u7684\u997c\u56fe\u3002 Request History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Unique Visitors c-ip \u663e\u793a\u7531\u5ba2\u6237\u7aef IP \u5730\u5740\u8bc6\u522b\u7684\u552f\u4e00\u8bbf\u5ba2\u3002 Cache Hit Rate sc-bytes \u663e\u793a\u4ece CloudFront \u7f13\u5b58\u76f4\u63a5\u4e3a\u60a8\u7684\u89c2\u4f17\u8bf7\u6c42\u63d0\u4f9b\u5185\u5bb9\u7684\u6bd4\u4f8b\uff0c\u800c\u4e0d\u662f\u53bb\u539f\u59cb\u670d\u52a1\u5668\u83b7\u53d6\u5185\u5bb9\u3002 Result Type x-edge-response-result-type \u663e\u793a\u5bf9\u6240\u9009 CloudFront \u5206\u53d1\u7684\u547d\u4e2d\u3001\u672a\u547d\u4e2d\u548c\u9519\u8bef\u7684\u767e\u5206\u6bd4\uff1a Hit - \u6765\u81ea CloudFront \u8fb9\u7f18\u7f13\u5b58\u7684\u5bf9\u8c61\u7684\u89c2\u4f17\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Hit \u7684\u8bf7\u6c42\u3002 Miss - \u5bf9\u8c61\u4e0d\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u5fc5\u987b\u4ece\u60a8\u7684\u6e90\u83b7\u53d6\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Miss \u7684\u8bf7\u6c42\u3002 Error - \u5bfc\u81f4\u9519\u8bef\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u6ca1\u6709\u63d0\u4f9b\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Error\u3001LimitExceeded \u6216 CapacityExceeded \u7684\u8bf7\u6c42\u3002 \u56fe\u8868\u4e0d\u5305\u62ec\u5237\u65b0\u547d\u4e2d-\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u4f46\u5df2\u8fc7\u671f\u7684\u5bf9\u8c61\u7684\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u5237\u65b0\u547d\u4e2d\u662f x-edge-response-result-type \u503c\u4e3a RefreshHit \u7684\u8bf7\u6c42\u3002 Top Miss URI cs-uri-stem cs-method \u663e\u793a\u4e0d\u5728\u7f13\u5b58\u4e2d\u7684\u524d 10 \u4e2a\u8bf7\u6c42\u5bf9\u8c61\u3002 Bandwidth cs-bytes sc-bytes \u63d0\u4f9b\u6765\u81ea CloudFront \u8fb9\u7f18\u4f4d\u7f6e\u7684\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\u3002 Bandwidth History cs-bytes sc-bytes \u663e\u793a\u6765\u81ea CloudFront \u8fb9\u7f18\u4f4d\u7f6e\u7684\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Top Client IPs c-ip \u63d0\u4f9b\u8bbf\u95ee\u60a8\u7684 Amazon CloudFront \u7684\u524d 10 \u4e2a IP \u5730\u5740\u3002 Status Code Count sc-status \u663e\u793a\u6309 HTTP \u72b6\u6001\u4ee3\u7801\uff08\u4f8b\u5982 200\u3001404\u3001403 \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Status History @timestamp sc-status \u663e\u793a Amazon CloudFront \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code sc-status \u6807\u8bc6\u5bf9 EC2 \u8d44\u6e90\u8fdb\u884c\u66f4\u6539\u7684\u7528\u6237\u6216 IAM \u89d2\u8272\uff0c\u534f\u52a9\u8ffd\u8e2a\u548c\u4fee\u6539\u7684\u8d23\u4efb\u3002 Average Time Taken time-taken \u6b64\u53ef\u89c6\u5316\u8ba1\u7b97\u5e76\u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\uff08\u4f8b\u5982 GET\u3001PUT \u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u7b49\uff09\u3002 Average Time History time-taken time-to-first-byte @timestamp \u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Http Method cs-method \u4f7f\u7528\u997c\u56fe\u663e\u793a\u6309 http \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\uff08\u4f8b\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Average Time To First Byte time-to-first-byte \u63d0\u4f9b\u539f\u59cb\u670d\u52a1\u5668\u54cd\u5e94\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u54cd\u5e94\u6240\u9700\u7684\u5e73\u5747\u65f6\u95f4\u3002 Top Request URIs cs-uri-stem cs-method \u63d0\u4f9b\u8bbf\u95ee\u60a8\u7684 CloudFront \u7684\u524d 10 \u4e2a\u8bf7\u6c42 URIs\u3002 Top User Agents cs-user-agent \u63d0\u4f9b\u8bbf\u95ee\u60a8\u7684 CloudFront \u7684\u524d 10 \u4e2a\u7528\u6237\u4ee3\u7406\u3002 Edge Location Heatmap x-edge-location x-edge-result-type \u663e\u793a\u4ee3\u8868\u6bcf\u4e2a\u8fb9\u7f18\u4f4d\u7f6e\u7684\u7ed3\u679c\u7c7b\u578b\u7684\u70ed\u56fe\u3002 Top Referers cs-referer \u4e0e Amazon CloudFront \u8bbf\u95ee\u7684\u524d 10 \u4e2a\u5f15\u8350\u8005\u3002 Top Countries or Regions c_country \u4e0e Amazon CloudFront \u8bbf\u95ee\u7684\u524d 10 \u4e2a\u56fd\u5bb6\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/cloudfront/#_3","text":"","title":"\u6837\u54c1\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/cloudfront/#light-engine","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Light Engine\uff09"},{"location":"implementation-guide/aws-services/cloudfront/#_4","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 Light Engine \uff0c \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u65e5\u5fd7\u5904\u7406 \u4e2d\u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709 \u5b9a\u4f4d \u548c \u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406 \uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\uff0c\u6211\u4eec\u5df2\u7ecf\u4e3a\u4f60\u9884\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8868\u540d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudfront/#cloudformation_1","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 Pipeline settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Pipeline Id <\u9700\u8981\u8f93\u5165> pipeline\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u60a8\u9700\u8981\u521b\u5efa\u591a\u4e2aELB pipeline\uff0c\u5c06\u4e0d\u540c\u7684CloudFront\u65e5\u5fd7\u5199\u5165\u5230\u4e0d\u540c\u7684\u8868\u4e2d\u65f6\uff0c\u5219\u5fc5\u987b\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7 uuidgenerator \u751f\u6210\u552f\u4e00\u7684\u3002 Staging Bucket Prefix AWSLogs/CloudFrontLogs \u65e5\u5fd7\u5728\u4e34\u65f6\u5b58\u50a8\u533a\u7684\u5b58\u653e\u76ee\u5f55\uff0c\u4e0d\u540cpipeline\u8981\u4fdd\u8bc1Prefix\u7684\u552f\u4e00\u6027\u4e14\u65e0\u91cd\u53e0\u3002 Destination settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Centralized Bucket Name <\u9700\u8981\u8f93\u5165> \u8f93\u5165centralized\u7684s3 bucket\u540d\u79f0\uff0c\u4f8b\u5982centralized-logging-bucket\u3002 Centralized Bucket Prefix datalake \u8f93\u5165centralized bucket\u7684\u8def\u5f84\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3adatalake\uff0c\u610f\u5473\u7740\u60a8\u7684\u6570\u636e\u5e93\u7684location\u4e3as3://{Centralized Bucket Name}/{Centralized Bucket Prefix}/amazon_cl_centralized\u3002 Centralized Table Name CloudFront \u6570\u636e\u5199\u5165\u5230Centralized\u6570\u636e\u5e93\u7684\u8868\u540d\u79f0\uff0c\u6309\u9700\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u503c\u4e3aCloudFront\u3002 Enrichment Plugins <\u53ef\u9009\u8f93\u5165> \u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709\u5b9a\u4f4d\u548c\u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406\uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 Scheduler settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 LogProcessor Schedule Expression rate(5 minutes) \u6267\u884c\u6570\u636e\u52a0\u5de5\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21LogProcessorr\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogMerger Schedule Expression cron(0 1 * ? ) \u6267\u884c\u6570\u636e\u6587\u4ef6\u5408\u5e76\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59291\u70b9\u6267\u884cLogMerger,\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogArchive Schedule Expression cron(0 2 * ? ) \u6267\u884c\u6570\u636e\u5f52\u6863\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59292\u70b9\u6267\u884cLogArchive\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 Age to Merge 7 \u5c0f\u6587\u4ef6\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a7\uff0c\u8868\u793a\u4f1a\u5bf97\u5929\u4ee5\u524d\u7684\u65e5\u5fd7\u8fdb\u884c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Age to Archive 30 \u65e5\u5fd7\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a30\uff0c\u8868\u793a30\u5929\u4ee5\u524d\u7684\u6570\u636e\u4f1a\u8fdb\u884c\u5f52\u6863\u5220\u9664\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Notification settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Notification Service SNS \u544a\u8b66\u901a\u77e5\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528China\uff0c\u5219\u53ea\u80fd\u9009\u62e9SNS\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528Global\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528SNS\u6216SES\u65b9\u5f0f\u3002 Recipients <\u9700\u8981\u8f93\u5165> \u544a\u8b66\u901a\u77e5\uff0c\u5982\u679cNotification Service\u4e3aSNS\uff0c\u5219\u6b64\u5904\u8f93\u5165SNS\u7684Topic arn\uff0c\u786e\u4fdd\u6709\u6743\u9650\uff0c\u5982\u679cNotification Service\u4e3aSES\uff0c\u5219\u6b64\u5904\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u786e\u4fdd\u90ae\u4ef6\u5730\u5740\u5df2\u5728SES\u4e2dVerified identities\uff0c\u521b\u5efa\u4e3bstack\u8f93\u5165\u7684adminEmail\u9ed8\u8ba4\u4f1a\u53d1\u9001\u9a8c\u8bc1\u90ae\u4ef6\u3002 Dashboard settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Import Dashboards FALSE \u662f\u5426\u5bfc\u5165Dashboard\u5230Grafana\u4e2d\uff0c\u9ed8\u8ba4\u503c\u4e3afalse\uff0c\u5982\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5fc5\u987b\u586b\u5199Grafana URL\u548cGrafana Service Account Token\u3002 Grafana URL <\u53ef\u9009\u8f93\u5165> Grafana\u8bbf\u95ee\u7684URL\uff0c\u4f8b\u5982https://cloudfront-72277319.us-west-2.elb.amazonaws.com\u3002 Grafana Service Account Token <\u53ef\u9009\u8f93\u5165> Grafana Service Account Token\uff1aGrafana\u4e2d\u521b\u5efa\u7684Service Account Token\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudfront/#_5","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 Visualization Name Source Field Description Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Total Requests log event \u663e\u793a Amazon CloudFront \u63a5\u6536\u7684\u603b\u89c2\u4f17\u8bf7\u6c42\u6b21\u6570\uff0c\u5305\u62ec\u6240\u6709 HTTP \u65b9\u6cd5\u4ee5\u53ca HTTP \u548c HTTPS \u8bf7\u6c42\u3002 Unique Vistors c-ip \u663e\u793a\u7531\u5ba2\u6237\u7aef IP \u5730\u5740\u8bc6\u522b\u7684\u552f\u4e00\u8bbf\u5ba2\u3002 Requests History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Request By Edge Location x-edge-location \u663e\u793a\u4ee3\u8868 CloudFront \u8fb9\u7f18\u670d\u52a1\u5668\u4f4d\u7f6e\u6bd4\u4f8b\u7684\u997c\u56fe\u3002 HTTP Status Code sc-status \u663e\u793a\u6309 HTTP \u72b6\u6001\u4ee3\u7801\uff08\u4f8b\u5982 200\u3001404\u3001403 \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Status Code History sc-status \u663e\u793a Amazon CloudFront \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pie sc-status \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u4ee3\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Processing Time time-taken time-to-first-byte \u6b64\u53ef\u89c6\u5316\u8ba1\u7b97\u5e76\u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\uff08\u4f8b\u5982 GET\u3001PUT \u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u7b49\uff09\u3002 Avg. Processing Time History time-taken time-to-first-byte \u663e\u793a Amazon CloudFront \u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 HTTP Method cs-method \u4f7f\u7528\u997c\u56fe\u663e\u793a\u6309 http \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\uff08\u4f8b\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u5206\u7ec4\u7684\u5bf9 Amazon CloudFront \u7684\u8bf7\u6c42\u8ba1\u6570\u3002 Total Bytes cs-bytes sc-bytes \u63d0\u4f9b\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\uff0c\u5305\u62ec\u603b\u5b57\u8282\u6570\u4f20\u8f93\u3002 Response Bytes History cs-bytes sc-bytes \u663e\u793a\u63a5\u6536\u5b57\u8282\u6570\u548c\u53d1\u9001\u5b57\u8282\u6570\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Edge Response Type x-edge-response-result-type \u663e\u793a\u5bf9\u6240\u9009 CloudFront \u5206\u53d1\u7684\u547d\u4e2d\u3001\u672a\u547d\u4e2d\u548c\u9519\u8bef\u7684\u767e\u5206\u6bd4\uff1a Hit - \u6765\u81ea CloudFront \u8fb9\u7f18\u7f13\u5b58\u7684\u5bf9\u8c61\u7684\u89c2\u4f17\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Hit \u7684\u8bf7\u6c42\u3002 Miss - \u5bf9\u8c61\u4e0d\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u5fc5\u987b\u4ece\u60a8\u7684\u6e90\u83b7\u53d6\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Miss \u7684\u8bf7\u6c42\u3002 Error - \u5bfc\u81f4\u9519\u8bef\u7684\u89c2\u4f17\u8bf7\u6c42\uff0c\u6240\u4ee5 CloudFront \u6ca1\u6709\u63d0\u4f9b\u5bf9\u8c61\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u8fd9\u4e9b\u662f x-edge-response-result-type \u503c\u4e3a Error\u3001LimitExceeded \u6216 CapacityExceeded \u7684\u8bf7\u6c42\u3002 \u56fe\u8868\u4e0d\u5305\u62ec\u5237\u65b0\u547d\u4e2d-\u5728\u8fb9\u7f18\u7f13\u5b58\u4e2d\u4f46\u5df2\u8fc7\u671f\u7684\u5bf9\u8c61\u7684\u8bf7\u6c42\u3002\u5728\u8bbf\u95ee\u65e5\u5fd7\u4e2d\uff0c\u5237\u65b0\u547d\u4e2d\u662f x-edge-response-result-type \u503c\u4e3a RefreshHit \u7684\u8bf7\u6c42\u3002 Requests / Origin Requests log event \u663e\u793a\u5bf9 CloudFront \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\u548c\u56de\u6e90\u7684\u8bf7\u6c42\u6b21\u6570\u3002 Requests / Origin Requests Latency log event time-taken \u663e\u793a\u4ece\u5ba2\u6237\u7aef\u5230 CloudFront \u7684\u8bf7\u6c42\u65f6\u5ef6\u548c\u56de\u6e90\u8bf7\u6c42\u65f6\u5ef6\u3002 Top 20 URLs with most requests log event \u6839\u636e\u8bf7\u6c42\u6570\u91cf\u7edf\u8ba1\u7684\u524d 20 \u4e2a URL\u3002 Requests 3xx / 4xx / 5xx error rate log event sc-status \u663e\u793a\u4ece\u5ba2\u6237\u7aef\u5230 CloudFront \u7684 3xx/4xx/5xx \u72b6\u6001\u7801\u6bd4\u4f8b\u3002 Origin Requests 3xx / 4xx / 5xx error rate log eventsc-status \u663e\u793a\u4ece CloudFront \u5230\u6e90\u7684 3xx/4xx/5xx \u72b6\u6001\u7801\u6bd4\u4f8b\u3002 Top Referring Domains cs(Referer) \u6839\u636e\u8bf7\u6c42\u4e2d\u7684 Referer \u6807\u5934\u7edf\u8ba1\u7684\u524d 20 \u4e2a\u57df\u540d\u3002 Top User Agents cs(User-Agent) \u6839\u636e\u8bf7\u6c42\u4e2d\u7684 User-Agent \u6807\u5934\u7edf\u8ba1\u7684\u524d 20 \u4e2a\u7528\u6237\u4ee3\u7406\u3002 Viewer Country x-edge-location clientCountry x-countryname \u4f7f\u7528\u5730\u56fe\u663e\u793a\u89c2\u4f17\u56fd\u5bb6/\u5730\u533a\u7684\u5206\u5e03\u3002 Viewer City x-edge-location clientCountry clientCity \u4f7f\u7528\u5730\u56fe\u663e\u793a\u89c2\u4f17\u57ce\u5e02\u7684\u5206\u5e03\u3002 SSL Protocol Version ssl-protocol \u663e\u793a\u4f7f\u7528\u7684 SSL \u534f\u8bae\u7248\u672c\u7684\u6bd4\u4f8b\u3002 SSL Cipher Suite ssl-cipher \u663e\u793a\u4f7f\u7528\u7684 SSL \u5bc6\u7801\u5957\u4ef6\u7684\u6bd4\u4f8b\u3002 SSL Handshake Time ssl-handshake-time \u663e\u793a SSL \u63e1\u624b\u65f6\u95f4\u7684\u5206\u5e03\u3002 SSL Handshake Time History ssl-handshake-time \u663e\u793a SSL \u63e1\u624b\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 SSL Handshake Failures ssl-handshake-failures \u663e\u793a SSL \u63e1\u624b\u5931\u8d25\u7684\u6b21\u6570\u3002 SSL Handshake Failures History ssl-handshake-failures \u663e\u793a SSL \u63e1\u624b\u5931\u8d25\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Cache Hit Rate x-edge-response-result-type \u663e\u793a CloudFront \u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7684\u6bd4\u4f8b\u3002 Cache Hit Rate History x-edge-response-result-type \u663e\u793a CloudFront \u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Cache Hit Rate by File Extension x-edge-response-result-type cs-uri-extension \u663e\u793a\u4e0d\u540c\u6587\u4ef6\u6269\u5c55\u540d\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Content Type x-edge-response-result-type cs(Content-Type) \u663e\u793a\u4e0d\u540c\u5185\u5bb9\u7c7b\u578b\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by HTTP Method x-edge-response-result-type cs-method \u663e\u793a\u4e0d\u540c HTTP \u65b9\u6cd5\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by HTTP Status Code x-edge-response-result-type sc-status \u663e\u793a\u4e0d\u540c HTTP \u72b6\u6001\u7801\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Query String x-edge-response-result-type cs-uri-query \u663e\u793a\u5e26\u6709\u4e0d\u540c\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Host Header x-edge-response-result-type cs(Host) \u663e\u793a\u4e0d\u540c\u4e3b\u673a\u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Referer Header x-edge-response-result-type cs(Referer) \u663e\u793a\u4e0d\u540c Referer \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by User Agent Header x-edge-response-result-type cs(User-Agent) \u663e\u793a\u4e0d\u540c User-Agent \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Cookie Header x-edge-response-result-type cs(Cookie) \u663e\u793a\u4e0d\u540c Cookie \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Accept-Encoding Header x-edge-response-result-type cs(Accept-Encoding) \u663e\u793a\u4e0d\u540c Accept-Encoding \u5934\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Content Encoding x-edge-response-result-type cs(Content-Encoding) \u663e\u793a\u4e0d\u540c\u5185\u5bb9\u7f16\u7801\u7684\u8fb9\u7f18\u7f13\u5b58\u547d\u4e2d\u7387\u3002 Cache Hit Rate by Vary Header x-edge-response-result-type cs(Vary) \u663e\u793a\u4e0d\u540c Vary \u5934\u7684\u8fb9\u7f18","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/cloudtrail/","text":"CloudTrail \u65e5\u5fd7 AWS CloudTrail \u76d1\u63a7\u548c\u8bb0\u5f55\u60a8\u7684 AWS \u57fa\u7840\u8bbe\u65bd\u4e2d\u7684\u8d26\u6237\u6d3b\u52a8\u3002\u5b83\u5c06\u6240\u6709\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684 S3 \u5b58\u50a8\u6876\u6216\u8005 CloudWatch \u65e5\u5fd7\u7ec4\u4e2d\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 CloudTrail \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u65e5\u5fd7\u6765\u6e90 \uff0c\u9009\u62e9 S3 \u6216\u8005 CloudWatch \u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u8ddf\u8e2a\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528\u72ec\u7acb\u7684 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudTrail Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Global Control awsRegion \u4e3a\u7528\u6237\u63d0\u4f9b\u6309\u533a\u57df\u62c6\u5206\u6570\u636e\u7684\u80fd\u529b\u3002 Event History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Event by Account ID userIdentity.accountId \u6839\u636e AWS \u5e10\u6237 ID \u7ec6\u5206\u4e8b\u4ef6\uff0c\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u7ec4\u7ec7\u5185\u4e0d\u540c\u5e10\u6237\u4e4b\u95f4\u7684\u6d3b\u52a8\u6a21\u5f0f\u3002 Top Event Names eventName \u663e\u793a\u6700\u5e38\u53d1\u751f\u7684\u4e8b\u4ef6\u540d\u79f0\uff0c\u5e2e\u52a9\u60a8\u8bc6\u522b\u5e38\u89c1\u6d3b\u52a8\u6216\u6f5c\u5728\u5f02\u5e38\u3002 Top Event Sources eventSource \u7a81\u51fa\u663e\u793a\u751f\u6210\u4e8b\u4ef6\u7684\u9876\u7ea7\u6765\u6e90\uff0c\u63d0\u4f9b\u6709\u5173\u6700\u6d3b\u8dc3\u6216\u4e8b\u4ef6\u91cf\u6700\u9ad8\u7684\u670d\u52a1\u6216\u8d44\u6e90\u7684\u6d1e\u5bdf\u3002 Event Category eventCategory \u5c06\u4e8b\u4ef6\u5206\u7c7b\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\u6216\u5206\u7c7b\uff0c\u4fbf\u4e8e\u5206\u6790\u548c\u4e86\u89e3\u8de8\u7c7b\u522b\u7684\u4e8b\u4ef6\u5206\u5e03\u3002 Top Users userIdentity.sessionContext.sessionIssuer.userName userIdentity.sessionContext.sessionIssuer.arn userIdentity.accountId userIdentity.sessionContext.sessionIssuer.type \u8bc6\u522b\u4e0e\u6700\u591a\u4e8b\u4ef6\u5173\u8054\u7684\u7528\u6237\u6216 IAM \u89d2\u8272\uff0c\u6709\u52a9\u4e8e\u7528\u6237\u6d3b\u52a8\u76d1\u63a7\u548c\u8bbf\u95ee\u7ba1\u7406\u3002 Top Source IPs sourceIPAddress \u5217\u51fa\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u6e90 IP \u5730\u5740\uff0c\u4f7f\u60a8\u80fd\u591f\u8bc6\u522b\u548c\u8c03\u67e5\u6f5c\u5728\u7684\u53ef\u7591\u6216\u672a\u7ecf\u6388\u6743\u7684\u6d3b\u52a8\u3002 S3 Access Denied eventSource: s3* errorCode: AccessDenied \u663e\u793a\u8bbf\u95ee Amazon S3 \u8d44\u6e90\u88ab\u62d2\u7edd\u7684\u4e8b\u4ef6\uff0c\u5e2e\u52a9\u60a8\u8bc6\u522b\u548c\u6392\u9664\u6743\u9650\u95ee\u9898\u6216\u6f5c\u5728\u7684\u5b89\u5168\u6f0f\u6d1e\u3002 S3 Buckets requestParameters.bucketName \u63d0\u4f9b\u5173\u4e8e S3 \u5b58\u50a8\u6876\u6d3b\u52a8\u7684\u6458\u8981\uff0c\u5305\u62ec\u521b\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u64cd\u4f5c\uff0c\u4f7f\u60a8\u80fd\u591f\u76d1\u63a7\u53d8\u66f4\u548c\u8bbf\u95ee\u6a21\u5f0f\u3002 Top S3 Change Events eventName requestParameters.bucketName \u5448\u73b0\u5bf9 S3 \u8d44\u6e90\u6700\u5e38\u89c1\u7684\u66f4\u6539\u7c7b\u578b\uff0c\u4f8b\u5982\u5bf9\u8c61\u4e0a\u4f20\u3001\u5220\u9664\u6216\u4fee\u6539\uff0c\u6709\u52a9\u4e8e\u66f4\u6539\u8ddf\u8e2a\u548c\u5ba1\u8ba1\u3002 EC2 Change Event Count eventSource: ec2* eventName: (RunInstances or TerminateInstances or RunInstances or StopInstances) \u663e\u793a\u4e0e EC2 \u76f8\u5173\u7684\u66f4\u6539\u4e8b\u4ef6\u7684\u603b\u6570\uff0c\u63d0\u4f9b\u5bf9 EC2 \u5b9e\u4f8b\u548c\u8d44\u6e90\u7684\u66f4\u6539\u7684\u6570\u91cf\u548c\u9891\u7387\u7684\u6982\u8ff0\u3002 EC2 Changed By userIdentity.sessionContext.sessionIssuer.userName \u6807\u8bc6\u5bf9 EC2 \u8d44\u6e90\u8fdb\u884c\u66f4\u6539\u7684\u7528\u6237\u6216 IAM \u89d2\u8272\uff0c\u6709\u52a9\u4e8e\u8ffd\u8e2a\u548c\u4fee\u6539\u7684\u8d23\u4efb\u3002 Top EC2 Change Events eventName \u5f3a\u8c03\u5bf9 EC2 \u5b9e\u4f8b\u6216\u76f8\u5173\u8d44\u6e90\u8fdb\u884c\u7684\u6700\u5e38\u89c1\u66f4\u6539\u7c7b\u578b\uff0c\u4f7f\u60a8\u80fd\u591f\u5173\u6ce8\u6700\u91cd\u8981\u6216\u6700\u9891\u7e41\u7684\u66f4\u6539\u3002 Error Events awsRegion errorCode errorMessage eventName eventSource sourceIPAddress userAgent userIdentity.\u200baccountId userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200baccountId userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200barn userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200btype userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200buserName \u663e\u793a\u5bfc\u81f4\u9519\u8bef\u6216\u5931\u8d25\u7684\u4e8b\u4ef6\uff0c\u5e2e\u52a9\u60a8\u8bc6\u522b\u548c\u6392\u9664\u4e0e API \u8c03\u7528\u6216\u8d44\u6e90\u64cd\u4f5c\u76f8\u5173\u7684\u95ee\u9898\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon CloudTrail"},{"location":"implementation-guide/aws-services/cloudtrail/#cloudtrail","text":"AWS CloudTrail \u76d1\u63a7\u548c\u8bb0\u5f55\u60a8\u7684 AWS \u57fa\u7840\u8bbe\u65bd\u4e2d\u7684\u8d26\u6237\u6d3b\u52a8\u3002\u5b83\u5c06\u6240\u6709\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684 S3 \u5b58\u50a8\u6876\u6216\u8005 CloudWatch \u65e5\u5fd7\u7ec4\u4e2d\u3002","title":"CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/cloudtrail/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 CloudTrail \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/cloudtrail/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u65e5\u5fd7\u6765\u6e90 \uff0c\u9009\u62e9 S3 \u6216\u8005 CloudWatch \u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u8ddf\u8e2a\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudtrail/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudTrail Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528\u72ec\u7acb\u7684 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudtrail/#_3","text":"\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Global Control awsRegion \u4e3a\u7528\u6237\u63d0\u4f9b\u6309\u533a\u57df\u62c6\u5206\u6570\u636e\u7684\u80fd\u529b\u3002 Event History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Event by Account ID userIdentity.accountId \u6839\u636e AWS \u5e10\u6237 ID \u7ec6\u5206\u4e8b\u4ef6\uff0c\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u7ec4\u7ec7\u5185\u4e0d\u540c\u5e10\u6237\u4e4b\u95f4\u7684\u6d3b\u52a8\u6a21\u5f0f\u3002 Top Event Names eventName \u663e\u793a\u6700\u5e38\u53d1\u751f\u7684\u4e8b\u4ef6\u540d\u79f0\uff0c\u5e2e\u52a9\u60a8\u8bc6\u522b\u5e38\u89c1\u6d3b\u52a8\u6216\u6f5c\u5728\u5f02\u5e38\u3002 Top Event Sources eventSource \u7a81\u51fa\u663e\u793a\u751f\u6210\u4e8b\u4ef6\u7684\u9876\u7ea7\u6765\u6e90\uff0c\u63d0\u4f9b\u6709\u5173\u6700\u6d3b\u8dc3\u6216\u4e8b\u4ef6\u91cf\u6700\u9ad8\u7684\u670d\u52a1\u6216\u8d44\u6e90\u7684\u6d1e\u5bdf\u3002 Event Category eventCategory \u5c06\u4e8b\u4ef6\u5206\u7c7b\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\u6216\u5206\u7c7b\uff0c\u4fbf\u4e8e\u5206\u6790\u548c\u4e86\u89e3\u8de8\u7c7b\u522b\u7684\u4e8b\u4ef6\u5206\u5e03\u3002 Top Users userIdentity.sessionContext.sessionIssuer.userName userIdentity.sessionContext.sessionIssuer.arn userIdentity.accountId userIdentity.sessionContext.sessionIssuer.type \u8bc6\u522b\u4e0e\u6700\u591a\u4e8b\u4ef6\u5173\u8054\u7684\u7528\u6237\u6216 IAM \u89d2\u8272\uff0c\u6709\u52a9\u4e8e\u7528\u6237\u6d3b\u52a8\u76d1\u63a7\u548c\u8bbf\u95ee\u7ba1\u7406\u3002 Top Source IPs sourceIPAddress \u5217\u51fa\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u6e90 IP \u5730\u5740\uff0c\u4f7f\u60a8\u80fd\u591f\u8bc6\u522b\u548c\u8c03\u67e5\u6f5c\u5728\u7684\u53ef\u7591\u6216\u672a\u7ecf\u6388\u6743\u7684\u6d3b\u52a8\u3002 S3 Access Denied eventSource: s3* errorCode: AccessDenied \u663e\u793a\u8bbf\u95ee Amazon S3 \u8d44\u6e90\u88ab\u62d2\u7edd\u7684\u4e8b\u4ef6\uff0c\u5e2e\u52a9\u60a8\u8bc6\u522b\u548c\u6392\u9664\u6743\u9650\u95ee\u9898\u6216\u6f5c\u5728\u7684\u5b89\u5168\u6f0f\u6d1e\u3002 S3 Buckets requestParameters.bucketName \u63d0\u4f9b\u5173\u4e8e S3 \u5b58\u50a8\u6876\u6d3b\u52a8\u7684\u6458\u8981\uff0c\u5305\u62ec\u521b\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u64cd\u4f5c\uff0c\u4f7f\u60a8\u80fd\u591f\u76d1\u63a7\u53d8\u66f4\u548c\u8bbf\u95ee\u6a21\u5f0f\u3002 Top S3 Change Events eventName requestParameters.bucketName \u5448\u73b0\u5bf9 S3 \u8d44\u6e90\u6700\u5e38\u89c1\u7684\u66f4\u6539\u7c7b\u578b\uff0c\u4f8b\u5982\u5bf9\u8c61\u4e0a\u4f20\u3001\u5220\u9664\u6216\u4fee\u6539\uff0c\u6709\u52a9\u4e8e\u66f4\u6539\u8ddf\u8e2a\u548c\u5ba1\u8ba1\u3002 EC2 Change Event Count eventSource: ec2* eventName: (RunInstances or TerminateInstances or RunInstances or StopInstances) \u663e\u793a\u4e0e EC2 \u76f8\u5173\u7684\u66f4\u6539\u4e8b\u4ef6\u7684\u603b\u6570\uff0c\u63d0\u4f9b\u5bf9 EC2 \u5b9e\u4f8b\u548c\u8d44\u6e90\u7684\u66f4\u6539\u7684\u6570\u91cf\u548c\u9891\u7387\u7684\u6982\u8ff0\u3002 EC2 Changed By userIdentity.sessionContext.sessionIssuer.userName \u6807\u8bc6\u5bf9 EC2 \u8d44\u6e90\u8fdb\u884c\u66f4\u6539\u7684\u7528\u6237\u6216 IAM \u89d2\u8272\uff0c\u6709\u52a9\u4e8e\u8ffd\u8e2a\u548c\u4fee\u6539\u7684\u8d23\u4efb\u3002 Top EC2 Change Events eventName \u5f3a\u8c03\u5bf9 EC2 \u5b9e\u4f8b\u6216\u76f8\u5173\u8d44\u6e90\u8fdb\u884c\u7684\u6700\u5e38\u89c1\u66f4\u6539\u7c7b\u578b\uff0c\u4f7f\u60a8\u80fd\u591f\u5173\u6ce8\u6700\u91cd\u8981\u6216\u6700\u9891\u7e41\u7684\u66f4\u6539\u3002 Error Events awsRegion errorCode errorMessage eventName eventSource sourceIPAddress userAgent userIdentity.\u200baccountId userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200baccountId userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200barn userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200btype userIdentity.\u200bsessionContext.\u200bsessionIssuer.\u200buserName \u663e\u793a\u5bfc\u81f4\u9519\u8bef\u6216\u5931\u8d25\u7684\u4e8b\u4ef6\uff0c\u5e2e\u52a9\u60a8\u8bc6\u522b\u548c\u6392\u9664\u4e0e API \u8c03\u7528\u6216\u8d44\u6e90\u64cd\u4f5c\u76f8\u5173\u7684\u95ee\u9898\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/cloudtrail/#_4","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/config/","text":"Amazon Config \u65e5\u5fd7 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cAWS Config\u5c06\u914d\u7f6e\u5386\u53f2\u8bb0\u5f55\u548c\u5feb\u7167\u6587\u4ef6\u4f20\u9001\u5230 Amazon S3 \u5b58\u50a8\u6876\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 Important \u786e\u4fdd\u60a8\u5df2\u7ecf\u5728\u90e8\u7f72\u4e86\u65e5\u5fd7\u901a\u7684\u533a\u57df\u4e2d\u542f\u7528\u4e86 AWS Config \u670d\u52a1\u3002 \u5b58\u653e AWS Config \u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Config \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a \u65e5\u5fd7\u521b\u5efa \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u786e\u8ba4 AWS Config \u65e5\u5fd7\u5b58\u50a8\u7684 S3 \u4f4d\u7f6e\uff0c\u5e76\u8f93\u5165 AWS Config \u540d\u79f0 \u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 AWS Config \u540d\u79f0 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u4e4b\u524d\u8f93\u5165\u7684 AWS Config \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Global Filters awsAccountId awsRegion resourceType resourceId resourceName \u6839\u636e\u5e10\u6237 ID\u3001\u533a\u57df\u3001\u8d44\u6e90\u7c7b\u578b\u548c\u5176\u4ed6\u6761\u4ef6\u8fc7\u6ee4\u56fe\u8868\u3002 Total Change Events log event \u663e\u793a\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u68c0\u6d4b\u5230\u7684\u6240\u6709 AWS \u8d44\u6e90\u7684\u914d\u7f6e\u66f4\u6539\u6570\u91cf\u3002 Top Resource Types resourceType \u663e\u793a\u6309\u6700\u5e38\u4fee\u6539\u7684 AWS \u8d44\u6e90\u7c7b\u578b\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7684\u914d\u7f6e\u66f4\u6539\u5206\u5e03\u3002 Config History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Total Delete Events log event \u663e\u793a AWS Config \u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u68c0\u6d4b\u5230\u7684 AWS \u8d44\u6e90\u5220\u9664\u4e8b\u4ef6\u6570\u91cf\u3002 Config Status configurationItemStatus \u663e\u793a AWS Config \u670d\u52a1\u5728\u76d1\u63a7\u7684\u533a\u57df\u548c\u5e10\u6237\u4e2d\u7684\u64cd\u4f5c\u72b6\u6001\u3002 Top S3 Changes resourceName \u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684 Amazon S3 \u5b58\u50a8\u6876\u3002 Top Changed Resources resourceName resourceId resourceType \u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684\u4e2a\u522b AWS \u8d44\u6e90\u3002 Top VPC Changes resourceId \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684 Amazon VPC\u3002 Top Subnet Changes resourceId \u63d0\u4f9b\u6709\u9488\u5bf9\u6027\u7684\u53ef\u89c1\u6027\uff0c\u4e86\u89e3\u7ecf\u5386\u6700\u591a\u53d8\u6362\u4ee5\u4f9b\u6cbb\u7406\u3001\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002 Top Network Interface Changes resourceId \u7a81\u51fa\u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684 Amazon VPC \u7f51\u7edc\u63a5\u53e3\u3002 Top Security Group Changes resourceId \u524d 10 \u4e2a\u66f4\u6539\u7684\u5b89\u5168\u7ec4\u6309\u603b\u4fee\u6539\u6b21\u6570\u6392\u5e8f\u3002 EC2 Config @timestamp awsAccountId awsRegion resourceId configurationItemStatus \u5141\u8bb8\u91cd\u6784\u9010\u6b65\u5e94\u7528\u4e8e EC2 \u914d\u7f6e\u7684\u66f4\u6539\uff0c\u4ee5\u8fdb\u884c\u5ba1\u8ba1\u3002 RDS Config @timestamp awsAccountId awsRegion resourceId resourceName configurationItemStatus \u663e\u793a\u7531 AWS Config \u68c0\u6d4b\u5230\u7684 RDS \u6570\u636e\u5e93\u8d44\u6e90\u7684\u914d\u7f6e\u5386\u53f2\u8bb0\u5f55\u548c\u66f4\u6539\u3002 Latest Config Changes @timestamp awsAccountId awsRegion resourceType resourceId resourceName relationships configurationItemStatus \u63d0\u4f9b\u57fa\u7840\u8bbe\u65bd\u4fee\u6539\u7684\u4e00\u89c8\u6982\u89c8\u3002 \u6837\u54c1\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"AWS Config"},{"location":"implementation-guide/aws-services/config/#amazon-config","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cAWS Config\u5c06\u914d\u7f6e\u5386\u53f2\u8bb0\u5f55\u548c\u5feb\u7167\u6587\u4ef6\u4f20\u9001\u5230 Amazon S3 \u5b58\u50a8\u6876\u3002","title":"Amazon Config \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/config/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 Important \u786e\u4fdd\u60a8\u5df2\u7ecf\u5728\u90e8\u7f72\u4e86\u65e5\u5fd7\u901a\u7684\u533a\u57df\u4e2d\u542f\u7528\u4e86 AWS Config \u670d\u52a1\u3002 \u5b58\u653e AWS Config \u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/config/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Config \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a \u65e5\u5fd7\u521b\u5efa \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u786e\u8ba4 AWS Config \u65e5\u5fd7\u5b58\u50a8\u7684 S3 \u4f4d\u7f6e\uff0c\u5e76\u8f93\u5165 AWS Config \u540d\u79f0 \u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 AWS Config \u540d\u79f0 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u4e4b\u524d\u8f93\u5165\u7684 AWS Config \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/config/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/config/#_3","text":"\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Global Filters awsAccountId awsRegion resourceType resourceId resourceName \u6839\u636e\u5e10\u6237 ID\u3001\u533a\u57df\u3001\u8d44\u6e90\u7c7b\u578b\u548c\u5176\u4ed6\u6761\u4ef6\u8fc7\u6ee4\u56fe\u8868\u3002 Total Change Events log event \u663e\u793a\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u68c0\u6d4b\u5230\u7684\u6240\u6709 AWS \u8d44\u6e90\u7684\u914d\u7f6e\u66f4\u6539\u6570\u91cf\u3002 Top Resource Types resourceType \u663e\u793a\u6309\u6700\u5e38\u4fee\u6539\u7684 AWS \u8d44\u6e90\u7c7b\u578b\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7684\u914d\u7f6e\u66f4\u6539\u5206\u5e03\u3002 Config History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Total Delete Events log event \u663e\u793a AWS Config \u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u68c0\u6d4b\u5230\u7684 AWS \u8d44\u6e90\u5220\u9664\u4e8b\u4ef6\u6570\u91cf\u3002 Config Status configurationItemStatus \u663e\u793a AWS Config \u670d\u52a1\u5728\u76d1\u63a7\u7684\u533a\u57df\u548c\u5e10\u6237\u4e2d\u7684\u64cd\u4f5c\u72b6\u6001\u3002 Top S3 Changes resourceName \u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684 Amazon S3 \u5b58\u50a8\u6876\u3002 Top Changed Resources resourceName resourceId resourceType \u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684\u4e2a\u522b AWS \u8d44\u6e90\u3002 Top VPC Changes resourceId \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684 Amazon VPC\u3002 Top Subnet Changes resourceId \u63d0\u4f9b\u6709\u9488\u5bf9\u6027\u7684\u53ef\u89c1\u6027\uff0c\u4e86\u89e3\u7ecf\u5386\u6700\u591a\u53d8\u6362\u4ee5\u4f9b\u6cbb\u7406\u3001\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002 Top Network Interface Changes resourceId \u7a81\u51fa\u663e\u793a\u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u7ecf\u5386\u6700\u591a\u914d\u7f6e\u66f4\u6539\u7684 Amazon VPC \u7f51\u7edc\u63a5\u53e3\u3002 Top Security Group Changes resourceId \u524d 10 \u4e2a\u66f4\u6539\u7684\u5b89\u5168\u7ec4\u6309\u603b\u4fee\u6539\u6b21\u6570\u6392\u5e8f\u3002 EC2 Config @timestamp awsAccountId awsRegion resourceId configurationItemStatus \u5141\u8bb8\u91cd\u6784\u9010\u6b65\u5e94\u7528\u4e8e EC2 \u914d\u7f6e\u7684\u66f4\u6539\uff0c\u4ee5\u8fdb\u884c\u5ba1\u8ba1\u3002 RDS Config @timestamp awsAccountId awsRegion resourceId resourceName configurationItemStatus \u663e\u793a\u7531 AWS Config \u68c0\u6d4b\u5230\u7684 RDS \u6570\u636e\u5e93\u8d44\u6e90\u7684\u914d\u7f6e\u5386\u53f2\u8bb0\u5f55\u548c\u66f4\u6539\u3002 Latest Config Changes @timestamp awsAccountId awsRegion resourceType resourceId resourceName relationships configurationItemStatus \u63d0\u4f9b\u57fa\u7840\u8bbe\u65bd\u4fee\u6539\u7684\u4e00\u89c8\u6982\u89c8\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/config/#_4","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u6837\u54c1\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/elb/","text":"\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7 ALB \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u8bbf\u95ee\u65e5\u5fd7\uff0c\u7528\u4e8e\u6355\u83b7\u6709\u5173\u53d1\u9001\u5230\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 ALB \u4e3a\u6bcf\u4e2a\u8d1f\u8f7d\u5e73\u8861\u5668\u8282\u70b9\u53d1\u5e03\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6bcf 5 \u5206\u949f\u4e00\u6b21\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u6216Light Engine \u5206\u6790\u5f15\u64ce\u4e2d\u3002 \u91cd\u8981 ELB \u65e5\u5fd7\u5b58\u50a8\u6876\u533a\u57df\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u533a\u57df\u76f8\u540c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Amazon OpenSearch\uff09 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 Amazon OpenSearch \uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002\uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u8d1f\u8f7d\u5747\u8861\u5668\u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN. \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK. Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 Plugins <\u53ef\u9009\u8f93\u5165> \u7528\u9017\u53f7\u5206\u9694\u7684\u63d2\u4ef6\u5217\u8868\uff0c\u5982\u679c\u65e0\u9700\u4f7f\u7528\u63d2\u4ef6\uff0c\u8bf7\u7559\u7a7a\u3002 \u5408\u6cd5\u8f93\u5165\u4e3a user_agent \uff0c geo_ip \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Total Requests log event \u663e\u793a\u6839\u636e\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u6c47\u603b\u7684\u4e8b\u4ef6\u3002 Request History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Request By Target log event target_ip \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u548c IP \u7684\u67f1\u72b6\u56fe\u3002 Unique Visitors client_ip \u663e\u793a\u901a\u8fc7\u5ba2\u6237\u7aef IP \u5730\u5740\u6807\u8bc6\u7684\u72ec\u7279\u8bbf\u95ee\u8005\u3002 Status Code elb_status_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 HTTP \u72b6\u6001\u4ee3\u7801\u5206\u7ec4 (\u4f8b\u5982\uff0c200\u3001404\u3001403 \u7b49)\u3002 Status History elb_status_code \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pipe elb_status_code \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u4ee3\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Processing Time request_processing_time response_processing_time target_processing_time \u6b64\u53ef\u89c6\u5316\u5448\u73b0 ALB \u4e2d\u5404\u79cd\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u3002 Avg. Processing Time History request_processing_time response_processing_time target_processing_time \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u6bcf\u4e2a\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Request Verb request_verb \u4f7f\u7528\u997c\u56fe\u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 http \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4 (\u4f8b\u5982\uff0cPOST\u3001GET\u3001HEAD \u7b49)\u3002 Total Bytes received_bytes sent_bytes \u63d0\u4f9b\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\uff0c\u5305\u62ec\u603b\u5b57\u8282\u6570\u4f20\u8f93\u3002 Sent and Received Bytes History received_bytes sent_bytes \u663e\u793a\u63a5\u6536\u5b57\u8282\u6570\u548c\u53d1\u9001\u5b57\u8282\u6570\u7684\u5386\u53f2\u8d8b\u52bf\u3002 SSL Protocol ssl_protocol \u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 SSL \u534f\u8bae\u5206\u7ec4\u3002 Top Request URLs request_url \u7f51\u9875\u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u6700\u5e38\u89c1\u7684\u7f51\u9875\u8bf7\u6c42\u3002 Top Client IPs client_ip \u63d0\u4f9b\u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684 IP \u5730\u5740\u3002 Top User Agents user_agent \u63d0\u4f9b\u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u7528\u6237\u4ee3\u7406\u3002 Target Status target_ip target_status_code \u663e\u793a ALB \u76ee\u6807\u7ec4\u4e2d\u76ee\u6807\u7684 http \u72b6\u6001\u7801\u8bf7\u6c42\u6b21\u6570\u3002 Abnormal Requests @timestamp client_ip target_ip elb_status_code error_reason request_verb target_status_code target_status_code_list request_url request_proto trace_id \u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7\u4e8b\u4ef6\u5217\u8868\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001\u5ba2\u6237\u7aef IP\u3001\u76ee\u6807 IP \u7b49\u3002 Requests by OS ua_os \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u64cd\u4f5c\u7cfb\u7edf\u5206\u7ec4\u3002 Request by Device ua_device \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u8bbe\u5907\u5206\u7ec4\u3002 Request by Browser ua_browser \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u6d4f\u89c8\u5668\u5206\u7ec4\u3002 Request by Category ua_category \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u7c7b\u522b\u5206\u7ec4 (\u4f8b\u5982\uff0cPC\u3001\u79fb\u52a8\u3001\u5e73\u677f\u7b49)\u3002 Requests by Countries or Regions geo_iso_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570 (\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u5bf9\u5e94\u56fd\u5bb6\u6216\u5730\u533a)\u3002 Top Countries or Regions geo_country \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u56fd\u5bb6\u3002 Top Cities geo_city \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u57ce\u5e02\u3002 \u6837\u54c1\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Light Engine\uff09 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 Light Engine \uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002\uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u65e5\u5fd7\u5904\u7406 \u4e2d\u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709 \u5b9a\u4f4d \u548c \u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406 \uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\uff0c\u6211\u4eec\u5df2\u7ecf\u4e3a\u4f60\u9884\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8868\u540d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 Pipeline settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Pipeline Id <\u9700\u8981\u8f93\u5165> pipeline\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u60a8\u9700\u8981\u521b\u5efa\u591a\u4e2aALB pipeline\uff0c\u5c06\u4e0d\u540c\u7684ALB\u65e5\u5fd7\u5199\u5165\u5230\u4e0d\u540c\u7684\u8868\u4e2d\u65f6\uff0c\u5219\u5fc5\u987b\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7 uuidgenerator \u751f\u6210\u552f\u4e00\u7684Pipeline Id\u3002 Staging Bucket Prefix AWSLogs/ALBLogs \u65e5\u5fd7\u5728\u4e34\u65f6\u5b58\u50a8\u533a\u7684\u5b58\u653e\u76ee\u5f55\uff0c\u4e0d\u540cpipeline\u8981\u4fdd\u8bc1Prefix\u7684\u552f\u4e00\u6027\u4e14\u65e0\u91cd\u53e0\u3002 Destination settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Centralized Bucket Name <\u9700\u8981\u8f93\u5165> \u8f93\u5165centralized\u7684s3 bucket\u540d\u79f0\uff0c\u4f8b\u5982centralized-logging-bucket\u3002 Centralized Bucket Prefix datalake \u8f93\u5165centralized bucket\u7684\u8def\u5f84\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3adatalake\uff0c\u610f\u5473\u7740\u60a8\u7684\u6570\u636e\u5e93\u7684location\u4e3as3://{Centralized Bucket Name}/{Centralized Bucket Prefix}/amazon_cl_centralized\u3002 Centralized Table Name ALB \u6570\u636e\u5199\u5165\u5230Centralized\u6570\u636e\u5e93\u7684\u8868\u540d\u79f0\uff0c\u6309\u9700\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u503c\u4e3aALB\u3002 Enrichment Plugins <\u53ef\u9009\u8f93\u5165> \u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709\u5b9a\u4f4d\u548c\u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406\uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 Scheduler settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 LogProcessor Schedule Expression rate(5 minutes) \u6267\u884c\u6570\u636e\u52a0\u5de5\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21LogProcessorr\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogMerger Schedule Expression cron(0 1 * ? ) \u6267\u884c\u6570\u636e\u6587\u4ef6\u5408\u5e76\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59291\u70b9\u6267\u884cLogMerger,\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogArchive Schedule Expression cron(0 2 * ? ) \u6267\u884c\u6570\u636e\u5f52\u6863\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59292\u70b9\u6267\u884cLogArchive\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 Age to Merge 7 \u5c0f\u6587\u4ef6\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a7\uff0c\u8868\u793a\u4f1a\u5bf97\u5929\u4ee5\u524d\u7684\u65e5\u5fd7\u8fdb\u884c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Age to Archive 30 \u65e5\u5fd7\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a30\uff0c\u8868\u793a30\u5929\u4ee5\u524d\u7684\u6570\u636e\u4f1a\u8fdb\u884c\u5f52\u6863\u5220\u9664\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Notification settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Notification Service SNS \u544a\u8b66\u901a\u77e5\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528China\uff0c\u5219\u53ea\u80fd\u9009\u62e9SNS\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528Global\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528SNS\u6216SES\u65b9\u5f0f\u3002 Recipients <\u9700\u8981\u8f93\u5165> \u544a\u8b66\u901a\u77e5\uff0c\u5982\u679cNotification Service\u4e3aSNS\uff0c\u5219\u6b64\u5904\u8f93\u5165SNS\u7684Topic arn\uff0c\u786e\u4fdd\u6709\u6743\u9650\uff0c\u5982\u679cNotification Service\u4e3aSES\uff0c\u5219\u6b64\u5904\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u786e\u4fdd\u90ae\u4ef6\u5730\u5740\u5df2\u5728SES\u4e2dVerified identities\uff0c\u521b\u5efa\u4e3bstack\u8f93\u5165\u7684adminEmail\u9ed8\u8ba4\u4f1a\u53d1\u9001\u9a8c\u8bc1\u90ae\u4ef6\u3002 Dashboard settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Import Dashboards FALSE \u662f\u5426\u5bfc\u5165Dashboard\u5230Grafana\u4e2d\uff0c\u9ed8\u8ba4\u503c\u4e3afalse\uff0c\u5982\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5fc5\u987b\u586b\u5199Grafana URL\u548cGrafana Service Account Token\u3002 Grafana URL <\u53ef\u9009\u8f93\u5165> Grafana\u8bbf\u95ee\u7684URL\uff0c\u4f8b\u5982https://alb-72277319.us-west-2.elb.amazonaws.com\u3002 Grafana Service Account Token <\u53ef\u9009\u8f93\u5165> Grafana Service Account Token\uff1aGrafana\u4e2d\u521b\u5efa\u7684Service Account Token\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Total Requests log event \u663e\u793a\u6839\u636e\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u6c47\u603b\u7684\u4e8b\u4ef6\u3002 Unique Visitors client_ip \u663e\u793a\u901a\u8fc7\u5ba2\u6237\u7aef IP \u5730\u5740\u6807\u8bc6\u7684\u72ec\u7279\u8bbf\u95ee\u8005\u3002 Requests History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Request By Target log event target_ip \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u548c IP \u7684\u67f1\u72b6\u56fe\u3002 HTTP Status Code elb_status_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 HTTP \u72b6\u6001\u4ee3\u7801\u5206\u7ec4 (\u4f8b\u5982\uff0c200\u3001404\u3001403 \u7b49)\u3002 Status Code History elb_status_code \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pie elb_status_code \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u4ee3\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Processing Time request_processing_time response_processing_time target_processing_time \u6b64\u53ef\u89c6\u5316\u5448\u73b0 ALB \u4e2d\u5404\u79cd\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u3002 Avg. Processing Time History request_processing_time response_processing_time target_processing_time \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u6bcf\u4e2a\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 HTTP Method request_verb \u4f7f\u7528\u997c\u56fe\u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 HTTP \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4 (\u4f8b\u5982\uff0cPOST\u3001GET\u3001HEAD \u7b49)\u3002 Total Bytes received_bytes sent_bytes \u63d0\u4f9b\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\uff0c\u5305\u62ec\u603b\u5b57\u8282\u6570\u4f20\u8f93\u3002 Sent and Received Bytes History received_bytes sent_bytes \u663e\u793a\u63a5\u6536\u5b57\u8282\u6570\u548c\u53d1\u9001\u5b57\u8282\u6570\u7684\u5386\u53f2\u8d8b\u52bf\u3002 SSL Protocol ssl_protocol \u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 SSL \u534f\u8bae\u5206\u7ec4\u3002 Top Request URLs request_url \u7f51\u9875\u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u6700\u5e38\u89c1\u7684\u7f51\u9875\u8bf7\u6c42\u3002 Top Client IPs client_ip \u63d0\u4f9b\u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684 IP \u5730\u5740\u3002 Bad Requests type client_ip target_group_arn target_ip elb_status_code request_verb request_url ssl_protocol received_bytes sent_bytes \u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7\u4e8b\u4ef6\u5217\u8868\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001\u5ba2\u6237\u7aef IP\u3001\u76ee\u6807 IP \u7b49\u3002 Requests by OS ua_os \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u64cd\u4f5c\u7cfb\u7edf\u5206\u7ec4\u3002 Requests by Device ua_device \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u8bbe\u5907\u5206\u7ec4\u3002 Requests by Browser ua_browser \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u6d4f\u89c8\u5668\u5206\u7ec4\u3002 Requests by Category ua_category \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u7c7b\u522b\u5206\u7ec4 (\u4f8b\u5982\uff0cPC\u3001\u79fb\u52a8\u3001\u5e73\u677f\u7b49)\u3002 Requests by Countries or Regions geo_iso_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570 (\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u5bf9\u5e94\u56fd\u5bb6\u6216\u5730\u533a)\u3002 Top Countries or Regions geo_country \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u56fd\u5bb6\u3002 Top Cities geo_city \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u57ce\u5e02\u3002","title":"Elastic Load Balancing"},{"location":"implementation-guide/aws-services/elb/#alb","text":"ALB \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u8bbf\u95ee\u65e5\u5fd7\uff0c\u7528\u4e8e\u6355\u83b7\u6709\u5173\u53d1\u9001\u5230\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 ALB \u4e3a\u6bcf\u4e2a\u8d1f\u8f7d\u5e73\u8861\u5668\u8282\u70b9\u53d1\u5e03\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6bcf 5 \u5206\u949f\u4e00\u6b21\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u6216Light Engine \u5206\u6790\u5f15\u64ce\u4e2d\u3002 \u91cd\u8981 ELB \u65e5\u5fd7\u5b58\u50a8\u6876\u533a\u57df\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u533a\u57df\u76f8\u540c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/elb/#amazon-opensearch","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Amazon OpenSearch\uff09"},{"location":"implementation-guide/aws-services/elb/#_1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 Amazon OpenSearch \uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002\uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u8d1f\u8f7d\u5747\u8861\u5668\u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/elb/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN. \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK. Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 Plugins <\u53ef\u9009\u8f93\u5165> \u7528\u9017\u53f7\u5206\u9694\u7684\u63d2\u4ef6\u5217\u8868\uff0c\u5982\u679c\u65e0\u9700\u4f7f\u7528\u63d2\u4ef6\uff0c\u8bf7\u7559\u7a7a\u3002 \u5408\u6cd5\u8f93\u5165\u4e3a user_agent \uff0c geo_ip \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/elb/#_2","text":"\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u3002 Visualization Name Source Field Description Total Requests log event \u663e\u793a\u6839\u636e\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u6c47\u603b\u7684\u4e8b\u4ef6\u3002 Request History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Request By Target log event target_ip \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u548c IP \u7684\u67f1\u72b6\u56fe\u3002 Unique Visitors client_ip \u663e\u793a\u901a\u8fc7\u5ba2\u6237\u7aef IP \u5730\u5740\u6807\u8bc6\u7684\u72ec\u7279\u8bbf\u95ee\u8005\u3002 Status Code elb_status_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 HTTP \u72b6\u6001\u4ee3\u7801\u5206\u7ec4 (\u4f8b\u5982\uff0c200\u3001404\u3001403 \u7b49)\u3002 Status History elb_status_code \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pipe elb_status_code \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u4ee3\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Processing Time request_processing_time response_processing_time target_processing_time \u6b64\u53ef\u89c6\u5316\u5448\u73b0 ALB \u4e2d\u5404\u79cd\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u3002 Avg. Processing Time History request_processing_time response_processing_time target_processing_time \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u6bcf\u4e2a\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Request Verb request_verb \u4f7f\u7528\u997c\u56fe\u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 http \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4 (\u4f8b\u5982\uff0cPOST\u3001GET\u3001HEAD \u7b49)\u3002 Total Bytes received_bytes sent_bytes \u63d0\u4f9b\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\uff0c\u5305\u62ec\u603b\u5b57\u8282\u6570\u4f20\u8f93\u3002 Sent and Received Bytes History received_bytes sent_bytes \u663e\u793a\u63a5\u6536\u5b57\u8282\u6570\u548c\u53d1\u9001\u5b57\u8282\u6570\u7684\u5386\u53f2\u8d8b\u52bf\u3002 SSL Protocol ssl_protocol \u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 SSL \u534f\u8bae\u5206\u7ec4\u3002 Top Request URLs request_url \u7f51\u9875\u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u6700\u5e38\u89c1\u7684\u7f51\u9875\u8bf7\u6c42\u3002 Top Client IPs client_ip \u63d0\u4f9b\u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684 IP \u5730\u5740\u3002 Top User Agents user_agent \u63d0\u4f9b\u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u7528\u6237\u4ee3\u7406\u3002 Target Status target_ip target_status_code \u663e\u793a ALB \u76ee\u6807\u7ec4\u4e2d\u76ee\u6807\u7684 http \u72b6\u6001\u7801\u8bf7\u6c42\u6b21\u6570\u3002 Abnormal Requests @timestamp client_ip target_ip elb_status_code error_reason request_verb target_status_code target_status_code_list request_url request_proto trace_id \u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7\u4e8b\u4ef6\u5217\u8868\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001\u5ba2\u6237\u7aef IP\u3001\u76ee\u6807 IP \u7b49\u3002 Requests by OS ua_os \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u64cd\u4f5c\u7cfb\u7edf\u5206\u7ec4\u3002 Request by Device ua_device \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u8bbe\u5907\u5206\u7ec4\u3002 Request by Browser ua_browser \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u6d4f\u89c8\u5668\u5206\u7ec4\u3002 Request by Category ua_category \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u7c7b\u522b\u5206\u7ec4 (\u4f8b\u5982\uff0cPC\u3001\u79fb\u52a8\u3001\u5e73\u677f\u7b49)\u3002 Requests by Countries or Regions geo_iso_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570 (\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u5bf9\u5e94\u56fd\u5bb6\u6216\u5730\u533a)\u3002 Top Countries or Regions geo_country \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u56fd\u5bb6\u3002 Top Cities geo_city \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u57ce\u5e02\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/elb/#_3","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u6837\u54c1\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/elb/#light-engine","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Light Engine\uff09"},{"location":"implementation-guide/aws-services/elb/#_4","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 Light Engine \uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002\uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u65e5\u5fd7\u5904\u7406 \u4e2d\u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709 \u5b9a\u4f4d \u548c \u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406 \uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\uff0c\u6211\u4eec\u5df2\u7ecf\u4e3a\u4f60\u9884\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8868\u540d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/elb/#cloudformation_1","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 Pipeline settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Pipeline Id <\u9700\u8981\u8f93\u5165> pipeline\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u60a8\u9700\u8981\u521b\u5efa\u591a\u4e2aALB pipeline\uff0c\u5c06\u4e0d\u540c\u7684ALB\u65e5\u5fd7\u5199\u5165\u5230\u4e0d\u540c\u7684\u8868\u4e2d\u65f6\uff0c\u5219\u5fc5\u987b\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7 uuidgenerator \u751f\u6210\u552f\u4e00\u7684Pipeline Id\u3002 Staging Bucket Prefix AWSLogs/ALBLogs \u65e5\u5fd7\u5728\u4e34\u65f6\u5b58\u50a8\u533a\u7684\u5b58\u653e\u76ee\u5f55\uff0c\u4e0d\u540cpipeline\u8981\u4fdd\u8bc1Prefix\u7684\u552f\u4e00\u6027\u4e14\u65e0\u91cd\u53e0\u3002 Destination settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Centralized Bucket Name <\u9700\u8981\u8f93\u5165> \u8f93\u5165centralized\u7684s3 bucket\u540d\u79f0\uff0c\u4f8b\u5982centralized-logging-bucket\u3002 Centralized Bucket Prefix datalake \u8f93\u5165centralized bucket\u7684\u8def\u5f84\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3adatalake\uff0c\u610f\u5473\u7740\u60a8\u7684\u6570\u636e\u5e93\u7684location\u4e3as3://{Centralized Bucket Name}/{Centralized Bucket Prefix}/amazon_cl_centralized\u3002 Centralized Table Name ALB \u6570\u636e\u5199\u5165\u5230Centralized\u6570\u636e\u5e93\u7684\u8868\u540d\u79f0\uff0c\u6309\u9700\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u503c\u4e3aALB\u3002 Enrichment Plugins <\u53ef\u9009\u8f93\u5165> \u4e30\u5bcc\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u9009\u62e9\u7684\u63d2\u4ef6\u6709\u5b9a\u4f4d\u548c\u64cd\u4f5c\u7cfb\u7edf/\u4ee3\u7406\uff0c\u5f00\u542f\u4e30\u5bcc\u7684\u5b57\u6bb5\u4f1a\u589e\u52a0\u6570\u636e\u5904\u7406\u7684\u5ef6\u8fdf\u548c\u52a0\u5de5\u6210\u672c\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 Scheduler settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 LogProcessor Schedule Expression rate(5 minutes) \u6267\u884c\u6570\u636e\u52a0\u5de5\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21LogProcessorr\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogMerger Schedule Expression cron(0 1 * ? ) \u6267\u884c\u6570\u636e\u6587\u4ef6\u5408\u5e76\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59291\u70b9\u6267\u884cLogMerger,\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogArchive Schedule Expression cron(0 2 * ? ) \u6267\u884c\u6570\u636e\u5f52\u6863\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59292\u70b9\u6267\u884cLogArchive\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 Age to Merge 7 \u5c0f\u6587\u4ef6\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a7\uff0c\u8868\u793a\u4f1a\u5bf97\u5929\u4ee5\u524d\u7684\u65e5\u5fd7\u8fdb\u884c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Age to Archive 30 \u65e5\u5fd7\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a30\uff0c\u8868\u793a30\u5929\u4ee5\u524d\u7684\u6570\u636e\u4f1a\u8fdb\u884c\u5f52\u6863\u5220\u9664\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Notification settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Notification Service SNS \u544a\u8b66\u901a\u77e5\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528China\uff0c\u5219\u53ea\u80fd\u9009\u62e9SNS\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528Global\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528SNS\u6216SES\u65b9\u5f0f\u3002 Recipients <\u9700\u8981\u8f93\u5165> \u544a\u8b66\u901a\u77e5\uff0c\u5982\u679cNotification Service\u4e3aSNS\uff0c\u5219\u6b64\u5904\u8f93\u5165SNS\u7684Topic arn\uff0c\u786e\u4fdd\u6709\u6743\u9650\uff0c\u5982\u679cNotification Service\u4e3aSES\uff0c\u5219\u6b64\u5904\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u786e\u4fdd\u90ae\u4ef6\u5730\u5740\u5df2\u5728SES\u4e2dVerified identities\uff0c\u521b\u5efa\u4e3bstack\u8f93\u5165\u7684adminEmail\u9ed8\u8ba4\u4f1a\u53d1\u9001\u9a8c\u8bc1\u90ae\u4ef6\u3002 Dashboard settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Import Dashboards FALSE \u662f\u5426\u5bfc\u5165Dashboard\u5230Grafana\u4e2d\uff0c\u9ed8\u8ba4\u503c\u4e3afalse\uff0c\u5982\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5fc5\u987b\u586b\u5199Grafana URL\u548cGrafana Service Account Token\u3002 Grafana URL <\u53ef\u9009\u8f93\u5165> Grafana\u8bbf\u95ee\u7684URL\uff0c\u4f8b\u5982https://alb-72277319.us-west-2.elb.amazonaws.com\u3002 Grafana Service Account Token <\u53ef\u9009\u8f93\u5165> Grafana Service Account Token\uff1aGrafana\u4e2d\u521b\u5efa\u7684Service Account Token\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/elb/#_5","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Total Requests log event \u663e\u793a\u6839\u636e\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u6c47\u603b\u7684\u4e8b\u4ef6\u3002 Unique Visitors client_ip \u663e\u793a\u901a\u8fc7\u5ba2\u6237\u7aef IP \u5730\u5740\u6807\u8bc6\u7684\u72ec\u7279\u8bbf\u95ee\u8005\u3002 Requests History log event \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u4e8b\u4ef6\u5206\u5e03\u7684\u67f1\u72b6\u56fe\u3002 Request By Target log event target_ip \u5c55\u793a\u4e00\u4e2a\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u548c IP \u7684\u67f1\u72b6\u56fe\u3002 HTTP Status Code elb_status_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 HTTP \u72b6\u6001\u4ee3\u7801\u5206\u7ec4 (\u4f8b\u5982\uff0c200\u3001404\u3001403 \u7b49)\u3002 Status Code History elb_status_code \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u4ee3\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pie elb_status_code \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u4ee3\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Processing Time request_processing_time response_processing_time target_processing_time \u6b64\u53ef\u89c6\u5316\u5448\u73b0 ALB \u4e2d\u5404\u79cd\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u3002 Avg. Processing Time History request_processing_time response_processing_time target_processing_time \u663e\u793a ALB \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u6bcf\u4e2a\u64cd\u4f5c\u6240\u82b1\u8d39\u7684\u5e73\u5747\u65f6\u95f4\u7684\u5386\u53f2\u8d8b\u52bf\u3002 HTTP Method request_verb \u4f7f\u7528\u997c\u56fe\u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 HTTP \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4 (\u4f8b\u5982\uff0cPOST\u3001GET\u3001HEAD \u7b49)\u3002 Total Bytes received_bytes sent_bytes \u63d0\u4f9b\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u6d1e\u5bdf\uff0c\u5305\u62ec\u603b\u5b57\u8282\u6570\u4f20\u8f93\u3002 Sent and Received Bytes History received_bytes sent_bytes \u663e\u793a\u63a5\u6536\u5b57\u8282\u6570\u548c\u53d1\u9001\u5b57\u8282\u6570\u7684\u5386\u53f2\u8d8b\u52bf\u3002 SSL Protocol ssl_protocol \u663e\u793a\u53d1\u9001\u5230 ALB \u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309 SSL \u534f\u8bae\u5206\u7ec4\u3002 Top Request URLs request_url \u7f51\u9875\u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u6700\u5e38\u89c1\u7684\u7f51\u9875\u8bf7\u6c42\u3002 Top Client IPs client_ip \u63d0\u4f9b\u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684 IP \u5730\u5740\u3002 Bad Requests type client_ip target_group_arn target_ip elb_status_code request_verb request_url ssl_protocol received_bytes sent_bytes \u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7\u4e8b\u4ef6\u5217\u8868\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001\u5ba2\u6237\u7aef IP\u3001\u76ee\u6807 IP \u7b49\u3002 Requests by OS ua_os \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u64cd\u4f5c\u7cfb\u7edf\u5206\u7ec4\u3002 Requests by Device ua_device \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u8bbe\u5907\u5206\u7ec4\u3002 Requests by Browser ua_browser \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u6d4f\u89c8\u5668\u5206\u7ec4\u3002 Requests by Category ua_category \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u6309\u7528\u6237\u4ee3\u7406\u7c7b\u522b\u5206\u7ec4 (\u4f8b\u5982\uff0cPC\u3001\u79fb\u52a8\u3001\u5e73\u677f\u7b49)\u3002 Requests by Countries or Regions geo_iso_code \u663e\u793a\u5bf9 ALB \u53d1\u51fa\u7684\u8bf7\u6c42\u6b21\u6570 (\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u5bf9\u5e94\u56fd\u5bb6\u6216\u5730\u533a)\u3002 Top Countries or Regions geo_country \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u56fd\u5bb6\u3002 Top Cities geo_city \u524d 10 \u4e2a\u8bbf\u95ee ALB \u7684\u57ce\u5e02\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/include-cfn-common/","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"Include cfn common"},{"location":"implementation-guide/aws-services/include-cfn-plugins-common/","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN. \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK. Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 Plugins <\u53ef\u9009\u8f93\u5165> \u7528\u9017\u53f7\u5206\u9694\u7684\u63d2\u4ef6\u5217\u8868\uff0c\u5982\u679c\u65e0\u9700\u4f7f\u7528\u63d2\u4ef6\uff0c\u8bf7\u7559\u7a7a\u3002 \u5408\u6cd5\u8f93\u5165\u4e3a user_agent \uff0c geo_ip \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"Include cfn plugins common"},{"location":"implementation-guide/aws-services/include-cw-cfn-common/","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 )\u3002 Log Group Names <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6 SQS \u7684 KMS-CMK ARN\u3002\u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002**","title":"Include cw cfn common"},{"location":"implementation-guide/aws-services/include-dashboard/","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Include dashboard"},{"location":"implementation-guide/aws-services/include-index-pattern/","text":"\u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002","title":"Include index pattern"},{"location":"implementation-guide/aws-services/include-supported-service-logs/","text":"\u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f AWS CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u662f Amazon VPC Flow logs S3 \u662f \u662f AWS Config N/A S3 \u662f \u662f \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 Amazon OpenSearch Service\u3002","title":"Include supported service logs"},{"location":"implementation-guide/aws-services/lambda/","text":"AWS Lambda \u65e5\u5fd7 AWS Lambda \u4f1a\u4ee3\u8868\u60a8\u81ea\u52a8\u76d1\u63a7 Lambda \u51fd\u6570\u5e76\u5c06\u51fd\u6570\u6307\u6807\u53d1\u9001\u5230 Amazon CloudWatch\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 Lambda \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Lambda \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 Lambda \u51fd\u6570\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u60f3\u8981\u52a0\u8f7d\u5173\u8054\u7684\u6a21\u677f Amazon OpenSearch \u670d\u52a1\u4eea\u8868\u677f\uff0c\u8bf7\u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch \u670d\u52a1\u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Lambda \u51fd\u6570\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7528\u4e8e\u7ba1\u7406 Amazon OpenSearch \u670d\u52a1\u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u529f\u80fd\u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u6709\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- Lambda Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 )\u3002 Log Group Names <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6 SQS \u7684 KMS-CMK ARN\u3002\u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002** \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6570\u636e\u6e90\u5b57\u6bb5 \u63cf\u8ff0 Lambda \u4e8b\u4ef6 log event \u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u7684\u56fe\u8868\u3002 \u65e5\u5fd7\u5e10\u6237 owner \u663e\u793a\u5360\u4e0d\u540c AWS \u5e10\u6237\uff08\u6240\u6709\u8005\uff09\u7684\u65e5\u5fd7\u4e8b\u4ef6\u6bd4\u4f8b\u7684\u997c\u56fe\u3002 \u65e5\u5fd7\u7ec4 log_group \u663e\u793a Lambda \u73af\u5883\u4e2d\u5404\u79cd\u65e5\u5fd7\u7ec4\u4e4b\u95f4\u65e5\u5fd7\u4e8b\u4ef6\u5206\u5e03\u7684\u997c\u56fe\u3002 \u65e5\u5fd7\u5217\u8868 time log_group log_stream log_detail \u63d0\u4f9b\u4e86\u5305\u62ec\u65f6\u95f4\u6233\u3001\u65e5\u5fd7\u7ec4\u3001\u65e5\u5fd7\u6d41\u548c\u65e5\u5fd7\u8be6\u7ec6\u4fe1\u606f\u5728\u5185\u7684\u65e5\u5fd7\u4e8b\u4ef6\u7684\u8be6\u7ec6\u5217\u8868\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"AWS Lambda"},{"location":"implementation-guide/aws-services/lambda/#aws-lambda","text":"AWS Lambda \u4f1a\u4ee3\u8868\u60a8\u81ea\u52a8\u76d1\u63a7 Lambda \u51fd\u6570\u5e76\u5c06\u51fd\u6570\u6307\u6807\u53d1\u9001\u5230 Amazon CloudWatch\u3002","title":"AWS Lambda \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/lambda/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 Lambda \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/lambda/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Lambda \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 Lambda \u51fd\u6570\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5df2\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u60f3\u8981\u52a0\u8f7d\u5173\u8054\u7684\u6a21\u677f Amazon OpenSearch \u670d\u52a1\u4eea\u8868\u677f\uff0c\u8bf7\u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch \u670d\u52a1\u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Lambda \u51fd\u6570\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7528\u4e8e\u7ba1\u7406 Amazon OpenSearch \u670d\u52a1\u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u96c6\u4e2d\u5f0f\u65e5\u5fd7\u529f\u80fd\u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u6709\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/lambda/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- Lambda Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 )\u3002 Log Group Names <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6 SQS \u7684 KMS-CMK ARN\u3002\u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002**","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/lambda/#_3","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6570\u636e\u6e90\u5b57\u6bb5 \u63cf\u8ff0 Lambda \u4e8b\u4ef6 log event \u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u7684\u56fe\u8868\u3002 \u65e5\u5fd7\u5e10\u6237 owner \u663e\u793a\u5360\u4e0d\u540c AWS \u5e10\u6237\uff08\u6240\u6709\u8005\uff09\u7684\u65e5\u5fd7\u4e8b\u4ef6\u6bd4\u4f8b\u7684\u997c\u56fe\u3002 \u65e5\u5fd7\u7ec4 log_group \u663e\u793a Lambda \u73af\u5883\u4e2d\u5404\u79cd\u65e5\u5fd7\u7ec4\u4e4b\u95f4\u65e5\u5fd7\u4e8b\u4ef6\u5206\u5e03\u7684\u997c\u56fe\u3002 \u65e5\u5fd7\u5217\u8868 time log_group log_stream log_detail \u63d0\u4f9b\u4e86\u5305\u62ec\u65f6\u95f4\u6233\u3001\u65e5\u5fd7\u7ec4\u3001\u65e5\u5fd7\u6d41\u548c\u65e5\u5fd7\u8be6\u7ec6\u4fe1\u606f\u5728\u5185\u7684\u65e5\u5fd7\u4e8b\u4ef6\u7684\u8be6\u7ec6\u5217\u8868\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/lambda/#_4","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/rds/","text":"Amazon RDS/Aurora \u65e5\u5fd7 \u60a8\u53ef\u4ee5 \u5c06\u6570\u636e\u5e93\u5b9e\u4f8b\u65e5\u5fd7\u53d1\u5e03\u5230 Amazon CloudWatch Logs \u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u5c06\u6570\u636e\u5b58\u50a8\u5728\u9ad8\u5ea6\u8010\u7528\u7684\u5b58\u50a8\u4e2d\uff0c\u5e76\u4f7f\u7528 CloudWatch Logs \u4ee3\u7406\u7ba1\u7406\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u60a8\u7684\u6570\u636e\u5e93\u65e5\u5fd7\u5df2\u542f\u7528\u3002 \u67d0\u4e9b\u6570\u636e\u5e93\u65e5\u5fd7\u9ed8\u8ba4\u672a\u542f\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u53c2\u6570\u4ee5\u542f\u7528\u65e5\u5fd7\u3002 \u8bf7\u53c2\u9605 \u5982\u4f55\u4e3a Amazon RDS MySQL \u6570\u636e\u5e93\u5b9e\u4f8b\u542f\u7528\u548c\u76d1\u63a7\u65e5\u5fd7\uff1f \u4e86\u89e3\u5982\u4f55\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 CloudWatch \u65e5\u5fd7\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 RDS/Aurora MySQL \u53c2\u6570\u7684\u8981\u6c42\u3002 \u53c2\u6570 \u8981\u6c42 Audit Log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 MARIADB_AUDIT_PLUGIN \u9009\u9879\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u7ec4\u3002 General log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a general_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u901a\u7528\u65e5\u5fd7\u3002 Slow query log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a slow_query_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\u3002 Log output \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a log_output = FILE \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u5c06\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5e76\u5c06\u5b83\u4eec\u53d1\u5e03\u5230 CloudWatch Logs\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 RDS \u548c CloudWatch \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon RDS \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u4e3a RDS \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b\u60a8\u7684 RDS \u65e5\u5fd7\u914d\u7f6e\uff0c\u5e76\u4ece CloudWatch \u6444\u53d6\u65e5\u5fd7\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 RDS \u96c6\u7fa4\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \uff0c\u9009\u62e9 \u6570\u636e\u5e93\u7c7b\u578b \u5e76\u5728 \u65e5\u5fd7\u7c7b\u578b\u548c\u4f4d\u7f6e \u4e2d\u8f93\u5165 CloudWatch \u65e5\u5fd7\u4f4d\u7f6e\u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- RDS Log Ingestion \u89e3\u51b3\u65b9\u6848 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 )\u3002 Log Group Names <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6 SQS \u7684 KMS-CMK ARN\u3002\u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002** \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 Visualization Name Source Field Description Controller db-identifier sq-table-name \u6b64\u53ef\u89c6\u5316\u5141\u8bb8\u7528\u6237\u6839\u636e\u201cdb-identifier\u201d\u548c\u201csq-table-name\u201d\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u7b5b\u9009\u3002 Total Log Events Overview db-identifier log event \u6b64\u53ef\u89c6\u5316\u5448\u73b0\u4e86\u6307\u5b9a\u6570\u636e\u5e93\uff08\u201cdb-identifier\u201d\uff09\u7684\u603b\u65e5\u5fd7\u4e8b\u4ef6\u6982\u89c8\u3002\u5b83\u6709\u52a9\u4e8e\u76d1\u63a7\u5404\u79cd\u65e5\u5fd7\u4e8b\u4ef6\u7684\u53d1\u751f\u9891\u7387\u3002 Slow Query History log event \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u6162\u67e5\u8be2\u65e5\u5fd7\u4e8b\u4ef6\u7684\u5386\u53f2\u6570\u636e\u3002\u5b83\u53ef\u4ee5\u5e2e\u52a9\u8ddf\u8e2a\u6162\u67e5\u8be2\u7684\u53d1\u751f\u6b21\u6570\u5e76\u8bc6\u522b\u6f5c\u5728\u7684\u6027\u80fd\u95ee\u9898\u3002 Average Slow Query Time History Average sq-duration \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u6162\u67e5\u8be2\u7684\u5e73\u5747\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u7684\u5386\u53f2\u8d8b\u52bf\u3002\u5b83\u6709\u52a9\u4e8e\u4e86\u89e3\u6570\u636e\u5e93\u968f\u65f6\u95f4\u7684\u6027\u80fd\u60c5\u51b5\uff0c\u5e76\u8bc6\u522b\u4e0e\u6162\u67e5\u8be2\u6301\u7eed\u65f6\u95f4\u76f8\u5173\u7684\u8d8b\u52bf\u3002 Total Slow Queries log event \u6b64\u53ef\u89c6\u5316\u63d0\u4f9b\u4e86\u65e5\u5fd7\u4e8b\u4ef6\u4e2d\u6162\u67e5\u8be2\u603b\u6570\u3002\u5b83\u53ef\u4ee5\u7acb\u5373\u67e5\u770b\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u53d1\u751f\u4e86\u591a\u5c11\u4e2a\u6162\u67e5\u8be2\uff0c\u8fd9\u6709\u52a9\u4e8e\u8bc4\u4f30\u6570\u636e\u5e93\u7684\u6027\u80fd\u548c\u6f5c\u5728\u7684\u74f6\u9888\u3002 Average Slow Query Duration Average sq-duration \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u6162\u67e5\u8be2\u7684\u5e73\u5747\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u968f\u65f6\u95f4\u7684\u53d8\u5316\u3002\u5b83\u5bf9\u4e8e\u4e86\u89e3\u6570\u636e\u5e93\u4e2d\u6162\u67e5\u8be2\u7684\u5178\u578b\u6027\u80fd\u975e\u5e38\u6709\u4ef7\u503c\u3002 Top Slow Query IP sq-ip sq-duration \u6b64\u53ef\u89c6\u5316\u7a81\u51fa\u663e\u793a\u4e86\u4e0e\u6700\u6162\u67e5\u8be2\u76f8\u5173\u7684 IP \u5730\u5740\uff08\u201csq-ip\u201d\uff09\u53ca\u5176\u76f8\u5e94\u7684\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u3002\u5b83\u6709\u52a9\u4e8e\u8bc6\u522b\u6162\u67e5\u8be2\u7684\u6765\u6e90\u5e76\u786e\u5b9a\u4f18\u5316\u7684\u6f5c\u5728\u9886\u57df\u3002 Slow Query Scatter Plot sq-duration sq-ip sq-query \u6b64\u6563\u70b9\u56fe\u53ef\u89c6\u5316\u8868\u793a\u6162\u67e5\u8be2\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u3001\u6e90 IP \u5730\u5740\uff08\u201csq-ip\u201d\uff09\u4ee5\u53ca\u5b9e\u9645\u67e5\u8be2\u5185\u5bb9\uff08\u201csq-query\u201d\uff09\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5b83\u6709\u52a9\u4e8e\u7406\u89e3\u67e5\u8be2\u6027\u80fd\u6a21\u5f0f\uff0c\u5e76\u8bc6\u522b\u7279\u5b9a\u67e5\u8be2\u53ca\u5176\u6765\u6e90\u7684\u6f5c\u5728\u95ee\u9898\u3002 Slow Query Pie sq-query \u6b64\u997c\u56fe\u53ef\u89c6\u5316\u663e\u793a\u4e86\u57fa\u4e8e\u67e5\u8be2\u5185\u5bb9\uff08\u201csq-query\u201d\uff09\u7684\u6162\u67e5\u8be2\u5206\u5e03\u3002\u5b83\u63d0\u4f9b\u4e86\u5f15\u8d77\u6027\u80fd\u95ee\u9898\u7684\u67e5\u8be2\u7c7b\u578b\u7684\u6982\u89c8\uff0c\u4f7f\u60a8\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u4f18\u5316\u7279\u5b9a\u7684\u67e5\u8be2\u6a21\u5f0f\u3002 Slow Query Table Name Pie sq-table-name \u6b64\u997c\u56fe\u53ef\u89c6\u5316\u663e\u793a\u4e86\u57fa\u4e8e\u8bbf\u95ee\u7684\u8868\u540d\uff08\u201csq-table-name\u201d\uff09\u7684\u6162\u67e5\u8be2\u5206\u5e03\u3002\u5b83\u6709\u52a9\u4e8e\u8bc6\u522b\u54ea\u4e9b\u8868\u53d7\u5230\u6162\u67e5\u8be2\u7684\u5f71\u54cd\uff0c\u4ece\u800c\u53ef\u4ee5\u6709\u9488\u5bf9\u6027\u5730\u4f18\u5316\u7279\u5b9a\u8868\u3002 Top Slow Query sq-query \u6b64\u53ef\u89c6\u5316\u5448\u73b0\u4e86\u57fa\u4e8e\u67e5\u8be2\u5185\u5bb9\uff08\u201csq-query\u201d\uff09\u7684\u6700\u6162\u5355\u4e2a\u67e5\u8be2\u3002\u5b83\u6709\u52a9\u4e8e\u7cbe\u786e\u5b9a\u4f4d\u5bf9\u6027\u80fd\u4ea7\u751f","title":"Amazon RDS/Aurora"},{"location":"implementation-guide/aws-services/rds/#amazon-rdsaurora","text":"\u60a8\u53ef\u4ee5 \u5c06\u6570\u636e\u5e93\u5b9e\u4f8b\u65e5\u5fd7\u53d1\u5e03\u5230 Amazon CloudWatch Logs \u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u5c06\u6570\u636e\u5b58\u50a8\u5728\u9ad8\u5ea6\u8010\u7528\u7684\u5b58\u50a8\u4e2d\uff0c\u5e76\u4f7f\u7528 CloudWatch Logs \u4ee3\u7406\u7ba1\u7406\u6570\u636e\u3002","title":"Amazon RDS/Aurora \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/rds/#_1","text":"\u786e\u4fdd\u60a8\u7684\u6570\u636e\u5e93\u65e5\u5fd7\u5df2\u542f\u7528\u3002 \u67d0\u4e9b\u6570\u636e\u5e93\u65e5\u5fd7\u9ed8\u8ba4\u672a\u542f\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u53c2\u6570\u4ee5\u542f\u7528\u65e5\u5fd7\u3002 \u8bf7\u53c2\u9605 \u5982\u4f55\u4e3a Amazon RDS MySQL \u6570\u636e\u5e93\u5b9e\u4f8b\u542f\u7528\u548c\u76d1\u63a7\u65e5\u5fd7\uff1f \u4e86\u89e3\u5982\u4f55\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 CloudWatch \u65e5\u5fd7\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 RDS/Aurora MySQL \u53c2\u6570\u7684\u8981\u6c42\u3002 \u53c2\u6570 \u8981\u6c42 Audit Log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 MARIADB_AUDIT_PLUGIN \u9009\u9879\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u7ec4\u3002 General log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a general_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u901a\u7528\u65e5\u5fd7\u3002 Slow query log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a slow_query_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\u3002 Log output \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a log_output = FILE \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u5c06\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5e76\u5c06\u5b83\u4eec\u53d1\u5e03\u5230 CloudWatch Logs\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/aws-services/rds/#_2","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 RDS \u548c CloudWatch \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/rds/#_3","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon RDS \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u4e3a RDS \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b\u60a8\u7684 RDS \u65e5\u5fd7\u914d\u7f6e\uff0c\u5e76\u4ece CloudWatch \u6444\u53d6\u65e5\u5fd7\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 RDS \u96c6\u7fa4\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \uff0c\u9009\u62e9 \u6570\u636e\u5e93\u7c7b\u578b \u5e76\u5728 \u65e5\u5fd7\u7c7b\u578b\u548c\u4f4d\u7f6e \u4e2d\u8f93\u5165 CloudWatch \u65e5\u5fd7\u4f4d\u7f6e\u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/rds/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- RDS Log Ingestion \u89e3\u51b3\u65b9\u6848 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 )\u3002 Log Group Names <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6 SQS \u7684 KMS-CMK ARN\u3002\u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002**","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/rds/#_4","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 Visualization Name Source Field Description Controller db-identifier sq-table-name \u6b64\u53ef\u89c6\u5316\u5141\u8bb8\u7528\u6237\u6839\u636e\u201cdb-identifier\u201d\u548c\u201csq-table-name\u201d\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u7b5b\u9009\u3002 Total Log Events Overview db-identifier log event \u6b64\u53ef\u89c6\u5316\u5448\u73b0\u4e86\u6307\u5b9a\u6570\u636e\u5e93\uff08\u201cdb-identifier\u201d\uff09\u7684\u603b\u65e5\u5fd7\u4e8b\u4ef6\u6982\u89c8\u3002\u5b83\u6709\u52a9\u4e8e\u76d1\u63a7\u5404\u79cd\u65e5\u5fd7\u4e8b\u4ef6\u7684\u53d1\u751f\u9891\u7387\u3002 Slow Query History log event \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u6162\u67e5\u8be2\u65e5\u5fd7\u4e8b\u4ef6\u7684\u5386\u53f2\u6570\u636e\u3002\u5b83\u53ef\u4ee5\u5e2e\u52a9\u8ddf\u8e2a\u6162\u67e5\u8be2\u7684\u53d1\u751f\u6b21\u6570\u5e76\u8bc6\u522b\u6f5c\u5728\u7684\u6027\u80fd\u95ee\u9898\u3002 Average Slow Query Time History Average sq-duration \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u6162\u67e5\u8be2\u7684\u5e73\u5747\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u7684\u5386\u53f2\u8d8b\u52bf\u3002\u5b83\u6709\u52a9\u4e8e\u4e86\u89e3\u6570\u636e\u5e93\u968f\u65f6\u95f4\u7684\u6027\u80fd\u60c5\u51b5\uff0c\u5e76\u8bc6\u522b\u4e0e\u6162\u67e5\u8be2\u6301\u7eed\u65f6\u95f4\u76f8\u5173\u7684\u8d8b\u52bf\u3002 Total Slow Queries log event \u6b64\u53ef\u89c6\u5316\u63d0\u4f9b\u4e86\u65e5\u5fd7\u4e8b\u4ef6\u4e2d\u6162\u67e5\u8be2\u603b\u6570\u3002\u5b83\u53ef\u4ee5\u7acb\u5373\u67e5\u770b\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u53d1\u751f\u4e86\u591a\u5c11\u4e2a\u6162\u67e5\u8be2\uff0c\u8fd9\u6709\u52a9\u4e8e\u8bc4\u4f30\u6570\u636e\u5e93\u7684\u6027\u80fd\u548c\u6f5c\u5728\u7684\u74f6\u9888\u3002 Average Slow Query Duration Average sq-duration \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u6162\u67e5\u8be2\u7684\u5e73\u5747\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u968f\u65f6\u95f4\u7684\u53d8\u5316\u3002\u5b83\u5bf9\u4e8e\u4e86\u89e3\u6570\u636e\u5e93\u4e2d\u6162\u67e5\u8be2\u7684\u5178\u578b\u6027\u80fd\u975e\u5e38\u6709\u4ef7\u503c\u3002 Top Slow Query IP sq-ip sq-duration \u6b64\u53ef\u89c6\u5316\u7a81\u51fa\u663e\u793a\u4e86\u4e0e\u6700\u6162\u67e5\u8be2\u76f8\u5173\u7684 IP \u5730\u5740\uff08\u201csq-ip\u201d\uff09\u53ca\u5176\u76f8\u5e94\u7684\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u3002\u5b83\u6709\u52a9\u4e8e\u8bc6\u522b\u6162\u67e5\u8be2\u7684\u6765\u6e90\u5e76\u786e\u5b9a\u4f18\u5316\u7684\u6f5c\u5728\u9886\u57df\u3002 Slow Query Scatter Plot sq-duration sq-ip sq-query \u6b64\u6563\u70b9\u56fe\u53ef\u89c6\u5316\u8868\u793a\u6162\u67e5\u8be2\u6301\u7eed\u65f6\u95f4\uff08\u201csq-duration\u201d\uff09\u3001\u6e90 IP \u5730\u5740\uff08\u201csq-ip\u201d\uff09\u4ee5\u53ca\u5b9e\u9645\u67e5\u8be2\u5185\u5bb9\uff08\u201csq-query\u201d\uff09\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5b83\u6709\u52a9\u4e8e\u7406\u89e3\u67e5\u8be2\u6027\u80fd\u6a21\u5f0f\uff0c\u5e76\u8bc6\u522b\u7279\u5b9a\u67e5\u8be2\u53ca\u5176\u6765\u6e90\u7684\u6f5c\u5728\u95ee\u9898\u3002 Slow Query Pie sq-query \u6b64\u997c\u56fe\u53ef\u89c6\u5316\u663e\u793a\u4e86\u57fa\u4e8e\u67e5\u8be2\u5185\u5bb9\uff08\u201csq-query\u201d\uff09\u7684\u6162\u67e5\u8be2\u5206\u5e03\u3002\u5b83\u63d0\u4f9b\u4e86\u5f15\u8d77\u6027\u80fd\u95ee\u9898\u7684\u67e5\u8be2\u7c7b\u578b\u7684\u6982\u89c8\uff0c\u4f7f\u60a8\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u4f18\u5316\u7279\u5b9a\u7684\u67e5\u8be2\u6a21\u5f0f\u3002 Slow Query Table Name Pie sq-table-name \u6b64\u997c\u56fe\u53ef\u89c6\u5316\u663e\u793a\u4e86\u57fa\u4e8e\u8bbf\u95ee\u7684\u8868\u540d\uff08\u201csq-table-name\u201d\uff09\u7684\u6162\u67e5\u8be2\u5206\u5e03\u3002\u5b83\u6709\u52a9\u4e8e\u8bc6\u522b\u54ea\u4e9b\u8868\u53d7\u5230\u6162\u67e5\u8be2\u7684\u5f71\u54cd\uff0c\u4ece\u800c\u53ef\u4ee5\u6709\u9488\u5bf9\u6027\u5730\u4f18\u5316\u7279\u5b9a\u8868\u3002 Top Slow Query sq-query \u6b64\u53ef\u89c6\u5316\u5448\u73b0\u4e86\u57fa\u4e8e\u67e5\u8be2\u5185\u5bb9\uff08\u201csq-query\u201d\uff09\u7684\u6700\u6162\u5355\u4e2a\u67e5\u8be2\u3002\u5b83\u6709\u52a9\u4e8e\u7cbe\u786e\u5b9a\u4f4d\u5bf9\u6027\u80fd\u4ea7\u751f","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/s3/","text":"Amazon S3 \u65e5\u5fd7 Amazon S3 \u670d\u52a1\u5668\u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u5bf9\u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u53e6\u4e00\u4e2a S3 \u5b58\u50a8\u6876\u4e2d\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 S3 Bucket \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon S3 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u5b58\u50a8\u6876\u540d\u79f0 \u548c S3\u8bbf\u95ee\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- S3 Access Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 Visualization Name Source Field Description Total Requests log event \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u5bf9 AWS S3 \u5b58\u50a8\u6876\u53d1\u51fa\u7684\u8bf7\u6c42\u603b\u6570\uff0c\u5305\u62ec\u6240\u6709\u7c7b\u578b\u7684\u64cd\u4f5c\uff08\u4f8b\u5982 GET\u3001PUT\u3001DELETE \u7b49\uff09\u3002 Unique Visitors log event \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u8bbf\u95ee AWS S3 \u5b58\u50a8\u6876\u7684\u552f\u4e00\u8bbf\u5ba2\u6570\u91cf\uff0c\u901a\u8fc7\u5176 IP \u5730\u5740\u8fdb\u884c\u6807\u8bc6\u3002 Access History log event \u63d0\u4f9b\u4e86\u5bf9\u6240\u6709\u8bbf\u95ee AWS S3 \u5b58\u50a8\u6876\u7684\u8bbf\u95ee\u4e8b\u4ef6\u8fdb\u884c\u6309\u65f6\u95f4\u6392\u5e8f\u7684\u65e5\u5fd7\uff0c\u5305\u62ec\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u5176\u7ed3\u679c\u3002 Request By Operation operation \u6b64\u53ef\u89c6\u5316\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5206\u7c7b\uff0c\u5e76\u663e\u793a\u57fa\u4e8e\u4e0d\u540c\u64cd\u4f5c\uff08\u5982 GET\u3001PUT\u3001DELETE \u7b49\uff09\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Status Code http_status \u663e\u793a\u5bf9 AWS S3 \u5b58\u50a8\u6876\u53d1\u51fa\u7684\u8bf7\u6c42\u7684\u8ba1\u6570\uff0c\u6839\u636e\u670d\u52a1\u5668\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u8fdb\u884c\u5206\u7ec4\uff08\u4f8b\u5982 200\u3001404\u3001403 \u7b49\uff09\u3002 Status Code History http_status \u663e\u793a AWS S3 \u670d\u52a1\u5668\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pie http_status \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Time total_time \u6b64\u53ef\u89c6\u5316\u8ba1\u7b97\u5e76\u5c55\u793a AWS S3 \u5b58\u50a8\u6876\u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u8017\u65f6\uff08\u4f8b\u5982 GET\u3001PUT \u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u7b49\uff09\u3002 Average Turn Around Time turn_around_time \u663e\u793a\u4e0d\u540c\u64cd\u4f5c\u7684\u5e73\u5747\u5468\u8f6c\u65f6\u95f4\uff0c\u5373\u63a5\u6536\u8bf7\u6c42\u548c\u5c06\u54cd\u5e94\u53d1\u9001\u56de\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u65f6\u95f4\u3002 Data Transfer bytes_sent object_size operation \u63d0\u4f9b\u6709\u5173\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u89c1\u89e3\uff0c\u5305\u62ec\u4f20\u8f93\u7684\u603b\u5b57\u8282\u6570\u3001\u5bf9\u8c61\u5927\u5c0f\u548c\u6d89\u53ca\u7684\u4e0d\u540c\u64cd\u4f5c\u3002 Top Client IPs remote_ip \u663e\u793a\u53d1\u5f80 AWS S3 \u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u6570\u91cf\u6700\u591a\u7684\u524d\u51e0\u4e2a\u5ba2\u6237\u7aef IP \u5730\u5740\u3002 Top Request Keys key object_size \u663e\u793a AWS S3 \u5b58\u50a8\u6876\u4e2d\u6700\u5e38\u8bf7\u6c42\u7684\u952e\uff0c\u5e76\u663e\u793a\u76f8\u5e94\u7684\u5bf9\u8c61\u5927\u5c0f\u3002 Delete Events operation key version_id object_size remote_ip http_status error_code \u4e13\u6ce8\u4e8e\u5220\u9664\u4e8b\u4ef6\uff0c\u5305\u62ec\u64cd\u4f5c\u3001\u952e\u3001\u7248\u672c ID\u3001\u5bf9\u8c61\u5927\u5c0f\u3001\u5ba2\u6237\u7aef IP\u3001HTTP \u72b6\u6001\u7801\u548c\u4e0e\u5220\u9664\u8bf7\u6c42\u5173\u8054\u7684\u9519\u8bef\u4ee3\u7801\u3002 Access Failures operation key version_id object_size remote_ip http_status error_code \u5f3a\u8c03\u8bbf\u95ee\u5931\u8d25\uff0c\u663e\u793a\u5931\u8d25\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u64cd\u4f5c\u3001\u952e\u3001\u7248\u672c ID\u3001\u5bf9\u8c61\u5927\u5c0f\u3001\u5ba2\u6237\u7aef IP\u3001HTTP \u72b6\u6001\u7801\u548c\u9519\u8bef\u4ee3\u7801\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon S3"},{"location":"implementation-guide/aws-services/s3/#amazon-s3","text":"Amazon S3 \u670d\u52a1\u5668\u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u5bf9\u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u53e6\u4e00\u4e2a S3 \u5b58\u50a8\u6876\u4e2d\u3002","title":"Amazon S3 \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/s3/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 S3 Bucket \u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/s3/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon S3 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u5b58\u50a8\u6876\u540d\u79f0 \u548c S3\u8bbf\u95ee\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/s3/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- S3 Access Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/s3/#_3","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 Visualization Name Source Field Description Total Requests log event \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u5bf9 AWS S3 \u5b58\u50a8\u6876\u53d1\u51fa\u7684\u8bf7\u6c42\u603b\u6570\uff0c\u5305\u62ec\u6240\u6709\u7c7b\u578b\u7684\u64cd\u4f5c\uff08\u4f8b\u5982 GET\u3001PUT\u3001DELETE \u7b49\uff09\u3002 Unique Visitors log event \u6b64\u53ef\u89c6\u5316\u663e\u793a\u4e86\u8bbf\u95ee AWS S3 \u5b58\u50a8\u6876\u7684\u552f\u4e00\u8bbf\u5ba2\u6570\u91cf\uff0c\u901a\u8fc7\u5176 IP \u5730\u5740\u8fdb\u884c\u6807\u8bc6\u3002 Access History log event \u63d0\u4f9b\u4e86\u5bf9\u6240\u6709\u8bbf\u95ee AWS S3 \u5b58\u50a8\u6876\u7684\u8bbf\u95ee\u4e8b\u4ef6\u8fdb\u884c\u6309\u65f6\u95f4\u6392\u5e8f\u7684\u65e5\u5fd7\uff0c\u5305\u62ec\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u548c\u5176\u7ed3\u679c\u3002 Request By Operation operation \u6b64\u53ef\u89c6\u5316\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5206\u7c7b\uff0c\u5e76\u663e\u793a\u57fa\u4e8e\u4e0d\u540c\u64cd\u4f5c\uff08\u5982 GET\u3001PUT\u3001DELETE \u7b49\uff09\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Status Code http_status \u663e\u793a\u5bf9 AWS S3 \u5b58\u50a8\u6876\u53d1\u51fa\u7684\u8bf7\u6c42\u7684\u8ba1\u6570\uff0c\u6839\u636e\u670d\u52a1\u5668\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u8fdb\u884c\u5206\u7ec4\uff08\u4f8b\u5982 200\u3001404\u3001403 \u7b49\uff09\u3002 Status Code History http_status \u663e\u793a AWS S3 \u670d\u52a1\u5668\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u7684\u5386\u53f2\u8d8b\u52bf\u3002 Status Code Pie http_status \u4f7f\u7528\u997c\u56fe\u8868\u793a\u57fa\u4e8e\u4e0d\u540c HTTP \u72b6\u6001\u7801\u7684\u8bf7\u6c42\u5206\u5e03\u3002 Average Time total_time \u6b64\u53ef\u89c6\u5316\u8ba1\u7b97\u5e76\u5c55\u793a AWS S3 \u5b58\u50a8\u6876\u4e2d\u5404\u79cd\u64cd\u4f5c\u7684\u5e73\u5747\u8017\u65f6\uff08\u4f8b\u5982 GET\u3001PUT \u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4\u7b49\uff09\u3002 Average Turn Around Time turn_around_time \u663e\u793a\u4e0d\u540c\u64cd\u4f5c\u7684\u5e73\u5747\u5468\u8f6c\u65f6\u95f4\uff0c\u5373\u63a5\u6536\u8bf7\u6c42\u548c\u5c06\u54cd\u5e94\u53d1\u9001\u56de\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u65f6\u95f4\u3002 Data Transfer bytes_sent object_size operation \u63d0\u4f9b\u6709\u5173\u6570\u636e\u4f20\u8f93\u6d3b\u52a8\u7684\u89c1\u89e3\uff0c\u5305\u62ec\u4f20\u8f93\u7684\u603b\u5b57\u8282\u6570\u3001\u5bf9\u8c61\u5927\u5c0f\u548c\u6d89\u53ca\u7684\u4e0d\u540c\u64cd\u4f5c\u3002 Top Client IPs remote_ip \u663e\u793a\u53d1\u5f80 AWS S3 \u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u6570\u91cf\u6700\u591a\u7684\u524d\u51e0\u4e2a\u5ba2\u6237\u7aef IP \u5730\u5740\u3002 Top Request Keys key object_size \u663e\u793a AWS S3 \u5b58\u50a8\u6876\u4e2d\u6700\u5e38\u8bf7\u6c42\u7684\u952e\uff0c\u5e76\u663e\u793a\u76f8\u5e94\u7684\u5bf9\u8c61\u5927\u5c0f\u3002 Delete Events operation key version_id object_size remote_ip http_status error_code \u4e13\u6ce8\u4e8e\u5220\u9664\u4e8b\u4ef6\uff0c\u5305\u62ec\u64cd\u4f5c\u3001\u952e\u3001\u7248\u672c ID\u3001\u5bf9\u8c61\u5927\u5c0f\u3001\u5ba2\u6237\u7aef IP\u3001HTTP \u72b6\u6001\u7801\u548c\u4e0e\u5220\u9664\u8bf7\u6c42\u5173\u8054\u7684\u9519\u8bef\u4ee3\u7801\u3002 Access Failures operation key version_id object_size remote_ip http_status error_code \u5f3a\u8c03\u8bbf\u95ee\u5931\u8d25\uff0c\u663e\u793a\u5931\u8d25\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u64cd\u4f5c\u3001\u952e\u3001\u7248\u672c ID\u3001\u5bf9\u8c61\u5927\u5c0f\u3001\u5ba2\u6237\u7aef IP\u3001HTTP \u72b6\u6001\u7801\u548c\u9519\u8bef\u4ee3\u7801\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/s3/#_4","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/vpc/","text":"VPC \u6d41\u65e5\u5fd7 VPC \u6d41\u65e5\u5fd7 \u53ef\u4ee5\u8ba9\u60a8\u53ef\u4ee5\u6355\u83b7\u6709\u5173\u4f20\u5165\u548c\u4f20\u51fa\u60a8\u7684 VPC \u4e2d\u7f51\u7edc\u63a5\u53e3\u7684 IP \u6d41\u91cf\u7684\u4fe1\u606f\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 \u65e5\u5fd7\u901a\u76ee\u524d\u652f\u6301\u5c06\u6d41\u65e5\u5fd7\u6570\u636e\u53d1\u5e03\u5230 Amazon S3 \u6216 CloudWatch \u65e5\u5fd7\u7ec4\u7684 VPC\uff1b\u5728\u53d1\u5e03\u5230S3\u7684\u573a\u666f\u4e0b\uff0c\u8be5 S3 \u6876\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 VPC Flow \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 VPC \u6d41\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 VPC\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 VPC \u540d\u5b57 \u548c VPC \u6d41\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u65e5\u5fd7\u6765\u6e90 \u4e2d\uff0c\u9009\u62e9 S3 \u6216\u8005 CloudWatch \u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684 VPC \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- VPC Flow Logs Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Global Filters account-id region vpc-id subnet-id action flow-direction log-status protocol-code type \u6839\u636e\u5e10\u6237 ID\u3001\u533a\u57df\u3001VPC ID \u548c\u5176\u4ed6\u6761\u4ef6\u7b5b\u9009\u56fe\u8868\u3002 Total Requests log event \u663e\u793a\u9009\u5b9a\u65f6\u95f4\u6bb5\u5185 VPC \u6d41\u65e5\u5fd7\u8bb0\u5f55\u7684\u7f51\u7edc\u8bf7\u6c42\u603b\u6570\u3002 Request History log event \u63d0\u4f9b\u4e00\u4e2a\u67f1\u72b6\u56fe\uff0c\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u60c5\u51b5\u3002 Requests By VPC ID vpc-id \u4f7f\u7528\u997c\u56fe\u663e\u793a\u6839\u636e\u6e90 VPC \u7684\u6bd4\u4f8b\u5206\u5e03\u7684\u7f51\u7edc\u8bf7\u6c42\u3002 Total Requests By Action action \u663e\u793a\u968f\u65f6\u95f4\u6bb5\u5212\u5206\u7684\u6309\u64cd\u4f5c\u5206\u6bb5\u7684\u8bf7\u6c42\u603b\u91cf\u3002 Total Bytes bytes \u63d0\u4f9b\u5bf9\u53d7\u76d1\u63a7\u7684 VPC\u3001\u5b50\u7f51\u3001\u7f51\u7edc\u63a5\u53e3\u548c\u5b89\u5168\u7ec4\u4e2d\u6574\u4f53\u5e26\u5bbd\u4f7f\u7528\u548c\u6d41\u91cf\u6a21\u5f0f\u7684\u53ef\u89c1\u6027\u3002 Total Packets packets \u663e\u793a\u968f\u65f6\u95f4\u7684\u603b\u8bb0\u5f55\u6570\u636e\u5305\uff0c\u4ee5\u53ef\u89c6\u5316\u8d8b\u52bf\u3001\u9ad8\u5cf0\u548c\u4f4e\u8c37\u3002 Bytes Metric bytes flow-direction \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\uff0c\u6839\u636e\u6d41\u65e5\u5fd7\u8bb0\u5f55\u7684\u4e00\u7cfb\u5217\u6d41\u4e2d\u7684\u4f20\u5165\uff08\u5165\u53e3\uff09\u548c\u4f20\u51fa\uff08\u51fa\u53e3\uff09\u7f51\u7edc\u6d41\u91cf\u7684\u5b57\u8282\u5206\u5e03\u3002 Requests By Direction flow-direction \u63d0\u4f9b\u4f20\u5165\u4e0e\u4f20\u51fa\u8bf7\u6c42\u7684\u6bd4\u4f8b\u7ec4\u6210\u7684\u53ef\u89c1\u6027\u3002 Total Requests By Type type \u663e\u793a\u6bcf\u79cd\u7c7b\u578b\u7684\u6d41\u91cf\u91cf\u3002\u8fd9\u63d0\u4f9b\u4e86\u5bf9\u7a7f\u8d8a\u73af\u5883\u7684\u7f51\u7edc\u8bf7\u6c42\u7684\u534f\u8bae\u7ec4\u6210\u7684\u53ef\u89c1\u6027\u3002 Top Source Bytes srcaddr bytes \u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u663e\u793a\u4f20\u8f93\u51fa\u6700\u9ad8\u6570\u636e\u91cf\u7684\u6e90 IP \u5730\u5740\u3002 Top Destination Bytes dstaddr bytes \u4f7f\u60a8\u80fd\u591f\u76d1\u89c6\u548c\u5206\u6790\u4ece\u60a8\u7684 VPC \u5230\u5916\u90e8\u76ee\u6807\u7684\u51fa\u7ad9\u6d41\u91cf\u3002 Top Source Requests srcaddr \u5141\u8bb8\u60a8\u67e5\u770b\u5728\u60a8\u7684 VPC \u5185\u90e8\u54ea\u4e9b\u8d44\u6e90\u53d1\u8d77\u4e86\u5916\u90e8\u8bf7\u6c42\u3002 Top Destination Requests dstaddr \u5141\u8bb8\u60a8\u67e5\u770b\u54ea\u4e9b\u5916\u90e8\u4e3b\u673a\u53d7\u5230\u60a8\u7684 VPC \u8d44\u6e90\u7684\u6700\u591a\u8054\u7cfb\u3002 Requests by Protocol protocol-code \u663e\u793a\u6309\u6d41\u91cf\u7c7b\u578b\uff08TCP\u3001UDP\u3001ICMP \u7b49\uff09\u5206\u5272\u7684 VPC \u6d41\u65e5\u5fd7\u8bb0\u5f55\u7684\u7f51\u7edc\u6d41\u3002 Requests by Status log-status \u901a\u8fc7\u6d41\u91cf\u72b6\u6001\uff08\u5df2\u63a5\u53d7\u3001\u5df2\u62d2\u7edd\u6216\u5176\u4ed6\uff09\u5bf9\u7f51\u7edc\u6d41\u8fdb\u884c\u4e86\u5206\u89e3\u3002 Top Sources AWS Services pkt-src-aws-service \u663e\u793a\u6765\u81ea\u9876\u7ea7 AWS \u6e90\uff08\u5982 S3\u3001CloudFront\u3001Lambda \u7b49\uff09\u7684\u6d41\u7684\u6bd4\u4f8b\u5206\u5e03\uff0c\u4ee5\u9009\u5b9a\u7684\u65f6\u95f4\u6bb5\u4e3a\u57fa\u7840\u3002 Top Destination AWS Services pkt-dst-aws-service \u901a\u8fc7\u5728 VPC \u5b50\u7f51/\u63a5\u53e3\u4e0a\u542f\u7528\u6d41\u65e5\u5fd7\uff0c\u5e76\u5728\u4ee5 ACCEPT \u64cd\u4f5c\u4e3a\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u7b5b\u9009\u51fa\u4ece\u60a8\u7684 VPC \u5230\u5404\u79cd AWS \u670d\u52a1\u7684\u51fa\u7ad9\u6d41\u91cf\uff0c\u53ef\u4ee5\u67e5\u770b\u4ece\u60a8\u7684 VPC \u5230\u5404\u79cd AWS \u670d\u52a1\u7684\u51fa\u7ad9\u6d41\u91cf\u3002 Network Flow srcaddr dstaddr \u5141\u8bb8\u60a8\u67e5\u770b\u6709\u5173\u5728\u60a8\u7684 VPC \u4e2d\u7684\u7f51\u7edc\u63a5\u53e3\u4e4b\u95f4\u51fa\u5165\u7684 IP \u6d41\u91cf\u7684\u4fe1\u606f\u3002 Heat Map srcaddr dstaddr \u63d0\u4f9b\u60a8\u7684\u6d41\u91cf\u65e5\u5fd7\u6570\u636e\u4e2d\u6e90 IP \u5730\u5740\u548c\u76ee\u6807 IP \u5730\u5740\u4e4b\u95f4\u8fde\u63a5\u7684\u89c6\u89c9\u6458\u8981\u3002 Egress Traffic Path traffic-path \u5141\u8bb8\u60a8\u5728 VPC \u7f51\u7edc\u63a5\u53e3\u4e0a\u542f\u7528\u6d41\u65e5\u5fd7\uff0c\u4ee5\u6355\u83b7\u6709\u5173\u8fdb\u51fa\u8be5\u63a5\u53e3\u7684\u6240\u6709 IP \u6d41\u91cf\u7684\u4fe1\u606f\u3002 Search @timestamp account-id vpc-id flow-direction action protocol-code srcaddr scaport dstaddr dstport bytes packets log-status \u901a\u8fc7\u5bf9\u8be6\u7ec6\u6d41\u91cf\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u641c\u7d22\uff0c\u53ef\u4ee5\u7cbe\u786e\u5b9a\u4f4d\u5206\u6790\u5b89\u5168\u4e8b\u4ef6\u3001\u7f51\u7edc\u95ee\u9898\u3001\u4f7f\u7528\u6a21\u5f0f\u7684\u53d8\u5316\u7b49\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"VPC Flow Log"},{"location":"implementation-guide/aws-services/vpc/#vpc","text":"VPC \u6d41\u65e5\u5fd7 \u53ef\u4ee5\u8ba9\u60a8\u53ef\u4ee5\u6355\u83b7\u6709\u5173\u4f20\u5165\u548c\u4f20\u51fa\u60a8\u7684 VPC \u4e2d\u7f51\u7edc\u63a5\u53e3\u7684 IP \u6d41\u91cf\u7684\u4fe1\u606f\u3002","title":"VPC \u6d41\u65e5\u5fd7"},{"location":"implementation-guide/aws-services/vpc/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u3002 \u91cd\u8981 \u65e5\u5fd7\u901a\u76ee\u524d\u652f\u6301\u5c06\u6d41\u65e5\u5fd7\u6570\u636e\u53d1\u5e03\u5230 Amazon S3 \u6216 CloudWatch \u65e5\u5fd7\u7ec4\u7684 VPC\uff1b\u5728\u53d1\u5e03\u5230S3\u7684\u573a\u666f\u4e0b\uff0c\u8be5 S3 \u6876\u5fc5\u987b\u4e0e\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/vpc/#_2","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 VPC Flow \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 VPC \u6d41\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 VPC\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 VPC \u540d\u5b57 \u548c VPC \u6d41\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u65e5\u5fd7\u6765\u6e90 \u4e2d\uff0c\u9009\u62e9 S3 \u6216\u8005 CloudWatch \u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684 VPC \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/vpc/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- VPC Flow Logs Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Other Suffix> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Age to Warm Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u81f3\u6e29\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 7d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53OpenSearch \u4e2d\u542f\u7528\u4e86\u6e29\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Cold Storage <\u53ef\u9009\u8f93\u5165> \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u65f6\u95f4\uff08\u4f8b\u5982 30d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u4ec5\u5f53 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Age to Retain <\u53ef\u9009\u8f93\u5165> \u4fdd\u7559\u7d22\u5f15\u7684\u65f6\u95f4\uff08\u4f8b\u5982 180d\uff09\u3002\u7d22\u5f15\u65f6\u95f4\u662f\u4ece\u521b\u5efa\u5230\u73b0\u5728\u4e4b\u95f4\u7684\u65f6\u95f4\u3002\u652f\u6301\u7684\u5355\u4f4d\u662f d\uff08\u5929\uff09\u548c h\uff08\u5c0f\u65f6\uff09\u3002\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u8be5\u7d22\u5f15\u3002 Rollover Index Size <\u53ef\u9009\u8f93\u5165> \u7d22\u5f15\u6eda\u52a8\u6240\u9700\u7684\u5206\u7247\u5927\u5c0f\uff08\u4f8b\u5982 30GB\uff09\u3002 Index Suffix yyyy-MM-dd \u7d22\u5f15\u540e\u7f00\u683c\u5f0f\uff08\u4f8b\u5982\uff1ayyyy-MM-dd\u3001yyyy-MM-dd-HH\uff09\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<Log Type>-<Index Suffix>-000001 \u3002 Compression type best_compression \u7528\u4e8e\u538b\u7f29\u5b58\u50a8\u6570\u636e\u7684\u538b\u7f29\u7c7b\u578b\u3002 \u53ef\u7528\u503c\u4e3a best_compression \u548c default\u3002 Refresh Interval 1s \u7d22\u5f15\u591a\u4e45\u5237\u65b0\uff0c\u5373\u5237\u65b0\u7d22\u5f15\u6700\u8fd1\u7684\u66f4\u6539\u6570\u636e\u5e76\u4f7f\u5b83\u4eec\u53ef\u7528\u4e8e\u641c\u7d22\u3002 \u53ef\u4ee5\u8bbe\u7f6e\u4e3a -1 \u4ee5\u7981\u7528\u5237\u65b0\u3002 \u9ed8\u8ba4\u4e3a 1\u79d2\u3002 EnableS3Notification True \u4e00\u4e2a\u4e8c\u8fdb\u5236\u9009\u9879\uff0c\u7528\u4e8e\u542f\u7528\u6216\u7981\u7528\u9488\u5bf9Amazon S3\u5b58\u50a8\u6876\u7684\u901a\u77e5\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u3002 LogProcessorRoleName <\u53ef\u9009> \u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u6307\u5b9a\u4e00\u4e2a\u89d2\u8272\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 QueueName <\u53ef\u9009> \u4e3aSQS\u6307\u5b9a\u4e00\u4e2a\u961f\u5217\u540d\u79f0\u3002\u8be5\u540d\u79f0\u4e0d\u80fd\u4e0e\u73b0\u6709\u89d2\u8272\u540d\u79f0\u91cd\u590d\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a\u540d\u79f0\u3002\u53ef\u9009\u53c2\u6570\uff0c\u4e0d\u662f\u5fc5\u586b\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/vpc/#_3","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Global Filters account-id region vpc-id subnet-id action flow-direction log-status protocol-code type \u6839\u636e\u5e10\u6237 ID\u3001\u533a\u57df\u3001VPC ID \u548c\u5176\u4ed6\u6761\u4ef6\u7b5b\u9009\u56fe\u8868\u3002 Total Requests log event \u663e\u793a\u9009\u5b9a\u65f6\u95f4\u6bb5\u5185 VPC \u6d41\u65e5\u5fd7\u8bb0\u5f55\u7684\u7f51\u7edc\u8bf7\u6c42\u603b\u6570\u3002 Request History log event \u63d0\u4f9b\u4e00\u4e2a\u67f1\u72b6\u56fe\uff0c\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u60c5\u51b5\u3002 Requests By VPC ID vpc-id \u4f7f\u7528\u997c\u56fe\u663e\u793a\u6839\u636e\u6e90 VPC \u7684\u6bd4\u4f8b\u5206\u5e03\u7684\u7f51\u7edc\u8bf7\u6c42\u3002 Total Requests By Action action \u663e\u793a\u968f\u65f6\u95f4\u6bb5\u5212\u5206\u7684\u6309\u64cd\u4f5c\u5206\u6bb5\u7684\u8bf7\u6c42\u603b\u91cf\u3002 Total Bytes bytes \u63d0\u4f9b\u5bf9\u53d7\u76d1\u63a7\u7684 VPC\u3001\u5b50\u7f51\u3001\u7f51\u7edc\u63a5\u53e3\u548c\u5b89\u5168\u7ec4\u4e2d\u6574\u4f53\u5e26\u5bbd\u4f7f\u7528\u548c\u6d41\u91cf\u6a21\u5f0f\u7684\u53ef\u89c1\u6027\u3002 Total Packets packets \u663e\u793a\u968f\u65f6\u95f4\u7684\u603b\u8bb0\u5f55\u6570\u636e\u5305\uff0c\u4ee5\u53ef\u89c6\u5316\u8d8b\u52bf\u3001\u9ad8\u5cf0\u548c\u4f4e\u8c37\u3002 Bytes Metric bytes flow-direction \u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\uff0c\u6839\u636e\u6d41\u65e5\u5fd7\u8bb0\u5f55\u7684\u4e00\u7cfb\u5217\u6d41\u4e2d\u7684\u4f20\u5165\uff08\u5165\u53e3\uff09\u548c\u4f20\u51fa\uff08\u51fa\u53e3\uff09\u7f51\u7edc\u6d41\u91cf\u7684\u5b57\u8282\u5206\u5e03\u3002 Requests By Direction flow-direction \u63d0\u4f9b\u4f20\u5165\u4e0e\u4f20\u51fa\u8bf7\u6c42\u7684\u6bd4\u4f8b\u7ec4\u6210\u7684\u53ef\u89c1\u6027\u3002 Total Requests By Type type \u663e\u793a\u6bcf\u79cd\u7c7b\u578b\u7684\u6d41\u91cf\u91cf\u3002\u8fd9\u63d0\u4f9b\u4e86\u5bf9\u7a7f\u8d8a\u73af\u5883\u7684\u7f51\u7edc\u8bf7\u6c42\u7684\u534f\u8bae\u7ec4\u6210\u7684\u53ef\u89c1\u6027\u3002 Top Source Bytes srcaddr bytes \u5728\u6240\u9009\u65f6\u95f4\u6bb5\u5185\u663e\u793a\u4f20\u8f93\u51fa\u6700\u9ad8\u6570\u636e\u91cf\u7684\u6e90 IP \u5730\u5740\u3002 Top Destination Bytes dstaddr bytes \u4f7f\u60a8\u80fd\u591f\u76d1\u89c6\u548c\u5206\u6790\u4ece\u60a8\u7684 VPC \u5230\u5916\u90e8\u76ee\u6807\u7684\u51fa\u7ad9\u6d41\u91cf\u3002 Top Source Requests srcaddr \u5141\u8bb8\u60a8\u67e5\u770b\u5728\u60a8\u7684 VPC \u5185\u90e8\u54ea\u4e9b\u8d44\u6e90\u53d1\u8d77\u4e86\u5916\u90e8\u8bf7\u6c42\u3002 Top Destination Requests dstaddr \u5141\u8bb8\u60a8\u67e5\u770b\u54ea\u4e9b\u5916\u90e8\u4e3b\u673a\u53d7\u5230\u60a8\u7684 VPC \u8d44\u6e90\u7684\u6700\u591a\u8054\u7cfb\u3002 Requests by Protocol protocol-code \u663e\u793a\u6309\u6d41\u91cf\u7c7b\u578b\uff08TCP\u3001UDP\u3001ICMP \u7b49\uff09\u5206\u5272\u7684 VPC \u6d41\u65e5\u5fd7\u8bb0\u5f55\u7684\u7f51\u7edc\u6d41\u3002 Requests by Status log-status \u901a\u8fc7\u6d41\u91cf\u72b6\u6001\uff08\u5df2\u63a5\u53d7\u3001\u5df2\u62d2\u7edd\u6216\u5176\u4ed6\uff09\u5bf9\u7f51\u7edc\u6d41\u8fdb\u884c\u4e86\u5206\u89e3\u3002 Top Sources AWS Services pkt-src-aws-service \u663e\u793a\u6765\u81ea\u9876\u7ea7 AWS \u6e90\uff08\u5982 S3\u3001CloudFront\u3001Lambda \u7b49\uff09\u7684\u6d41\u7684\u6bd4\u4f8b\u5206\u5e03\uff0c\u4ee5\u9009\u5b9a\u7684\u65f6\u95f4\u6bb5\u4e3a\u57fa\u7840\u3002 Top Destination AWS Services pkt-dst-aws-service \u901a\u8fc7\u5728 VPC \u5b50\u7f51/\u63a5\u53e3\u4e0a\u542f\u7528\u6d41\u65e5\u5fd7\uff0c\u5e76\u5728\u4ee5 ACCEPT \u64cd\u4f5c\u4e3a\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u7b5b\u9009\u51fa\u4ece\u60a8\u7684 VPC \u5230\u5404\u79cd AWS \u670d\u52a1\u7684\u51fa\u7ad9\u6d41\u91cf\uff0c\u53ef\u4ee5\u67e5\u770b\u4ece\u60a8\u7684 VPC \u5230\u5404\u79cd AWS \u670d\u52a1\u7684\u51fa\u7ad9\u6d41\u91cf\u3002 Network Flow srcaddr dstaddr \u5141\u8bb8\u60a8\u67e5\u770b\u6709\u5173\u5728\u60a8\u7684 VPC \u4e2d\u7684\u7f51\u7edc\u63a5\u53e3\u4e4b\u95f4\u51fa\u5165\u7684 IP \u6d41\u91cf\u7684\u4fe1\u606f\u3002 Heat Map srcaddr dstaddr \u63d0\u4f9b\u60a8\u7684\u6d41\u91cf\u65e5\u5fd7\u6570\u636e\u4e2d\u6e90 IP \u5730\u5740\u548c\u76ee\u6807 IP \u5730\u5740\u4e4b\u95f4\u8fde\u63a5\u7684\u89c6\u89c9\u6458\u8981\u3002 Egress Traffic Path traffic-path \u5141\u8bb8\u60a8\u5728 VPC \u7f51\u7edc\u63a5\u53e3\u4e0a\u542f\u7528\u6d41\u65e5\u5fd7\uff0c\u4ee5\u6355\u83b7\u6709\u5173\u8fdb\u51fa\u8be5\u63a5\u53e3\u7684\u6240\u6709 IP \u6d41\u91cf\u7684\u4fe1\u606f\u3002 Search @timestamp account-id vpc-id flow-direction action protocol-code srcaddr scaport dstaddr dstport bytes packets log-status \u901a\u8fc7\u5bf9\u8be6\u7ec6\u6d41\u91cf\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u641c\u7d22\uff0c\u53ef\u4ee5\u7cbe\u786e\u5b9a\u4f4d\u5206\u6790\u5b89\u5168\u4e8b\u4ef6\u3001\u7f51\u7edc\u95ee\u9898\u3001\u4f7f\u7528\u6a21\u5f0f\u7684\u53d8\u5316\u7b49\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/vpc/#_4","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/waf/","text":"AWS WAF \u65e5\u5fd7 WAF \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u6709\u5173\u7531\u60a8\u7684 Web ACL \u5206\u6790\u7684\u6d41\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bb0\u5f55\u7684\u4fe1\u606f\u5305\u62ec AWS WAF \u4ece\u60a8\u7684 AWS \u8d44\u6e90\u6536\u5230 Web \u8bf7\u6c42\u7684\u65f6\u95f4\u3001\u6709\u5173\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u4ee5\u53ca\u6709\u5173\u8bf7\u6c42\u5339\u914d\u7684\u89c4\u5219\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u6216\u8005 Light Engine \u5206\u6790\u5f15\u64ce\u4e2d\u3002 \u91cd\u8981\u63d0\u793a \u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5fc5\u987b\u4e0e Web ACL \u90e8\u7f72\u5728\u540c\u4e00\u4e2a\u53ef\u7528\u533a\u4e2d\uff0c\u5426\u5219\u60a8\u5c06\u65e0\u6cd5\u521b\u5efaWAF\u65e5\u5fd7\u6444\u53d6\u3002 \u4f8b\u5982: \u5982\u679c\u60a8\u7684 Web ACL \u4e0e Global Cloudfront \u76f8\u5173\u8054\uff0c\u90a3\u4e48\u60a8\u7684\u65e5\u5fd7\u901a \u5fc5\u987b\u90e8\u7f72\u5728 us-east-1\u3002 \u5982\u679c\u60a8\u7684 Web ACL \u4e0e\u5728 Ohio \u7684 AWS \u8d44\u6e90\u76f8\u5173\u8054\uff0c\u90a3\u4e48\u60a8\u7684\u65e5\u5fd7\u901a \u5fc5\u987b\u90e8\u7f72\u5728 us-east-2\u3002 WAF \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u548c\u65e5\u5fd7\u901a \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u65e5\u5fd7\u901a \u4e0d\u652f\u6301 WAF Classic \u4ea7\u751f\u7684\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55 \u4ece WAF Classic \u8fc1\u79fb\u5230\u65b0 AWS WAF \u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 (Amazon OpenSearch) \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 OpenSearch , \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u6444\u53d6\u9009\u9879 \u4e2d. \u9009\u62e9 \u91c7\u6837 \u6216 \u5168\u91cf . \u5bf9\u4e8e \u91c7\u6837 \uff0c \u8bf7\u8f93\u5165\u6444\u53d6\u91c7\u6837\u65e5\u5fd7\u7684\u9891\u7387\u3002 \u5bf9\u4e8e \u5168\u91cf \uff0c \u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\u6216\u5728\u624b\u52a8\u6a21\u5f0f\u4e2d\u8f93\u5165\u65e5\u5fd7\u4f4d\u7f6e\u3002\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u65e5\u5fd7\u901a\u5c06\u81ea\u52a8\u542f\u7528\u4f7f\u7528 Kinesis Data Firehose \u6d41\u4f5c\u4e3a WAF \u65e5\u5fd7\u7684\u76ee\u6807\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Web ACL \u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- waf Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f AWS \u6d77\u5916\u533a\u57df (\u91c7\u6837\u8bf7\u6c42) \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df (\u91c7\u6837\u8bf7\u6c42) \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 \u5168\u91cf\u8bf7\u6c42 \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 \u91c7\u6837\u8bf7\u6c42 \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 WebACL Names <\u9700\u8981\u8f93\u5165> WebACL \u540d\u79f0\u5217\u8868\uff0c\u4ee5\u9017\u53f7\u5206\u9694\u3002 Interval 1 \u83b7\u53d6\u91c7\u6837\u65e5\u5fd7\u7684\u9ed8\u8ba4\u65f6\u95f4\u95f4\u9694\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\u3002 \u901a\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Web ACLs log event webaclName \u663e\u793a\u6309 Web ACL \u540d\u79f0\u5206\u7ec4\u7684\u8bf7\u6c42\u603b\u6570\u3002 Total Requests log event \u663e\u793a\u603b\u7684 Web \u8bf7\u6c42\u6570\u3002 Request Timeline log event \u63d0\u4f9b\u4e00\u4e2a\u67f1\u72b6\u56fe\uff0c\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u60c5\u51b5\u3002 WAF Rules terminatingRuleId \u63d0\u4f9b\u4e00\u4e2a\u997c\u56fe\uff0c\u663e\u793a Web ACL \u4e2d\u7684 WAF \u89c4\u5219\u5206\u5e03\u60c5\u51b5\u3002 Total Blocked Requests log event \u663e\u793a\u88ab\u963b\u6b62\u7684 Web \u8bf7\u6c42\u603b\u6570\u3002 Unique Client IPs Request.ClientIP \u663e\u793a\u901a\u8fc7\u5ba2\u6237\u7aef IP \u5730\u5740\u8bc6\u522b\u7684\u552f\u4e00\u8bbf\u95ee\u8005\u3002 Country or Region By Request Request.Country \u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u76f8\u5e94\u56fd\u5bb6\u6216\u5730\u533a\u5206\u7ec4\uff09\u3002 Http Methods Request.HTTPMethod \u4f7f\u7528\u997c\u56fe\u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309 HTTP \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4\uff0c\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u3002 Http Versions Request.HTTPVersion \u4f7f\u7528\u997c\u56fe\u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309 HTTP \u534f\u8bae\u7248\u672c\u5206\u7ec4\uff0c\u5982 HTTP/2.0\u3001HTTP/1.1 \u7b49\uff09\u3002 Top WebACLs webaclName webaclId.keyword Web \u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u9876\u7ea7 Web \u8bf7\u6c42\u3002 Top Hosts host \u5217\u51fa\u4e0e\u4e8b\u4ef6\u5173\u8054\u7684\u6e90 IP \u5730\u5740\uff0c\u4f7f\u60a8\u80fd\u591f\u8bc6\u522b\u548c\u8c03\u67e5\u6f5c\u5728\u7684\u53ef\u7591\u6216\u672a\u7ecf\u6388\u6743\u7684\u6d3b\u52a8\u3002 Top Request URIs Request.URI \u524d 10 \u4e2a\u8bf7\u6c42 URI\u3002 Top Countries or Regions Request.country Web ACL \u8bbf\u95ee\u4e2d\u524d 10 \u4e2a\u56fd\u5bb6\u3002 Top Rules terminatingRuleId Web ACL \u4e2d\u5339\u914d\u8bf7\u6c42\u7684\u524d 10 \u6761\u89c4\u5219\u3002 Top Client IPs Request.ClientIP \u63d0\u4f9b\u524d 10 \u4e2a IP \u5730\u5740\u3002 Top User Agents userAgent \u63d0\u4f9b\u524d 10 \u4e2a\u7528\u6237\u4ee3\u7406\u3002 Block Allow Host Uri host Request.URI action \u63d0\u4f9b\u88ab\u963b\u6b62\u6216\u5141\u8bb8\u7684 Web \u8bf7\u6c42\u3002 Top Labels with Host, Uri labels.name host Request.URI \u4f7f\u7528\u4e3b\u673a\u548c URI \u7684\u6807\u7b7e\u7684\u524d 10 \u4e2a\u8be6\u7ec6\u65e5\u5fd7\u3002 View by Matching Rule sc-status \u8be5\u53ef\u89c6\u5316\u56fe\u8868\u63d0\u4f9b\u4e86\u7531 DQL\u201cterminatingRuleId:*\u201d\u63d0\u4f9b\u7684\u8be6\u7ec6\u65e5\u5fd7\u3002 View by httpRequest args,uri,path sc-status \u8be5\u53ef\u89c6\u5316\u56fe\u8868\u63d0\u4f9b\u4e86\u7531 DQL \u63d0\u4f9b\u7684\u8be6\u7ec6\u65e5\u5fd7\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Light Engine\uff09 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 Light Engine , \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u6444\u53d6\u9009\u9879 \u4e2d. \u9009\u62e9 \u5168\u91cf . \u5bf9\u4e8e \u5168\u91cf \uff0c \u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\u6216\u5728\u624b\u52a8\u6a21\u5f0f\u4e2d\u8f93\u5165\u65e5\u5fd7\u4f4d\u7f6e\u3002\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u65e5\u5fd7\u901a\u5c06\u81ea\u52a8\u542f\u7528\u4f7f\u7528 Kinesis Data Firehose \u6d41\u4f5c\u4e3a WAF \u65e5\u5fd7\u7684\u76ee\u6807\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\uff0c\u6211\u4eec\u5df2\u7ecf\u4e3a\u4f60\u9884\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8868\u540d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 Pipeline settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Pipeline Id <\u9700\u8981\u8f93\u5165> pipeline\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u60a8\u9700\u8981\u521b\u5efa\u591a\u4e2awaf pipeline\uff0c\u5c06\u4e0d\u540c\u7684waf\u65e5\u5fd7\u5199\u5165\u5230\u4e0d\u540c\u7684\u8868\u4e2d\u65f6\uff0c\u5219\u5fc5\u987b\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7 uuidgenerator \u751f\u6210\u552f\u4e00\u7684Pipeline Id\u3002 Staging Bucket Prefix AWSLogs/WAFLogs \u65e5\u5fd7\u5728\u4e34\u65f6\u5b58\u50a8\u533a\u7684\u5b58\u653e\u76ee\u5f55\uff0c\u4e0d\u540cpipeline\u8981\u4fdd\u8bc1Prefix\u7684\u552f\u4e00\u6027\u4e14\u65e0\u91cd\u53e0\u3002 Destination settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Centralized Bucket Name <\u9700\u8981\u8f93\u5165> \u8f93\u5165centralized\u7684s3 bucket\u540d\u79f0\uff0c\u4f8b\u5982centralized-logging-bucket\u3002 Centralized Bucket Prefix datalake \u8f93\u5165centralized bucket\u7684\u8def\u5f84\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3adatalake\uff0c\u610f\u5473\u7740\u60a8\u7684\u6570\u636e\u5e93\u7684location\u4e3as3://{Centralized Bucket Name}/{Centralized Bucket Prefix}/amazon_cl_centralized\u3002 Centralized Table Name WAF \u6570\u636e\u5199\u5165\u5230Centralized\u6570\u636e\u5e93\u7684\u8868\u540d\u79f0\uff0c\u6309\u9700\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u503c\u4e3awaf\u3002 Scheduler settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 LogProcessor Schedule Expression rate(5 minutes) \u6267\u884c\u6570\u636e\u52a0\u5de5\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21LogProcessorr\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogMerger Schedule Expression cron(0 1 * ? ) \u6267\u884c\u6570\u636e\u6587\u4ef6\u5408\u5e76\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59291\u70b9\u6267\u884cLogMerger,\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogArchive Schedule Expression cron(0 2 * ? ) \u6267\u884c\u6570\u636e\u5f52\u6863\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59292\u70b9\u6267\u884cLogArchive\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 Age to Merge 7 \u5c0f\u6587\u4ef6\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a7\uff0c\u8868\u793a\u4f1a\u5bf97\u5929\u4ee5\u524d\u7684\u65e5\u5fd7\u8fdb\u884c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Age to Archive 30 \u65e5\u5fd7\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a30\uff0c\u8868\u793a30\u5929\u4ee5\u524d\u7684\u6570\u636e\u4f1a\u8fdb\u884c\u5f52\u6863\u5220\u9664\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Notification settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Notification Service SNS \u544a\u8b66\u901a\u77e5\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528China\uff0c\u5219\u53ea\u80fd\u9009\u62e9SNS\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528Global\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528SNS\u6216SES\u65b9\u5f0f\u3002 Recipients <\u9700\u8981\u8f93\u5165> \u544a\u8b66\u901a\u77e5\uff0c\u5982\u679cNotification Service\u4e3aSNS\uff0c\u5219\u6b64\u5904\u8f93\u5165SNS\u7684Topic arn\uff0c\u786e\u4fdd\u6709\u6743\u9650\uff0c\u5982\u679cNotification Service\u4e3aSES\uff0c\u5219\u6b64\u5904\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u786e\u4fdd\u90ae\u4ef6\u5730\u5740\u5df2\u5728SES\u4e2dVerified identities\uff0c\u521b\u5efa\u4e3bstack\u8f93\u5165\u7684adminEmail\u9ed8\u8ba4\u4f1a\u53d1\u9001\u9a8c\u8bc1\u90ae\u4ef6\u3002 Dashboard settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Import Dashboards FALSE \u662f\u5426\u5bfc\u5165Dashboard\u5230Grafana\u4e2d\uff0c\u9ed8\u8ba4\u503c\u4e3afalse\uff0c\u5982\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5fc5\u987b\u586b\u5199Grafana URL\u548cGrafana Service Account Token\u3002 Grafana URL <\u53ef\u9009\u8f93\u5165> Grafana\u8bbf\u95ee\u7684URL\uff0c\u4f8b\u5982https://alb-72277319.us-west-2.elb.amazonaws.com\u3002 Grafana Service Account Token <\u53ef\u9009\u8f93\u5165> Grafana Service Account Token\uff1aGrafana\u4e2d\u521b\u5efa\u7684Service Account Token\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u67e5\u770b\u4eea\u8868\u677f \u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Total Requests log event \u663e\u793a\u603b\u7684 Web \u8bf7\u6c42\u6570\u3002 Total Blocked Requests log event \u663e\u793a\u88ab\u963b\u6b62\u7684 Web \u8bf7\u6c42\u603b\u6570\u3002 Requests History log event \u63d0\u4f9b\u4e00\u4e2a\u67f1\u72b6\u56fe\uff0c\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u60c5\u51b5\u3002 WAF ACLs log event webaclName \u663e\u793a\u6309 Web ACL \u540d\u79f0\u5206\u7ec4\u7684\u8bf7\u6c42\u603b\u6570\u3002 WAF Rules terminatingRuleId \u63d0\u4f9b\u4e00\u4e2a\u997c\u56fe\uff0c\u663e\u793a Web ACL \u4e2d\u7684 WAF \u89c4\u5219\u5206\u5e03\u60c5\u51b5\u3002 Sources httpSourceId \u63d0\u4f9b\u4e00\u4e2a\u997c\u56fe\uff0c\u663e\u793a\u88ab\u5206\u914d\u8d44\u6e90ID\u7684\u5206\u5e03\u60c5\u51b5\u3002 HTTP Methods httpRequest.HTTPMethod \u4f7f\u7528\u997c\u56fe\u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309 HTTP \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4\uff0c\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u3002 Country or Region By Blocked Requests HTTPRequest.Country \u663e\u793a Web ACL \u4e0a\u7684\u88ab\u963b\u6b62\u7684\u8bf7\u6c42\u6570\uff08\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u76f8\u5e94\u56fd\u5bb6\u6216\u5730\u533a\u5206\u7ec4\uff09\u3002 Top WebACLs webaclName Web \u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u9876\u7ea7 Web \u8bf7\u6c42\u3002 Top Sources httpSourceId \u524d10\u4e2a\u88ab\u5206\u914d\u7684\u8d44\u6e90ID\u3002 Top Requests URIs httpRequest.URI \u524d 10 \u4e2a\u8bf7\u6c42 URI\u3002 Top Countries or Regions httpRequest.country Web ACL \u8bbf\u95ee\u4e2d\u524d 10 \u4e2a\u56fd\u5bb6\u3002 Top Rules terminatingRuleId Web ACL \u4e2d\u5339\u914d\u8bf7\u6c42\u7684\u524d 10 \u6761\u89c4\u5219\u3002 Top Client IPs httpRequest.ClientIP \u63d0\u4f9b\u524d 10 \u4e2a IP \u5730\u5740\u3002 Top Blocked / Allowed Hosts URI host httpRequest.URI action \u63d0\u4f9b\u88ab\u963b\u6b62\u6216\u5141\u8bb8\u7684 Web \u8bf7\u6c42\u3002 Top Labels with Host, URI labels host httpRequest.URI \u4f7f\u7528\u4e3b\u673a\u548c URI \u7684\u6807\u7b7e\u7684\u524d 10 \u4e2a\u8be6\u7ec6\u65e5\u5fd7\u3002 Metrics webaclId webaclName terminatingRuleId terminatingRuleType httpSourceId httpRequest.HTTPMethod httpRequest.country httpRequest.ClientIP labels httpRequest.URI action \u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7\u6307\u6807\u5217\u8868\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001WebACL\u3001\u5ba2\u6237\u7aefIP \u7b49\u3002","title":"AWS WAF"},{"location":"implementation-guide/aws-services/waf/#aws-waf","text":"WAF \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u6709\u5173\u7531\u60a8\u7684 Web ACL \u5206\u6790\u7684\u6d41\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bb0\u5f55\u7684\u4fe1\u606f\u5305\u62ec AWS WAF \u4ece\u60a8\u7684 AWS \u8d44\u6e90\u6536\u5230 Web \u8bf7\u6c42\u7684\u65f6\u95f4\u3001\u6709\u5173\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u4ee5\u53ca\u6709\u5173\u8bf7\u6c42\u5339\u914d\u7684\u89c4\u5219\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u6216\u8005 Light Engine \u5206\u6790\u5f15\u64ce\u4e2d\u3002 \u91cd\u8981\u63d0\u793a \u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5fc5\u987b\u4e0e Web ACL \u90e8\u7f72\u5728\u540c\u4e00\u4e2a\u53ef\u7528\u533a\u4e2d\uff0c\u5426\u5219\u60a8\u5c06\u65e0\u6cd5\u521b\u5efaWAF\u65e5\u5fd7\u6444\u53d6\u3002 \u4f8b\u5982: \u5982\u679c\u60a8\u7684 Web ACL \u4e0e Global Cloudfront \u76f8\u5173\u8054\uff0c\u90a3\u4e48\u60a8\u7684\u65e5\u5fd7\u901a \u5fc5\u987b\u90e8\u7f72\u5728 us-east-1\u3002 \u5982\u679c\u60a8\u7684 Web ACL \u4e0e\u5728 Ohio \u7684 AWS \u8d44\u6e90\u76f8\u5173\u8054\uff0c\u90a3\u4e48\u60a8\u7684\u65e5\u5fd7\u901a \u5fc5\u987b\u90e8\u7f72\u5728 us-east-2\u3002 WAF \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u548c\u65e5\u5fd7\u901a \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u65e5\u5fd7\u901a \u4e0d\u652f\u6301 WAF Classic \u4ea7\u751f\u7684\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55 \u4ece WAF Classic \u8fc1\u79fb\u5230\u65b0 AWS WAF \u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\u3002\u60a8\u53ef\u4ee5\u5728 \u989d\u5916\u8bbe\u7f6e \u4e2d\u8fdb\u884c\u8c03\u6574\u3002","title":"AWS WAF \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/waf/#amazon-opensearch","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6 (Amazon OpenSearch)"},{"location":"implementation-guide/aws-services/waf/#_1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 OpenSearch , \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u6444\u53d6\u9009\u9879 \u4e2d. \u9009\u62e9 \u91c7\u6837 \u6216 \u5168\u91cf . \u5bf9\u4e8e \u91c7\u6837 \uff0c \u8bf7\u8f93\u5165\u6444\u53d6\u91c7\u6837\u65e5\u5fd7\u7684\u9891\u7387\u3002 \u5bf9\u4e8e \u5168\u91cf \uff0c \u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\u6216\u5728\u624b\u52a8\u6a21\u5f0f\u4e2d\u8f93\u5165\u65e5\u5fd7\u4f4d\u7f6e\u3002\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u65e5\u5fd7\u901a\u5c06\u81ea\u52a8\u542f\u7528\u4f7f\u7528 Kinesis Data Firehose \u6d41\u4f5c\u4e3a WAF \u65e5\u5fd7\u7684\u76ee\u6807\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Amazon OpenSearch Service \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 Amazon OpenSearch Service \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Web ACL \u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 Amazon OpenSearch Service \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002\u65e5\u5fd7\u901a \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u5728 \u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668 \u90e8\u5206\uff0c\u8bf7\u9009\u62e9\u65e5\u5fd7\u5904\u7406\u5668\u3002 \uff08\u53ef\u9009\uff09\u8fd9\u4e9b \u533a\u57df \u73b0\u5728\u652f\u6301 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u3002 \u5f53\u9009\u62e9 OSI \u65f6\uff0c\u8bf7\u8f93\u5165 OCU \u7684\u6700\u5c0f\u548c\u6700\u5927\u6570\u91cf\u3002 \u8bf7\u53c2\u9605 \u6b64\u5904 \u7684\u66f4\u591a\u4fe1\u606f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/waf/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- waf Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f AWS \u6d77\u5916\u533a\u57df (\u91c7\u6837\u8bf7\u6c42) \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df (\u91c7\u6837\u8bf7\u6c42) \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 \u5168\u91cf\u8bf7\u6c42 \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 \u91c7\u6837\u8bf7\u6c42 \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 WebACL Names <\u9700\u8981\u8f93\u5165> WebACL \u540d\u79f0\u5217\u8868\uff0c\u4ee5\u9017\u53f7\u5206\u9694\u3002 Interval 1 \u83b7\u53d6\u91c7\u6837\u65e5\u5fd7\u7684\u9ed8\u8ba4\u65f6\u95f4\u95f4\u9694\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\u3002 \u901a\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID\u3002 Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df\u3002 Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u6dfb\u52a0\u4e00\u4e2a\u6210\u5458\u8d26\u6237 )\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 KMS-CMK ARN <\u53ef\u9009\u8f93\u5165> \u7528\u4e8e\u52a0\u5bc6\u7684 KMS-CMK ARN\u3002 \u7559\u7a7a\u4ee5\u521b\u5efa\u65b0\u7684 KMS CMK\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/waf/#_2","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Web ACLs log event webaclName \u663e\u793a\u6309 Web ACL \u540d\u79f0\u5206\u7ec4\u7684\u8bf7\u6c42\u603b\u6570\u3002 Total Requests log event \u663e\u793a\u603b\u7684 Web \u8bf7\u6c42\u6570\u3002 Request Timeline log event \u63d0\u4f9b\u4e00\u4e2a\u67f1\u72b6\u56fe\uff0c\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u60c5\u51b5\u3002 WAF Rules terminatingRuleId \u63d0\u4f9b\u4e00\u4e2a\u997c\u56fe\uff0c\u663e\u793a Web ACL \u4e2d\u7684 WAF \u89c4\u5219\u5206\u5e03\u60c5\u51b5\u3002 Total Blocked Requests log event \u663e\u793a\u88ab\u963b\u6b62\u7684 Web \u8bf7\u6c42\u603b\u6570\u3002 Unique Client IPs Request.ClientIP \u663e\u793a\u901a\u8fc7\u5ba2\u6237\u7aef IP \u5730\u5740\u8bc6\u522b\u7684\u552f\u4e00\u8bbf\u95ee\u8005\u3002 Country or Region By Request Request.Country \u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u76f8\u5e94\u56fd\u5bb6\u6216\u5730\u533a\u5206\u7ec4\uff09\u3002 Http Methods Request.HTTPMethod \u4f7f\u7528\u997c\u56fe\u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309 HTTP \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4\uff0c\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u3002 Http Versions Request.HTTPVersion \u4f7f\u7528\u997c\u56fe\u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309 HTTP \u534f\u8bae\u7248\u672c\u5206\u7ec4\uff0c\u5982 HTTP/2.0\u3001HTTP/1.1 \u7b49\uff09\u3002 Top WebACLs webaclName webaclId.keyword Web \u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u9876\u7ea7 Web \u8bf7\u6c42\u3002 Top Hosts host \u5217\u51fa\u4e0e\u4e8b\u4ef6\u5173\u8054\u7684\u6e90 IP \u5730\u5740\uff0c\u4f7f\u60a8\u80fd\u591f\u8bc6\u522b\u548c\u8c03\u67e5\u6f5c\u5728\u7684\u53ef\u7591\u6216\u672a\u7ecf\u6388\u6743\u7684\u6d3b\u52a8\u3002 Top Request URIs Request.URI \u524d 10 \u4e2a\u8bf7\u6c42 URI\u3002 Top Countries or Regions Request.country Web ACL \u8bbf\u95ee\u4e2d\u524d 10 \u4e2a\u56fd\u5bb6\u3002 Top Rules terminatingRuleId Web ACL \u4e2d\u5339\u914d\u8bf7\u6c42\u7684\u524d 10 \u6761\u89c4\u5219\u3002 Top Client IPs Request.ClientIP \u63d0\u4f9b\u524d 10 \u4e2a IP \u5730\u5740\u3002 Top User Agents userAgent \u63d0\u4f9b\u524d 10 \u4e2a\u7528\u6237\u4ee3\u7406\u3002 Block Allow Host Uri host Request.URI action \u63d0\u4f9b\u88ab\u963b\u6b62\u6216\u5141\u8bb8\u7684 Web \u8bf7\u6c42\u3002 Top Labels with Host, Uri labels.name host Request.URI \u4f7f\u7528\u4e3b\u673a\u548c URI \u7684\u6807\u7b7e\u7684\u524d 10 \u4e2a\u8be6\u7ec6\u65e5\u5fd7\u3002 View by Matching Rule sc-status \u8be5\u53ef\u89c6\u5316\u56fe\u8868\u63d0\u4f9b\u4e86\u7531 DQL\u201cterminatingRuleId:*\u201d\u63d0\u4f9b\u7684\u8be6\u7ec6\u65e5\u5fd7\u3002 View by httpRequest args,uri,path sc-status \u8be5\u53ef\u89c6\u5316\u56fe\u8868\u63d0\u4f9b\u4e86\u7531 DQL \u63d0\u4f9b\u7684\u8be6\u7ec6\u65e5\u5fd7\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/waf/#_3","text":"\u60a8\u53ef\u4ee5\u8bbf\u95eeAmazon OpenSearch\u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u8bbf\u95ee\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u56fe\u50cf\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/waf/#light-engine","text":"","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff08Light Engine\uff09"},{"location":"implementation-guide/aws-services/waf/#_4","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 Light Engine , \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u6444\u53d6\u9009\u9879 \u4e2d. \u9009\u62e9 \u5168\u91cf . \u5bf9\u4e8e \u5168\u91cf \uff0c \u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\u6216\u5728\u624b\u52a8\u6a21\u5f0f\u4e2d\u8f93\u5165\u65e5\u5fd7\u4f4d\u7f6e\u3002\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u65e5\u5fd7\u901a\u5c06\u81ea\u52a8\u542f\u7528\u4f7f\u7528 Kinesis Data Firehose \u6d41\u4f5c\u4e3a WAF \u65e5\u5fd7\u7684\u76ee\u6807\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a Light Engine \u914d\u7f6e \u90e8\u5206\uff0c\u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 Grafana \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u6837\u4f8b\u770b\u677f \u9009\u62e9 \u662f \u3002 \u4f60\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2aGrafana\uff0c\u5982\u679c\u9700\u8981 \u5bfc\u5165 \u4e00\u4e2a\u65b0\u7684Grafana\uff0c\u53ef\u4ee5\u8df3\u8f6c\u5230 Grafana \u8fdb\u884c\u914d\u7f6e\u3002 \u9009\u62e9\u4e00\u4e2aS3\u6876\u5b58\u653e\u5206\u533a\u540e\u7684\u65e5\u5fd7\u3002\u5e76\u4e14\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u5b58\u653e\u65e5\u5fd7\u8868\u7684\u540d\u79f0\uff0c\u6211\u4eec\u5df2\u7ecf\u4e3a\u4f60\u9884\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8868\u540d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002 \u65e5\u5fd7\u5904\u7406\u9891\u7387\uff0c\u9ed8\u8ba4\u4e3a 5 \u5206\u949f\uff0c\u6700\u5c0f\u65f6\u95f4\u5904\u7406\u9891\u7387\u4e3a 1 \u5206\u949f\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 \u65e5\u5fd7\u5408\u5e76\u65f6\u95f4 \u548c \u65e5\u5fd7\u5f52\u6863\u65f6\u95f4\u3002\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u503c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e1a\u52a1\u9700\u6c42\u6765\u8fdb\u884c\u8c03\u6574\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/waf/#cloudformation_1","text":"\u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df (\u5168\u91cf\u8bf7\u6c42) \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u3002 Pipeline settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Pipeline Id <\u9700\u8981\u8f93\u5165> pipeline\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u60a8\u9700\u8981\u521b\u5efa\u591a\u4e2awaf pipeline\uff0c\u5c06\u4e0d\u540c\u7684waf\u65e5\u5fd7\u5199\u5165\u5230\u4e0d\u540c\u7684\u8868\u4e2d\u65f6\uff0c\u5219\u5fc5\u987b\u4fdd\u8bc1\u552f\u4e00\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7 uuidgenerator \u751f\u6210\u552f\u4e00\u7684Pipeline Id\u3002 Staging Bucket Prefix AWSLogs/WAFLogs \u65e5\u5fd7\u5728\u4e34\u65f6\u5b58\u50a8\u533a\u7684\u5b58\u653e\u76ee\u5f55\uff0c\u4e0d\u540cpipeline\u8981\u4fdd\u8bc1Prefix\u7684\u552f\u4e00\u6027\u4e14\u65e0\u91cd\u53e0\u3002 Destination settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Centralized Bucket Name <\u9700\u8981\u8f93\u5165> \u8f93\u5165centralized\u7684s3 bucket\u540d\u79f0\uff0c\u4f8b\u5982centralized-logging-bucket\u3002 Centralized Bucket Prefix datalake \u8f93\u5165centralized bucket\u7684\u8def\u5f84\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3adatalake\uff0c\u610f\u5473\u7740\u60a8\u7684\u6570\u636e\u5e93\u7684location\u4e3as3://{Centralized Bucket Name}/{Centralized Bucket Prefix}/amazon_cl_centralized\u3002 Centralized Table Name WAF \u6570\u636e\u5199\u5165\u5230Centralized\u6570\u636e\u5e93\u7684\u8868\u540d\u79f0\uff0c\u6309\u9700\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u503c\u4e3awaf\u3002 Scheduler settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 LogProcessor Schedule Expression rate(5 minutes) \u6267\u884c\u6570\u636e\u52a0\u5de5\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21LogProcessorr\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogMerger Schedule Expression cron(0 1 * ? ) \u6267\u884c\u6570\u636e\u6587\u4ef6\u5408\u5e76\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59291\u70b9\u6267\u884cLogMerger,\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 LogArchive Schedule Expression cron(0 2 * ? ) \u6267\u884c\u6570\u636e\u5f52\u6863\u7684\u4efb\u52a1\u5468\u671f\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a\u6bcf\u59292\u70b9\u6267\u884cLogArchive\uff0c\u914d\u7f6e \u53ef\u53c2\u8003 \u3002 Age to Merge 7 \u5c0f\u6587\u4ef6\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a7\uff0c\u8868\u793a\u4f1a\u5bf97\u5929\u4ee5\u524d\u7684\u65e5\u5fd7\u8fdb\u884c\u5c0f\u6587\u4ef6\u5408\u5e76\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Age to Archive 30 \u65e5\u5fd7\u4fdd\u7559\u5929\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a30\uff0c\u8868\u793a30\u5929\u4ee5\u524d\u7684\u6570\u636e\u4f1a\u8fdb\u884c\u5f52\u6863\u5220\u9664\uff0c\u53ef\u6309\u9700\u8c03\u6574\u3002 Notification settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Notification Service SNS \u544a\u8b66\u901a\u77e5\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528China\uff0c\u5219\u53ea\u80fd\u9009\u62e9SNS\u65b9\u5f0f\uff0c\u5982\u679c\u60a8\u7684\u4e3b\u6808\u662f\u4f7f\u7528Global\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528SNS\u6216SES\u65b9\u5f0f\u3002 Recipients <\u9700\u8981\u8f93\u5165> \u544a\u8b66\u901a\u77e5\uff0c\u5982\u679cNotification Service\u4e3aSNS\uff0c\u5219\u6b64\u5904\u8f93\u5165SNS\u7684Topic arn\uff0c\u786e\u4fdd\u6709\u6743\u9650\uff0c\u5982\u679cNotification Service\u4e3aSES\uff0c\u5219\u6b64\u5904\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u786e\u4fdd\u90ae\u4ef6\u5730\u5740\u5df2\u5728SES\u4e2dVerified identities\uff0c\u521b\u5efa\u4e3bstack\u8f93\u5165\u7684adminEmail\u9ed8\u8ba4\u4f1a\u53d1\u9001\u9a8c\u8bc1\u90ae\u4ef6\u3002 Dashboard settings \u4e13\u7528\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Import Dashboards FALSE \u662f\u5426\u5bfc\u5165Dashboard\u5230Grafana\u4e2d\uff0c\u9ed8\u8ba4\u503c\u4e3afalse\uff0c\u5982\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u5fc5\u987b\u586b\u5199Grafana URL\u548cGrafana Service Account Token\u3002 Grafana URL <\u53ef\u9009\u8f93\u5165> Grafana\u8bbf\u95ee\u7684URL\uff0c\u4f8b\u5982https://alb-72277319.us-west-2.elb.amazonaws.com\u3002 Grafana Service Account Token <\u53ef\u9009\u8f93\u5165> Grafana Service Account Token\uff1aGrafana\u4e2d\u521b\u5efa\u7684Service Account Token\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/waf/#_5","text":"\u8be5\u4eea\u8868\u677f\u5305\u62ec\u4ee5\u4e0b\u53ef\u89c6\u5316\u56fe\u8868\u3002 \u53ef\u89c6\u5316\u540d\u79f0 \u6e90\u5b57\u6bb5 \u63cf\u8ff0 Filters Filters \u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u8fc7\u6ee4\u6761\u4ef6\u5bf9\u4ee5\u4e0b\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3002 Total Requests log event \u663e\u793a\u603b\u7684 Web \u8bf7\u6c42\u6570\u3002 Total Blocked Requests log event \u663e\u793a\u88ab\u963b\u6b62\u7684 Web \u8bf7\u6c42\u603b\u6570\u3002 Requests History log event \u63d0\u4f9b\u4e00\u4e2a\u67f1\u72b6\u56fe\uff0c\u663e\u793a\u968f\u65f6\u95f4\u5206\u5e03\u7684\u4e8b\u4ef6\u60c5\u51b5\u3002 WAF ACLs log event webaclName \u663e\u793a\u6309 Web ACL \u540d\u79f0\u5206\u7ec4\u7684\u8bf7\u6c42\u603b\u6570\u3002 WAF Rules terminatingRuleId \u63d0\u4f9b\u4e00\u4e2a\u997c\u56fe\uff0c\u663e\u793a Web ACL \u4e2d\u7684 WAF \u89c4\u5219\u5206\u5e03\u60c5\u51b5\u3002 Sources httpSourceId \u63d0\u4f9b\u4e00\u4e2a\u997c\u56fe\uff0c\u663e\u793a\u88ab\u5206\u914d\u8d44\u6e90ID\u7684\u5206\u5e03\u60c5\u51b5\u3002 HTTP Methods httpRequest.HTTPMethod \u4f7f\u7528\u997c\u56fe\u663e\u793a Web ACL \u4e0a\u7684\u8bf7\u6c42\u6570\uff08\u6309 HTTP \u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u5206\u7ec4\uff0c\u5982 POST\u3001GET\u3001HEAD \u7b49\uff09\u3002 Country or Region By Blocked Requests HTTPRequest.Country \u663e\u793a Web ACL \u4e0a\u7684\u88ab\u963b\u6b62\u7684\u8bf7\u6c42\u6570\uff08\u6309\u5ba2\u6237\u7aef IP \u89e3\u6790\u7684\u76f8\u5e94\u56fd\u5bb6\u6216\u5730\u533a\u5206\u7ec4\uff09\u3002 Top WebACLs webaclName Web \u8bf7\u6c42\u89c6\u56fe\u4f7f\u60a8\u80fd\u591f\u5206\u6790\u9876\u7ea7 Web \u8bf7\u6c42\u3002 Top Sources httpSourceId \u524d10\u4e2a\u88ab\u5206\u914d\u7684\u8d44\u6e90ID\u3002 Top Requests URIs httpRequest.URI \u524d 10 \u4e2a\u8bf7\u6c42 URI\u3002 Top Countries or Regions httpRequest.country Web ACL \u8bbf\u95ee\u4e2d\u524d 10 \u4e2a\u56fd\u5bb6\u3002 Top Rules terminatingRuleId Web ACL \u4e2d\u5339\u914d\u8bf7\u6c42\u7684\u524d 10 \u6761\u89c4\u5219\u3002 Top Client IPs httpRequest.ClientIP \u63d0\u4f9b\u524d 10 \u4e2a IP \u5730\u5740\u3002 Top Blocked / Allowed Hosts URI host httpRequest.URI action \u63d0\u4f9b\u88ab\u963b\u6b62\u6216\u5141\u8bb8\u7684 Web \u8bf7\u6c42\u3002 Top Labels with Host, URI labels host httpRequest.URI \u4f7f\u7528\u4e3b\u673a\u548c URI \u7684\u6807\u7b7e\u7684\u524d 10 \u4e2a\u8be6\u7ec6\u65e5\u5fd7\u3002 Metrics webaclId webaclName terminatingRuleId terminatingRuleType httpSourceId httpRequest.HTTPMethod httpRequest.country httpRequest.ClientIP labels httpRequest.URI action \u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7\u6307\u6807\u5217\u8868\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001WebACL\u3001\u5ba2\u6237\u7aefIP \u7b49\u3002","title":"\u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/deployment/","text":"\u6982\u89c8 \u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u8d26\u6237\u4e2d\u3002 \u524d\u63d0\u6761\u4ef6 \u68c0\u67e5\u6240\u6709\u7684 \u8003\u8651\u56e0\u7d20 \uff0c\u5e76\u786e\u4fdd\u60a8\u8981\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u76ee\u6807\u533a\u57df\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC\uff0c\u81f3\u5c11\u80fd\u67091\u4e2a\u65b0\u7684 VPC \u7a7a\u7f3a\u3002 \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC\uff0c\u81f3\u5c11\u9700\u89812\u4e2a\u5f39\u6027 IP (EIP) \u5730\u5740\u7a7a\u7f3a\u3002 \u81f3\u5c11\u80fd\u521b\u5efa4\u4e2a S3 \u5b58\u50a8\u6876\u3002 \u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72 \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u9a8c\u8bc1\u548c\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 Cognito \u7528\u6237\u6c60\u5728\u4e00\u4e9b AWS \u533a\u57df \u7f3a\u5931\uff08\u4f8b\u5982\uff1a\u9999\u6e2f\uff09\u3002 \u5728\u8fd9\u4e9b\u533a\u57df\uff0c\u60a8\u9700\u8981\u6309\u7167\u8bf4\u660e\u4f7f\u7528 OpenID Connect \u7684\u65b9\u5f0f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u3002 \u6709\u5173\u53d7\u652f\u6301\u533a\u57df\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u53ef\u90e8\u7f72\u533a\u57df \u3002 \u4f7f\u7528 Cognito User Pool \u542f\u52a8 \u4f7f\u7528 OpenID Connect \u542f\u52a8 \u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72 AWS \u4e2d\u56fd\u533a\u57df\u6ca1\u6709 Cognito User Pool\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u8bf4\u660e\u5728\u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002 \u4f7f\u7528 OpenID Connect \u542f\u52a8","title":"\u6982\u89c8"},{"location":"implementation-guide/deployment/#_1","text":"\u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u8d26\u6237\u4e2d\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/deployment/#_2","text":"\u68c0\u67e5\u6240\u6709\u7684 \u8003\u8651\u56e0\u7d20 \uff0c\u5e76\u786e\u4fdd\u60a8\u8981\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u76ee\u6807\u533a\u57df\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC\uff0c\u81f3\u5c11\u80fd\u67091\u4e2a\u65b0\u7684 VPC \u7a7a\u7f3a\u3002 \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC\uff0c\u81f3\u5c11\u9700\u89812\u4e2a\u5f39\u6027 IP (EIP) \u5730\u5740\u7a7a\u7f3a\u3002 \u81f3\u5c11\u80fd\u521b\u5efa4\u4e2a S3 \u5b58\u50a8\u6876\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/deployment/#aws","text":"\u65e5\u5fd7\u901a\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u9a8c\u8bc1\u548c\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 Cognito \u7528\u6237\u6c60\u5728\u4e00\u4e9b AWS \u533a\u57df \u7f3a\u5931\uff08\u4f8b\u5982\uff1a\u9999\u6e2f\uff09\u3002 \u5728\u8fd9\u4e9b\u533a\u57df\uff0c\u60a8\u9700\u8981\u6309\u7167\u8bf4\u660e\u4f7f\u7528 OpenID Connect \u7684\u65b9\u5f0f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u3002 \u6709\u5173\u53d7\u652f\u6301\u533a\u57df\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u53ef\u90e8\u7f72\u533a\u57df \u3002 \u4f7f\u7528 Cognito User Pool \u542f\u52a8 \u4f7f\u7528 OpenID Connect \u542f\u52a8","title":"\u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/#aws_1","text":"AWS \u4e2d\u56fd\u533a\u57df\u6ca1\u6709 Cognito User Pool\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u8bf4\u660e\u5728\u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002 \u4f7f\u7528 OpenID Connect \u542f\u52a8","title":"\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/with-cognito/","text":"\u4f7f\u7528 Cognito User Pool \u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 15 \u5206\u949f \u90e8\u7f72\u6982\u8ff0 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 Centralized Logging with OpenSearch AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u4e2d\u7684 IAM \u548c STS \u9650\u5236 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u5982\u679c\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 Internet Gateway \u7684\u8def\u7531\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 NAT Gateway \u7684\u8def\u7531\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0 \u6210\u529f\u521b\u5efa\u5806\u6808\u540e\uff0c\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u751f\u6210\u4e00\u4e2a CloudFront \u57df\u540d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee\u65e5\u5fd7\u901a \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540c\u65f6\uff0c\u81ea\u52a8\u751f\u6210\u7684\u4e34\u65f6\u5bc6\u7801\uff08\u4e0d\u5305\u62ec\u5bc6\u7801\u7ed3\u5c3e\u5904\u7684 . \uff09\u5c06\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u5728 \u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u5e76\u8bb0\u5f55\u57df\u540d\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 WebConsoleUrl \uff0c\u7136\u540e\u5bfc\u822a\u5230\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u548c\u4e34\u65f6\u5bc6\u7801\u3002 a. \u8bbe\u7f6e\u65b0\u7684\u5e10\u6237\u5bc6\u7801\u3002 b. \uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u7528\u4e8e\u6062\u590d\u5e10\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00\u65e5\u5fd7\u901a \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c \uff1a\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u4f7f\u7528 Cognito User Pool"},{"location":"implementation-guide/deployment/with-cognito/#cognito-user-pool","text":"\u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 15 \u5206\u949f","title":"\u4f7f\u7528 Cognito User Pool"},{"location":"implementation-guide/deployment/with-cognito/#_1","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0","title":"\u90e8\u7f72\u6982\u8ff0"},{"location":"implementation-guide/deployment/with-cognito/#1","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 Centralized Logging with OpenSearch AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u4e2d\u7684 IAM \u548c STS \u9650\u5236 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u5982\u679c\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 Internet Gateway \u7684\u8def\u7531\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 NAT Gateway \u7684\u8def\u7531\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808"},{"location":"implementation-guide/deployment/with-cognito/#2","text":"\u6210\u529f\u521b\u5efa\u5806\u6808\u540e\uff0c\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u751f\u6210\u4e00\u4e2a CloudFront \u57df\u540d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee\u65e5\u5fd7\u901a \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540c\u65f6\uff0c\u81ea\u52a8\u751f\u6210\u7684\u4e34\u65f6\u5bc6\u7801\uff08\u4e0d\u5305\u62ec\u5bc6\u7801\u7ed3\u5c3e\u5904\u7684 . \uff09\u5c06\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u5728 \u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u5e76\u8bb0\u5f55\u57df\u540d\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 WebConsoleUrl \uff0c\u7136\u540e\u5bfc\u822a\u5230\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u548c\u4e34\u65f6\u5bc6\u7801\u3002 a. \u8bbe\u7f6e\u65b0\u7684\u5e10\u6237\u5bc6\u7801\u3002 b. \uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u7528\u4e8e\u6062\u590d\u5e10\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00\u65e5\u5fd7\u901a \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c \uff1a\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0"},{"location":"implementation-guide/deployment/with-oidc/","text":"\u4f7f\u7528 OpenID Connect \u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 30 \u5206\u949f \u524d\u63d0\u6761\u4ef6 \u91cd\u8981 \u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u901a\u8fc7 CloudFront \u5206\u53d1\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u5206\u53d1\u88ab\u89c6\u4e3a Internet \u4fe1\u606f\u670d\u52a1\u3002 \u5982\u679c\u60a8\u5728 AWS \u4e2d\u56fd\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002\u57df\u540d\u5fc5\u987b\u6709\u6709\u6548\u7684 ICP\u5907\u6848 \u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002 \u4e00\u4e2a\u57df\u540d\u3002 \u60a8\u5c06\u4f7f\u7528\u6b64\u57df\u6765\u8bbf\u95ee\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002\uff08AWS \u4e2d\u56fd\u533a\u57df\u5fc5\u9700\uff0cAWS \u6d77\u5916\u533a\u57df\u53ef\u9009\uff09 \u63d0\u4f9b AWS IAM \u4e2d\u7684 SSL \u8bc1\u4e66\uff0c\u4e14\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u7684\u57df\u76f8\u5173\u8054\u3002 \u60a8\u53ef\u4ee5\u6309\u7167 \u672c\u6307\u5357 \u5c06 SSL \u8bc1\u4e66\u4e0a\u4f20\u5230 IAM\u3002\uff08AWS \u4e2d\u56fd\u533a\u57df\u5fc5\u9700\uff0cAWS \u6d77\u5916\u533a\u57df\u4e0d\u63a8\u8350\uff09 \u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) \u4e2d\u8bf7\u6c42\uff08\u6216\u5bfc\u5165\uff09ACM \u8bc1\u4e66\u3002\uff08AWS \u4e2d\u56fd\u533a\u57df\u65e0\u9700\uff0cAWS \u6d77\u5916\u533a\u57df\u53ef\u9009\uff09 \u90e8\u7f72\u6982\u89c8 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684 OpenID \u8fde\u63a5\u5668 (OIDC) \u63d0\u4f9b\u5546\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u9009\u9879 1 \u81f3 4\u3002 \uff08\u9009\u9879 1\uff09\u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 2\uff09 Authing \u662f\u7b2c\u4e09\u65b9\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 3\uff09 Keycloak \u662f AWS \u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 4\uff09 ADFS \u662f Microsoft \u63d0\u4f9b\u7684\u4e00\u9879\u670d\u52a1\u3002 \uff08\u9009\u9879 5\uff09\u5176\u5b83\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5e73\u53f0\uff0c\u5982 Auth0 \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa OIDC \u5ba2\u6237\u7aef\uff0c\u5e76\u83b7\u53d6 client_id \u548c issuer \u3002 (\u9009\u9879 1) \u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u5728 AWS \u6d77\u5916\u533a\u57df\u767b\u9646 Amazon Cognito \u63a7\u5236\u53f0 \u3002 \u6309\u7167\u6b64 \u6307\u5357 \u6dfb\u52a0\u5e94\u7528\u7a0b\u5e8f\u5ba2\u6237\u7aef\u5e76\u8bbe\u7f6e\u6258\u7ba1 UI\u3002 \u5bf9\u4e8e \u5e94\u7528\u7a0b\u5e8f\u7c7b\u578b \uff0c\u9009\u62e9 \u516c\u5171\u5ba2\u6237\u7aef \u3002 \u8bf7\u5728\u586b\u5199 \u5141\u8bb8\u7684\u56de\u8c03 URL \u548c \u5141\u8bb8\u7684\u6ce8\u9500 URL \u65f6\uff0c\u4f7f\u7528\u7ed9\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u51c6\u5907\u7684\u57df\u540d\u3002\u5728\u60a8\u7684 hosted UI \u8bbe\u7f6e\u6210\u529f\u540e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u72b6\u6001\uff1a \u5c06 \u5ba2\u6237\u7aef ID , \u7528\u6237\u6c60 ID \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5728 \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u4e2d\uff0cOidcClientID \u5c31\u662f \u5ba2\u6237\u7aef ID , OidcProvider \u662f https://cognito-idp.${REGION}.amazonaws.com/${USER_POOL_ID} \u3002 (\u9009\u9879 2) Authing.cn OIDC \u5ba2\u6237\u7aef \u767b\u5f55 Authing \u63a7\u5236\u53f0 \u3002 \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u6c60\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u6c60\u3002 \u9009\u62e9\u7528\u6237\u6c60\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 \u5e94\u7528 \u4e0b\u7684 \u81ea\u5efa\u5e94\u7528 \u3002 \u5355\u51fb \u521b\u5efa\u81ea\u5efa\u5e94\u7528 \u6309\u94ae\u3002 \u8f93\u5165 \u5e94\u7528\u540d\u79f0 \u548c \u8ba4\u8bc1\u5730\u5740 \u3002 \u5c06Endpoint Information\u4e2d\u7684 App ID \uff08\u5373 client_id \uff09\u548c Issuer \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5c06 Login Callback URL \u548c Logout Callback URL \u66f4\u65b0\u4e3aIPC\u8bb0\u5f55\u7684\u57df\u540d\u3002 \u8bbe\u7f6e\u4ee5\u4e0b\u6388\u6743\u914d\u7f6e\u3002 \u60a8\u5df2\u7ecf\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u81ea\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002 (\u9009\u9879 3) Keycloak OIDC \u5ba2\u6237\u7aef \u6309\u7167 \u672c\u6307\u5357 \u5728AWS\u4e2d\u56fd\u533a\u57df\u90e8\u7f72 Keycloak \u89e3\u51b3\u65b9\u6848\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55 Keycloak \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 Add Realm \u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a Realm\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 \u8fdb\u5165\u9886\u57df\u8bbe\u7f6e\u9875\u9762\u3002\u9009\u62e9 Endpoints \uff0c\u7136\u540e\u4ece\u5217\u8868\u4e2d\u9009\u62e9 OpenID Endpoint Configuration \u3002 \u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684 JSON \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55 issuer \u503c\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fd4\u56deKeycloak\u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u9009\u62e9 Clients \uff0c\u7136\u540e\u9009\u62e9 Create \u3002 \u8f93\u5165\u5ba2\u6237 ID\uff0c\u5fc5\u987b\u5305\u542b 24 \u4e2a\u5b57\u6bcd\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u6216\u6570\u5b57\u3002\u8bb0\u5f55 Client ID \uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u66f4\u6539Client\u8bbe\u7f6e\uff0c\u5728 Valid Redirect URIs \u5904\u8f93\u5165 https://<\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u57df\u540d> \uff0c\u5728 Web Origins \u8f93\u5165 * \u548c + \u3002 \u5728 Advanced Settings \u4e2d, \u8bf7\u628a Access Token Lifespan \u7684\u503c\u8bbe\u7f6e\u4e3a5\u5206\u949f\u6216\u66f4\u957f\u65f6\u95f4\u3002 \u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u680f\u7684 Users \u3002 \u70b9\u51fb Add user \uff0c\u5e76\u8f93\u5165 username \u3002 \u521b\u5efa\u7528\u6237\u540e\uff0c\u9009\u62e9 Credentials \uff0c\u8f93\u5165 Password \u3002 Issuer \u7684\u503c\u7684\u683c\u5f0f\u4e3a https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME> \u3002 (\u9009\u9879 4) \u4f7f\u7528 ADFS OpenID Connect \u786e\u4fdd\u60a8\u7684 ADFS \u5df2\u5b89\u88c5\uff0c\u60a8\u53ef\u4ee5\u6309\u7167 \u672c\u6307\u5357 \u4e86\u89e3\u5982\u4f55\u5b89\u88c5 ADFS -\u90e8\u7f72\u6307\u5357\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55\u5230 ADFS \u767b\u5f55\u9875\u9762\u3002 URL \u5e94\u4e3a\u201chttps://adfs.domain.com/adfs/ls/idpinitiatedSignOn.aspx\u201d\uff0c\u5c06 adfs.domain.com \u66ff\u6362\u4e3a\u60a8\u7684\u771f\u5b9e ADFS \u57df\u3002 \u767b\u5f55\u60a8\u7684 \u57df\u63a7\u5236\u5668 \uff0c\u6253\u5f00 Active Directory \u7528\u6237\u548c\u8ba1\u7b97\u673a \u3002 \u4e3a\u65e5\u5fd7\u901a \u7528\u6237\u521b\u5efa\u4e00\u4e2a \u5b89\u5168\u7ec4 \uff0c\u5c06\u60a8\u8ba1\u5212\u7684\u65e5\u5fd7\u901a \u7528\u6237\u6dfb\u52a0\u5230\u6b64\u5b89\u5168\u7ec4\u3002 \u767b\u5f55 ADFS \u670d\u52a1\u5668\uff0c\u6253\u5f00 ADFS \u7ba1\u7406 \u3002 \u53f3\u51fb Application Groups \uff0c\u70b9\u51fb Application Group \uff0c\u8f93\u5165Application Group\u7684\u540d\u79f0\u3002\u5728 Client-Server Applications \u4e0b\u9009\u62e9 Web browser access a web application \u9009\u9879\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002 \u8bb0\u5f55\u4e0b\u6b64\u7a97\u53e3\u4e2d\u7684 Client Identifier ( client_id )\uff0c\u5728 Redirect URI \u4e0b\uff0c\u8f93\u5165\u60a8\u7684\u65e5\u5fd7\u901a\u57df\u540d\uff08\u4f8b\u5982\uff0c xx.domain.com \uff09\uff0c\u7136\u540e\u5355\u51fb \u6dfb\u52a0 \uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \u3002 \u5728 Choose Access Control Policy \u7a97\u53e3\u4e2d\uff0c\u9009\u62e9 Permit specific group \uff0c\u5355\u51fb Policy \u90e8\u5206\u4e0b\u7684 parameters \uff0c\u6dfb\u52a0\u5728\u7b2c 4 \u6b65\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \uff08\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u8981\u6c42\u914d\u7f6e\u5176\u4ed6\u8bbf\u95ee\u63a7\u5236\u7b56\u7565\uff09\u3002 \u5728\u6458\u8981\u7a97\u53e3\u4e0b\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u5355\u51fb \u5173\u95ed \u3002 \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u6253\u5f00 Windows PowerShell\uff0c\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u914d\u7f6e ADFS \u4ee5\u5141\u8bb8\u5bf9\u60a8\u8ba1\u5212\u7684 URL \u8fdb\u884c CORS\u3002 Set-AdfsResponseHeaders -EnableCORS $true Set-AdfsResponseHeaders -CORSTrustedOrigins https://<your-centralized-logging-with-opensearch-domain> \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u7684 Windows PowerShell \u4e0b\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6 ADFS \u7684\u9881\u53d1\u8005\uff08 issuer \uff09\uff0c\u7c7b\u4f3c\u4e8e https://adfs.domain.com/adfs \u3002 Get-ADFSProperties | Select IdTokenIssuer \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u91cd\u8981 \u5728\u4e00\u4e2a AWS \u8d26\u6237\u7684\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u60a8\u53ea\u80fd\u90e8\u7f72\u4e00\u4e2a\u65e5\u5fd7\u901a\u7684\u5806\u6808\u3002 \u5982\u679c\u60a8\u5728\u90e8\u7f72\u4e2d\u78b0\u5230\u4e86\u9519\u8bef\uff0c\u6bd4\u5982\u6ca1\u6709\u6ee1\u8db3 \u524d\u63d0\u6761\u4ef6 \uff0c \u8bf7\u786e\u4fdd\u60a8\u5220\u9664\u4e86\u5931\u8d25\u7684\u5806\u6808\uff0c\u7136\u540e\u518d\u91cd\u8bd5\u90e8\u7f72\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u5728\u6d77\u5916\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u6d77\u5916\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 IAM \u548c STS \u9650\u5236 \u4e2d\u7684 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// \u5f00\u5934\u3002 Domain <\u53ef\u9009\u8f93\u5165> \u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID <\u53ef\u9009\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 AcmCertificateArn <\u53ef\u9009\u8f93\u5165> \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) \u4e2d\u8bf7\u6c42\uff08\u6216\u5bfc\u5165\uff09\u7684 ACM \u8bc1\u4e66\u7684 Arn\u3002 \u5982\u679c\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain <\u53ef\u9009\u8f93\u5165> \u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID \u53ef\u9009\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 AcmCertificateArn <\u53ef\u9009\u8f93\u5165> \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) \u4e2d\u8bf7\u6c42\uff08\u6216\u5bfc\u5165\uff09\u7684 ACM \u8bc1\u4e66\u7684 Arn\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 Internet Gateway \u7684\u8def\u7531\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 NAT Gateway \u7684\u8def\u7531\u3002 \u91cd\u8981 Domain, IamCertificateID, AcmCertificateArn \u4e09\u8005\u5173\u7cfb\u5982\u4e0b\uff1a \u82e5\u60a8\u5728 AWS \u4e2d\u56fd\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u5fc5\u987b\u8f93\u5165 Domain, IamCertificateID\u3002 \u82e5\u60a8\u5728 AWS \u6d77\u5916\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\uff1a \u82e5\u9700\u8981\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u5219\u5fc5\u987b\u8f93\u5165 Domain, AcmCertificateArn\u3002 \u82e5\u65e0\u9700\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u5219\u4fdd\u6301 Domain, IamCertificateID, AcmCertificateArn \u4e3a\u7a7a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b64\u89e3\u51b3\u65b9\u6848\u9884\u7f6e CloudFront \u5206\u914d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u83b7\u53d6 WebConsoleUrl \u4f5c\u4e3a\u89e3\u6790\u5730\u5740\u3002 \u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa CNAME \u8bb0\u5f55\uff0c\u6307\u5411\u8be5\u89e3\u6790\u5730\u5740\u3002 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0 \u91cd\u8981 \u60a8\u7684\u767b\u5f55\u51ed\u636e\u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u3002 \u5728\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5728 OIDC \u63d0\u4f9b\u5546\u7684\u7528\u6237\u6c60\u4e2d\u521b\u5efa\u4e86\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00DNS\u89e3\u6790\u5668\u4e2d\u521b\u5efa\u7684CNAME\u8bb0\u5f55\u3002 \u9009\u62e9 \u767b\u5f55 Centralized Logging with OpenSearch \uff0c\u7136\u540e\u5bfc\u822a\u5230 OIDC \u63d0\u4f9b\u5546\u3002 \u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u60a8\u53ef\u80fd\u4f1a\u88ab\u8981\u6c42\u66f4\u6539\u9996\u6b21\u767b\u5f55\u7684\u9ed8\u8ba4\u5bc6\u7801\uff0c\u8fd9\u53d6\u51b3\u4e8e\u60a8\u7684 OIDC \u63d0\u4f9b\u5546\u7684\u653f\u7b56\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00\u65e5\u5fd7\u901a\u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c \uff1a\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u4f7f\u7528 OpenID Connect"},{"location":"implementation-guide/deployment/with-oidc/#openid-connect","text":"\u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 30 \u5206\u949f","title":"\u4f7f\u7528 OpenID Connect"},{"location":"implementation-guide/deployment/with-oidc/#_1","text":"\u91cd\u8981 \u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u901a\u8fc7 CloudFront \u5206\u53d1\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u5206\u53d1\u88ab\u89c6\u4e3a Internet \u4fe1\u606f\u670d\u52a1\u3002 \u5982\u679c\u60a8\u5728 AWS \u4e2d\u56fd\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002\u57df\u540d\u5fc5\u987b\u6709\u6709\u6548\u7684 ICP\u5907\u6848 \u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002 \u4e00\u4e2a\u57df\u540d\u3002 \u60a8\u5c06\u4f7f\u7528\u6b64\u57df\u6765\u8bbf\u95ee\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002\uff08AWS \u4e2d\u56fd\u533a\u57df\u5fc5\u9700\uff0cAWS \u6d77\u5916\u533a\u57df\u53ef\u9009\uff09 \u63d0\u4f9b AWS IAM \u4e2d\u7684 SSL \u8bc1\u4e66\uff0c\u4e14\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u7684\u57df\u76f8\u5173\u8054\u3002 \u60a8\u53ef\u4ee5\u6309\u7167 \u672c\u6307\u5357 \u5c06 SSL \u8bc1\u4e66\u4e0a\u4f20\u5230 IAM\u3002\uff08AWS \u4e2d\u56fd\u533a\u57df\u5fc5\u9700\uff0cAWS \u6d77\u5916\u533a\u57df\u4e0d\u63a8\u8350\uff09 \u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) \u4e2d\u8bf7\u6c42\uff08\u6216\u5bfc\u5165\uff09ACM \u8bc1\u4e66\u3002\uff08AWS \u4e2d\u56fd\u533a\u57df\u65e0\u9700\uff0cAWS \u6d77\u5916\u533a\u57df\u53ef\u9009\uff09","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/deployment/with-oidc/#_2","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0","title":"\u90e8\u7f72\u6982\u89c8"},{"location":"implementation-guide/deployment/with-oidc/#1-oidc","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684 OpenID \u8fde\u63a5\u5668 (OIDC) \u63d0\u4f9b\u5546\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u9009\u9879 1 \u81f3 4\u3002 \uff08\u9009\u9879 1\uff09\u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 2\uff09 Authing \u662f\u7b2c\u4e09\u65b9\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 3\uff09 Keycloak \u662f AWS \u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 4\uff09 ADFS \u662f Microsoft \u63d0\u4f9b\u7684\u4e00\u9879\u670d\u52a1\u3002 \uff08\u9009\u9879 5\uff09\u5176\u5b83\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5e73\u53f0\uff0c\u5982 Auth0 \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa OIDC \u5ba2\u6237\u7aef\uff0c\u5e76\u83b7\u53d6 client_id \u548c issuer \u3002","title":"\u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/with-oidc/#1-cognito-user-pool","text":"\u5728 AWS \u6d77\u5916\u533a\u57df\u767b\u9646 Amazon Cognito \u63a7\u5236\u53f0 \u3002 \u6309\u7167\u6b64 \u6307\u5357 \u6dfb\u52a0\u5e94\u7528\u7a0b\u5e8f\u5ba2\u6237\u7aef\u5e76\u8bbe\u7f6e\u6258\u7ba1 UI\u3002 \u5bf9\u4e8e \u5e94\u7528\u7a0b\u5e8f\u7c7b\u578b \uff0c\u9009\u62e9 \u516c\u5171\u5ba2\u6237\u7aef \u3002 \u8bf7\u5728\u586b\u5199 \u5141\u8bb8\u7684\u56de\u8c03 URL \u548c \u5141\u8bb8\u7684\u6ce8\u9500 URL \u65f6\uff0c\u4f7f\u7528\u7ed9\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u51c6\u5907\u7684\u57df\u540d\u3002\u5728\u60a8\u7684 hosted UI \u8bbe\u7f6e\u6210\u529f\u540e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u72b6\u6001\uff1a \u5c06 \u5ba2\u6237\u7aef ID , \u7528\u6237\u6c60 ID \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5728 \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u4e2d\uff0cOidcClientID \u5c31\u662f \u5ba2\u6237\u7aef ID , OidcProvider \u662f https://cognito-idp.${REGION}.amazonaws.com/${USER_POOL_ID} \u3002","title":"(\u9009\u9879 1) \u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool"},{"location":"implementation-guide/deployment/with-oidc/#2-authingcn-oidc","text":"\u767b\u5f55 Authing \u63a7\u5236\u53f0 \u3002 \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u6c60\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u6c60\u3002 \u9009\u62e9\u7528\u6237\u6c60\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 \u5e94\u7528 \u4e0b\u7684 \u81ea\u5efa\u5e94\u7528 \u3002 \u5355\u51fb \u521b\u5efa\u81ea\u5efa\u5e94\u7528 \u6309\u94ae\u3002 \u8f93\u5165 \u5e94\u7528\u540d\u79f0 \u548c \u8ba4\u8bc1\u5730\u5740 \u3002 \u5c06Endpoint Information\u4e2d\u7684 App ID \uff08\u5373 client_id \uff09\u548c Issuer \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5c06 Login Callback URL \u548c Logout Callback URL \u66f4\u65b0\u4e3aIPC\u8bb0\u5f55\u7684\u57df\u540d\u3002 \u8bbe\u7f6e\u4ee5\u4e0b\u6388\u6743\u914d\u7f6e\u3002 \u60a8\u5df2\u7ecf\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u81ea\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002","title":"(\u9009\u9879 2) Authing.cn OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/with-oidc/#3-keycloak-oidc","text":"\u6309\u7167 \u672c\u6307\u5357 \u5728AWS\u4e2d\u56fd\u533a\u57df\u90e8\u7f72 Keycloak \u89e3\u51b3\u65b9\u6848\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55 Keycloak \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 Add Realm \u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a Realm\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 \u8fdb\u5165\u9886\u57df\u8bbe\u7f6e\u9875\u9762\u3002\u9009\u62e9 Endpoints \uff0c\u7136\u540e\u4ece\u5217\u8868\u4e2d\u9009\u62e9 OpenID Endpoint Configuration \u3002 \u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684 JSON \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55 issuer \u503c\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fd4\u56deKeycloak\u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u9009\u62e9 Clients \uff0c\u7136\u540e\u9009\u62e9 Create \u3002 \u8f93\u5165\u5ba2\u6237 ID\uff0c\u5fc5\u987b\u5305\u542b 24 \u4e2a\u5b57\u6bcd\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u6216\u6570\u5b57\u3002\u8bb0\u5f55 Client ID \uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u66f4\u6539Client\u8bbe\u7f6e\uff0c\u5728 Valid Redirect URIs \u5904\u8f93\u5165 https://<\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u57df\u540d> \uff0c\u5728 Web Origins \u8f93\u5165 * \u548c + \u3002 \u5728 Advanced Settings \u4e2d, \u8bf7\u628a Access Token Lifespan \u7684\u503c\u8bbe\u7f6e\u4e3a5\u5206\u949f\u6216\u66f4\u957f\u65f6\u95f4\u3002 \u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u680f\u7684 Users \u3002 \u70b9\u51fb Add user \uff0c\u5e76\u8f93\u5165 username \u3002 \u521b\u5efa\u7528\u6237\u540e\uff0c\u9009\u62e9 Credentials \uff0c\u8f93\u5165 Password \u3002 Issuer \u7684\u503c\u7684\u683c\u5f0f\u4e3a https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME> \u3002","title":"(\u9009\u9879 3) Keycloak OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/with-oidc/#4-adfs-openid-connect","text":"\u786e\u4fdd\u60a8\u7684 ADFS \u5df2\u5b89\u88c5\uff0c\u60a8\u53ef\u4ee5\u6309\u7167 \u672c\u6307\u5357 \u4e86\u89e3\u5982\u4f55\u5b89\u88c5 ADFS -\u90e8\u7f72\u6307\u5357\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55\u5230 ADFS \u767b\u5f55\u9875\u9762\u3002 URL \u5e94\u4e3a\u201chttps://adfs.domain.com/adfs/ls/idpinitiatedSignOn.aspx\u201d\uff0c\u5c06 adfs.domain.com \u66ff\u6362\u4e3a\u60a8\u7684\u771f\u5b9e ADFS \u57df\u3002 \u767b\u5f55\u60a8\u7684 \u57df\u63a7\u5236\u5668 \uff0c\u6253\u5f00 Active Directory \u7528\u6237\u548c\u8ba1\u7b97\u673a \u3002 \u4e3a\u65e5\u5fd7\u901a \u7528\u6237\u521b\u5efa\u4e00\u4e2a \u5b89\u5168\u7ec4 \uff0c\u5c06\u60a8\u8ba1\u5212\u7684\u65e5\u5fd7\u901a \u7528\u6237\u6dfb\u52a0\u5230\u6b64\u5b89\u5168\u7ec4\u3002 \u767b\u5f55 ADFS \u670d\u52a1\u5668\uff0c\u6253\u5f00 ADFS \u7ba1\u7406 \u3002 \u53f3\u51fb Application Groups \uff0c\u70b9\u51fb Application Group \uff0c\u8f93\u5165Application Group\u7684\u540d\u79f0\u3002\u5728 Client-Server Applications \u4e0b\u9009\u62e9 Web browser access a web application \u9009\u9879\uff0c\u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002 \u8bb0\u5f55\u4e0b\u6b64\u7a97\u53e3\u4e2d\u7684 Client Identifier ( client_id )\uff0c\u5728 Redirect URI \u4e0b\uff0c\u8f93\u5165\u60a8\u7684\u65e5\u5fd7\u901a\u57df\u540d\uff08\u4f8b\u5982\uff0c xx.domain.com \uff09\uff0c\u7136\u540e\u5355\u51fb \u6dfb\u52a0 \uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \u3002 \u5728 Choose Access Control Policy \u7a97\u53e3\u4e2d\uff0c\u9009\u62e9 Permit specific group \uff0c\u5355\u51fb Policy \u90e8\u5206\u4e0b\u7684 parameters \uff0c\u6dfb\u52a0\u5728\u7b2c 4 \u6b65\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \uff08\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u8981\u6c42\u914d\u7f6e\u5176\u4ed6\u8bbf\u95ee\u63a7\u5236\u7b56\u7565\uff09\u3002 \u5728\u6458\u8981\u7a97\u53e3\u4e0b\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u5355\u51fb \u5173\u95ed \u3002 \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u6253\u5f00 Windows PowerShell\uff0c\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u914d\u7f6e ADFS \u4ee5\u5141\u8bb8\u5bf9\u60a8\u8ba1\u5212\u7684 URL \u8fdb\u884c CORS\u3002 Set-AdfsResponseHeaders -EnableCORS $true Set-AdfsResponseHeaders -CORSTrustedOrigins https://<your-centralized-logging-with-opensearch-domain> \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u7684 Windows PowerShell \u4e0b\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6 ADFS \u7684\u9881\u53d1\u8005\uff08 issuer \uff09\uff0c\u7c7b\u4f3c\u4e8e https://adfs.domain.com/adfs \u3002 Get-ADFSProperties | Select IdTokenIssuer","title":"(\u9009\u9879 4) \u4f7f\u7528 ADFS OpenID Connect"},{"location":"implementation-guide/deployment/with-oidc/#2","text":"\u91cd\u8981 \u5728\u4e00\u4e2a AWS \u8d26\u6237\u7684\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u60a8\u53ea\u80fd\u90e8\u7f72\u4e00\u4e2a\u65e5\u5fd7\u901a\u7684\u5806\u6808\u3002 \u5982\u679c\u60a8\u5728\u90e8\u7f72\u4e2d\u78b0\u5230\u4e86\u9519\u8bef\uff0c\u6bd4\u5982\u6ca1\u6709\u6ee1\u8db3 \u524d\u63d0\u6761\u4ef6 \uff0c \u8bf7\u786e\u4fdd\u60a8\u5220\u9664\u4e86\u5931\u8d25\u7684\u5806\u6808\uff0c\u7136\u540e\u518d\u91cd\u8bd5\u90e8\u7f72\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u5728\u6d77\u5916\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u6d77\u5916\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u65e5\u5fd7\u901a \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 IAM \u548c STS \u9650\u5236 \u4e2d\u7684 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// \u5f00\u5934\u3002 Domain <\u53ef\u9009\u8f93\u5165> \u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID <\u53ef\u9009\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 AcmCertificateArn <\u53ef\u9009\u8f93\u5165> \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) \u4e2d\u8bf7\u6c42\uff08\u6216\u5bfc\u5165\uff09\u7684 ACM \u8bc1\u4e66\u7684 Arn\u3002 \u5982\u679c\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain <\u53ef\u9009\u8f93\u5165> \u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID \u53ef\u9009\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 AcmCertificateArn <\u53ef\u9009\u8f93\u5165> \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) \u4e2d\u8bf7\u6c42\uff08\u6216\u5bfc\u5165\uff09\u7684 ACM \u8bc1\u4e66\u7684 Arn\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 Internet Gateway \u7684\u8def\u7531\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u5b50\u7f51\u5fc5\u987b\u6709\u6307\u5411 NAT Gateway \u7684\u8def\u7531\u3002 \u91cd\u8981 Domain, IamCertificateID, AcmCertificateArn \u4e09\u8005\u5173\u7cfb\u5982\u4e0b\uff1a \u82e5\u60a8\u5728 AWS \u4e2d\u56fd\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\uff0c\u5219\u5fc5\u987b\u8f93\u5165 Domain, IamCertificateID\u3002 \u82e5\u60a8\u5728 AWS \u6d77\u5916\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\uff1a \u82e5\u9700\u8981\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u5219\u5fc5\u987b\u8f93\u5165 Domain, AcmCertificateArn\u3002 \u82e5\u65e0\u9700\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u5219\u4fdd\u6301 Domain, IamCertificateID, AcmCertificateArn \u4e3a\u7a7a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808"},{"location":"implementation-guide/deployment/with-oidc/#3-dns","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u9884\u7f6e CloudFront \u5206\u914d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u83b7\u53d6 WebConsoleUrl \u4f5c\u4e3a\u89e3\u6790\u5730\u5740\u3002 \u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa CNAME \u8bb0\u5f55\uff0c\u6307\u5411\u8be5\u89e3\u6790\u5730\u5740\u3002","title":"\u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790"},{"location":"implementation-guide/deployment/with-oidc/#4","text":"\u91cd\u8981 \u60a8\u7684\u767b\u5f55\u51ed\u636e\u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u3002 \u5728\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5728 OIDC \u63d0\u4f9b\u5546\u7684\u7528\u6237\u6c60\u4e2d\u521b\u5efa\u4e86\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00DNS\u89e3\u6790\u5668\u4e2d\u521b\u5efa\u7684CNAME\u8bb0\u5f55\u3002 \u9009\u62e9 \u767b\u5f55 Centralized Logging with OpenSearch \uff0c\u7136\u540e\u5bfc\u822a\u5230 OIDC \u63d0\u4f9b\u5546\u3002 \u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u60a8\u53ef\u80fd\u4f1a\u88ab\u8981\u6c42\u66f4\u6539\u9996\u6b21\u767b\u5f55\u7684\u9ed8\u8ba4\u5bc6\u7801\uff0c\u8fd9\u53d6\u51b3\u4e8e\u60a8\u7684 OIDC \u63d0\u4f9b\u5546\u7684\u653f\u7b56\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00\u65e5\u5fd7\u901a\u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c \uff1a\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 Amazon OpenSearch Service \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/","text":"\u6982\u89c8 \u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u4e0a\u7ba1\u7406 Amazon OpenSearch Service \u57df\u3002 Amazon OpenSearch Service \u57df\u4e0e Amazon OpenSearch Service \u96c6\u7fa4\u540c\u4e49\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\uff1a \u5bfc\u5165\u548c\u5220\u9664 Amazon OpenSearch Service \u57df \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u521b\u5efa\u63a8\u8350\u7684\u544a\u8b66 \u60a8\u53ef\u4ee5\u5148\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\uff0c\u4e86\u89e3\u4f7f\u7528\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u7684\u57fa\u672c\u6b65\u9aa4\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/domains/#_1","text":"\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u4e0a\u7ba1\u7406 Amazon OpenSearch Service \u57df\u3002 Amazon OpenSearch Service \u57df\u4e0e Amazon OpenSearch Service \u96c6\u7fa4\u540c\u4e49\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\uff1a \u5bfc\u5165\u548c\u5220\u9664 Amazon OpenSearch Service \u57df \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u521b\u5efa\u63a8\u8350\u7684\u544a\u8b66 \u60a8\u53ef\u4ee5\u5148\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\uff0c\u4e86\u89e3\u4f7f\u7528\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u7684\u57fa\u672c\u6b65\u9aa4\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/domains/alarms/","text":"\u63a8\u8350\u544a\u8b66 Amazon OpenSearch \u63d0\u4f9b\u4e00\u7ec4 \u63a8\u8350\u7684 CloudWatch \u544a\u8b66 \u6765\u76d1\u63a7 Amazon OpenSearch Service \u57df\u7684\u8fd0\u884c\u72b6\u51b5\u3002\u65e5\u5fd7\u901a\u5e2e\u52a9\u60a8\u81ea\u52a8\u521b\u5efa\u544a\u8b66\uff0c\u5e76\u901a\u8fc7 SNS \u5c06\u901a\u77e5\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\uff08\u6216 SMS\uff09\u3002 \u521b\u5efa\u544a\u8b66 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u4e0b\uff0c\u5728 \u544a\u8b66 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u3002 \u9009\u62e9\u60a8\u8981\u521b\u5efa\u7684\u544a\u8b66\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u8bbe\u7f6e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 DomainName <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u540d\u79f0\u3002 Email <\u9700\u8981\u8f93\u5165> \u901a\u77e5\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002\u544a\u8b66\u5c06\u901a\u8fc7 SNS \u53d1\u9001\u5230\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ClusterStatusRed \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u4e3b\u5206\u7247\u53ca\u5176\u526f\u672c\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 ClusterStatusYellow \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u5206\u7247\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 FreeStorageSpace 10 \u662f\u5426\u5728\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4e0b\u964d\u5230\u60a8\u5728 GiB \u4e2d\u8f93\u5165\u7684\u53ef\u7528\u5b58\u50a8\u7a7a\u95f4\u65f6\u542f\u7528\u544a\u8b66\u3002\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u7a7a\u95f4\u7684 25%\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 ClusterIndexWritesBlocked 1 \u5728 5 \u5206\u949f\u51fa\u73b0\u96c6\u7fa4\u963b\u6b62\u5199\u5165\u9519\u8bef\u7684\u6b21\u6570\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 UnreachableNodeNumber 3 \u8282\u70b9\u6700\u5c0f\u503c\u4e3a < x 1 \u5929\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 AutomatedSnapshotFailure \u662f \u81ea\u52a8\u5feb\u7167\u5931\u8d25\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 AutomatedSnapshotFailure \u6700\u5927\u503c >= 1 \u6301\u7eed 1 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 CPUUtilization \u662f \u53d1\u751f\u6301\u7eed\u9ad8 CPU \u4f7f\u7528\u7387\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 CPUUtilization \u6216 WarmCPUUtilization \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 JVMMemoryPressure \u662f JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u53d1\u751f\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 JVMMemoryPressure \u6216 WarmJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 5 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterCPUUtilization \u662f \u4e3b\u8282\u70b9CPU\u6301\u7eed\u9ad8\u4f7f\u7528\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterCPUUtilization \u6700\u5927\u503c >= 50% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterJVMMemoryPressure \u662f \u5f53\u4e3b\u8282\u70b9\u51fa\u73b0 JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyError \u662f \u7981\u7528 KMS \u52a0\u5bc6\u5bc6\u94a5\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 KMSKeyError \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyInaccessible \u662f \u662f\u5426\u5728 KMS \u52a0\u5bc6\u5bc6\u94a5\u5df2\u88ab\u5220\u9664\u6216\u5df2\u64a4\u9500\u5176\u5bf9 OpenSearch \u670d\u52a1\u7684\u6388\u6743\u65f6\u542f\u7528\u544a\u8b66\u3002 KMSKeyInaccessible \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u4f60\u5e94\u8be5\u6536\u5230 \u5927\u7ea6 5 \u5206\u949f\u540e\u51fa\u73b0 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u544a\u8b66\u540e\uff0c\u5c06\u5411\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u53d1\u9001\u4e00\u5c01\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002 \u60a8\u9700\u8981\u5355\u51fb\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684 *\u786e\u8ba4 * \u94fe\u63a5\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684 \u57fa\u672c\u914d\u7f6e > \u544a\u8b66 > Cloudwatch \u544a\u8b66 \u94fe\u63a5\u8bbf\u95ee Cloudwatch \u4e2d\u65b0\u521b\u5efa\u7684\u544a\u8b66\uff0c\u94fe\u63a5\u4f4d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bf7\u786e\u4fdd\u6240\u6709\u7684\u544a\u8b66\u72b6\u6001\u90fd\u662f \u786e\u5b9a \u72b6\u6001\u3002\u56e0\u4e3a\u4efb\u4f55\u5728\u60a8\u786e\u8ba4\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\u53d1\u51fa\u7684\u544a\u8b66\u5e76\u4e0d\u4f1a\u53d1\u9001\u901a\u77e5\u90ae\u4ef6\u3002 \u6ce8\u610f \u5728\u60a8\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\uff0c\u544a\u8b66\u5e76\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55SNS\u901a\u77e5\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u521b\u5efa\u5b8c\u544a\u8b66\u529f\u80fd\u540e\uff0c\u901a\u8fc7\u4e0a\u6587\u63d0\u5230\u7684\u94fe\u63a5\u524d\u5f80 CloudWatch \u9875\u9762\u68c0\u67e5\u6bcf\u4e00\u4e2a\u544a\u8b66\u7684\u72b6\u6001\uff0c\u5e76\u4f18\u5148\u89e3\u51b3\u5df2\u7ecf\u89e6\u53d1\u7684\u544a\u8b66\u5185\u5bb9\u3002 \u5220\u9664\u544a\u8b66 \u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_1","text":"Amazon OpenSearch \u63d0\u4f9b\u4e00\u7ec4 \u63a8\u8350\u7684 CloudWatch \u544a\u8b66 \u6765\u76d1\u63a7 Amazon OpenSearch Service \u57df\u7684\u8fd0\u884c\u72b6\u51b5\u3002\u65e5\u5fd7\u901a\u5e2e\u52a9\u60a8\u81ea\u52a8\u521b\u5efa\u544a\u8b66\uff0c\u5e76\u901a\u8fc7 SNS \u5c06\u901a\u77e5\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\uff08\u6216 SMS\uff09\u3002","title":"\u63a8\u8350\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_2","text":"","title":"\u521b\u5efa\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_3","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u4e0b\uff0c\u5728 \u544a\u8b66 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u3002 \u9009\u62e9\u60a8\u8981\u521b\u5efa\u7684\u544a\u8b66\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u8bbe\u7f6e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/alarms/#cloudformation","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 DomainName <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u540d\u79f0\u3002 Email <\u9700\u8981\u8f93\u5165> \u901a\u77e5\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002\u544a\u8b66\u5c06\u901a\u8fc7 SNS \u53d1\u9001\u5230\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ClusterStatusRed \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u4e3b\u5206\u7247\u53ca\u5176\u526f\u672c\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 ClusterStatusYellow \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u5206\u7247\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 FreeStorageSpace 10 \u662f\u5426\u5728\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4e0b\u964d\u5230\u60a8\u5728 GiB \u4e2d\u8f93\u5165\u7684\u53ef\u7528\u5b58\u50a8\u7a7a\u95f4\u65f6\u542f\u7528\u544a\u8b66\u3002\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u7a7a\u95f4\u7684 25%\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 ClusterIndexWritesBlocked 1 \u5728 5 \u5206\u949f\u51fa\u73b0\u96c6\u7fa4\u963b\u6b62\u5199\u5165\u9519\u8bef\u7684\u6b21\u6570\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 UnreachableNodeNumber 3 \u8282\u70b9\u6700\u5c0f\u503c\u4e3a < x 1 \u5929\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 AutomatedSnapshotFailure \u662f \u81ea\u52a8\u5feb\u7167\u5931\u8d25\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 AutomatedSnapshotFailure \u6700\u5927\u503c >= 1 \u6301\u7eed 1 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 CPUUtilization \u662f \u53d1\u751f\u6301\u7eed\u9ad8 CPU \u4f7f\u7528\u7387\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 CPUUtilization \u6216 WarmCPUUtilization \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 JVMMemoryPressure \u662f JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u53d1\u751f\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 JVMMemoryPressure \u6216 WarmJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 5 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterCPUUtilization \u662f \u4e3b\u8282\u70b9CPU\u6301\u7eed\u9ad8\u4f7f\u7528\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterCPUUtilization \u6700\u5927\u503c >= 50% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterJVMMemoryPressure \u662f \u5f53\u4e3b\u8282\u70b9\u51fa\u73b0 JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyError \u662f \u7981\u7528 KMS \u52a0\u5bc6\u5bc6\u94a5\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 KMSKeyError \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyInaccessible \u662f \u662f\u5426\u5728 KMS \u52a0\u5bc6\u5bc6\u94a5\u5df2\u88ab\u5220\u9664\u6216\u5df2\u64a4\u9500\u5176\u5bf9 OpenSearch \u670d\u52a1\u7684\u6388\u6743\u65f6\u542f\u7528\u544a\u8b66\u3002 KMSKeyInaccessible \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u4f60\u5e94\u8be5\u6536\u5230 \u5927\u7ea6 5 \u5206\u949f\u540e\u51fa\u73b0 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u544a\u8b66\u540e\uff0c\u5c06\u5411\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u53d1\u9001\u4e00\u5c01\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002 \u60a8\u9700\u8981\u5355\u51fb\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684 *\u786e\u8ba4 * \u94fe\u63a5\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684 \u57fa\u672c\u914d\u7f6e > \u544a\u8b66 > Cloudwatch \u544a\u8b66 \u94fe\u63a5\u8bbf\u95ee Cloudwatch \u4e2d\u65b0\u521b\u5efa\u7684\u544a\u8b66\uff0c\u94fe\u63a5\u4f4d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bf7\u786e\u4fdd\u6240\u6709\u7684\u544a\u8b66\u72b6\u6001\u90fd\u662f \u786e\u5b9a \u72b6\u6001\u3002\u56e0\u4e3a\u4efb\u4f55\u5728\u60a8\u786e\u8ba4\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\u53d1\u51fa\u7684\u544a\u8b66\u5e76\u4e0d\u4f1a\u53d1\u9001\u901a\u77e5\u90ae\u4ef6\u3002 \u6ce8\u610f \u5728\u60a8\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\uff0c\u544a\u8b66\u5e76\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55SNS\u901a\u77e5\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u521b\u5efa\u5b8c\u544a\u8b66\u529f\u80fd\u540e\uff0c\u901a\u8fc7\u4e0a\u6587\u63d0\u5230\u7684\u94fe\u63a5\u524d\u5f80 CloudWatch \u9875\u9762\u68c0\u67e5\u6bcf\u4e00\u4e2a\u544a\u8b66\u7684\u72b6\u6001\uff0c\u5e76\u4f18\u5148\u89e3\u51b3\u5df2\u7ecf\u89e6\u53d1\u7684\u544a\u8b66\u5185\u5bb9\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/domains/alarms/#_4","text":"\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664\u544a\u8b66"},{"location":"implementation-guide/domains/import/","text":"\u57df\u64cd\u4f5c \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u540e\uff0c\u60a8\u53ef\u4ee5\u5bfc\u5165 Amazon OpenSearch Service \u57df\u3002 \u6ce8\u610f \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u652f\u6301Amazon OpenSearch 1.3 \u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u524d\u63d0\u6761\u4ef6 VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 Amazon OpenSearch Service \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 \u65e5\u5fd7\u901a \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 Amazon OpenSearch Service \u57df\u3002 \u5728 security configuration\uff08\u5b89\u5168\u914d\u7f6e\uff09\u4e2d\uff0c\u60a8\u7684 access policy \uff08\u8bbf\u95ee\u7b56\u7565\uff09\u5e94\u8be5\u548c\u4e0b\u56fe\u7c7b\u4f3c\uff1a \u5bfc\u5165 Amazon OpenSearch Service \u57df \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u9009\u62e9\u96c6\u7fa4 \u9875\u9762\u4e0a\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002\u4e0b\u62c9\u5217\u8868\u5c06\u4ec5\u663e\u793a\u4e0e\u89e3\u51b3\u65b9\u6848\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u7684\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u7f51\u7edc \u9875\u9762\u7684 \u7f51\u7edc\u521b\u5efa \uff0c \u9009\u62e9 \u624b\u52a8 \u5e76\u70b9\u51fb \u4e0b\u4e00\u6b65 \uff1b \u6216\u9009\u62e9 \u81ea\u52a8 \uff0c\u7136\u540e\u8f6c\u5230\u6b65\u9aa4 9\u3002 \u5728 VPC \u4e0b\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a VPC\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC \u7684 VPC\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0e\u60a8\u7684 Amazon OpenSearch Service \u57df\u76f8\u540c\u7684 VPC\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b50\u7f51\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC/privateSubnet1 \u548c LogHubVpc/DefaultVPC/privateSubnet2 \u7684\u5b50\u7f51\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b89\u5168\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ProcessSecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u5bfc\u5165 \u3002 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\u3002\u60a8\u9700\u8981\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u4ee5\u5141\u8bb8\u65e5\u5fd7\u5904\u7406\u5c42\u8bbf\u95ee\u60a8\u7684 Amazon OpenSearch Service \u57df\u3002 \u6ce8\u610f \u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u521b\u5efa VPC \u5bf9\u7b49\u5e76\u914d\u7f6e\u8def\u7531\u8868\u3002\u60a8\u65e0\u9700\u518d\u6b21\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u6309\u7167\u4ee5\u4e0b\u5185\u5bb9\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u3001\u66f4\u65b0\u5b89\u5168\u7ec4\u548c\u66f4\u65b0\u8def\u7531\u8868\u3002 \u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u627e\u5230\u5bfc\u5165\u7684\u57df\u540d\uff0c\u9009\u62e9\u57df\u540d\u3002 \u9009\u62e9 \u7f51\u7edc \u9009\u9879\u5361\u3002 \u590d\u5236 OpenSearch \u57df\u7f51\u7edc \u548c \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u4e24\u4e2a\u90e8\u5206\u4e2d\u7684 VPC ID\u3002\u60a8\u5c06\u5728\u8fd9\u4e24\u4e2a VPC \u4e4b\u95f4\u521b\u5efa\u5bf9\u7b49\u8fde\u63a5\u3002 \u5bfc\u822a\u5230 VPC \u63a7\u5236\u53f0\u5bf9\u7b49\u8fde\u63a5 \u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u540d\u79f0\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u672c\u5730 VPC\uff0cVPC ID (\u8bf7\u6c42\u8005) \uff0c\u9009\u62e9 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u7684 VPC ID\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u53e6\u4e00\u4e2a VPC, VPC ID (\u63a5\u6536\u65b9) \uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u7684VPC ID\u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \uff0c\u7136\u540e\u5bfc\u822a\u5230\u5bf9\u7b49\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u3002 \u5355\u51fb \u64cd\u4f5c \u6309\u94ae\u5e76\u9009\u62e9 \u63a5\u53d7\u8bf7\u6c42 \u3002 \u66f4\u65b0\u8def\u7531\u8868 \u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u63a7\u5236\u53f0\u3002 \u9009\u62e9\u5b50\u7f51\uff0c\u7136\u540e\u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\u3002 \u9009\u62e9\u5b50\u7f51\u5173\u8054\u7684\u8def\u7531\u8868\uff0c\u6253\u5f00\u8def\u7531\u8868\u914d\u7f6e\u9875\u9762\u3002 \u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\uff0c\u7136\u540e\u9009\u62e9 \u7f16\u8f91\u8def\u7531 \u3002 \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531 10.255.0.0/16 \uff08\u65e5\u5fd7\u901a\u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09\u6307\u5411\u60a8\u521a\u521a\u521b\u5efa\u7684\u5bf9\u7b49\u8fde\u63a5\u3002 \u8fd4\u56de\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5355\u51fb OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\u7684 VPC ID\u3002 \u5728 VPC \u63a7\u5236\u53f0\u4e0a\u9009\u62e9 VPC ID \u5e76\u627e\u5230\u5b83\u7684 IPv4 CIDR \u3002 \u5728\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u90e8\u5206\u4e2d\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u3002 \u91cd\u590d\u6b65\u9aa4 3\u30014\u30015\u30016 \u4ee5\u6dfb\u52a0\u76f8\u53cd\u7684\u8def\u7ebf\u3002\u5373\u914d\u7f6e OpenSearch VPC \u7684 IPv4 CIDR \u6307\u5411\u5bf9\u7b49\u8fde\u63a5\u3002\u60a8\u9700\u8981\u5bf9\u65e5\u5fd7\u5904\u7406\u7f51\u7edc\u7684\u6bcf\u4e2a\u5b50\u7f51\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\u3002 \u66f4\u65b0 OpenSearch \u57df\u7684\u5b89\u5168\u7ec4 \u5728\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\uff0c\u9009\u62e9 \u5b89\u5168\u7ec4 \u4e2d\u7684\u5b89\u5168\u7ec4 ID \u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b89\u5168\u7ec4\u3002 \u5728\u63a7\u5236\u53f0\u4e0a\uff0c\u9009\u62e9 \u7f16\u8f91\u5165\u7ad9\u89c4\u5219 \u3002 \u6dfb\u52a0\u89c4\u5219 \"ALLOW TCP/443 from 10.255.0.0/16\"\uff08\u65e5\u5fd7\u901a\u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09\u3002 \u9009\u62e9 \u4fdd\u5b58\u89c4\u5219 \u3002 \u5220\u9664 Amazon OpenSearch Service \u57df \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5220\u9664 Amazon OpenSearch Service \u57df\u3002 \u91cd\u8981 \u4ece\u65e5\u5fd7\u901a \u4e2d\u5220\u9664\u57df\u5c06 \u4e0d\u4f1a \u5220\u9664\u60a8 AWS \u8d26\u6237\u4e2d\u7684 Amazon OpenSearch Service \u57df\u3002 \u5b83 \u4e0d\u4f1a \u5f71\u54cd\u4efb\u4f55\u73b0\u6709\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u96c6\u7fa4\u64cd\u4f5c"},{"location":"implementation-guide/domains/import/#_1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u540e\uff0c\u60a8\u53ef\u4ee5\u5bfc\u5165 Amazon OpenSearch Service \u57df\u3002 \u6ce8\u610f \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u652f\u6301Amazon OpenSearch 1.3 \u53ca\u66f4\u9ad8\u7248\u672c\u3002","title":"\u57df\u64cd\u4f5c"},{"location":"implementation-guide/domains/import/#_2","text":"VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 Amazon OpenSearch Service \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 \u65e5\u5fd7\u901a \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 Amazon OpenSearch Service \u57df\u3002 \u5728 security configuration\uff08\u5b89\u5168\u914d\u7f6e\uff09\u4e2d\uff0c\u60a8\u7684 access policy \uff08\u8bbf\u95ee\u7b56\u7565\uff09\u5e94\u8be5\u548c\u4e0b\u56fe\u7c7b\u4f3c\uff1a","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/domains/import/#amazon-opensearch-service","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u9009\u62e9\u96c6\u7fa4 \u9875\u9762\u4e0a\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002\u4e0b\u62c9\u5217\u8868\u5c06\u4ec5\u663e\u793a\u4e0e\u89e3\u51b3\u65b9\u6848\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u7684\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u7f51\u7edc \u9875\u9762\u7684 \u7f51\u7edc\u521b\u5efa \uff0c \u9009\u62e9 \u624b\u52a8 \u5e76\u70b9\u51fb \u4e0b\u4e00\u6b65 \uff1b \u6216\u9009\u62e9 \u81ea\u52a8 \uff0c\u7136\u540e\u8f6c\u5230\u6b65\u9aa4 9\u3002 \u5728 VPC \u4e0b\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a VPC\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC \u7684 VPC\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0e\u60a8\u7684 Amazon OpenSearch Service \u57df\u76f8\u540c\u7684 VPC\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b50\u7f51\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC/privateSubnet1 \u548c LogHubVpc/DefaultVPC/privateSubnet2 \u7684\u5b50\u7f51\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b89\u5168\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ProcessSecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u5bfc\u5165 Amazon OpenSearch Service \u57df"},{"location":"implementation-guide/domains/import/#vpc","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\u3002\u60a8\u9700\u8981\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u4ee5\u5141\u8bb8\u65e5\u5fd7\u5904\u7406\u5c42\u8bbf\u95ee\u60a8\u7684 Amazon OpenSearch Service \u57df\u3002 \u6ce8\u610f \u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u521b\u5efa VPC \u5bf9\u7b49\u5e76\u914d\u7f6e\u8def\u7531\u8868\u3002\u60a8\u65e0\u9700\u518d\u6b21\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u6309\u7167\u4ee5\u4e0b\u5185\u5bb9\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u3001\u66f4\u65b0\u5b89\u5168\u7ec4\u548c\u66f4\u65b0\u8def\u7531\u8868\u3002","title":"\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde"},{"location":"implementation-guide/domains/import/#vpc_1","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u627e\u5230\u5bfc\u5165\u7684\u57df\u540d\uff0c\u9009\u62e9\u57df\u540d\u3002 \u9009\u62e9 \u7f51\u7edc \u9009\u9879\u5361\u3002 \u590d\u5236 OpenSearch \u57df\u7f51\u7edc \u548c \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u4e24\u4e2a\u90e8\u5206\u4e2d\u7684 VPC ID\u3002\u60a8\u5c06\u5728\u8fd9\u4e24\u4e2a VPC \u4e4b\u95f4\u521b\u5efa\u5bf9\u7b49\u8fde\u63a5\u3002 \u5bfc\u822a\u5230 VPC \u63a7\u5236\u53f0\u5bf9\u7b49\u8fde\u63a5 \u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u540d\u79f0\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u672c\u5730 VPC\uff0cVPC ID (\u8bf7\u6c42\u8005) \uff0c\u9009\u62e9 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u7684 VPC ID\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u53e6\u4e00\u4e2a VPC, VPC ID (\u63a5\u6536\u65b9) \uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u7684VPC ID\u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \uff0c\u7136\u540e\u5bfc\u822a\u5230\u5bf9\u7b49\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u3002 \u5355\u51fb \u64cd\u4f5c \u6309\u94ae\u5e76\u9009\u62e9 \u63a5\u53d7\u8bf7\u6c42 \u3002","title":"\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5"},{"location":"implementation-guide/domains/import/#_3","text":"\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u63a7\u5236\u53f0\u3002 \u9009\u62e9\u5b50\u7f51\uff0c\u7136\u540e\u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\u3002 \u9009\u62e9\u5b50\u7f51\u5173\u8054\u7684\u8def\u7531\u8868\uff0c\u6253\u5f00\u8def\u7531\u8868\u914d\u7f6e\u9875\u9762\u3002 \u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\uff0c\u7136\u540e\u9009\u62e9 \u7f16\u8f91\u8def\u7531 \u3002 \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531 10.255.0.0/16 \uff08\u65e5\u5fd7\u901a\u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09\u6307\u5411\u60a8\u521a\u521a\u521b\u5efa\u7684\u5bf9\u7b49\u8fde\u63a5\u3002 \u8fd4\u56de\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5355\u51fb OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\u7684 VPC ID\u3002 \u5728 VPC \u63a7\u5236\u53f0\u4e0a\u9009\u62e9 VPC ID \u5e76\u627e\u5230\u5b83\u7684 IPv4 CIDR \u3002 \u5728\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u90e8\u5206\u4e2d\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u3002 \u91cd\u590d\u6b65\u9aa4 3\u30014\u30015\u30016 \u4ee5\u6dfb\u52a0\u76f8\u53cd\u7684\u8def\u7ebf\u3002\u5373\u914d\u7f6e OpenSearch VPC \u7684 IPv4 CIDR \u6307\u5411\u5bf9\u7b49\u8fde\u63a5\u3002\u60a8\u9700\u8981\u5bf9\u65e5\u5fd7\u5904\u7406\u7f51\u7edc\u7684\u6bcf\u4e2a\u5b50\u7f51\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\u3002","title":"\u66f4\u65b0\u8def\u7531\u8868"},{"location":"implementation-guide/domains/import/#opensearch","text":"\u5728\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\uff0c\u9009\u62e9 \u5b89\u5168\u7ec4 \u4e2d\u7684\u5b89\u5168\u7ec4 ID \u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b89\u5168\u7ec4\u3002 \u5728\u63a7\u5236\u53f0\u4e0a\uff0c\u9009\u62e9 \u7f16\u8f91\u5165\u7ad9\u89c4\u5219 \u3002 \u6dfb\u52a0\u89c4\u5219 \"ALLOW TCP/443 from 10.255.0.0/16\"\uff08\u65e5\u5fd7\u901a\u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72\u65e5\u5fd7\u901a\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09\u3002 \u9009\u62e9 \u4fdd\u5b58\u89c4\u5219 \u3002","title":"\u66f4\u65b0 OpenSearch \u57df\u7684\u5b89\u5168\u7ec4"},{"location":"implementation-guide/domains/import/#amazon-opensearch-service_1","text":"\u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5220\u9664 Amazon OpenSearch Service \u57df\u3002 \u91cd\u8981 \u4ece\u65e5\u5fd7\u901a \u4e2d\u5220\u9664\u57df\u5c06 \u4e0d\u4f1a \u5220\u9664\u60a8 AWS \u8d26\u6237\u4e2d\u7684 Amazon OpenSearch Service \u57df\u3002 \u5b83 \u4e0d\u4f1a \u5f71\u54cd\u4efb\u4f55\u73b0\u6709\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664 Amazon OpenSearch Service \u57df"},{"location":"implementation-guide/domains/proxy/","text":"\u8bbf\u95ee\u4ee3\u7406 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u4ece Internet \u8bbf\u95ee VPC \u5185\u7684 Amazon OpenSearch Service \u57df\u3002\u65e5\u5fd7\u901a\u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u53ef\u7528\u7684 Nginx cluster \uff0c\u5b83\u5141\u8bb8\u60a8\u4ece Internet \u8bbf\u95ee OpenSearch Dashboards\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 \u4f7f\u7528 SSH \u96a7\u9053 \u8bbf\u95ee Amazon OpenSearch Service \u57df\u3002 \u672c\u8282\u4ecb\u7ecd\u4ee3\u7406\u5806\u6808\u7684\u67b6\u6784\u4ee5\u53ca\u4ee5\u4e0b\u5185\u5bb9\uff1a \u521b\u5efa\u4ee3\u7406 \u521b\u5efa\u5173\u8054\u7684DNS\u8bb0\u5f55 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAmazon OpenSearch Service \u5220\u9664\u4ee3\u7406 \u67b6\u6784 \u65e5\u5fd7\u901a\u521b\u5efa\u4e00\u4e2a Auto Scaling Group (ASG) \u548c\u4e00\u4e2a Application Load Balancer (ALB) \u3002 \u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a \u7528\u6237\u8bbf\u95ee\u4ee3\u7406\u7684\u81ea\u5b9a\u4e49\u57df\uff0c\u8be5\u57df\u9700\u8981\u901a\u8fc7DNS\u670d\u52a1\u89e3\u6790\uff08\u4f8b\u5982\uff0c\u4f7f\u7528AWS\u4e0a\u7684Route 53\uff09\u3002 DNS \u670d\u52a1\u5c06\u6d41\u91cf\u8def\u7531\u5230\u9762\u5411 Internet \u7684 ALB\u3002 ALB \u5c06\u6d41\u91cf\u5206\u914d\u5230 ASG \u5185 Amazon EC2 \u4e0a\u8fd0\u884c\u7684\u540e\u7aef Nginx \u670d\u52a1\u5668\u3002 Nginx \u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 OpenSearch Dashboards\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u4ee3\u7406\u7684 VPC \u4e0e OpenSearch \u670d\u52a1\u4e0d\u540c\uff0c\u5219\u9700\u8981 VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u521b\u5efa\u4ee3\u7406 \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u521b\u5efa\u57fa\u4e8e Nginx \u7684\u4ee3\u7406\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd VPC \u4e2d\u7684 Amazon OpenSearch Service \u57df \u53ef\u7528\u3002 \u5728 Amazon Certificate Manager (ACM) \u4e2d\u521b\u5efa\u6216\u4e0a\u4f20\u57df\u5173\u8054\u7684 SSL \u8bc1\u4e66 \u3002 \u786e\u4fdd\u60a8\u62e5\u6709 EC2 \u79c1\u94a5 (.pem) \u6587\u4ef6\u3002 \u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\uff0c\u5728 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u6ce8\u610f \u542f\u7528\u8bbf\u95ee\u4ee3\u7406\u540e\uff0c\u8bbf\u95ee\u4ee3\u7406\u7684\u94fe\u63a5\u5c06\u53ef\u7528\u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \u90e8\u5206\uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 2 \u4e2a\u540d\u4e3a LogHubVPC/DefaultVPC/publicSubnet \u7684\u516c\u6709\u5b50\u7f51\uff0c\u5b83\u4eec\u662f\u7531\u65e5\u5fd7\u901a \u9ed8\u8ba4\u521b\u5efa\u7684\u3002 \u5728 \u516c\u5171\u5b89\u5168\u7ec4 \u4e2d\u9009\u62e9 ALB \u7684\u5b89\u5168\u7ec4\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u540d\u4e3a ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\uff0c\u8be5\u5b89\u5168\u7ec4\u7531\u65e5\u5fd7\u901a \u9ed8\u8ba4\u521b\u5efa\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u4e0e\u57df\u540d\u5173\u8054\u7684 Load Balancer SSL Certificate \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- Nginx \u8bbf\u95ee\u4ee3\u7406 \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u4e5f\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e VPCId <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u90e8\u7f72 Nginx \u4ee3\u7406\u8d44\u6e90\u7684 VPC\uff0c\u4f8b\u5982 vpc-bef13dc7 \u3002 PublicSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 ELB \u7684\u516c\u5171\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u516c\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 PrivateSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 Nginx \u5b9e\u4f8b\u7684\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 KeyName <\u9700\u8981\u8f93\u5165> Nginx \u5b9e\u4f8b\u7684 PEM \u5bc6\u94a5\u540d\u79f0\u3002 NginxSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e Nginx \u5b9e\u4f8b\u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u5b89\u5168\u7ec4\u5fc5\u987b\u5141\u8bb8\u6765\u81ea ELB \u5b89\u5168\u7ec4\u7684\u8bbf\u95ee\u3002 ProxyInstanceType t3.large OpenSearch\u4ee3\u7406\u5b9e\u4f8b\u7684\u7c7b\u578b\u3002\u4f8b\u5982t3.micro ProxyInstanceNumber 2 OpenSearch\u4ee3\u7406\u5b9e\u4f8b\u7684\u6570\u91cf\u3002\u4f8b\u59821\u52304 Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 EngineType OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 CognitoEndpoint <\u53ef\u9009> OpenSearch \u57df\u7684 Cognito \u7528\u6237\u6c60\u7aef\u70b9 URL\uff0c\u4f8b\u5982\uff0c mydomain.auth.us-east-1.amazoncognito.com \u3002\u5982\u679c\u60a8\u7684 OpenSearch \u57df\u4e0d\u662f\u901a\u8fc7 Cognito \u7528\u6237\u6c60\u8ba4\u8bc1\uff0c\u8bf7\u7559\u7a7a\u3002 ELBSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e ELB \u5173\u8054\u7684\u5b89\u5168\u7ec4\uff0c\u4f8b\u5982\uff0c sg-123456 \u3002 ELBDomain <\u9700\u8981\u8f93\u5165> ELB\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f8b\u5982 dashboard.example.com \u3002 ELBDomainCertificateArn <\u9700\u8981\u8f93\u5165> \u4e0e ELBDomain \u5173\u8054\u7684 SSL \u8bc1\u4e66 ARN\u3002\u8bc1\u4e66\u5fc5\u987b\u4ece Amazon Certificate Manager (ACM) \u521b\u5efa\u3002 ELBAccessLogBucketName <\u9700\u8981\u8f93\u5165> \u4ee3\u7406ELB\u7684\u8bbf\u95ee\u65e5\u5fd7\u5b58\u50a8\u6876\u7684\u540d\u79f0\u3002 SsmParameterValueawsserviceamiamazonlinuxlatestamzn2amihvmx8664gp2C96584B6F00A464EAD1953AFF4B05118Parameter /aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2 \u4ee3\u7406\u5b9e\u4f8bAMI\u7684SSM\u53c2\u6570\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u4ee3\u7406\u5b9e\u4f8b\u63a8\u8350\u673a\u578b\u9009\u62e9 \u4e0b\u8868\u5217\u51fa\u4e86\u57fa\u4e8e\u5e76\u884c\u8bbf\u95ee\u7684\u7528\u6237\u6570\u63a8\u8350\u7684\u4ee3\u7406\u5b9e\u4f8b\u914d\u7f6e\u3002\u60a8\u53ef\u4ee5\u7ed3\u5408\u5b9e\u9645\u7684\u5e94\u7528\u573a\u666f\u8fdb\u884c\u5177\u4f53\u7684\u5b9e\u4f8b\u6570\u91cf\u548c\u673a\u578b\u7684\u8c03\u6574\u3002 \u5e76\u884c\u8bbf\u95ee\u7684\u7528\u6237\u6570 \u4ee3\u7406\u5b9e\u4f8b\u673a\u578b \u4ee3\u7406\u5b9e\u4f8b\u6570\u91cf 4 t3.nano 1 6 t3.micro 1 8 t3.nano 2 10 t3.small 1 12 t3.micro 2 20 t3.small 2 25 t3.large 1 50+ t3.large 2 \u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230 ALB \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u60a8\u53ef\u4ee5\u770b\u5230 \u8d1f\u8f7d\u5747\u8861\u57df\u540d \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee Amazon OpenSearch Service DNS \u8bb0\u5f55\u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee Amazon OpenSearch Service \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\uff0c\u6216\u5355\u51fb \u5e38\u89c4\u914d\u7f6e \u90e8\u5206\u4e2d \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u5220\u9664\u4ee3\u7406 \u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u4ece Internet \u8bbf\u95ee VPC \u5185\u7684 Amazon OpenSearch Service \u57df\u3002\u65e5\u5fd7\u901a\u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u53ef\u7528\u7684 Nginx cluster \uff0c\u5b83\u5141\u8bb8\u60a8\u4ece Internet \u8bbf\u95ee OpenSearch Dashboards\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 \u4f7f\u7528 SSH \u96a7\u9053 \u8bbf\u95ee Amazon OpenSearch Service \u57df\u3002 \u672c\u8282\u4ecb\u7ecd\u4ee3\u7406\u5806\u6808\u7684\u67b6\u6784\u4ee5\u53ca\u4ee5\u4e0b\u5185\u5bb9\uff1a \u521b\u5efa\u4ee3\u7406 \u521b\u5efa\u5173\u8054\u7684DNS\u8bb0\u5f55 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAmazon OpenSearch Service \u5220\u9664\u4ee3\u7406","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_2","text":"\u65e5\u5fd7\u901a\u521b\u5efa\u4e00\u4e2a Auto Scaling Group (ASG) \u548c\u4e00\u4e2a Application Load Balancer (ALB) \u3002 \u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a \u7528\u6237\u8bbf\u95ee\u4ee3\u7406\u7684\u81ea\u5b9a\u4e49\u57df\uff0c\u8be5\u57df\u9700\u8981\u901a\u8fc7DNS\u670d\u52a1\u89e3\u6790\uff08\u4f8b\u5982\uff0c\u4f7f\u7528AWS\u4e0a\u7684Route 53\uff09\u3002 DNS \u670d\u52a1\u5c06\u6d41\u91cf\u8def\u7531\u5230\u9762\u5411 Internet \u7684 ALB\u3002 ALB \u5c06\u6d41\u91cf\u5206\u914d\u5230 ASG \u5185 Amazon EC2 \u4e0a\u8fd0\u884c\u7684\u540e\u7aef Nginx \u670d\u52a1\u5668\u3002 Nginx \u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 OpenSearch Dashboards\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u4ee3\u7406\u7684 VPC \u4e0e OpenSearch \u670d\u52a1\u4e0d\u540c\uff0c\u5219\u9700\u8981 VPC \u5bf9\u7b49\u4e92\u8fde\u3002","title":"\u67b6\u6784"},{"location":"implementation-guide/domains/proxy/#_3","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u521b\u5efa\u57fa\u4e8e Nginx \u7684\u4ee3\u7406\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd VPC \u4e2d\u7684 Amazon OpenSearch Service \u57df \u53ef\u7528\u3002 \u5728 Amazon Certificate Manager (ACM) \u4e2d\u521b\u5efa\u6216\u4e0a\u4f20\u57df\u5173\u8054\u7684 SSL \u8bc1\u4e66 \u3002 \u786e\u4fdd\u60a8\u62e5\u6709 EC2 \u79c1\u94a5 (.pem) \u6587\u4ef6\u3002","title":"\u521b\u5efa\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_4","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\uff0c\u5728 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u6ce8\u610f \u542f\u7528\u8bbf\u95ee\u4ee3\u7406\u540e\uff0c\u8bbf\u95ee\u4ee3\u7406\u7684\u94fe\u63a5\u5c06\u53ef\u7528\u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \u90e8\u5206\uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 2 \u4e2a\u540d\u4e3a LogHubVPC/DefaultVPC/publicSubnet \u7684\u516c\u6709\u5b50\u7f51\uff0c\u5b83\u4eec\u662f\u7531\u65e5\u5fd7\u901a \u9ed8\u8ba4\u521b\u5efa\u7684\u3002 \u5728 \u516c\u5171\u5b89\u5168\u7ec4 \u4e2d\u9009\u62e9 ALB \u7684\u5b89\u5168\u7ec4\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u540d\u4e3a ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\uff0c\u8be5\u5b89\u5168\u7ec4\u7531\u65e5\u5fd7\u901a \u9ed8\u8ba4\u521b\u5efa\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u4e0e\u57df\u540d\u5173\u8054\u7684 Load Balancer SSL Certificate \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/proxy/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 \u65e5\u5fd7\u901a- Nginx \u8bbf\u95ee\u4ee3\u7406 \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u4e5f\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e VPCId <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u90e8\u7f72 Nginx \u4ee3\u7406\u8d44\u6e90\u7684 VPC\uff0c\u4f8b\u5982 vpc-bef13dc7 \u3002 PublicSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 ELB \u7684\u516c\u5171\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u516c\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 PrivateSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 Nginx \u5b9e\u4f8b\u7684\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 KeyName <\u9700\u8981\u8f93\u5165> Nginx \u5b9e\u4f8b\u7684 PEM \u5bc6\u94a5\u540d\u79f0\u3002 NginxSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e Nginx \u5b9e\u4f8b\u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u5b89\u5168\u7ec4\u5fc5\u987b\u5141\u8bb8\u6765\u81ea ELB \u5b89\u5168\u7ec4\u7684\u8bbf\u95ee\u3002 ProxyInstanceType t3.large OpenSearch\u4ee3\u7406\u5b9e\u4f8b\u7684\u7c7b\u578b\u3002\u4f8b\u5982t3.micro ProxyInstanceNumber 2 OpenSearch\u4ee3\u7406\u5b9e\u4f8b\u7684\u6570\u91cf\u3002\u4f8b\u59821\u52304 Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 EngineType OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 CognitoEndpoint <\u53ef\u9009> OpenSearch \u57df\u7684 Cognito \u7528\u6237\u6c60\u7aef\u70b9 URL\uff0c\u4f8b\u5982\uff0c mydomain.auth.us-east-1.amazoncognito.com \u3002\u5982\u679c\u60a8\u7684 OpenSearch \u57df\u4e0d\u662f\u901a\u8fc7 Cognito \u7528\u6237\u6c60\u8ba4\u8bc1\uff0c\u8bf7\u7559\u7a7a\u3002 ELBSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e ELB \u5173\u8054\u7684\u5b89\u5168\u7ec4\uff0c\u4f8b\u5982\uff0c sg-123456 \u3002 ELBDomain <\u9700\u8981\u8f93\u5165> ELB\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f8b\u5982 dashboard.example.com \u3002 ELBDomainCertificateArn <\u9700\u8981\u8f93\u5165> \u4e0e ELBDomain \u5173\u8054\u7684 SSL \u8bc1\u4e66 ARN\u3002\u8bc1\u4e66\u5fc5\u987b\u4ece Amazon Certificate Manager (ACM) \u521b\u5efa\u3002 ELBAccessLogBucketName <\u9700\u8981\u8f93\u5165> \u4ee3\u7406ELB\u7684\u8bbf\u95ee\u65e5\u5fd7\u5b58\u50a8\u6876\u7684\u540d\u79f0\u3002 SsmParameterValueawsserviceamiamazonlinuxlatestamzn2amihvmx8664gp2C96584B6F00A464EAD1953AFF4B05118Parameter /aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2 \u4ee3\u7406\u5b9e\u4f8bAMI\u7684SSM\u53c2\u6570\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/domains/proxy/#_5","text":"\u4e0b\u8868\u5217\u51fa\u4e86\u57fa\u4e8e\u5e76\u884c\u8bbf\u95ee\u7684\u7528\u6237\u6570\u63a8\u8350\u7684\u4ee3\u7406\u5b9e\u4f8b\u914d\u7f6e\u3002\u60a8\u53ef\u4ee5\u7ed3\u5408\u5b9e\u9645\u7684\u5e94\u7528\u573a\u666f\u8fdb\u884c\u5177\u4f53\u7684\u5b9e\u4f8b\u6570\u91cf\u548c\u673a\u578b\u7684\u8c03\u6574\u3002 \u5e76\u884c\u8bbf\u95ee\u7684\u7528\u6237\u6570 \u4ee3\u7406\u5b9e\u4f8b\u673a\u578b \u4ee3\u7406\u5b9e\u4f8b\u6570\u91cf 4 t3.nano 1 6 t3.micro 1 8 t3.nano 2 10 t3.small 1 12 t3.micro 2 20 t3.small 2 25 t3.large 1 50+ t3.large 2","title":"\u4ee3\u7406\u5b9e\u4f8b\u63a8\u8350\u673a\u578b\u9009\u62e9"},{"location":"implementation-guide/domains/proxy/#dns","text":"\u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230 ALB \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u60a8\u53ef\u4ee5\u770b\u5230 \u8d1f\u8f7d\u5747\u8861\u57df\u540d \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55"},{"location":"implementation-guide/domains/proxy/#amazon-opensearch-service","text":"DNS \u8bb0\u5f55\u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee Amazon OpenSearch Service \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\uff0c\u6216\u5355\u51fb \u5e38\u89c4\u914d\u7f6e \u90e8\u5206\u4e2d \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee Amazon OpenSearch Service"},{"location":"implementation-guide/domains/proxy/#_6","text":"\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664\u4ee3\u7406"},{"location":"implementation-guide/getting-started/","text":"\u5feb\u901f\u5165\u95e8 \u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u540e\uff0c\u60a8\u53ef\u4ee5\u5148\u9605\u8bfb\u672c\u7ae0\uff0c\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5229\u7528\u65e5\u5fd7\u901a\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff08\u4ee5 AWS CloudTrail \u65e5\u5fd7\u4e3a\u4f8b\uff09\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5f00\u59cb \u96c6\u7fa4\u7ba1\u7406 \uff0c\u5e76\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002 \u6b65\u9aa4 \u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002 \u5c06\u73b0\u6709 Amazon OpenSearch Service \u57df\u5bfc\u5165\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u4ee3\u7406\uff0c\u5141\u8bb8\u60a8\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee Amazon OpenSearch Service \u6a21\u677f\u5316\u4eea\u8868\u677f\u3002 \u6b65\u9aa4 3\uff1a\u6444\u53d6 CloudTrail \u65e5\u5fd7 \u3002 \u5c06 CloudTrail \u65e5\u5fd7\u6444\u53d6\u5230\u6307\u5b9a\u7684 Amazon OpenSearch Service \u57df\u3002 \u6b65\u9aa4 4\uff1a\u8bbf\u95ee\u5185\u7f6e\u4eea\u8868\u677f \u3002 \u67e5\u770b CloudTrail \u65e5\u5fd7\u7684\u4eea\u8868\u677f\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/getting-started/#_1","text":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u540e\uff0c\u60a8\u53ef\u4ee5\u5148\u9605\u8bfb\u672c\u7ae0\uff0c\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5229\u7528\u65e5\u5fd7\u901a\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff08\u4ee5 AWS CloudTrail \u65e5\u5fd7\u4e3a\u4f8b\uff09\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5f00\u59cb \u96c6\u7fa4\u7ba1\u7406 \uff0c\u5e76\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"implementation-guide/getting-started/#_2","text":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch Service \u57df \u3002 \u5c06\u73b0\u6709 Amazon OpenSearch Service \u57df\u5bfc\u5165\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u4ee3\u7406\uff0c\u5141\u8bb8\u60a8\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee Amazon OpenSearch Service \u6a21\u677f\u5316\u4eea\u8868\u677f\u3002 \u6b65\u9aa4 3\uff1a\u6444\u53d6 CloudTrail \u65e5\u5fd7 \u3002 \u5c06 CloudTrail \u65e5\u5fd7\u6444\u53d6\u5230\u6307\u5b9a\u7684 Amazon OpenSearch Service \u57df\u3002 \u6b65\u9aa4 4\uff1a\u8bbf\u95ee\u5185\u7f6e\u4eea\u8868\u677f \u3002 \u67e5\u770b CloudTrail \u65e5\u5fd7\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/getting-started/1.import-domain/","text":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch \u57df \u9996\u6b21\u4f7f\u7528\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\uff0c\u5fc5\u987b\u5148\u5bfc\u5165 Amazon OpenSearch Service \u57df\u3002 \u65e5\u5fd7\u901a\u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 Amazon OpenSearch \u57df \u3002 \u91cd\u8981 \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u652f\u6301 Amazon OpenSearch 1.3 \u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u524d\u63d0\u6761\u4ef6 VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 Amazon OpenSearch Service \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 \u6b65\u9aa4 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 Amazon OpenSearch Service \u57df\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u6b65\u9aa4 1. \u9009\u62e9\u57df \u9875\u9762\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6b65\u9aa4 2. \u914d\u7f6e\u7f51\u7edc \u9875\u9762\uff0c\u5728 \u7f51\u7edc\u521b\u5efa \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u3002\u5982\u679c\u60a8\u7684\u65e5\u5fd7\u901a\u548c OpenSearch \u57df\u4f4d\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684 VPC \u4e2d\uff0c \u81ea\u52a8 \u6a21\u5f0f\u5c06\u5728\u5b83\u4eec\u4e4b\u95f4\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u8868\u3002\u8bf7\u53c2\u9605 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u4e2d\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u5728 \u6b65\u9aa4 3. \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u6b65\u9aa4 1. \u5bfc\u5165 AOS \u57df"},{"location":"implementation-guide/getting-started/1.import-domain/#1-amazon-opensearch","text":"\u9996\u6b21\u4f7f\u7528\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\uff0c\u5fc5\u987b\u5148\u5bfc\u5165 Amazon OpenSearch Service \u57df\u3002 \u65e5\u5fd7\u901a\u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 Amazon OpenSearch \u57df \u3002 \u91cd\u8981 \u76ee\u524d\uff0c\u65e5\u5fd7\u901a\u652f\u6301 Amazon OpenSearch 1.3 \u53ca\u66f4\u9ad8\u7248\u672c\u3002","title":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch \u57df"},{"location":"implementation-guide/getting-started/1.import-domain/#_1","text":"VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 Amazon OpenSearch Service \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a Amazon OpenSearch Service \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/getting-started/1.import-domain/#_2","text":"\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 Amazon OpenSearch Service \u57df\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u6b65\u9aa4 1. \u9009\u62e9\u57df \u9875\u9762\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6b65\u9aa4 2. \u914d\u7f6e\u7f51\u7edc \u9875\u9762\uff0c\u5728 \u7f51\u7edc\u521b\u5efa \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u3002\u5982\u679c\u60a8\u7684\u65e5\u5fd7\u901a\u548c OpenSearch \u57df\u4f4d\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684 VPC \u4e2d\uff0c \u81ea\u52a8 \u6a21\u5f0f\u5c06\u5728\u5b83\u4eec\u4e4b\u95f4\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u8868\u3002\u8bf7\u53c2\u9605 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u4e2d\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u5728 \u6b65\u9aa4 3. \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/getting-started/2.create-proxy/","text":"\u6b65\u9aa42\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u6ce8\u610f \u8bbf\u95ee\u4ee3\u7406\u662f\u53ef\u9009\u7684\uff0c\u5b83\u4f1a\u4ea7\u751f\u989d\u5916\u7684\u8d39\u7528\u3002\u5982\u679c\u53ef\u4ee5\u8fde\u63a5\u5230Amazon OpenSearch \u7684VPC\uff08\u6bd4\u5982\u901a\u8fc7VPN \u8fde\u63a5\uff09\uff0c\u5219\u4e0d\u9700\u8981\u6fc0\u6d3b\u8bbf\u95ee\u4ee3\u7406\u3002\u4ec5\u5f53\u60a8\u60f3\u4ece\u516c\u5171\u4e92\u8054\u7f51\u8fde\u63a5\u5230 Amazon OpenSearch \u63a7\u5236\u9762\u677f\u65f6\u624d\u9700\u8981\u4f7f\u7528\u5b83\u3002 \u60a8\u53ef\u4ee5\u521b\u5efa Nginx \u4ee3\u7406\u5e76\u521b\u5efa\u6307\u5411\u8be5\u4ee3\u7406\u7684 DNS \u8bb0\u5f55\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u57df\u7ba1\u7406\u7ae0\u8282\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a Nginx \u4ee3\u7406 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u7684 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5305\u542b LogHubVpc/DefaultVPC/publicSubnetX \u7684\u5b50\u7f51\u3002 \u5bf9\u4e8e \u516c\u5f00\u5b89\u5168\u7ec4 \uff0c\u9009\u62e9\u5305\u542b ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u9002\u7528\u4e8e\u57df\u540d\u7684\u5173\u8054 Load Balancer SSL \u8bc1\u4e66 \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230\u5e94\u7528\u8d1f\u8f7d\u5e73\u8861 (ALB) \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u521b\u5efaDNS\u8bb0\u5f55 \u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u627e\u5230 Load Balancer Domain \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u5e76\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u6b65\u9aa4 2. \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#2","text":"\u6ce8\u610f \u8bbf\u95ee\u4ee3\u7406\u662f\u53ef\u9009\u7684\uff0c\u5b83\u4f1a\u4ea7\u751f\u989d\u5916\u7684\u8d39\u7528\u3002\u5982\u679c\u53ef\u4ee5\u8fde\u63a5\u5230Amazon OpenSearch \u7684VPC\uff08\u6bd4\u5982\u901a\u8fc7VPN \u8fde\u63a5\uff09\uff0c\u5219\u4e0d\u9700\u8981\u6fc0\u6d3b\u8bbf\u95ee\u4ee3\u7406\u3002\u4ec5\u5f53\u60a8\u60f3\u4ece\u516c\u5171\u4e92\u8054\u7f51\u8fde\u63a5\u5230 Amazon OpenSearch \u63a7\u5236\u9762\u677f\u65f6\u624d\u9700\u8981\u4f7f\u7528\u5b83\u3002 \u60a8\u53ef\u4ee5\u521b\u5efa Nginx \u4ee3\u7406\u5e76\u521b\u5efa\u6307\u5411\u8be5\u4ee3\u7406\u7684 DNS \u8bb0\u5f55\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u57df\u7ba1\u7406\u7ae0\u8282\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u3002","title":"\u6b65\u9aa42\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#nginx","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u7684 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5305\u542b LogHubVpc/DefaultVPC/publicSubnetX \u7684\u5b50\u7f51\u3002 \u5bf9\u4e8e \u516c\u5f00\u5b89\u5168\u7ec4 \uff0c\u9009\u62e9\u5305\u542b ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u9002\u7528\u4e8e\u57df\u540d\u7684\u5173\u8054 Load Balancer SSL \u8bc1\u4e66 \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230\u5e94\u7528\u8d1f\u8f7d\u5e73\u8861 (ALB) \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002","title":"\u521b\u5efa\u4e00\u4e2a Nginx \u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#dns","text":"\u767b\u5f55\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u627e\u5230 Load Balancer Domain \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u5e76\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u521b\u5efaDNS\u8bb0\u5f55"},{"location":"implementation-guide/getting-started/3.build-cloudtrail-pipeline/","text":"\u6b65\u9aa4 3: \u6444\u53d6 AWS CloudTrail \u65e5\u5fd7 \u60a8\u53ef\u4ee5\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6765\u6444\u53d6 AWS CloudTrail \u65e5\u5fd7\u3002 \u91cd\u8981 \u786e\u4fdd\u60a8\u7684 CloudTrail \u548c\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00 AWS \u533a\u57df\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u5bfc\u5165\u7684\u57df\u3002 \u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u4fdd\u7559\u9ed8\u8ba4\u503c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 3. \u6444\u53d6 CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/getting-started/3.build-cloudtrail-pipeline/#3-aws-cloudtrail","text":"\u60a8\u53ef\u4ee5\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6765\u6444\u53d6 AWS CloudTrail \u65e5\u5fd7\u3002 \u91cd\u8981 \u786e\u4fdd\u60a8\u7684 CloudTrail \u548c\u65e5\u5fd7\u901a\u4f4d\u4e8e\u540c\u4e00 AWS \u533a\u57df\u3002 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u5bfc\u5165\u7684\u57df\u3002 \u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u4fdd\u7559\u9ed8\u8ba4\u503c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 3: \u6444\u53d6 AWS CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/getting-started/4.view-dashboard/","text":"\u6b65\u9aa4 4: \u8bbf\u95ee\u5185\u7f6e\u4eea\u8868\u677f DNS\u8bb0\u5f55 \u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee Amazon OpenSearch Service \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\u3002 \u6216\u8005\uff0c\u5355\u51fb\u57df\u7684 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u8f93\u5165\u60a8\u7684\u51ed\u8bc1\uff0c\u767b\u5f55\u5230 Amazon OpenSearch Dashboards\u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2Amazon OpenSearch Service\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d\uff0c\u9009\u62e9 Dashboards \u3002 \u9009\u62e9\u81ea\u52a8\u521b\u5efa\u7684 Amazon OpenSearch Service \u4eea\u8868\u677f\u5e76\u5f00\u59cb\u63a2\u7d22\u60a8\u7684\u6570\u636e\u3002","title":"\u6b65\u9aa4 4. \u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/getting-started/4.view-dashboard/#4","text":"DNS\u8bb0\u5f55 \u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee Amazon OpenSearch Service \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\u3002 \u6216\u8005\uff0c\u5355\u51fb\u57df\u7684 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u8f93\u5165\u60a8\u7684\u51ed\u8bc1\uff0c\u767b\u5f55\u5230 Amazon OpenSearch Dashboards\u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2Amazon OpenSearch Service\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d\uff0c\u9009\u62e9 Dashboards \u3002 \u9009\u62e9\u81ea\u52a8\u521b\u5efa\u7684 Amazon OpenSearch Service \u4eea\u8868\u677f\u5e76\u5f00\u59cb\u63a2\u7d22\u60a8\u7684\u6570\u636e\u3002","title":"\u6b65\u9aa4 4: \u8bbf\u95ee\u5185\u7f6e\u4eea\u8868\u677f"},{"location":"implementation-guide/link-account/","text":"\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u65e5\u5fd7\u901a\u652f\u6301\u4ece\u540c\u4e00\u533a\u57df\u7684\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u4e3a\u6b64\uff0c\u60a8\u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u542f\u52a8 CloudFormation \u5806\u6808\uff0c\u5e76\u4e0e\u4e3b\u8d26\u6237\u5173\u8054\u3002 \u6982\u5ff5 \u4e3b\u8d26\u6237 : \u60a8\u90e8\u7f72\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684\u5e10\u6237\u662f\u4e3b\u5e10\u6237\u3002 OpenSearch \u96c6\u7fa4\u4e5f\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u5e10\u6237\u4e2d\u3002 \u6210\u5458\u8d26\u6237 : \u60a8\u62e5\u6709 AWS \u670d\u52a1\u6216\u5e94\u7528\u7a0b\u5e8f\u5e76\u5e0c\u671b\u4ece\u4e2d\u63d0\u53d6\u65e5\u5fd7\u7684\u8d26\u6237\u3002 \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808\u5177\u6709\u6700\u5c11\u7684\u6743\u9650\u3002\u65e5\u5fd7\u901a\u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u9884\u7f6e\u4e00\u4e9b AWS \u8d44\u6e90\u6765\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5c06\u91c7\u7528 IAM \u5728\u6210\u5458\u8d26\u6237\u4e2d\u914d\u7f6e\u7684\u89d2\u8272\u4ee5\u5217\u51fa\u6216\u521b\u5efa\u8d44\u6e90\u3002 \u8bf7\u53c2\u8003 \u67b6\u6784 \u90e8\u5206\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u5173\u8054\u4e00\u4e2a\u6210\u5458\u8d26\u6237 \u6b65\u9aa4 1. \u5728\u6210\u5458\u8d26\u6237\u4e2d\u90e8\u7f72 CloudFormation \u5806\u6808 \u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u53f7\u6444\u53d6 \u3002 \u70b9\u51fb \u94fe\u63a5\u4e00\u4e2a\u5e10\u6237 \u6309\u94ae\u3002 \u60a8\u53ef\u4ee5\u5728\u6210\u5458\u8d26\u6237\u4e2d\u627e\u5230\u90e8\u7f72 CloudFormation \u5806\u6808\u7684\u6b65\u9aa4\u3002 \u6ce8\u610f \u60a8\u9700\u8981\u62f7\u8d1d template URL\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fdb\u5165\u6210\u5458\u8d26\u6237\u7684 CloudFormation \u63a7\u5236\u53f0\u3002 \u5355\u51fb \u521b\u5efa\u5806\u6808 \u6309\u94ae\u5e76\u9009\u62e9 \u4f7f\u7528\u65b0\u8d44\u6e90 (\u6807\u51c6) \u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e2d\uff0c\u5728 Amazon S3 URL \u4e2d\u8f93\u5165 CloudFormation URL\u3002 \u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684 \u6210\u5458\u8d26\u6237 \u9875\u9762\u4e0a\u627e\u5230 URL\u3002 \u6309\u7167\u6b65\u9aa4\u521b\u5efa CloudFormation \u5806\u6808\uff0c\u5e76\u7b49\u5f85\u914d\u7f6e CloudFormation \u5806\u6808\u5b8c\u6210\u3002 \u70b9\u51fb\u8fdb\u5165 \u8f93\u51fa \u9875\u7b7e\uff0c\u67e5\u770b\u5c06\u7528\u4e8e \u6b65\u9aa4 2 \u7684\u76f8\u5173\u53c2\u6570\u3002 \u6b65\u9aa4 2. \u5173\u8054\u6210\u5458\u8d26\u6237 \u8fdb\u5165\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \uff08\u53ef\u9009\uff09\u5728\u5bfc\u822a\u9762\u677f\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u6237\u6444\u53d6 \u3002 \u5728 \u6b65\u9aa4 2 \u4e2d\uff0c\u4f7f\u7528\u4e0a\u4e00\u6b65\u7684 CloudFormation \u8f93\u51fa\u586b\u5199\u53c2\u6570\u3002 \u53c2\u6570 CloudFormation \u8f93\u51fa \u63cf\u8ff0 Account Name N/A \u6210\u5458\u8d26\u53f7\u7684\u540d\u79f0\u3002 Account ID N/A 12\u4f4d AWS \u6570\u5b57\u8d26\u53f7\u3002 Cross Account Role ARN CrossAccountRoleARN \u65e5\u5fd7\u901a \u5c06\u901a\u8fc7\u6d88\u8d39\u8fd9\u4e2a\u89d2\u8272\u6765\u64cd\u4f5c\u5173\u8054\u8d26\u53f7\u4e2d\u7684\u8d44\u6e90\u3002 FluentBit Agent Installation Document AgentInstallDocument \u65e5\u5fd7\u901a \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5728\u6210\u5458\u8d26\u6237\u4e2d\u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 FluentBit Agent Configuration Document AgentConfigDocument \u65e5\u5fd7\u901a \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5c06 Fluent Bit \u914d\u7f6e\u4e0b\u53d1\u7ed9 EC2 \u5b9e\u4f8b\u3002 Cross Account S3 Bucket CrossAccountS3Bucket \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u542f\u7528\u4e00\u4e9b AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u8f93\u51fa\u5230 Amazon S3\u3002 \u65e5\u5fd7\u5c06\u5b58\u50a8\u5728\u6b64\u5e10\u6237\u4e2d\u3002 Cross Account Stack ID CrossAccountStackId \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808 ID\u3002 Cross Account KMS Key CrossAccountKMSKeyARN \u65e5\u5fd7\u901a \u5c06\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1 (KMS) \u5bc6\u94a5\u6765\u52a0\u5bc6\u7b80\u5355\u961f\u5217\u670d\u52a1 (SQS)\u3002 \u70b9\u51fb \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/link-account/#_1","text":"\u65e5\u5fd7\u901a\u652f\u6301\u4ece\u540c\u4e00\u533a\u57df\u7684\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u4e3a\u6b64\uff0c\u60a8\u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u542f\u52a8 CloudFormation \u5806\u6808\uff0c\u5e76\u4e0e\u4e3b\u8d26\u6237\u5173\u8054\u3002","title":"\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/link-account/#_2","text":"\u4e3b\u8d26\u6237 : \u60a8\u90e8\u7f72\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684\u5e10\u6237\u662f\u4e3b\u5e10\u6237\u3002 OpenSearch \u96c6\u7fa4\u4e5f\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u5e10\u6237\u4e2d\u3002 \u6210\u5458\u8d26\u6237 : \u60a8\u62e5\u6709 AWS \u670d\u52a1\u6216\u5e94\u7528\u7a0b\u5e8f\u5e76\u5e0c\u671b\u4ece\u4e2d\u63d0\u53d6\u65e5\u5fd7\u7684\u8d26\u6237\u3002 \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808\u5177\u6709\u6700\u5c11\u7684\u6743\u9650\u3002\u65e5\u5fd7\u901a\u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u9884\u7f6e\u4e00\u4e9b AWS \u8d44\u6e90\u6765\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5c06\u91c7\u7528 IAM \u5728\u6210\u5458\u8d26\u6237\u4e2d\u914d\u7f6e\u7684\u89d2\u8272\u4ee5\u5217\u51fa\u6216\u521b\u5efa\u8d44\u6e90\u3002 \u8bf7\u53c2\u8003 \u67b6\u6784 \u90e8\u5206\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002","title":"\u6982\u5ff5"},{"location":"implementation-guide/link-account/#_3","text":"","title":"\u5173\u8054\u4e00\u4e2a\u6210\u5458\u8d26\u6237"},{"location":"implementation-guide/link-account/#1-cloudformation","text":"\u767b\u5f55\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u53f7\u6444\u53d6 \u3002 \u70b9\u51fb \u94fe\u63a5\u4e00\u4e2a\u5e10\u6237 \u6309\u94ae\u3002 \u60a8\u53ef\u4ee5\u5728\u6210\u5458\u8d26\u6237\u4e2d\u627e\u5230\u90e8\u7f72 CloudFormation \u5806\u6808\u7684\u6b65\u9aa4\u3002 \u6ce8\u610f \u60a8\u9700\u8981\u62f7\u8d1d template URL\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fdb\u5165\u6210\u5458\u8d26\u6237\u7684 CloudFormation \u63a7\u5236\u53f0\u3002 \u5355\u51fb \u521b\u5efa\u5806\u6808 \u6309\u94ae\u5e76\u9009\u62e9 \u4f7f\u7528\u65b0\u8d44\u6e90 (\u6807\u51c6) \u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e2d\uff0c\u5728 Amazon S3 URL \u4e2d\u8f93\u5165 CloudFormation URL\u3002 \u60a8\u53ef\u4ee5\u5728\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u7684 \u6210\u5458\u8d26\u6237 \u9875\u9762\u4e0a\u627e\u5230 URL\u3002 \u6309\u7167\u6b65\u9aa4\u521b\u5efa CloudFormation \u5806\u6808\uff0c\u5e76\u7b49\u5f85\u914d\u7f6e CloudFormation \u5806\u6808\u5b8c\u6210\u3002 \u70b9\u51fb\u8fdb\u5165 \u8f93\u51fa \u9875\u7b7e\uff0c\u67e5\u770b\u5c06\u7528\u4e8e \u6b65\u9aa4 2 \u7684\u76f8\u5173\u53c2\u6570\u3002","title":"\u6b65\u9aa4 1. \u5728\u6210\u5458\u8d26\u6237\u4e2d\u90e8\u7f72 CloudFormation \u5806\u6808"},{"location":"implementation-guide/link-account/#2","text":"\u8fdb\u5165\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u3002 \uff08\u53ef\u9009\uff09\u5728\u5bfc\u822a\u9762\u677f\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u6237\u6444\u53d6 \u3002 \u5728 \u6b65\u9aa4 2 \u4e2d\uff0c\u4f7f\u7528\u4e0a\u4e00\u6b65\u7684 CloudFormation \u8f93\u51fa\u586b\u5199\u53c2\u6570\u3002 \u53c2\u6570 CloudFormation \u8f93\u51fa \u63cf\u8ff0 Account Name N/A \u6210\u5458\u8d26\u53f7\u7684\u540d\u79f0\u3002 Account ID N/A 12\u4f4d AWS \u6570\u5b57\u8d26\u53f7\u3002 Cross Account Role ARN CrossAccountRoleARN \u65e5\u5fd7\u901a \u5c06\u901a\u8fc7\u6d88\u8d39\u8fd9\u4e2a\u89d2\u8272\u6765\u64cd\u4f5c\u5173\u8054\u8d26\u53f7\u4e2d\u7684\u8d44\u6e90\u3002 FluentBit Agent Installation Document AgentInstallDocument \u65e5\u5fd7\u901a \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5728\u6210\u5458\u8d26\u6237\u4e2d\u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 FluentBit Agent Configuration Document AgentConfigDocument \u65e5\u5fd7\u901a \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5c06 Fluent Bit \u914d\u7f6e\u4e0b\u53d1\u7ed9 EC2 \u5b9e\u4f8b\u3002 Cross Account S3 Bucket CrossAccountS3Bucket \u60a8\u53ef\u4ee5\u4f7f\u7528\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u542f\u7528\u4e00\u4e9b AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u8f93\u51fa\u5230 Amazon S3\u3002 \u65e5\u5fd7\u5c06\u5b58\u50a8\u5728\u6b64\u5e10\u6237\u4e2d\u3002 Cross Account Stack ID CrossAccountStackId \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808 ID\u3002 Cross Account KMS Key CrossAccountKMSKeyARN \u65e5\u5fd7\u901a \u5c06\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1 (KMS) \u5bc6\u94a5\u6765\u52a0\u5bc6\u7b80\u5355\u961f\u5217\u670d\u52a1 (SQS)\u3002 \u70b9\u51fb \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u6b65\u9aa4 2. \u5173\u8054\u6210\u5458\u8d26\u6237"},{"location":"implementation-guide/plan-deployment/considerations/","text":"\u8003\u8651\u56e0\u7d20 \u53ef\u90e8\u7f72\u533a\u57df \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u670d\u52a1\u76ee\u524d\u53ef\u80fd\u5e76\u975e\u5728\u6240\u6709 AWS \u533a\u57df\u90fd\u53ef\u7528\u3002\u8bf7\u5728\u63d0\u4f9b\u6240\u9700\u670d\u52a1\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u6309\u533a\u57df\u5212\u5206\u7684\u6700\u65b0\u53ef\u7528\u6027\uff0c\u8bf7\u53c2\u9605 AWS \u533a\u57df\u670d\u52a1\u5217\u8868 \u3002 \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e24\u79cd\u7c7b\u578b\u7684\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f7f\u7528 Cognito \u7528\u6237\u6c60 \u6216 \u4f7f\u7528 OpenID Connect (OIDC) \u63d0\u4f9b\u8005 \u3002 \u9488\u5bf9\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u60a8\u9700\u8981\u9009\u62e9\u4f7f\u7528 OpenID Connect \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff1a \u60a8\u7684 AWS \u533a\u57df\u6ca1\u6709 Cognito \u7528\u6237\u6c60\u3002 \u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a OpenID Connect \u8ba4\u8bc1\u4e2d\u5fc3\uff0c\u540c\u65f6\u4e5f\u5e0c\u671b\u4f7f\u7528\u5b83\u8fdb\u884c\u8ba4\u8bc1\u3002 \u652f\u6301\u90e8\u7f72\u7684\u533a\u57df \u533a\u57df\u540d\u79f0 \u4f7f\u7528 Cognito User Pool \u4f7f\u7528 OpenID Connect \u7f8e\u56fd\u4e1c\u90e8 (\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u4e1c\u90e8 (\u4fc4\u4ea5\u4fc4) \u7f8e\u56fd\u897f\u90e8 (\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u897f\u90e8 (\u4fc4\u52d2\u5188) \u52a0\u62ff\u5927 (\u4e2d\u90e8) \u975e\u6d32 (\u5f00\u666e\u6566) \u4e9a\u592a\u5730\u533a (\u9999\u6e2f) \u4e9a\u592a\u5730\u533a (\u96c5\u52a0\u8fbe) \u4e9a\u592a\u5730\u533a (\u5b5f\u4e70) \u4e9a\u592a\u5730\u533a (\u5927\u962a) \u4e9a\u592a\u5730\u533a (\u9996\u5c14) \u4e9a\u592a\u5730\u533a (\u65b0\u52a0\u5761) \u4e9a\u592a\u5730\u533a (\u6089\u5c3c) \u4e9a\u592a\u5730\u533a (\u4e1c\u4eac) \u4e2d\u4e1c\u5730\u533a (\u5df4\u6797) \u6b27\u6d32 (\u6cd5\u5170\u514b\u798f) \u6b27\u6d32 (\u7231\u5c14\u5170) \u6b27\u6d32 (\u4f26\u6566) \u6b27\u6d32 (\u7c73\u5170) \u6b27\u6d32 (\u5df4\u9ece) \u6b27\u6d32 (\u65af\u5fb7\u54e5\u5c14\u6469) \u4e2d\u4e1c (\u5df4\u6797) \u5357\u7f8e\u6d32 (\u5723\u4fdd\u7f57) \u4e2d\u56fd (\u5317\u4eac) \u4e2d\u56fd (\u5b81\u590f) \u91cd\u8981\u63d0\u793a \u4e00\u4e2a\u533a\u57df\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u6d3b\u52a8\u7684\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5806\u6808\u3002 \u5982\u679c\u60a8\u7684\u90e8\u7f72\u5931\u8d25\uff0c\u8bf7\u786e\u4fdd\u5728\u91cd\u8bd5\u90e8\u7f72\u4e4b\u524d\u5df2\u5220\u9664\u5931\u8d25\u7684\u5806\u6808\u3002","title":"\u652f\u6301\u7684\u533a\u57df"},{"location":"implementation-guide/plan-deployment/considerations/#_1","text":"","title":"\u8003\u8651\u56e0\u7d20"},{"location":"implementation-guide/plan-deployment/considerations/#_2","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u670d\u52a1\u76ee\u524d\u53ef\u80fd\u5e76\u975e\u5728\u6240\u6709 AWS \u533a\u57df\u90fd\u53ef\u7528\u3002\u8bf7\u5728\u63d0\u4f9b\u6240\u9700\u670d\u52a1\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u6309\u533a\u57df\u5212\u5206\u7684\u6700\u65b0\u53ef\u7528\u6027\uff0c\u8bf7\u53c2\u9605 AWS \u533a\u57df\u670d\u52a1\u5217\u8868 \u3002 \u65e5\u5fd7\u901a\u63d0\u4f9b\u4e24\u79cd\u7c7b\u578b\u7684\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f7f\u7528 Cognito \u7528\u6237\u6c60 \u6216 \u4f7f\u7528 OpenID Connect (OIDC) \u63d0\u4f9b\u8005 \u3002 \u9488\u5bf9\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u60a8\u9700\u8981\u9009\u62e9\u4f7f\u7528 OpenID Connect \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff1a \u60a8\u7684 AWS \u533a\u57df\u6ca1\u6709 Cognito \u7528\u6237\u6c60\u3002 \u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a OpenID Connect \u8ba4\u8bc1\u4e2d\u5fc3\uff0c\u540c\u65f6\u4e5f\u5e0c\u671b\u4f7f\u7528\u5b83\u8fdb\u884c\u8ba4\u8bc1\u3002 \u652f\u6301\u90e8\u7f72\u7684\u533a\u57df \u533a\u57df\u540d\u79f0 \u4f7f\u7528 Cognito User Pool \u4f7f\u7528 OpenID Connect \u7f8e\u56fd\u4e1c\u90e8 (\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u4e1c\u90e8 (\u4fc4\u4ea5\u4fc4) \u7f8e\u56fd\u897f\u90e8 (\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u897f\u90e8 (\u4fc4\u52d2\u5188) \u52a0\u62ff\u5927 (\u4e2d\u90e8) \u975e\u6d32 (\u5f00\u666e\u6566) \u4e9a\u592a\u5730\u533a (\u9999\u6e2f) \u4e9a\u592a\u5730\u533a (\u96c5\u52a0\u8fbe) \u4e9a\u592a\u5730\u533a (\u5b5f\u4e70) \u4e9a\u592a\u5730\u533a (\u5927\u962a) \u4e9a\u592a\u5730\u533a (\u9996\u5c14) \u4e9a\u592a\u5730\u533a (\u65b0\u52a0\u5761) \u4e9a\u592a\u5730\u533a (\u6089\u5c3c) \u4e9a\u592a\u5730\u533a (\u4e1c\u4eac) \u4e2d\u4e1c\u5730\u533a (\u5df4\u6797) \u6b27\u6d32 (\u6cd5\u5170\u514b\u798f) \u6b27\u6d32 (\u7231\u5c14\u5170) \u6b27\u6d32 (\u4f26\u6566) \u6b27\u6d32 (\u7c73\u5170) \u6b27\u6d32 (\u5df4\u9ece) \u6b27\u6d32 (\u65af\u5fb7\u54e5\u5c14\u6469) \u4e2d\u4e1c (\u5df4\u6797) \u5357\u7f8e\u6d32 (\u5723\u4fdd\u7f57) \u4e2d\u56fd (\u5317\u4eac) \u4e2d\u56fd (\u5b81\u590f)","title":"\u53ef\u90e8\u7f72\u533a\u57df"},{"location":"implementation-guide/plan-deployment/considerations/#_3","text":"\u4e00\u4e2a\u533a\u57df\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u6d3b\u52a8\u7684\u65e5\u5fd7\u901a\u89e3\u51b3\u65b9\u6848\u5806\u6808\u3002 \u5982\u679c\u60a8\u7684\u90e8\u7f72\u5931\u8d25\uff0c\u8bf7\u786e\u4fdd\u5728\u91cd\u8bd5\u90e8\u7f72\u4e4b\u524d\u5df2\u5220\u9664\u5931\u8d25\u7684\u5806\u6808\u3002","title":"\u91cd\u8981\u63d0\u793a"},{"location":"implementation-guide/plan-deployment/cost/","text":"\u8d39\u7528\u9884\u4f30 \u91cd\u8981 \u672c\u8282\u4e2d\u63cf\u8ff0\u7684\u6210\u672c\u4f30\u7b97\u53ea\u662f\u793a\u4f8b\uff0c\u53ef\u80fd\u4f1a\u56e0\u60a8\u7684\u73af\u5883\u800c\u5f02\u3002 \u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u4e2a\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002\u5f71\u54cd\u89e3\u51b3\u65b9\u6848\u6210\u672c\u7684\u4e3b\u8981\u56e0\u7d20\u5305\u62ec\uff1a \u8981\u6444\u53d6\u7684\u65e5\u5fd7\u7c7b\u578b \u8981\u6444\u53d6/\u5904\u7406\u7684\u65e5\u5fd7\u91cf \u65e5\u5fd7\u6d88\u606f\u7684\u5927\u5c0f \u65e5\u5fd7\u7684\u4f4d\u7f6e \u989d\u5916\u7684\u7279\u6027 \u4ee5\u4e0b\u793a\u4f8b\u5c06\u6f14\u793a\u622a\u81f3\u6700\u65b0\u53d1\u5e03\u7684\u7248\u672c\uff0c\u57fa\u4e8e\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) 10/100/1000 GB \u6bcf\u65e5\u65e5\u5fd7\u6444\u53d6\u7684\u6210\u672c\u4f30\u7b97\u3002 \u603b\u6210\u672c\u5305\u62ec \u65e5\u5fd7\u5206\u6790\u5f15\u64ce \uff1a Amazon OpenSearch \u8d39\u7528 \u6216 Light Engine\u8d39\u7528 \u3001 \u5904\u7406\u8d39\u7528 \u548c \u989d\u5916\u7279\u6027\u8d39\u7528 \u3002 \u4f7f\u7528Amazon OpenSearch \u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce\u65f6\u7684\u8d39\u7528 Amazon OpenSearch \u8d39\u7528 OD : \u6309\u9700\u5b9e\u4f8b\u4ef7\u683c\u6a21\u578b AURI_1 : \u5168\u989d\u9884\u4ed81\u5e74\u9884\u7559\u5b9e\u4f8b \u5206\u5c42 \uff1a\u5b58\u50a8\u5728\u5c42\u4e2d\u7684\u5929\u6570\u3002 \u4f8b\u5982\uff0c7H + 23W + 60C \u8868\u793a\u65e5\u5fd7\u5728\u70ed\u5c42\u5b58\u50a8 7 \u5929\uff0c\u6e29\u5c42\u5b58\u50a8 23 \u5929\uff0c\u51b7\u5c42\u5b58\u50a8 60 \u5929\u3002 \u526f\u672c : \u5206\u7247\u526f\u672c\u7684\u6570\u91cf\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf (GB) \u5b58\u50a8 (\u5929) \u5206\u5c42 \u526f\u672c OD \u6bcf\u6708 (USD) AURI_1 \u6bcf\u6708 (USD) \u4e13\u7528\u4e3b\u8282\u70b9 \u6570\u636e\u8282\u70b9 EBS (GB) UltraWarm \u8282\u70b9 UltraWarm/Cold S3 \u5b58\u50a8 (GB) OD \u6bcfGB\u8d39\u7528 (USD) AURI_1 \u6bcfGB\u8d39\u7528 (USD) 10 30 30H 0 216.28 158.54 N/A c6g.large[2] 380 N/A 0 0.72093 0.52847 10 30 30H 1 289.35 223.94 N/A m6g.large[2] 760 N/A 0 0.9645 0.74647 100 30 7H + 23W 0 989.49 825.97 m6g.large[3] m6g.large[2] 886 medium[2] 0 0.32983 0.27532 100 30 7H + 23W 1 1295.85 1066.92 m6g.large[3] m6g.large[4] 1772 medium[2] 0 0.43195 0.35564 100 90 7H + 23W + 60C 0 1133.49 969.97 m6g.large[3] m6g.large[2] 886 medium[2] 8300 0.12594 0.10777 100 90 7H + 23W + 60C 1 1439.85 1210.92 m6g.large[3] m6g.large[4] 1772 medium[2] 8300 0.15998 0.13455 100 180 7H + 23W + 150C 0 1349.49 1185.97 m6g.large[3] m6g.large[2] 886 medium[2] 17300 0.07497 0.06589 100 180 7H + 23W + 150C 1 1655.85 1426.92 m6g.large[3] m6g.large[4] 1772 medium[2] 17300 0.09199 0.07927 1000 30 7H + 23W 0 6101.15 5489.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 23000 0.20337 0.18298 1000 30 7H + 23W 1 8759.49 7635.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 23000 0.29198 0.25453 1000 90 7H + 23W + 60C 0 8027.33 7245.45 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 83000 0.08919 0.0805 1000 90 7H + 23W + 60C 1 10199.49 9075.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 83000 0.11333 0.10084 1000 180 7H + 23W + 150C 0 9701.15 9089.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 173000 0.0539 0.0505 1000 180 7H + 23W + 150C 1 12644.19 11420.86 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 173000 0.07025 0.06345 \u5904\u7406\u8d39\u7528 \u901a\u8fc7 Amazon S3 \u63d0\u53d6\u65e5\u5fd7 \u4fe1\u606f \u672c\u8282\u9002\u7528\u4e8e\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5305\u62ec Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\uff0cCloudFront \u6807\u51c6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (S3)\uff0cApplication Load Balancing \u8bbf\u95ee\u65e5\u5fd7\uff0cWAF \u65e5\u5fd7\uff0cVPC \u6d41 \u65e5\u5fd7 (S3)\uff0cAWS Config \u65e5\u5fd7\uff0cAmazon RDS/Aurora \u65e5\u5fd7\uff0cAWS Lambda \u65e5\u5fd7\u3002 \u4f7f\u7528 Amazon S3 \u4f5c\u4e3a\u6570\u636e\u7f13\u51b2\u533a\u7684\u5e94\u7528\u65e5\u5fd7\u3002 \u4ee5\u4e0b\u662f\u5047\u8bbe\uff1a \u65e5\u5fd7\u4ee5 gzip \u683c\u5f0f\u4fdd\u5b58\u5230 Amazon S3\u3002 S3 \u4e2d 4MB \u7684\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u7684\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f\u7ea6\u4e3a 100MB\u3002 \u4e00\u4e2a 1GB \u5185\u5b58\u7684 Lambda \u5904\u7406\u4e00\u4e2a 4MB \u7684\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u5927\u7ea6\u9700\u8981 26 \u79d2\uff0c\u5373\u6bcf MB \u539f\u59cb\u65e5\u5fd7\u9700\u8981 260 \u6beb\u79d2\u3002 \u6700\u5927\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a 5MB\u3002 \u4ece S3 \u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u4f1a\u4ea7\u751f\u975e\u5e38\u4f4e\u7684 SQS \u548c S3 \u8bf7\u6c42\u8d39\u7528\uff0c\u6216\u8005\u901a\u5e38\u5728 AWS \u514d\u8d39\u5957\u9910\u5185\u3002 \u60a8\u6bcf\u5929\u6709 N GB \u539f\u59cb\u65e5\u5fd7\uff0c\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a \u5f53\u60a8\u4f7f\u7528 Lambda \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u65f6: Lambda \u6210\u672c = \u6bcf MB 260 \u6beb\u79d2 x 1024 MB x N GB/\u5929 x \u6bcf\u6beb\u79d2 0.0000000167 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x N GB/\u5929 x 4%\uff08\u538b\u7f29\uff09 \u5f53\u60a8\u4f7f\u7528 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u65f6: OSI Pipeline \u6210\u672c = $0.24 \u6bcf OCU \u6bcf hour 1\u4e2aOCU\u53ef\u5904\u7406\u7684\u6700\u5927S3\u6570\u636e\u91cf\u7ea6\u4e3a20MB/s \u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u4e3a\uff1a \u6bcf\u6708\u603b\u6210\u672c\uff08Lambda\u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\uff09 =\uff08Lambda \u6210\u672c + S3 \u5b58\u50a8\u6210\u672c\uff09x 30 \u5929 \u6bcf\u65e5\u7684\u65e5\u5fd7\u91cf \u6bcf\u65e5\u7684 Lambda \u8d39\u7528 ($) \u6bcf\u6b21\u7684 S3 \u5b58\u50a8\u8d39\u7528 ($) \u6bcf\u6708\u7684\u8d39\u7528 ($) 10 0.044 0.009 1.610 100 0.445 0.092 16.099 1000 4.446 0.920 160.986 5000 22.23 4.600 804.900 Total \u6bcf\u6708\u7684\u603b\u8d39\u7528 (OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668) = (OSI \u6210\u672c + S3 Storage \u6210\u672c) x 30 \u5929 \u6bcf\u65e5\u7684\u65e5\u5fd7\u91cf \u6bcf\u65e5\u7684 OSI \u8d39\u7528 ( $) \u6bcf\u6b21\u7684 S3 \u5b58\u50a8\u8d39\u7528 ( $) \u6bcf\u6708\u7684\u8d39\u7528 ( $) 10 5.760 0.001 173.1 100 5.760 0.009 175.5 1000 11.52 0.920 373.2 5000 34.56 4.600 1174.8 \u5bf9\u4e8e\u8bb0\u5f55\u5230Amazon CloudWatch \u7684 Amazon RDS/Aurora \u65e5\u5fd7\u548c AWS Lambda \u65e5\u5fd7\uff0c\u9664\u4e86\u4e0a\u9762\u5217\u51fa\u7684 S3 \u548c Lambda \u6210\u672c\u5916\uff0c\u8fd8\u6709\u4f7f\u7528Kinesis Data Firehose (KDF) \u6765\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u6d41\u5e76\u5c06\u5b83\u4eec\u653e\u5165Amazon S3\u6876\u7684\u989d\u5916\u6210\u672c\uff0cKDF \u4ee5 5KB \u4e3a\u589e\u91cf\u6536\u8d39\uff08\u6bcf\u6761\u8bb0\u5f55\u5c0f\u4e8e 5KB \u6309 5KB \u8ba1\u8d39\uff09\u3002 \u5047\u8bbe\u65e5\u5fd7\u5927\u5c0f\u4e3a\u6bcf\u6761\u8bb0\u5f55 0.2 KB\uff0c\u5219\u6bcf\u5929\u7684 KDF \u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Kinesis Data Firehose \u6210\u672c = \u6bcf GB 0.029 \u7f8e\u5143 x N GB/\u5929 x (5KB/0.2 KB) \u4f8b\u5982\uff0c\u6bcf\u5929 1GB \u7684\u65e5\u5fd7\uff0cKDF \u7684\u6bcf\u6708\u989d\u5916\u8d39\u7528\u4e3a 21.75 \u7f8e\u5143\u3002 \u91cd\u8981 \u4e3a\u4e86\u8282\u7ea6 KDF \u7684\u6210\u672c\uff0c\u8bf7\u786e\u4fdd\u60a8\u53ea\u8bb0\u5f55\u9700\u8981\u7684\u65e5\u5fd7\u3002 \u4f8b\u5982\uff0c\u9664\u975e\u9700\u8981\uff0c\u5426\u5219\u4e0d\u8981\u6253\u5f00 RDS \u5e38\u89c4\u65e5\u5fd7(General Log)\u3002 \u901a\u8fc7 Amazon Kinesis Data Streams (KDS) \u63d0\u53d6\u65e5\u5fd7 \u4fe1\u606f \u672c\u8282\u9002\u7528\u4e8e\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5305\u62ec CloudFront \u5b9e\u65f6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (CloudWatch)\uff0cVPC \u6d41\u65e5\u5fd7 (CloudWatch). \u4f7f\u7528 Amazon KDS \u4f5c\u4e3a\u6570\u636e\u7f13\u51b2\u533a\u7684\u5e94\u7528\u65e5\u5fd7 \u91cd\u8981 AWS\u670d\u52a1\u4f7f\u7528\u65e5\u5fd7\u529f\u80fd\u7684\u6210\u672c\u4e0d\u5305\u62ec\u5728\u4ee5\u4e0b\u4f30\u7b97\u4e2d\uff0c\u4f8b\u5982\uff0cCloudFront \u4f7f\u7528\u5b9e\u65f6\u65e5\u5fd7\u4f1a\u6839\u636e\u751f\u6210\u7684\u65e5\u5fd7\u884c\u6570\u6536\u8d39\uff08\u6bcf 1,000,000 \u884c\u65e5\u5fd7\u884c 0.01 \u7f8e\u5143\uff09\u3002 \u5bf9\u4e8e\u542f\u7528 CloudWatch \u65e5\u5fd7\u8bb0\u5f55\u7684 CloudTrail \u548c VPC \u6d41\u65e5\u5fd7\uff0c\u8fd8\u6709\u65e5\u5fd7\u4f20\u8f93\u5230 CloudWatch \u7684\u8d39\u7528\u3002 \u8bf7\u67e5\u770b\u670d\u52a1\u5b9a\u4ef7\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u6210\u672c\u4f30\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u5047\u8bbe\u548c\u4e8b\u5b9e\uff1a \u5e73\u5747\u65e5\u5fd7\u6d88\u606f\u5927\u5c0f\u4e3a 1 KB\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf\u4e3a L GB\u3002 Lambda \u5185\u5b58\u4e3a 1024 MB\u3002 \u6bcf\u4e2a Lambda \u8c03\u7528\u5904\u7406 1 MB \u65e5\u5fd7\u3002 \u4e00\u4e2a Lambda \u8c03\u7528\u5904\u7406 Kinesis \u7684\u4e00\u4e2a\u5206\u7247\uff0cLambda \u53ef\u4ee5\u6269\u5c55\u5230\u66f4\u591a\u5e76\u53d1\u521b\u65b0\u4ee5\u5904\u7406\u591a\u4e2a\u5206\u7247\u3002 \u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u7684 Lambda \u8fd0\u884c\u65f6\u4e3a 500 \u6beb\u79d2\u3002 \u63d0\u4f9b 30% \u7684\u989d\u5916\u5206\u7247\u6765\u5904\u7406\u6d41\u91cf\u6296\u52a8\u3002 \u4e00\u4e2a Kinesis \u5206\u7247\u5f15\u5165\u65e5\u5fd7\u5927\u5c0f\u4e3a = 1 MB/\u79d2 x 3600 \u79d2/\u5c0f\u65f6 x 24 \u5c0f\u65f6 x 0.7 = 60.48 GB/\u5929\u3002 \u6240\u9700\u7684 Kinesis \u5206\u7247\u6570 S = Round_up_to_next_integer\uff08\u6bcf\u65e5\u65e5\u5fd7\u91cf L / 60.48\uff09\u3002 \u57fa\u4e8e\u4e0a\u8ff0\u5047\u8bbe\uff0c\u4ee5\u4e0b\u662f\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u516c\u5f0f\uff1a Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 USD/\u5206\u7247\u5c0f\u65f6 x \u6bcf\u5929 24 \u5c0f\u65f6 x S \u5206\u7247 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 USD x 100 \u4e07/GB x L GB/\u5929 Lambda \u6210\u672c = 0.0000000167 USD/1ms x 500 \u6beb\u79d2/\u8c03\u7528 x 1000 \u6b21\u8c03\u7528/GB x L GB/\u5929 \u6bcf\u6708\u603b\u6210\u672c =\uff08Kinesis Shard \u5c0f\u65f6\u6210\u672c + Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + Lambda \u6210\u672c\uff09x 30 \u5929 \u6bcf\u65e5\u7684\u65e5\u5fd7\u91cf (GB) \u5206\u7247\u6570 \u6bcf\u65e5 Kinesis \u5206\u7247\u5c0f\u65f6\u8d39 \u6bcf\u65e5 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u8d39\u7528 \u6bcf\u6b21\u7684 Lambda \u8d39\u7528 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) 10 1 0.36 0.14 0.0835 17.505 100 2 0.72 1.4 0.835 88.65 1000 17 6.12 14 8.35 854.1 \u4f7f\u7528 Light Engine \u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce\u8d39\u7528 \u793a\u4f8b1 -- \u539f\u59cb\u65e5\u5fd7\u5927\u5c0f: 10GB/\u5929\uff0c\u67e5\u8be2\u5927\u5c0f: 50GB/\u5929 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon S3 $1.49 Amazon Lambda $0.37 Amazon SQS $0.00 Amazon DynamoDB $3.79 Amazon Step Function $8.07 Amazon SNS $0.18 Amazon Athena $7.25 Amazon EC2* $29.20 Total $50.35 \u793a\u4f8b2 --\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f: 100GB/\u5929\uff0c\u67e5\u8be2\u5927\u5c0f: 300GB/\u5929 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon S3 $19.98.00 Amazon Lambda $0.73 Amazon SQS $0.00 Amazon DynamoDB $3.79 Amazon Step Function $16.14 Amazon SNS $0.18 Amazon Athena $43.51 Amazon EC2* $29.20 Total $113.53 \u793a\u4f8b3 --\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f: 1TB/\u5929\uff0c\u67e5\u8be2\u5927\u5c0f: 1TB/\u5929 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon S3 $148.99 Amazon Lambda $1.10 Amazon SQS $0.00 Amazon DynamoDB $3.79 Amazon Step Function $26.90 Amazon SNS $0.18 Amazon Athena $148.54 Amazon EC2* $29.20 Total $358.70 \u89e3\u51b3\u65b9\u6848\u63a7\u5236\u53f0\u6210\u672c \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa Web \u63a7\u5236\u53f0\u3002 \u5047\u8bbe\u4e00\u4e2a\u6708\uff0830\u5929\uff09\u63a7\u5236\u53f0\u8bbf\u95ee\u6b21\u6570\u4e3a3000\u6b21\uff0c\u5219\u5c06\u4ea7\u751f\u4ee5\u4e0b\u8d39\u7528\uff1a \u6ce8\u610f AWS Step Functions, Amazon CloudWatch, AWS Systems Manager, \u548c Amazon EventBridge \u5747\u5c5e\u4e8e\u514d\u8d39\u5957\u9910\u3002 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon CloudFront (1GB Data Transfer Out to Internet and 1GB Data Transfer Out to Origin) 0.25 Amazon S3 0.027 Amazon Cognito 0.05 AWS AppSync 0.01 Amazon DynamoDB 1.00 AWS Lambda 0.132 Total 1.469 \u989d\u5916\u7279\u6027\u8d39\u7528 \u6ce8\u610f \u5982\u679c\u60a8\u9009\u62e9\u4e0d\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u4e2d\u7684\u9644\u52a0\u529f\u80fd\uff0c\u5219\u4e0d\u4f1a\u5411\u60a8\u6536\u8d39\u3002 \u8bbf\u95ee\u4ee3\u7406 \u5982\u679c\u901a\u8fc7\u65e5\u5fd7\u901a\u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u8bbf\u95ee\u4ee3\u7406 \uff0c\u5c06\u6536\u53d6\u4ee5\u4e0b\u8d39\u7528\u3002\u6839\u636e\u60a8\u9009\u62e9\u7684\u5b9e\u4f8b\u7c7b\u578b\u548c\u5b9e\u4f8b\u6570\u91cf\uff0c\u603b\u6210\u672c\u4f1a\u6709\u6240\u4e0d\u540c\u3002 \u4ee5\u4e0b\u662f\u4e24\u4e2a\u793a\u4f8b\u4f9b\u60a8\u53c2\u8003\uff08\u57fa\u4e8e\u622a\u81f3\u6700\u65b0\u53d1\u5e03\u7248\u672c\u7684 us-east-1 \u4ef7\u683c\uff09\u3002 \u793a\u4f8b 1: \u5b9e\u4f8b\u7c7b\u578b - t3.nano, 2\u53f0 EC2 \u6210\u672c = t3.nano 1Y \u5168\u90e8\u9884\u4ed8\u9884\u7559\u5b9e\u4f8b $26.28 x 2 / 12 \u4e2a\u6708 = $4.38/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 4.38 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 22.18 \u7f8e\u5143 \u793a\u4f8b 2: \u5b9e\u4f8b\u7c7b\u578b - t3.large, 2\u53f0 EC2 \u6210\u672c = t3.large 1Y \u5168\u90e8\u9884\u4ed8\u9884\u7559\u5b9e\u4f8b $426.612 x 2 / 12 \u4e2a\u6708 = $71.1/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 71.1 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 88.9 \u7f8e\u5143 \u544a\u8b66 \u5982\u679c\u901a\u8fc7\u65e5\u5fd7\u901a\u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u544a\u8b66 \uff0c\u53ef\u53c2\u8003 CloudWatch \u4ef7\u683c \u3002","title":"\u4ef7\u683c"},{"location":"implementation-guide/plan-deployment/cost/#_1","text":"\u91cd\u8981 \u672c\u8282\u4e2d\u63cf\u8ff0\u7684\u6210\u672c\u4f30\u7b97\u53ea\u662f\u793a\u4f8b\uff0c\u53ef\u80fd\u4f1a\u56e0\u60a8\u7684\u73af\u5883\u800c\u5f02\u3002 \u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u4e2a\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002\u5f71\u54cd\u89e3\u51b3\u65b9\u6848\u6210\u672c\u7684\u4e3b\u8981\u56e0\u7d20\u5305\u62ec\uff1a \u8981\u6444\u53d6\u7684\u65e5\u5fd7\u7c7b\u578b \u8981\u6444\u53d6/\u5904\u7406\u7684\u65e5\u5fd7\u91cf \u65e5\u5fd7\u6d88\u606f\u7684\u5927\u5c0f \u65e5\u5fd7\u7684\u4f4d\u7f6e \u989d\u5916\u7684\u7279\u6027 \u4ee5\u4e0b\u793a\u4f8b\u5c06\u6f14\u793a\u622a\u81f3\u6700\u65b0\u53d1\u5e03\u7684\u7248\u672c\uff0c\u57fa\u4e8e\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df (us-east-1) 10/100/1000 GB \u6bcf\u65e5\u65e5\u5fd7\u6444\u53d6\u7684\u6210\u672c\u4f30\u7b97\u3002 \u603b\u6210\u672c\u5305\u62ec \u65e5\u5fd7\u5206\u6790\u5f15\u64ce \uff1a Amazon OpenSearch \u8d39\u7528 \u6216 Light Engine\u8d39\u7528 \u3001 \u5904\u7406\u8d39\u7528 \u548c \u989d\u5916\u7279\u6027\u8d39\u7528 \u3002","title":"\u8d39\u7528\u9884\u4f30"},{"location":"implementation-guide/plan-deployment/cost/#amazon-opensearch","text":"","title":"\u4f7f\u7528Amazon OpenSearch \u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce\u65f6\u7684\u8d39\u7528"},{"location":"implementation-guide/plan-deployment/cost/#amazon-opensearch_1","text":"OD : \u6309\u9700\u5b9e\u4f8b\u4ef7\u683c\u6a21\u578b AURI_1 : \u5168\u989d\u9884\u4ed81\u5e74\u9884\u7559\u5b9e\u4f8b \u5206\u5c42 \uff1a\u5b58\u50a8\u5728\u5c42\u4e2d\u7684\u5929\u6570\u3002 \u4f8b\u5982\uff0c7H + 23W + 60C \u8868\u793a\u65e5\u5fd7\u5728\u70ed\u5c42\u5b58\u50a8 7 \u5929\uff0c\u6e29\u5c42\u5b58\u50a8 23 \u5929\uff0c\u51b7\u5c42\u5b58\u50a8 60 \u5929\u3002 \u526f\u672c : \u5206\u7247\u526f\u672c\u7684\u6570\u91cf\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf (GB) \u5b58\u50a8 (\u5929) \u5206\u5c42 \u526f\u672c OD \u6bcf\u6708 (USD) AURI_1 \u6bcf\u6708 (USD) \u4e13\u7528\u4e3b\u8282\u70b9 \u6570\u636e\u8282\u70b9 EBS (GB) UltraWarm \u8282\u70b9 UltraWarm/Cold S3 \u5b58\u50a8 (GB) OD \u6bcfGB\u8d39\u7528 (USD) AURI_1 \u6bcfGB\u8d39\u7528 (USD) 10 30 30H 0 216.28 158.54 N/A c6g.large[2] 380 N/A 0 0.72093 0.52847 10 30 30H 1 289.35 223.94 N/A m6g.large[2] 760 N/A 0 0.9645 0.74647 100 30 7H + 23W 0 989.49 825.97 m6g.large[3] m6g.large[2] 886 medium[2] 0 0.32983 0.27532 100 30 7H + 23W 1 1295.85 1066.92 m6g.large[3] m6g.large[4] 1772 medium[2] 0 0.43195 0.35564 100 90 7H + 23W + 60C 0 1133.49 969.97 m6g.large[3] m6g.large[2] 886 medium[2] 8300 0.12594 0.10777 100 90 7H + 23W + 60C 1 1439.85 1210.92 m6g.large[3] m6g.large[4] 1772 medium[2] 8300 0.15998 0.13455 100 180 7H + 23W + 150C 0 1349.49 1185.97 m6g.large[3] m6g.large[2] 886 medium[2] 17300 0.07497 0.06589 100 180 7H + 23W + 150C 1 1655.85 1426.92 m6g.large[3] m6g.large[4] 1772 medium[2] 17300 0.09199 0.07927 1000 30 7H + 23W 0 6101.15 5489.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 23000 0.20337 0.18298 1000 30 7H + 23W 1 8759.49 7635.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 23000 0.29198 0.25453 1000 90 7H + 23W + 60C 0 8027.33 7245.45 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 83000 0.08919 0.0805 1000 90 7H + 23W + 60C 1 10199.49 9075.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 83000 0.11333 0.10084 1000 180 7H + 23W + 150C 0 9701.15 9089.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 173000 0.0539 0.0505 1000 180 7H + 23W + 150C 1 12644.19 11420.86 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 173000 0.07025 0.06345","title":"Amazon OpenSearch \u8d39\u7528"},{"location":"implementation-guide/plan-deployment/cost/#_2","text":"","title":"\u5904\u7406\u8d39\u7528"},{"location":"implementation-guide/plan-deployment/cost/#amazon-s3","text":"\u4fe1\u606f \u672c\u8282\u9002\u7528\u4e8e\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5305\u62ec Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\uff0cCloudFront \u6807\u51c6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (S3)\uff0cApplication Load Balancing \u8bbf\u95ee\u65e5\u5fd7\uff0cWAF \u65e5\u5fd7\uff0cVPC \u6d41 \u65e5\u5fd7 (S3)\uff0cAWS Config \u65e5\u5fd7\uff0cAmazon RDS/Aurora \u65e5\u5fd7\uff0cAWS Lambda \u65e5\u5fd7\u3002 \u4f7f\u7528 Amazon S3 \u4f5c\u4e3a\u6570\u636e\u7f13\u51b2\u533a\u7684\u5e94\u7528\u65e5\u5fd7\u3002 \u4ee5\u4e0b\u662f\u5047\u8bbe\uff1a \u65e5\u5fd7\u4ee5 gzip \u683c\u5f0f\u4fdd\u5b58\u5230 Amazon S3\u3002 S3 \u4e2d 4MB \u7684\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u7684\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f\u7ea6\u4e3a 100MB\u3002 \u4e00\u4e2a 1GB \u5185\u5b58\u7684 Lambda \u5904\u7406\u4e00\u4e2a 4MB \u7684\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u5927\u7ea6\u9700\u8981 26 \u79d2\uff0c\u5373\u6bcf MB \u539f\u59cb\u65e5\u5fd7\u9700\u8981 260 \u6beb\u79d2\u3002 \u6700\u5927\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a 5MB\u3002 \u4ece S3 \u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u4f1a\u4ea7\u751f\u975e\u5e38\u4f4e\u7684 SQS \u548c S3 \u8bf7\u6c42\u8d39\u7528\uff0c\u6216\u8005\u901a\u5e38\u5728 AWS \u514d\u8d39\u5957\u9910\u5185\u3002 \u60a8\u6bcf\u5929\u6709 N GB \u539f\u59cb\u65e5\u5fd7\uff0c\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a \u5f53\u60a8\u4f7f\u7528 Lambda \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u65f6: Lambda \u6210\u672c = \u6bcf MB 260 \u6beb\u79d2 x 1024 MB x N GB/\u5929 x \u6bcf\u6beb\u79d2 0.0000000167 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x N GB/\u5929 x 4%\uff08\u538b\u7f29\uff09 \u5f53\u60a8\u4f7f\u7528 OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\u65f6: OSI Pipeline \u6210\u672c = $0.24 \u6bcf OCU \u6bcf hour 1\u4e2aOCU\u53ef\u5904\u7406\u7684\u6700\u5927S3\u6570\u636e\u91cf\u7ea6\u4e3a20MB/s \u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u4e3a\uff1a \u6bcf\u6708\u603b\u6210\u672c\uff08Lambda\u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668\uff09 =\uff08Lambda \u6210\u672c + S3 \u5b58\u50a8\u6210\u672c\uff09x 30 \u5929 \u6bcf\u65e5\u7684\u65e5\u5fd7\u91cf \u6bcf\u65e5\u7684 Lambda \u8d39\u7528 ($) \u6bcf\u6b21\u7684 S3 \u5b58\u50a8\u8d39\u7528 ($) \u6bcf\u6708\u7684\u8d39\u7528 ($) 10 0.044 0.009 1.610 100 0.445 0.092 16.099 1000 4.446 0.920 160.986 5000 22.23 4.600 804.900 Total \u6bcf\u6708\u7684\u603b\u8d39\u7528 (OSI \u4f5c\u4e3a\u65e5\u5fd7\u5904\u7406\u5668) = (OSI \u6210\u672c + S3 Storage \u6210\u672c) x 30 \u5929 \u6bcf\u65e5\u7684\u65e5\u5fd7\u91cf \u6bcf\u65e5\u7684 OSI \u8d39\u7528 ( $) \u6bcf\u6b21\u7684 S3 \u5b58\u50a8\u8d39\u7528 ( $) \u6bcf\u6708\u7684\u8d39\u7528 ( $) 10 5.760 0.001 173.1 100 5.760 0.009 175.5 1000 11.52 0.920 373.2 5000 34.56 4.600 1174.8 \u5bf9\u4e8e\u8bb0\u5f55\u5230Amazon CloudWatch \u7684 Amazon RDS/Aurora \u65e5\u5fd7\u548c AWS Lambda \u65e5\u5fd7\uff0c\u9664\u4e86\u4e0a\u9762\u5217\u51fa\u7684 S3 \u548c Lambda \u6210\u672c\u5916\uff0c\u8fd8\u6709\u4f7f\u7528Kinesis Data Firehose (KDF) \u6765\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u6d41\u5e76\u5c06\u5b83\u4eec\u653e\u5165Amazon S3\u6876\u7684\u989d\u5916\u6210\u672c\uff0cKDF \u4ee5 5KB \u4e3a\u589e\u91cf\u6536\u8d39\uff08\u6bcf\u6761\u8bb0\u5f55\u5c0f\u4e8e 5KB \u6309 5KB \u8ba1\u8d39\uff09\u3002 \u5047\u8bbe\u65e5\u5fd7\u5927\u5c0f\u4e3a\u6bcf\u6761\u8bb0\u5f55 0.2 KB\uff0c\u5219\u6bcf\u5929\u7684 KDF \u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Kinesis Data Firehose \u6210\u672c = \u6bcf GB 0.029 \u7f8e\u5143 x N GB/\u5929 x (5KB/0.2 KB) \u4f8b\u5982\uff0c\u6bcf\u5929 1GB \u7684\u65e5\u5fd7\uff0cKDF \u7684\u6bcf\u6708\u989d\u5916\u8d39\u7528\u4e3a 21.75 \u7f8e\u5143\u3002 \u91cd\u8981 \u4e3a\u4e86\u8282\u7ea6 KDF \u7684\u6210\u672c\uff0c\u8bf7\u786e\u4fdd\u60a8\u53ea\u8bb0\u5f55\u9700\u8981\u7684\u65e5\u5fd7\u3002 \u4f8b\u5982\uff0c\u9664\u975e\u9700\u8981\uff0c\u5426\u5219\u4e0d\u8981\u6253\u5f00 RDS \u5e38\u89c4\u65e5\u5fd7(General Log)\u3002","title":"\u901a\u8fc7 Amazon S3 \u63d0\u53d6\u65e5\u5fd7"},{"location":"implementation-guide/plan-deployment/cost/#amazon-kinesis-data-streams-kds","text":"\u4fe1\u606f \u672c\u8282\u9002\u7528\u4e8e\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5305\u62ec CloudFront \u5b9e\u65f6\u65e5\u5fd7\uff0cCloudTrail \u65e5\u5fd7 (CloudWatch)\uff0cVPC \u6d41\u65e5\u5fd7 (CloudWatch). \u4f7f\u7528 Amazon KDS \u4f5c\u4e3a\u6570\u636e\u7f13\u51b2\u533a\u7684\u5e94\u7528\u65e5\u5fd7 \u91cd\u8981 AWS\u670d\u52a1\u4f7f\u7528\u65e5\u5fd7\u529f\u80fd\u7684\u6210\u672c\u4e0d\u5305\u62ec\u5728\u4ee5\u4e0b\u4f30\u7b97\u4e2d\uff0c\u4f8b\u5982\uff0cCloudFront \u4f7f\u7528\u5b9e\u65f6\u65e5\u5fd7\u4f1a\u6839\u636e\u751f\u6210\u7684\u65e5\u5fd7\u884c\u6570\u6536\u8d39\uff08\u6bcf 1,000,000 \u884c\u65e5\u5fd7\u884c 0.01 \u7f8e\u5143\uff09\u3002 \u5bf9\u4e8e\u542f\u7528 CloudWatch \u65e5\u5fd7\u8bb0\u5f55\u7684 CloudTrail \u548c VPC \u6d41\u65e5\u5fd7\uff0c\u8fd8\u6709\u65e5\u5fd7\u4f20\u8f93\u5230 CloudWatch \u7684\u8d39\u7528\u3002 \u8bf7\u67e5\u770b\u670d\u52a1\u5b9a\u4ef7\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u6210\u672c\u4f30\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u5047\u8bbe\u548c\u4e8b\u5b9e\uff1a \u5e73\u5747\u65e5\u5fd7\u6d88\u606f\u5927\u5c0f\u4e3a 1 KB\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf\u4e3a L GB\u3002 Lambda \u5185\u5b58\u4e3a 1024 MB\u3002 \u6bcf\u4e2a Lambda \u8c03\u7528\u5904\u7406 1 MB \u65e5\u5fd7\u3002 \u4e00\u4e2a Lambda \u8c03\u7528\u5904\u7406 Kinesis \u7684\u4e00\u4e2a\u5206\u7247\uff0cLambda \u53ef\u4ee5\u6269\u5c55\u5230\u66f4\u591a\u5e76\u53d1\u521b\u65b0\u4ee5\u5904\u7406\u591a\u4e2a\u5206\u7247\u3002 \u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u7684 Lambda \u8fd0\u884c\u65f6\u4e3a 500 \u6beb\u79d2\u3002 \u63d0\u4f9b 30% \u7684\u989d\u5916\u5206\u7247\u6765\u5904\u7406\u6d41\u91cf\u6296\u52a8\u3002 \u4e00\u4e2a Kinesis \u5206\u7247\u5f15\u5165\u65e5\u5fd7\u5927\u5c0f\u4e3a = 1 MB/\u79d2 x 3600 \u79d2/\u5c0f\u65f6 x 24 \u5c0f\u65f6 x 0.7 = 60.48 GB/\u5929\u3002 \u6240\u9700\u7684 Kinesis \u5206\u7247\u6570 S = Round_up_to_next_integer\uff08\u6bcf\u65e5\u65e5\u5fd7\u91cf L / 60.48\uff09\u3002 \u57fa\u4e8e\u4e0a\u8ff0\u5047\u8bbe\uff0c\u4ee5\u4e0b\u662f\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u516c\u5f0f\uff1a Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 USD/\u5206\u7247\u5c0f\u65f6 x \u6bcf\u5929 24 \u5c0f\u65f6 x S \u5206\u7247 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 USD x 100 \u4e07/GB x L GB/\u5929 Lambda \u6210\u672c = 0.0000000167 USD/1ms x 500 \u6beb\u79d2/\u8c03\u7528 x 1000 \u6b21\u8c03\u7528/GB x L GB/\u5929 \u6bcf\u6708\u603b\u6210\u672c =\uff08Kinesis Shard \u5c0f\u65f6\u6210\u672c + Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + Lambda \u6210\u672c\uff09x 30 \u5929 \u6bcf\u65e5\u7684\u65e5\u5fd7\u91cf (GB) \u5206\u7247\u6570 \u6bcf\u65e5 Kinesis \u5206\u7247\u5c0f\u65f6\u8d39 \u6bcf\u65e5 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u8d39\u7528 \u6bcf\u6b21\u7684 Lambda \u8d39\u7528 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) 10 1 0.36 0.14 0.0835 17.505 100 2 0.72 1.4 0.835 88.65 1000 17 6.12 14 8.35 854.1","title":"\u901a\u8fc7 Amazon Kinesis Data Streams (KDS) \u63d0\u53d6\u65e5\u5fd7"},{"location":"implementation-guide/plan-deployment/cost/#light-engine","text":"\u793a\u4f8b1 -- \u539f\u59cb\u65e5\u5fd7\u5927\u5c0f: 10GB/\u5929\uff0c\u67e5\u8be2\u5927\u5c0f: 50GB/\u5929 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon S3 $1.49 Amazon Lambda $0.37 Amazon SQS $0.00 Amazon DynamoDB $3.79 Amazon Step Function $8.07 Amazon SNS $0.18 Amazon Athena $7.25 Amazon EC2* $29.20 Total $50.35 \u793a\u4f8b2 --\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f: 100GB/\u5929\uff0c\u67e5\u8be2\u5927\u5c0f: 300GB/\u5929 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon S3 $19.98.00 Amazon Lambda $0.73 Amazon SQS $0.00 Amazon DynamoDB $3.79 Amazon Step Function $16.14 Amazon SNS $0.18 Amazon Athena $43.51 Amazon EC2* $29.20 Total $113.53 \u793a\u4f8b3 --\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f: 1TB/\u5929\uff0c\u67e5\u8be2\u5927\u5c0f: 1TB/\u5929 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon S3 $148.99 Amazon Lambda $1.10 Amazon SQS $0.00 Amazon DynamoDB $3.79 Amazon Step Function $26.90 Amazon SNS $0.18 Amazon Athena $148.54 Amazon EC2* $29.20 Total $358.70","title":"\u4f7f\u7528 Light Engine \u4f5c\u4e3a\u65e5\u5fd7\u5206\u6790\u5f15\u64ce\u8d39\u7528"},{"location":"implementation-guide/plan-deployment/cost/#_3","text":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa Web \u63a7\u5236\u53f0\u3002 \u5047\u8bbe\u4e00\u4e2a\u6708\uff0830\u5929\uff09\u63a7\u5236\u53f0\u8bbf\u95ee\u6b21\u6570\u4e3a3000\u6b21\uff0c\u5219\u5c06\u4ea7\u751f\u4ee5\u4e0b\u8d39\u7528\uff1a \u6ce8\u610f AWS Step Functions, Amazon CloudWatch, AWS Systems Manager, \u548c Amazon EventBridge \u5747\u5c5e\u4e8e\u514d\u8d39\u5957\u9910\u3002 \u670d\u52a1 \u6bcf\u6708\u7684\u603b\u8d39\u7528 (USD) Amazon CloudFront (1GB Data Transfer Out to Internet and 1GB Data Transfer Out to Origin) 0.25 Amazon S3 0.027 Amazon Cognito 0.05 AWS AppSync 0.01 Amazon DynamoDB 1.00 AWS Lambda 0.132 Total 1.469","title":"\u89e3\u51b3\u65b9\u6848\u63a7\u5236\u53f0\u6210\u672c"},{"location":"implementation-guide/plan-deployment/cost/#_4","text":"\u6ce8\u610f \u5982\u679c\u60a8\u9009\u62e9\u4e0d\u4f7f\u7528\u65e5\u5fd7\u901a\u63a7\u5236\u53f0\u4e2d\u7684\u9644\u52a0\u529f\u80fd\uff0c\u5219\u4e0d\u4f1a\u5411\u60a8\u6536\u8d39\u3002","title":"\u989d\u5916\u7279\u6027\u8d39\u7528"},{"location":"implementation-guide/plan-deployment/cost/#_5","text":"\u5982\u679c\u901a\u8fc7\u65e5\u5fd7\u901a\u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u8bbf\u95ee\u4ee3\u7406 \uff0c\u5c06\u6536\u53d6\u4ee5\u4e0b\u8d39\u7528\u3002\u6839\u636e\u60a8\u9009\u62e9\u7684\u5b9e\u4f8b\u7c7b\u578b\u548c\u5b9e\u4f8b\u6570\u91cf\uff0c\u603b\u6210\u672c\u4f1a\u6709\u6240\u4e0d\u540c\u3002 \u4ee5\u4e0b\u662f\u4e24\u4e2a\u793a\u4f8b\u4f9b\u60a8\u53c2\u8003\uff08\u57fa\u4e8e\u622a\u81f3\u6700\u65b0\u53d1\u5e03\u7248\u672c\u7684 us-east-1 \u4ef7\u683c\uff09\u3002 \u793a\u4f8b 1: \u5b9e\u4f8b\u7c7b\u578b - t3.nano, 2\u53f0 EC2 \u6210\u672c = t3.nano 1Y \u5168\u90e8\u9884\u4ed8\u9884\u7559\u5b9e\u4f8b $26.28 x 2 / 12 \u4e2a\u6708 = $4.38/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 4.38 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 22.18 \u7f8e\u5143 \u793a\u4f8b 2: \u5b9e\u4f8b\u7c7b\u578b - t3.large, 2\u53f0 EC2 \u6210\u672c = t3.large 1Y \u5168\u90e8\u9884\u4ed8\u9884\u7559\u5b9e\u4f8b $426.612 x 2 / 12 \u4e2a\u6708 = $71.1/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 71.1 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 88.9 \u7f8e\u5143","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/plan-deployment/cost/#_6","text":"\u5982\u679c\u901a\u8fc7\u65e5\u5fd7\u901a\u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u544a\u8b66 \uff0c\u53ef\u53c2\u8003 CloudWatch \u4ef7\u683c \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/plan-deployment/security/","text":"\u5b89\u5168 \u5728\u6784\u5efa\u57fa\u4e8eAWS\u57fa\u7840\u8bbe\u65bd\u7684\u7cfb\u7edf\u65f6\uff0c\u5b89\u5168\u8d23\u4efb\u7531\u60a8\u548cAWS\u5171\u540c\u627f\u62c5\u3002\u8fd9\u4e2a \u5171\u4eab\u8d23\u4efb\u6a21\u578b \u51cf\u8f7b\u4e86\u60a8\u7684\u8fd0\u7ef4\u8d1f\u62c5\uff0c\u56e0\u4e3aAWS\u8d1f\u8d23\u64cd\u4f5c\u3001\u7ba1\u7406\u548c\u63a7\u5236\u7ec4\u4ef6\uff0c\u5305\u62ec\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u3001\u865a\u62df\u5316\u5c42\u4ee5\u53ca\u670d\u52a1\u6240\u5728\u8bbe\u65bd\u7684\u7269\u7406\u5b89\u5168\u3002 \u6709\u5173AWS\u5b89\u5168\u6027\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS\u4e91\u5b89\u5168 \u3002 IAM \u89d2\u8272 AWS Identity and Access Management (IAM) \u89d2\u8272\u5141\u8bb8\u5ba2\u6237\u5206\u914d\u7cbe\u7ec6\u7684\u8bbf\u95ee\u7b56\u7565\u548c\u6743\u9650 \u5230 AWS \u4e91\u4e0a\u7684\u670d\u52a1\u548c\u7528\u6237\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u6388\u4e88\u89e3\u51b3\u65b9\u6848\u7684 AWS Lambda \u51fd\u6570\u7684 IAM \u89d2\u8272\uff0c AWS AppSync \u548c Amazon Cognito \u8bbf\u95ee\u4ee5\u521b\u5efa\u533a\u57df\u8d44\u6e90\u3002 \u5b89\u5168\u7ec4 \u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\u65e8\u5728\u63a7\u5236\u548c\u9694\u79bb\u89e3\u51b3\u65b9\u6848\u4e4b\u95f4\u7684\u7f51\u7edc\u6d41\u91cf\u6210\u5206\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u67e5\u770b\u5b89\u5168\u7ec4\u5e76\u5728\u90e8\u7f72\u540e\u6839\u636e\u9700\u8981\u8fdb\u4e00\u6b65\u9650\u5236\u8bbf\u95ee\u3002 Amazon CloudFront \u6b64\u89e3\u51b3\u65b9\u6848\u5c06\u90e8\u7f72\u6258\u7ba1\u5728 Amazon Simple Storage Service (Amazon S3) \u5b58\u50a8\u6876\u4e2d\u7684 Web \u63a7\u5236\u53f0\u3002\u4e3a\u4e86\u5e2e\u52a9\u51cf\u5c11 \u5ef6\u8fdf\u5e76\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5305\u62ec\u5177\u6709\u539f\u59cb\u8bbf\u95ee\u8eab\u4efd\u7684 Amazon CloudFront \u5206\u914d\uff0c \u8fd9\u662f\u4e00\u4e2a CloudFront \u7528\u6237\uff0c\u63d0\u4f9b\u5bf9\u89e3\u51b3\u65b9\u6848\u7684\u7f51\u7ad9\u5b58\u50a8\u6876\u5185\u5bb9\u7684\u516c\u5171\u8bbf\u95ee\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528\u6e90\u8bbf\u95ee\u8eab\u4efd\u9650\u5236\u5bf9 Amazon S3 \u5185\u5bb9\u7684\u8bbf\u95ee \u3002 Amazon EC2 \u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u4e86\u4e00\u4e2a\u57fa\u4e8e Nginx\u7684\u4ee3\u7406 \uff0c\u5b83\u5c06\u5141\u8bb8\u60a8\u8bbf\u95ee\u5728VPC\u73af\u5883\u4e2d\u9884\u914d\u7684OpenSearch\u3002Nginx\u662f\u4f7f\u7528EC2\u5b9e\u4f8b\u6258\u7ba1\u7684\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528 AWS Systems Manager Patch Manager \u5b9a\u671f\u5bf9\u8fd9\u4e9b\u5b9e\u4f8b\u8fdb\u884c\u6253\u8865\u4e01\u3002Patch Manager\u662fAWS Systems Manager\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u5b83\u81ea\u52a8\u5904\u7406\u7ba1\u7406\u8282\u70b9\u7684\u66f4\u65b0\u8865\u4e01\u8fc7\u7a0b\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4ec5\u663e\u793a\u7f3a\u5c11\u7684\u8865\u4e01\u62a5\u544a\uff08\u626b\u63cf\u64cd\u4f5c\uff09\uff0c\u6216\u81ea\u52a8\u5b89\u88c5\u6240\u6709\u7f3a\u5c11\u7684\u8865\u4e01\uff08\u626b\u63cf\u548c\u5b89\u88c5\u64cd\u4f5c\uff09\u3002","title":"\u5b89\u5168"},{"location":"implementation-guide/plan-deployment/security/#_1","text":"\u5728\u6784\u5efa\u57fa\u4e8eAWS\u57fa\u7840\u8bbe\u65bd\u7684\u7cfb\u7edf\u65f6\uff0c\u5b89\u5168\u8d23\u4efb\u7531\u60a8\u548cAWS\u5171\u540c\u627f\u62c5\u3002\u8fd9\u4e2a \u5171\u4eab\u8d23\u4efb\u6a21\u578b \u51cf\u8f7b\u4e86\u60a8\u7684\u8fd0\u7ef4\u8d1f\u62c5\uff0c\u56e0\u4e3aAWS\u8d1f\u8d23\u64cd\u4f5c\u3001\u7ba1\u7406\u548c\u63a7\u5236\u7ec4\u4ef6\uff0c\u5305\u62ec\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u3001\u865a\u62df\u5316\u5c42\u4ee5\u53ca\u670d\u52a1\u6240\u5728\u8bbe\u65bd\u7684\u7269\u7406\u5b89\u5168\u3002 \u6709\u5173AWS\u5b89\u5168\u6027\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS\u4e91\u5b89\u5168 \u3002","title":"\u5b89\u5168"},{"location":"implementation-guide/plan-deployment/security/#iam","text":"AWS Identity and Access Management (IAM) \u89d2\u8272\u5141\u8bb8\u5ba2\u6237\u5206\u914d\u7cbe\u7ec6\u7684\u8bbf\u95ee\u7b56\u7565\u548c\u6743\u9650 \u5230 AWS \u4e91\u4e0a\u7684\u670d\u52a1\u548c\u7528\u6237\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u6388\u4e88\u89e3\u51b3\u65b9\u6848\u7684 AWS Lambda \u51fd\u6570\u7684 IAM \u89d2\u8272\uff0c AWS AppSync \u548c Amazon Cognito \u8bbf\u95ee\u4ee5\u521b\u5efa\u533a\u57df\u8d44\u6e90\u3002","title":"IAM \u89d2\u8272"},{"location":"implementation-guide/plan-deployment/security/#_2","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\u65e8\u5728\u63a7\u5236\u548c\u9694\u79bb\u89e3\u51b3\u65b9\u6848\u4e4b\u95f4\u7684\u7f51\u7edc\u6d41\u91cf\u6210\u5206\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u67e5\u770b\u5b89\u5168\u7ec4\u5e76\u5728\u90e8\u7f72\u540e\u6839\u636e\u9700\u8981\u8fdb\u4e00\u6b65\u9650\u5236\u8bbf\u95ee\u3002","title":"\u5b89\u5168\u7ec4"},{"location":"implementation-guide/plan-deployment/security/#amazon-cloudfront","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u5c06\u90e8\u7f72\u6258\u7ba1\u5728 Amazon Simple Storage Service (Amazon S3) \u5b58\u50a8\u6876\u4e2d\u7684 Web \u63a7\u5236\u53f0\u3002\u4e3a\u4e86\u5e2e\u52a9\u51cf\u5c11 \u5ef6\u8fdf\u5e76\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5305\u62ec\u5177\u6709\u539f\u59cb\u8bbf\u95ee\u8eab\u4efd\u7684 Amazon CloudFront \u5206\u914d\uff0c \u8fd9\u662f\u4e00\u4e2a CloudFront \u7528\u6237\uff0c\u63d0\u4f9b\u5bf9\u89e3\u51b3\u65b9\u6848\u7684\u7f51\u7ad9\u5b58\u50a8\u6876\u5185\u5bb9\u7684\u516c\u5171\u8bbf\u95ee\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528\u6e90\u8bbf\u95ee\u8eab\u4efd\u9650\u5236\u5bf9 Amazon S3 \u5185\u5bb9\u7684\u8bbf\u95ee \u3002","title":"Amazon CloudFront"},{"location":"implementation-guide/plan-deployment/security/#amazon-ec2","text":"\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u4e86\u4e00\u4e2a\u57fa\u4e8e Nginx\u7684\u4ee3\u7406 \uff0c\u5b83\u5c06\u5141\u8bb8\u60a8\u8bbf\u95ee\u5728VPC\u73af\u5883\u4e2d\u9884\u914d\u7684OpenSearch\u3002Nginx\u662f\u4f7f\u7528EC2\u5b9e\u4f8b\u6258\u7ba1\u7684\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u4f7f\u7528 AWS Systems Manager Patch Manager \u5b9a\u671f\u5bf9\u8fd9\u4e9b\u5b9e\u4f8b\u8fdb\u884c\u6253\u8865\u4e01\u3002Patch Manager\u662fAWS Systems Manager\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u5b83\u81ea\u52a8\u5904\u7406\u7ba1\u7406\u8282\u70b9\u7684\u66f4\u65b0\u8865\u4e01\u8fc7\u7a0b\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4ec5\u663e\u793a\u7f3a\u5c11\u7684\u8865\u4e01\u62a5\u544a\uff08\u626b\u63cf\u64cd\u4f5c\uff09\uff0c\u6216\u81ea\u52a8\u5b89\u88c5\u6240\u6709\u7f3a\u5c11\u7684\u8865\u4e01\uff08\u626b\u63cf\u548c\u5b89\u88c5\u64cd\u4f5c\uff09\u3002","title":"Amazon EC2"},{"location":"implementation-guide/resources/grafana/","text":"\u51c6\u5907Grafana\u73af\u5883 - \u53ef\u9009 \u6b64\u6b65\u9aa4\u975e\u5fc5\u9700\u64cd\u4f5c\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u751f\u6210Dashboards\u5230Grafana\u4e2d\uff0c\u90a3\u4e48\u60a8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u90e8\u7f72\uff0c\u5982\u679c\u60a8\u53ea\u5e0c\u671b\u6570\u636e\u5b58\u50a8\u5230S3\u4e2d\uff0c\u5e76\u4e0d\u9700\u8981\u521b\u5efaDashboards\uff0c\u90a3\u4e48\u53ef\u4ee5\u5ffd\u7565\u6b64\u6b65\u9aa4\u3002 \u6b65\u9aa4 1: \u5b89\u88c5Grafana - \u53ef\u9009 \u524d\u63d0\u6761\u4ef6: \u5982\u60a8\u5df2\u6709Grafana\u73af\u5883\uff0c\u53ef\u8df3\u8fc7\u6b64\u6b65\u9aa4 \u5df2\u542f\u52a8EC2\u5b9e\u4f8b\uff0cx86 / ARM\u67b6\u6784\u5747\u53ef \u64cd\u4f5c\u6b65\u9aa4\u4ee5m6g.medium\u3001Arm\u67b6\u6784\u3001Amazon 2023\u4e3a\u4f8b\uff0c\u5b89\u88c5\u6b65\u9aa4\u53ef\u53c2\u8003 \u6b64\u5904 . \u64cd\u4f5c\u6b65\u9aa4: # \u7f16\u8f91/etc/yum.repos.d/grafana.repo\u6587\u4ef6\uff0c\u586b\u5165\u4ee5\u4e0b\u5185\u5bb9 [ grafana ] name = grafana baseurl = https://rpm.grafana.com repo_gpgcheck = 1 enabled = 1 gpgcheck = 1 gpgkey = https://rpm.grafana.com/gpg.key sslverify = 1 sslcacert = /etc/pki/tls/certs/ca-bundle.crt # \u5b89\u88c5grafana yum install -y grafana # \u542f\u52a8grafana\uff0c\u5e76\u67e5\u770b\u8fd0\u884c\u72b6\u6001 systemctl start grafana-server systemctl status grafana-server # grafana\u9ed8\u8ba4\u76d1\u542c3000\u7aef\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u7f16\u8f91/etc/grafana/grafana.ini\u8fdb\u884c\u4fee\u6539 # \u8bbf\u95eegrafana\uff0c\u9ed8\u8ba4\u8d26\u53f7\u5bc6\u7801\u4e3aadmin / admin\uff0c\u7b2c\u4e00\u6b21\u767b\u5f55\u9700\u8981\u4fee\u6539\u5bc6\u7801 http:// { instance-ip } :3000/ # \u5982\u679c\u9700\u8981\u516c\u7f51\u8bbf\u95ee\uff0c\u8bf7\u81ea\u884c\u914d\u7f6eALB # \u914d\u7f6eALB\u65f6\u9700\u8981\u4fee\u6539Idle timeout\u4e3a1800\uff0c\u907f\u514d\u5927\u6570\u636e\u91cf\u67e5\u8be2\u65f6\uff08\u5355\u6b21API\u8c03\u7528\u8d85\u8fc760\u79d2\uff09\u51fa\u73b0\u4ee5\u4e0b\u9519\u8bef\uff1a # \u201ca padding to disable MSIE and Chrome friendly error page\u201d \u6b65\u9aa4 2: \u6388\u6743Grafana\u6240\u5728EC2 \u8bbf\u95eeAthena\u6743\u9650 \u524d\u63d0\u6761\u4ef6: \u7528\u6237\u5728EC2\u90e8\u7f72Grafana EC2\u5df2\u914d\u7f6eIAM Instance Profile\uff0c\u9700\u8bb0\u5f55\u5bf9\u5e94Instance profile\u7684Role Arn\uff0c\u4ee5\u4e0b\u5185\u5bb9\u7edf\u4e00\u79f0\u4e3a\u201cEC2 IAM Instance Profile\u201d Follow below steps: \u6253\u5f00IAM \u63a7\u5236\u53f0 \u83dc\u5355\u6761\u4e2d\u9009\u62e9\u201cRoles\u201d \u641c\u7d22\u201cAthenaPublicAccessRole\u201d\uff0c\u70b9\u51fb\u8fdb\u5165\u8be6\u60c5\u9875\u9762\uff0c\u5e76\u8bb0\u5f55Role Arn\uff0c\u4e4b\u540e\u5185\u5bb9\u7edf\u4e00\u79f0\u4e3a\u201cAthenaPublicAccessRole\u201d \u70b9\u51fb\u201cTrust relationships\u201d \u70b9\u51fb \u201cEdit trust policy\u201d \u70b9\u51fb \u201cAdd a principal\u201d \u9009\u62e9 \u201cIAM Roles\u201d \u8f93\u5165 \u201cEC2 IAM Instance Profile\u201d \u70b9\u51fb \u201cAdd principal\u201d \u70b9\u51fb \u201cUpdate Policy\u201d \u6b65\u9aa4 3: \u5b89\u88c5Amazon Athena Plugins \u524d\u63d0\u6761\u4ef6: \u5df2\u5b89\u88c5Grafana Grafana\u53ef\u8bbf\u95ee\u516c\u7f51 \u64cd\u4f5c\u6b65\u9aa4: \u6253\u5f00Grafana\u63a7\u5236\u53f0\u9875\u9762 \u5de6\u4fa7\u83dc\u5355\u6761\u9009\u62e9Administration \u2192 Plugins \u53f3\u4fa7\u7684\u201cState\u201d\u9009\u62e9All \u5728\u641c\u7d22\u6846\u4e2d\u8f93\u5165\u201cAthena\u201d\uff0c\u70b9\u51fb\u641c\u7d22\u7ed3\u679c\u4e2d\u7684\u201cAmazon Athena\u201d\uff0c\u8fdb\u5165\u8be6\u60c5\u9875\u9762 \u70b9\u51fb\u9875\u9762\u4e0a\u7684\u201cInstall\u201d\u6309\u94ae\uff0c\u7b49\u5f85\u63d2\u4ef6\u5b89\u88c5\u5b8c\u6210\u5373\u53ef \u6b65\u9aa4 4: \u521b\u5efa Service Accounts \u64cd\u4f5c\u6b65\u9aa4: \u6253\u5f00Grafana\u63a7\u5236\u53f0\u9875\u9762 \u5de6\u4fa7\u83dc\u5355\u6761\u9009\u62e9Administration \u2192 Service accounts \u9009\u62e9\u201cAdd service account\u201d \u8f93\u5165Display name\uff0c\u4f8b\u5982\u201calbertxu\u201d Role\u9009\u62e9\u201cAdmin\u201d \u70b9\u51fbCreate \u70b9\u51fb\u9875\u9762\u4e2d\u7684\u201cAdd service account token\u201d \u70b9\u51fb\u201cGenerate token\u201d \u70b9\u51fb\u201cCopy to clipboard and close\u201d \u8bf7\u4fdd\u5b58\u5e76\u8bb0\u5f55\u6b64token\uff0c\u540e\u7eed\u521b\u5efaPipeline\u65f6\u4f1a\u7528\u5230","title":"Grafana"},{"location":"implementation-guide/resources/grafana/#grafana-","text":"\u6b64\u6b65\u9aa4\u975e\u5fc5\u9700\u64cd\u4f5c\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u751f\u6210Dashboards\u5230Grafana\u4e2d\uff0c\u90a3\u4e48\u60a8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u90e8\u7f72\uff0c\u5982\u679c\u60a8\u53ea\u5e0c\u671b\u6570\u636e\u5b58\u50a8\u5230S3\u4e2d\uff0c\u5e76\u4e0d\u9700\u8981\u521b\u5efaDashboards\uff0c\u90a3\u4e48\u53ef\u4ee5\u5ffd\u7565\u6b64\u6b65\u9aa4\u3002","title":"\u51c6\u5907Grafana\u73af\u5883 - \u53ef\u9009"},{"location":"implementation-guide/resources/grafana/#1-grafana-","text":"\u524d\u63d0\u6761\u4ef6: \u5982\u60a8\u5df2\u6709Grafana\u73af\u5883\uff0c\u53ef\u8df3\u8fc7\u6b64\u6b65\u9aa4 \u5df2\u542f\u52a8EC2\u5b9e\u4f8b\uff0cx86 / ARM\u67b6\u6784\u5747\u53ef \u64cd\u4f5c\u6b65\u9aa4\u4ee5m6g.medium\u3001Arm\u67b6\u6784\u3001Amazon 2023\u4e3a\u4f8b\uff0c\u5b89\u88c5\u6b65\u9aa4\u53ef\u53c2\u8003 \u6b64\u5904 . \u64cd\u4f5c\u6b65\u9aa4: # \u7f16\u8f91/etc/yum.repos.d/grafana.repo\u6587\u4ef6\uff0c\u586b\u5165\u4ee5\u4e0b\u5185\u5bb9 [ grafana ] name = grafana baseurl = https://rpm.grafana.com repo_gpgcheck = 1 enabled = 1 gpgcheck = 1 gpgkey = https://rpm.grafana.com/gpg.key sslverify = 1 sslcacert = /etc/pki/tls/certs/ca-bundle.crt # \u5b89\u88c5grafana yum install -y grafana # \u542f\u52a8grafana\uff0c\u5e76\u67e5\u770b\u8fd0\u884c\u72b6\u6001 systemctl start grafana-server systemctl status grafana-server # grafana\u9ed8\u8ba4\u76d1\u542c3000\u7aef\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u7f16\u8f91/etc/grafana/grafana.ini\u8fdb\u884c\u4fee\u6539 # \u8bbf\u95eegrafana\uff0c\u9ed8\u8ba4\u8d26\u53f7\u5bc6\u7801\u4e3aadmin / admin\uff0c\u7b2c\u4e00\u6b21\u767b\u5f55\u9700\u8981\u4fee\u6539\u5bc6\u7801 http:// { instance-ip } :3000/ # \u5982\u679c\u9700\u8981\u516c\u7f51\u8bbf\u95ee\uff0c\u8bf7\u81ea\u884c\u914d\u7f6eALB # \u914d\u7f6eALB\u65f6\u9700\u8981\u4fee\u6539Idle timeout\u4e3a1800\uff0c\u907f\u514d\u5927\u6570\u636e\u91cf\u67e5\u8be2\u65f6\uff08\u5355\u6b21API\u8c03\u7528\u8d85\u8fc760\u79d2\uff09\u51fa\u73b0\u4ee5\u4e0b\u9519\u8bef\uff1a # \u201ca padding to disable MSIE and Chrome friendly error page\u201d","title":"\u6b65\u9aa4 1: \u5b89\u88c5Grafana - \u53ef\u9009"},{"location":"implementation-guide/resources/grafana/#2-grafanaec2-athena","text":"\u524d\u63d0\u6761\u4ef6: \u7528\u6237\u5728EC2\u90e8\u7f72Grafana EC2\u5df2\u914d\u7f6eIAM Instance Profile\uff0c\u9700\u8bb0\u5f55\u5bf9\u5e94Instance profile\u7684Role Arn\uff0c\u4ee5\u4e0b\u5185\u5bb9\u7edf\u4e00\u79f0\u4e3a\u201cEC2 IAM Instance Profile\u201d Follow below steps: \u6253\u5f00IAM \u63a7\u5236\u53f0 \u83dc\u5355\u6761\u4e2d\u9009\u62e9\u201cRoles\u201d \u641c\u7d22\u201cAthenaPublicAccessRole\u201d\uff0c\u70b9\u51fb\u8fdb\u5165\u8be6\u60c5\u9875\u9762\uff0c\u5e76\u8bb0\u5f55Role Arn\uff0c\u4e4b\u540e\u5185\u5bb9\u7edf\u4e00\u79f0\u4e3a\u201cAthenaPublicAccessRole\u201d \u70b9\u51fb\u201cTrust relationships\u201d \u70b9\u51fb \u201cEdit trust policy\u201d \u70b9\u51fb \u201cAdd a principal\u201d \u9009\u62e9 \u201cIAM Roles\u201d \u8f93\u5165 \u201cEC2 IAM Instance Profile\u201d \u70b9\u51fb \u201cAdd principal\u201d \u70b9\u51fb \u201cUpdate Policy\u201d","title":"\u6b65\u9aa4 2:  \u6388\u6743Grafana\u6240\u5728EC2 \u8bbf\u95eeAthena\u6743\u9650"},{"location":"implementation-guide/resources/grafana/#3-amazon-athena-plugins","text":"\u524d\u63d0\u6761\u4ef6: \u5df2\u5b89\u88c5Grafana Grafana\u53ef\u8bbf\u95ee\u516c\u7f51 \u64cd\u4f5c\u6b65\u9aa4: \u6253\u5f00Grafana\u63a7\u5236\u53f0\u9875\u9762 \u5de6\u4fa7\u83dc\u5355\u6761\u9009\u62e9Administration \u2192 Plugins \u53f3\u4fa7\u7684\u201cState\u201d\u9009\u62e9All \u5728\u641c\u7d22\u6846\u4e2d\u8f93\u5165\u201cAthena\u201d\uff0c\u70b9\u51fb\u641c\u7d22\u7ed3\u679c\u4e2d\u7684\u201cAmazon Athena\u201d\uff0c\u8fdb\u5165\u8be6\u60c5\u9875\u9762 \u70b9\u51fb\u9875\u9762\u4e0a\u7684\u201cInstall\u201d\u6309\u94ae\uff0c\u7b49\u5f85\u63d2\u4ef6\u5b89\u88c5\u5b8c\u6210\u5373\u53ef","title":"\u6b65\u9aa4 3: \u5b89\u88c5Amazon Athena Plugins"},{"location":"implementation-guide/resources/grafana/#4-service-accounts","text":"\u64cd\u4f5c\u6b65\u9aa4: \u6253\u5f00Grafana\u63a7\u5236\u53f0\u9875\u9762 \u5de6\u4fa7\u83dc\u5355\u6761\u9009\u62e9Administration \u2192 Service accounts \u9009\u62e9\u201cAdd service account\u201d \u8f93\u5165Display name\uff0c\u4f8b\u5982\u201calbertxu\u201d Role\u9009\u62e9\u201cAdmin\u201d \u70b9\u51fbCreate \u70b9\u51fb\u9875\u9762\u4e2d\u7684\u201cAdd service account token\u201d \u70b9\u51fb\u201cGenerate token\u201d \u70b9\u51fb\u201cCopy to clipboard and close\u201d \u8bf7\u4fdd\u5b58\u5e76\u8bb0\u5f55\u6b64token\uff0c\u540e\u7eed\u521b\u5efaPipeline\u65f6\u4f1a\u7528\u5230","title":"\u6b65\u9aa4 4: \u521b\u5efa Service Accounts"},{"location":"implementation-guide/resources/open-ssl/","text":"OpenSSL 1.1 \u5b89\u88c5 \u65e5\u5fd7\u901a\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\uff0c\u9700\u8981 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf (OS) \u5b89\u88c5\u4f9d\u8d56\u9879\u3002 \u5efa\u8bae\u60a8\u81ea\u5df1\u5236\u4f5c\u5b89\u88c5\u4e86 OpenSSL 1.1 \u7684 AMI\u3002 \u91cd\u8981 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5728\u4ee5\u4e0b\u5217\u8868\u4e2d\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u7684\u5b89\u88c5\u6307\u5357\u81ea\u5df1\u5b89\u88c5 OpenSSL\u3002 Amazon Linux 2 sudo yum install openssl11 Ubuntu 22.04 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 ln -s /snap/core18/current/usr/lib/x86_64-linux-gnu/libssl.so.1.1 /usr/lib/libssl.so.1.1 ln -s /snap/core18/current/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 /usr/lib/libcrypto.so.1.1 20.04 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 18.04 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Debian GNU/10 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 GNU/11 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Red Hat Enterprise Linux 8.X OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002 7.X sudo su - yum install -y https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm systemctl enable amazon-ssm-agent systemctl start amazon-ssm-agent yum install -y wget perl unzip gcc zlib-devel mkdir /tmp/openssl cd /tmp/openssl wget https://www.openssl.org/source/openssl-1.1.1s.tar.gz tar xzvf openssl-1.1.1s.tar.gz cd openssl-1.1.1s ./config --prefix = /usr/local/openssl11 --openssldir = /usr/local/openssl11 shared zlib make make install echo /usr/local/openssl11/lib/ >> /etc/ld.so.conf ldconfig SUSE Linux Enterprise Server 15 OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002 CentOS 7 \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u65b9\u6cd5 \u767b\u5f55\u5230 CentOS 7 \u673a\u5668\u4e2d\uff0c\u624b\u52a8\u5b89\u88c5 SSM Agent\u3002 sudo yum install -y https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm sudo systemctl enable amazon-ssm-agent sudo systemctl start amazon-ssm-agent \u6765\u5230\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684 \u5b9e\u4f8b\u7ec4 \u9762\u677f\uff0c\u521b\u5efa \u5b9e\u4f8b\u7ec4 \uff0c\u9009\u62e9 centos 7 \u673a\u5668\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \uff0c\u7b49\u5f85\u5176\u72b6\u6001\u4e3a \u79bb\u7ebf \u3002 \u767b\u5f55 centos7 \u624b\u52a8\u5b89\u88c5 fluent-bit 1.9.3\u3002 export RELEASE_URL = ${ FLUENT_BIT_PACKAGES_URL :- https ://packages.fluentbit.io } export RELEASE_KEY = ${ FLUENT_BIT_PACKAGES_KEY :- https ://packages.fluentbit.io/fluentbit.key } sudo rpm --import $RELEASE_KEY cat << EOF | sudo tee /etc/yum.repos.d/fluent-bit.repo [fluent-bit] name = Fluent Bit baseurl = $RELEASE_URL/centos/VERSION_ARCH_SUBSTR gpgcheck=1 repo_gpgcheck=1 gpgkey=$RELEASE_KEY enabled=1 EOF sudo sed -i 's|VERSION_ARCH_SUBSTR|\\$releasever/\\$basearch/|g' /etc/yum.repos.d/fluent-bit.repo sudo yum install -y fluent-bit-1.9.3-1 # \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 sudo sed -i 's/ExecStart.*/ExecStart=\\/opt\\/fluent-bit\\/bin\\/fluent-bit -c \\/opt\\/fluent-bit\\/etc\\/fluent-bit.conf/g' /usr/lib/systemd/system/fluent-bit.service sudo systemctl daemon-reload sudo systemctl enable fluent-bit sudo systemctl start fluent-bit 4. \u56de\u5230\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684 \u5b9e\u4f8b\u7ec4 \u9762\u677f\uff0c\u7b49\u5f85 CentOS 7 \u673a\u5668\u72b6\u6001\u4e3a \u5728\u7ebf \u5e76\u7ee7\u7eed\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002","title":"OpenSSL \u5b89\u88c5"},{"location":"implementation-guide/resources/open-ssl/#openssl-11","text":"\u65e5\u5fd7\u901a\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\uff0c\u9700\u8981 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf (OS) \u5b89\u88c5\u4f9d\u8d56\u9879\u3002 \u5efa\u8bae\u60a8\u81ea\u5df1\u5236\u4f5c\u5b89\u88c5\u4e86 OpenSSL 1.1 \u7684 AMI\u3002 \u91cd\u8981 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5728\u4ee5\u4e0b\u5217\u8868\u4e2d\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u7684\u5b89\u88c5\u6307\u5357\u81ea\u5df1\u5b89\u88c5 OpenSSL\u3002","title":"OpenSSL 1.1 \u5b89\u88c5"},{"location":"implementation-guide/resources/open-ssl/#amazon-linux-2","text":"sudo yum install openssl11","title":"Amazon Linux 2"},{"location":"implementation-guide/resources/open-ssl/#ubuntu","text":"","title":"Ubuntu"},{"location":"implementation-guide/resources/open-ssl/#2204","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 ln -s /snap/core18/current/usr/lib/x86_64-linux-gnu/libssl.so.1.1 /usr/lib/libssl.so.1.1 ln -s /snap/core18/current/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 /usr/lib/libcrypto.so.1.1","title":"22.04"},{"location":"implementation-guide/resources/open-ssl/#2004","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"20.04"},{"location":"implementation-guide/resources/open-ssl/#1804","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"18.04"},{"location":"implementation-guide/resources/open-ssl/#debian","text":"","title":"Debian"},{"location":"implementation-guide/resources/open-ssl/#gnu10","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"GNU/10"},{"location":"implementation-guide/resources/open-ssl/#gnu11","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"GNU/11"},{"location":"implementation-guide/resources/open-ssl/#red-hat-enterprise-linux","text":"","title":"Red Hat Enterprise Linux"},{"location":"implementation-guide/resources/open-ssl/#8x","text":"OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"8.X"},{"location":"implementation-guide/resources/open-ssl/#7x","text":"sudo su - yum install -y https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm systemctl enable amazon-ssm-agent systemctl start amazon-ssm-agent yum install -y wget perl unzip gcc zlib-devel mkdir /tmp/openssl cd /tmp/openssl wget https://www.openssl.org/source/openssl-1.1.1s.tar.gz tar xzvf openssl-1.1.1s.tar.gz cd openssl-1.1.1s ./config --prefix = /usr/local/openssl11 --openssldir = /usr/local/openssl11 shared zlib make make install echo /usr/local/openssl11/lib/ >> /etc/ld.so.conf ldconfig","title":"7.X"},{"location":"implementation-guide/resources/open-ssl/#suse-linux-enterprise-server","text":"","title":"SUSE Linux Enterprise Server"},{"location":"implementation-guide/resources/open-ssl/#15","text":"OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"15"},{"location":"implementation-guide/resources/open-ssl/#centos-7","text":"\u767b\u5f55\u5230 CentOS 7 \u673a\u5668\u4e2d\uff0c\u624b\u52a8\u5b89\u88c5 SSM Agent\u3002 sudo yum install -y https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm sudo systemctl enable amazon-ssm-agent sudo systemctl start amazon-ssm-agent \u6765\u5230\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684 \u5b9e\u4f8b\u7ec4 \u9762\u677f\uff0c\u521b\u5efa \u5b9e\u4f8b\u7ec4 \uff0c\u9009\u62e9 centos 7 \u673a\u5668\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \uff0c\u7b49\u5f85\u5176\u72b6\u6001\u4e3a \u79bb\u7ebf \u3002 \u767b\u5f55 centos7 \u624b\u52a8\u5b89\u88c5 fluent-bit 1.9.3\u3002 export RELEASE_URL = ${ FLUENT_BIT_PACKAGES_URL :- https ://packages.fluentbit.io } export RELEASE_KEY = ${ FLUENT_BIT_PACKAGES_KEY :- https ://packages.fluentbit.io/fluentbit.key } sudo rpm --import $RELEASE_KEY cat << EOF | sudo tee /etc/yum.repos.d/fluent-bit.repo [fluent-bit] name = Fluent Bit baseurl = $RELEASE_URL/centos/VERSION_ARCH_SUBSTR gpgcheck=1 repo_gpgcheck=1 gpgkey=$RELEASE_KEY enabled=1 EOF sudo sed -i 's|VERSION_ARCH_SUBSTR|\\$releasever/\\$basearch/|g' /etc/yum.repos.d/fluent-bit.repo sudo yum install -y fluent-bit-1.9.3-1 # \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 sudo sed -i 's/ExecStart.*/ExecStart=\\/opt\\/fluent-bit\\/bin\\/fluent-bit -c \\/opt\\/fluent-bit\\/etc\\/fluent-bit.conf/g' /usr/lib/systemd/system/fluent-bit.service sudo systemctl daemon-reload sudo systemctl enable fluent-bit sudo systemctl start fluent-bit 4. \u56de\u5230\u65e5\u5fd7\u901a \u63a7\u5236\u53f0\u7684 \u5b9e\u4f8b\u7ec4 \u9762\u677f\uff0c\u7b49\u5f85 CentOS 7 \u673a\u5668\u72b6\u6001\u4e3a \u5728\u7ebf \u5e76\u7ee7\u7eed\u521b\u5efa\u5b9e\u4f8b\u7ec4\u3002","title":"CentOS 7 \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u65b9\u6cd5"},{"location":"implementation-guide/resources/upload-ssl-certificate/","text":"\u4e0a\u4f20 SSL \u8bc1\u4e66\u5230 IAM \u901a\u8fc7\u8fd0\u884c\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\u7684 AWS CLI \u547d\u4ee4 upload-server-certificate \u4e0a\u4f20 SSL \u8bc1\u4e66\uff1a aws iam upload-server-certificate --path /cloudfront/ \\ --server-certificate-name YourCertificate \\ --certificate-body file://Certificate.pem \\ --certificate-chain file://CertificateChain.pem \\ --private-key file://PrivateKey.pem \u5c06\u6587\u4ef6\u540d\u548c\u60a8\u7684\u8bc1\u4e66\u66ff\u6362\u4e3a\u60a8\u4e0a\u4f20\u7684\u6587\u4ef6\u548c\u8bc1\u4e66\u7684\u540d\u79f0\u3002 \u60a8\u5fc5\u987b\u5728 API \u8bf7\u6c42\u7684\u8bc1\u4e66\u6b63\u6587\u3001\u8bc1\u4e66\u94fe\u548c\u79c1\u94a5\u53c2\u6570\u4e2d\u6307\u5b9a file:// \u524d\u7f00\u3002 \u5426\u5219\uff0c\u8bf7\u6c42\u5c06\u5931\u8d25\u5e76\u663e\u793a\u201cMalformedCertificate: Unknown\u201d\u9519\u8bef\u6d88\u606f\u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528 --path \u9009\u9879\u6307\u5b9a\u8def\u5f84\u3002\u8def\u5f84\u5fc5\u987b\u4ee5 /cloudfront \u5f00\u5934\uff0c\u5e76\u4e14\u5fc5\u987b\u5305\u542b\u5c3e\u90e8\u659c\u6760\uff08\u4f8b\u5982\uff0c/cloudfront/test/\uff09\u3002 \u4e0a\u4f20\u8bc1\u4e66\u540e\uff0cAWS CLI \u547d\u4ee4 upload-server-certificate \u4f1a\u8fd4\u56de\u4e0a\u4f20\u8bc1\u4e66\u7684\u5143\u6570\u636e\uff0c\u5305\u62ec\u8bc1\u4e66\u7684 Amazon \u8d44\u6e90\u540d\u79f0 (ARN)\u3001\u53cb\u597d\u540d\u79f0\u3001\u6807\u8bc6\u7b26 (ID) \u548c\u5230\u671f\u65e5\u671f\u3002 \u8981\u67e5\u770b\u4e0a\u4f20\u7684\u8bc1\u4e66\uff0c\u8bf7\u8fd0\u884c AWS CLI \u547d\u4ee4 list-server-certificates \uff1a aws iam list-server-certificates \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4f20\u670d\u52a1\u5668\u8bc1\u4e66 \u3002","title":"\u4e0a\u4f20\u8bc1\u4e66"},{"location":"implementation-guide/resources/upload-ssl-certificate/#ssl-iam","text":"\u901a\u8fc7\u8fd0\u884c\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\u7684 AWS CLI \u547d\u4ee4 upload-server-certificate \u4e0a\u4f20 SSL \u8bc1\u4e66\uff1a aws iam upload-server-certificate --path /cloudfront/ \\ --server-certificate-name YourCertificate \\ --certificate-body file://Certificate.pem \\ --certificate-chain file://CertificateChain.pem \\ --private-key file://PrivateKey.pem \u5c06\u6587\u4ef6\u540d\u548c\u60a8\u7684\u8bc1\u4e66\u66ff\u6362\u4e3a\u60a8\u4e0a\u4f20\u7684\u6587\u4ef6\u548c\u8bc1\u4e66\u7684\u540d\u79f0\u3002 \u60a8\u5fc5\u987b\u5728 API \u8bf7\u6c42\u7684\u8bc1\u4e66\u6b63\u6587\u3001\u8bc1\u4e66\u94fe\u548c\u79c1\u94a5\u53c2\u6570\u4e2d\u6307\u5b9a file:// \u524d\u7f00\u3002 \u5426\u5219\uff0c\u8bf7\u6c42\u5c06\u5931\u8d25\u5e76\u663e\u793a\u201cMalformedCertificate: Unknown\u201d\u9519\u8bef\u6d88\u606f\u3002 \u6ce8\u610f \u60a8\u5fc5\u987b\u4f7f\u7528 --path \u9009\u9879\u6307\u5b9a\u8def\u5f84\u3002\u8def\u5f84\u5fc5\u987b\u4ee5 /cloudfront \u5f00\u5934\uff0c\u5e76\u4e14\u5fc5\u987b\u5305\u542b\u5c3e\u90e8\u659c\u6760\uff08\u4f8b\u5982\uff0c/cloudfront/test/\uff09\u3002 \u4e0a\u4f20\u8bc1\u4e66\u540e\uff0cAWS CLI \u547d\u4ee4 upload-server-certificate \u4f1a\u8fd4\u56de\u4e0a\u4f20\u8bc1\u4e66\u7684\u5143\u6570\u636e\uff0c\u5305\u62ec\u8bc1\u4e66\u7684 Amazon \u8d44\u6e90\u540d\u79f0 (ARN)\u3001\u53cb\u597d\u540d\u79f0\u3001\u6807\u8bc6\u7b26 (ID) \u548c\u5230\u671f\u65e5\u671f\u3002 \u8981\u67e5\u770b\u4e0a\u4f20\u7684\u8bc1\u4e66\uff0c\u8bf7\u8fd0\u884c AWS CLI \u547d\u4ee4 list-server-certificates \uff1a aws iam list-server-certificates \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4f20\u670d\u52a1\u5668\u8bc1\u4e66 \u3002","title":"\u4e0a\u4f20 SSL \u8bc1\u4e66\u5230 IAM"},{"location":"implementation-guide/solution-overview/features/","text":"\u672c\u89e3\u51b3\u65b9\u6848\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a \u4e00\u4f53\u5316\u65e5\u5fd7\u6444\u53d6 \uff1a\u63d0\u4f9b\u7f51\u9875\u63a7\u5236\u53f0\uff0c\u4fbf\u4e8e\u60a8\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch Service \u57df\u4e2d\u3002\u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7\uff0c\u8bf7\u53c2\u9605 AWS \u670d\u52a1\u65e5\u5fd7 \u3002\u6709\u5173\u652f\u6301\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u8bf7\u53c2\u9605 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7 \u3002 \u65e0\u4ee3\u7801\u65e5\u5fd7\u5904\u7406 \uff1a\u652f\u6301 AWS \u5f00\u53d1\u7684\u65e5\u5fd7\u5904\u7406\u5668\u63d2\u4ef6\u3002\u60a8\u53ef\u4ee5\u5728\u7f51\u9875\u63a7\u5236\u53f0\u8f7b\u677e\u5bf9\u539f\u59cb\u7684\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5904\u7406\u3002 \u5f00\u7bb1\u5373\u7528\u7684\u4eea\u8868\u677f\u6a21\u677f \uff1a\u63d0\u4f9b\u4e00\u7cfb\u5217\u7684\u53ef\u89c6\u5316\u6a21\u677f\u7684\u96c6\u5408\uff0c\u65e2\u9002\u7528\u4e8e Nginx \u548c Apache HTTP Server \u7b49\u5e38\u7528\u8f6f\u4ef6\uff0c\u4e5f\u9002\u7528\u4e8e Amazon S3 \u548c AWS CloudTrail \u7b49 AWS \u670d\u52a1\u3002","title":"\u7279\u6027\u548c\u6536\u76ca"},{"location":"implementation-guide/solution-overview/use-cases/","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u9002\u7528\u4e8e\u4ee5\u4e0b\u7528\u4f8b\uff1a \u5b89\u5168\u4e0e\u5408\u89c4\u6cd5\u89c4 \u9075\u5b88MLPS\u3001GDPR\u3001PCI DSS\u548cHIPAA\u7b49\u6cd5\u89c4\u8981\u6c42\u3002\u5c06\u8bbe\u5907\u3001\u7f51\u7edc\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8f7b\u677e\u5b58\u50a8\u5728\u96c6\u4e2d\u4f4d\u7f6e\uff0c\u8fdb\u884c\u65e5\u5fd7\u5ba1\u8ba1\u548c\u5a01\u80c1\u68c0\u6d4b\u3002 \u4e1a\u52a1\u8fd0\u8425\u4e0e\u6570\u636e\u5206\u6790 \u5728\u51e0\u5206\u949f\u5185\u8bc6\u522b\u8d8b\u52bf\u548c\u6a21\u5f0f\uff0c\u6784\u5efa\u4ea4\u4e92\u5f0f\u548c\u76f4\u89c2\u7684\u53ef\u89c6\u5316\u3002\u4ece\u65e5\u5fd7\u4e2d\u83b7\u5f97\u4e1a\u52a1\u89c1\u89e3\uff0c\u7528\u6570\u636e\u8d4b\u80fd\u4e1a\u52a1\u51b3\u7b56\u3002 \u5e94\u7528\u7a0b\u5e8f\u548c\u57fa\u7840\u67b6\u6784\u6545\u969c\u6392\u9664 \u8f7b\u677e\u76d1\u63a7\u5e94\u7528\u7a0b\u5e8f\u548c\u4e91\u57fa\u7840\u67b6\u6784\u65e5\u5fd7\uff0c\u8fc5\u901f\u7406\u89e3\u548c\u89e3\u51b3\u95ee\u9898\u7684\u6839\u672c\u539f\u56e0\u3002\u63d0\u5347\u5de5\u4f5c\u8d1f\u8f7d\u7684\u53ef\u89c2\u6d4b\u6027\uff0c\u5b9e\u73b0\u66f4\u597d\u7684\u4e1a\u52a1\u7a33\u5b9a\u6027\u3002","title":"\u5e94\u7528\u573a\u666f"}]}