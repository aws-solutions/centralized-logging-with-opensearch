{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Log Hub \u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u5168\u9762\u7684\u65e5\u5fd7\u7ba1\u7406\u548c\u5206\u6790\u529f\u80fd\uff0c\u5e2e\u52a9\u60a8\u7b80\u5316\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u6784\u5efa\u3002\u672c\u89e3\u51b3\u65b9\u6848\u57fa\u4e8eAmazon OpenSearch Service \u6784\u5efa\uff0c\u53ef\u8ba9\u60a8\u6709\u6548\u5730\u5b8c\u6210\u65e5\u5fd7\u6444\u53d6\u3001\u65e5\u5fd7\u5904\u7406\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002\u672c\u89e3\u51b3\u65b9\u6848\u53ef\u5e94\u7528\u4e8e\u591a\u7c7b\u573a\u666f\uff0c\u4f8b\u5982\u6ee1\u8db3\u5b89\u5168\u548c\u5408\u89c4\u6027\u6cd5\u89c4\uff0c\u5b9e\u73b0\u7cbe\u7ec6\u5316\u7684\u4e1a\u52a1\u8fd0\u8425\uff0c\u6216\u8005\u589e\u5f3aIT\u6545\u969c\u6392\u9664\u548c\u7ef4\u62a4\u3002 \u672c\u89e3\u51b3\u65b9\u6848\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a \u4e00\u4f53\u5316\u65e5\u5fd7\u6444\u53d6 \uff1a\u63d0\u4f9b\u7f51\u9875\u63a7\u5236\u53f0\uff0c\u4fbf\u4e8e\u60a8\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u5230 Amazon OpenSearch (AOS) \u57df\u4e2d\u3002\u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7\uff0c\u8bf7\u53c2\u9605 AWS \u670d\u52a1\u65e5\u5fd7 \u3002\u6709\u5173\u652f\u6301\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u8bf7\u53c2\u9605 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7 \u3002 \u65e0\u4ee3\u7801\u65e5\u5fd7\u5904\u7406 \uff1a\u652f\u6301AWS\u5f00\u53d1\u7684\u65e5\u5fd7\u5904\u7406\u5668\u63d2\u4ef6\u3002\u60a8\u53ef\u4ee5\u5728\u7f51\u9875\u63a7\u5236\u53f0\u8f7b\u677e\u5bf9\u539f\u59cb\u7684\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5904\u7406\u3002 \u5f00\u7bb1\u5373\u7528\u7684\u4eea\u8868\u677f\u6a21\u677f \uff1a\u63d0\u4f9b\u4e00\u7cfb\u5217\u7684\u53ef\u89c6\u5316\u6a21\u677f\u7684\u96c6\u5408\uff0c\u65e2\u9002\u7528\u4e8e Nginx \u548c Apache HTTP Server \u7b49\u5e38\u7528\u8f6f\u4ef6\uff0c\u4e5f\u9002\u7528\u4e8e Amazon S3 \u548c Amazon CloudTrail \u7b49 AWS \u670d\u52a1\u3002 \u672c\u6307\u5357\u4e2d\u7684 \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\u5f15\u5bfc\u60a8\u5b8c\u6210\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u8fc7\u7a0b\uff0c AOS \u96c6\u7fa4\u7ba1\u7406 \u7ae0\u8282\u4ecb\u7ecd\u5982\u4f55\u5728 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u672c\u5b9e\u65bd\u6307\u5357\u63cf\u8ff0\u4e86\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u67b6\u6784\u6ce8\u610f\u4e8b\u9879\u548c\u914d\u7f6e\u6b65\u9aa4\u3002\u5b83\u5305\u62ec CloudFormation \u6a21\u677f\u7684\u94fe\u63a5\uff0c\u8fd9\u4e9b\u6a21\u677f\u4f7f\u7528 AWS \u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u6700\u4f73\u5b9e\u8df5\u6765\u542f\u52a8\u548c\u914d\u7f6e\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u6240\u9700\u7684 AWS \u670d\u52a1\u3002 \u672c\u6307\u5357\u9002\u7528\u4e8e\u5728 AWS \u4e91\u4e2d\u5177\u6709\u67b6\u6784\u5b9e\u8df5\u7ecf\u9a8c\u7684 IT \u67b6\u6784\u5e08\u3001\u5f00\u53d1\u4eba\u5458\u3001DevOps \u548c\u6570\u636e\u5de5\u7a0b\u5e08\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/architecture/","text":"\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u5728 AWS \u4e91\u4e2d\u6784\u5efa\u4ee5\u4e0b\u73af\u5883\u3002 \u56fe1: \u89e3\u51b3\u65b9\u6848\u67b6\u6784\u56fe \u6b64\u89e3\u51b3\u65b9\u6848\u5728\u60a8\u7684 AWS \u4e91\u8d26\u6237\u4e2d\u90e8\u7f72 AWS CloudFormation \u6a21\u677f\u5e76\u5b8c\u6210\u4ee5\u4e0b\u8bbe\u7f6e\u3002 Amazon CloudFront \u5206\u53d1\u6258\u7ba1\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e2d\u7684\u524d\u7aef Web UI \u8d44\u6e90\u3002 Amazon Cognito \u7528\u6237\u6c60 \u6216 OpenID \u8fde\u63a5\u5668 (OIDC) \u53ef\u63d0\u4f9b\u8eab\u4efd\u8ba4\u8bc1\u3002 AWS AppSync \u63d0\u4f9b\u540e\u7aef GraphQL API\u3002 Amazon DynamoDB \u5c06\u89e3\u51b3\u65b9\u6848\u76f8\u5173\u4fe1\u606f\u5b58\u50a8\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u3002 AWS Lambda \u4e0e\u5176\u5b83 AWS \u670d\u52a1\u4ea4\u4e92\uff0c\u5904\u7406\u7ba1\u7406\u65e5\u5fd7\u7ba1\u9053\u6216\u65e5\u5fd7\u4ee3\u7406\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u5e76\u83b7\u53d6 DynamoDB \u8868\u4e2d\u66f4\u65b0\u7684\u4fe1\u606f\u3002 AWS Step Functions \u6309\u9700\u534f\u8c03\u4e00\u7ec4\u9884\u5b9a\u4e49\u5806\u6808\u7684 AWS CloudFormation \u90e8\u7f72\u7528\u4e8e\u65e5\u5fd7\u7ba1\u9053\u7ba1\u7406\u3002\u65e5\u5fd7\u7ba1\u9053\u5806\u6808\u90e8\u7f72\u5355\u72ec\u7684 AWS \u8d44\u6e90\uff0c\u7528\u4e8e\u6536\u96c6\u548c\u5904\u7406\u65e5\u5fd7\uff0c\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch Service \u4e2d\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u548c\u53ef\u89c6\u5316\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u6216 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u901a\u8fc7 Log Hub \u63a7\u5236\u53f0\u6309\u9700\u521b\u5efa\u3002 AWS Systems Manager \u548c Amazon EventBridge \u7528\u4e8e\u7ba1\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u7684\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f8b\u5982\u4e3a\u5e94\u7528\u670d\u52a1\u5668\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff08Fluent Bit\uff09\u548c\u76d1\u63a7\u4ee3\u7406\u7684\u5065\u5eb7\u72b6\u6001\u3002 Amazon EC2 \u6216 Amazon EKS \u5b89\u88c5 Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u4e0a\u4f20\u5230\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch \u4e2d\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u8bfb\u53d6\u3001\u89e3\u6790\u3001\u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u6444\u53d6\u5230 Amazon OpenSearch \u4e2d\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u652f\u6301\u4e24\u79cd\u7c7b\u578b\u7684\u65e5\u5fd7\u7ba1\u9053\uff1a AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002 AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301 AWS \u670d\u52a1\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7\u3002 \u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730\uff0c\u5305\u62ec Amazon S3 \u5b58\u50a8\u6876\u3001CloudWatch \u65e5\u5fd7\u7ec4\u3001Kinesis Data Streams \u548c Kinesis Firehose\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\u7a0b\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\u3002 \u6ce8\u610f\u4e8b\u9879 Log Hub \u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684 Log Hub \u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002 Amazon S3 \u4e2d\u7684\u65e5\u5fd7 \u6709\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon S3\u3002Amazon S3 \u4e2d\u7684\u65e5\u5fd7\u4e00\u822c\u4e0d\u7528\u4e8e\u5b9e\u65f6\u5206\u6790\u3002 \u56fe2: \u5206\u6790\u5b58\u50a8\u4e8e S3 \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\uff08\u65e5\u5fd7\u6876\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\u4f1a\u901a\u8fc7 S3 \u4e8b\u4ef6\u901a\u77e5 \u5411 Amazon SQS \u53d1\u9001\u901a\u77e5\u3002 Amazon SQS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6, \u5982\u4e0b\u56fe\u6240\u793a\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 s3 \u6876\u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728 Log Hub \u7684\u8d26\u6237\u4e2d\u3002 CloudWatch Logs \u4e2d\u7684\u65e5\u5fd7 \u67d0\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u3002 \u56fe 3\uff1a\u7528\u4e8e\u5206\u6790 CloudWatch Logs \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u4e2d\u3002 CloudWatch \u65e5\u5fd7\u901a\u8fc7\u8ba2\u9605\u6d41\u5f0f\u4f20\u8f93\u5230 Amazon Kinesis Data Stream (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6, \u5982\u4e0b\u56fe\u6240\u793a\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 CloudWatch \u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728 Log Hub \u7684\u8d26\u6237\u4e2d\u3002 \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u6216\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u6ce8\u610f\u4e8b\u9879 Log Hub \u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684 Log Hub \u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002 EC2 \u4e2d\u7684\u65e5\u5fd7 \u56fe 4\uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Kinesis Data Streams (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08Backup Bucket\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6, \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u65e5\u5fd7\u4ee3\u7406\u5c06\u5b89\u88c5\u5728\u5f53\u524d\u8d26\u6237\u7684\u5e94\u7528\u670d\u52a1\u5668\u4e0a\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728 Log Hub \u7684\u8d26\u6237\u4e2d\u3002 EKS \u4e2d\u7684\u65e5\u5fd7 \u91cd\u8981 \u5982\u679c\u60a8\u7684 EKS \u96c6\u7fa4\u548c OpenSearch \u96c6\u7fa4\u4e0d\u5728\u540c\u4e00\u4e2a VPC \u4e2d\uff0c\u60a8\u9700\u8981\u4f7f\u7528 VPC Peering Connection \u6216 Transit Gateway \u8fde\u63a5\u8fd9\u4e9b VPC\uff0c\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574 OpenSearch \u5b89\u5168\u7ec4\u3002 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230 OpenSearch\u3002","title":"\u67b6\u6784\u6982\u8ff0"},{"location":"implementation-guide/architecture/#aws","text":"Log Hub \u652f\u6301 AWS \u670d\u52a1\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7\u3002 \u6709\u5173\u652f\u6301\u7684 AWS \u670d\u52a1\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 \u652f\u6301\u7684 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u76ee\u7684\u5730\uff0c\u5305\u62ec Amazon S3 \u5b58\u50a8\u6876\u3001CloudWatch \u65e5\u5fd7\u7ec4\u3001Kinesis Data Streams \u548c Kinesis Firehose\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\u7a0b\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\u3002 \u6ce8\u610f\u4e8b\u9879 Log Hub \u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684 Log Hub \u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002","title":"AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture/#amazon-s3","text":"\u6709\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon S3\u3002Amazon S3 \u4e2d\u7684\u65e5\u5fd7\u4e00\u822c\u4e0d\u7528\u4e8e\u5b9e\u65f6\u5206\u6790\u3002 \u56fe2: \u5206\u6790\u5b58\u50a8\u4e8e S3 \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\uff08\u65e5\u5fd7\u6876\uff09\u4e2d\u3002 \u521b\u5efa\u65b0\u65e5\u5fd7\u6587\u4ef6\u65f6\u4f1a\u901a\u8fc7 S3 \u4e8b\u4ef6\u901a\u77e5 \u5411 Amazon SQS \u53d1\u9001\u901a\u77e5\u3002 Amazon SQS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u6587\u4ef6\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6, \u5982\u4e0b\u56fe\u6240\u793a\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 s3 \u6876\u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728 Log Hub \u7684\u8d26\u6237\u4e2d\u3002","title":"Amazon S3 \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#cloudwatch-logs","text":"\u67d0\u4e9b\u670d\u52a1\u8f93\u51fa\u65e5\u5fd7\u5230 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u3002 \u56fe 3\uff1a\u7528\u4e8e\u5206\u6790 CloudWatch Logs \u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a AWS \u670d\u52a1\u5c06\u65e5\u5fd7\u5b58\u50a8\u5728 Amazon CloudWatch \u65e5\u5fd7\u7ec4\u4e2d\u3002 CloudWatch \u65e5\u5fd7\u901a\u8fc7\u8ba2\u9605\u6d41\u5f0f\u4f20\u8f93\u5230 Amazon Kinesis Data Stream (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08\u5907\u4efd\u6876\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6, \u5982\u4e0b\u56fe\u6240\u793a\uff0cAWS \u670d\u52a1\u65e5\u5fd7\u5c06\u4ea7\u751f\u5e76\u4e14\u5b58\u653e\u5728\u5f53\u524d\u8d26\u6237\u7684 CloudWatch \u4e2d\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728 Log Hub \u7684\u8d26\u6237\u4e2d\u3002","title":"CloudWatch Logs \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#_1","text":"Log Hub \u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u6216\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u6ce8\u610f\u4e8b\u9879 Log Hub \u652f\u6301 \u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u3002 \u5982\u679c\u60a8\u60f3\u4ece\u540c\u4e00\u5e10\u6237\u6444\u53d6\u65e5\u5fd7\uff0c Sources \u7ec4\u4e2d\u7684\u8d44\u6e90\u9700\u8981\u4e0e\u60a8\u7684 Log Hub \u5e10\u6237\u4f4d\u4e8e\u540c\u4e00\u5e10\u6237\u4e2d\u3002 \u5426\u5219\uff0c\u5b83\u4eec\u5c06\u4f4d\u4e8e\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u4e2d\u3002","title":"\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/architecture/#ec2","text":"\u56fe 4\uff1a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u67b6\u6784 \u65e5\u5fd7\u7ba1\u9053\u8fd0\u884c\u4ee5\u4e0b\u5de5\u4f5c\u6d41\uff1a Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Kinesis Data Streams (KDS)\u3002 KDS \u89e6\u53d1 Lambda\uff08\u65e5\u5fd7\u5904\u7406\u5668\uff09\u8fd0\u884c\u3002 \u65e5\u5fd7\u5904\u7406\u5668\u8bfb\u53d6\u5e76\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u5e76\u5c06\u65e5\u5fd7\u6444\u53d6\u5230AOS\u4e2d\u3002 \u5904\u7406\u5931\u8d25\u7684\u65e5\u5fd7\u5bfc\u51fa\u5230 Amazon S3 \u5b58\u50a8\u6876\uff08Backup Bucket\uff09\u3002 \u5bf9\u4e8e\u8de8\u8d26\u6237\u7684\u65e5\u5fd7\u6444\u53d6, \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u65e5\u5fd7\u4ee3\u7406\u5c06\u5b89\u88c5\u5728\u5f53\u524d\u8d26\u6237\u7684\u5e94\u7528\u670d\u52a1\u5668\u4e0a\uff0c\u5176\u4f59\u8d44\u6e90\u4ecd\u7136\u5728 Log Hub \u7684\u8d26\u6237\u4e2d\u3002","title":"EC2 \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/architecture/#eks","text":"\u91cd\u8981 \u5982\u679c\u60a8\u7684 EKS \u96c6\u7fa4\u548c OpenSearch \u96c6\u7fa4\u4e0d\u5728\u540c\u4e00\u4e2a VPC \u4e2d\uff0c\u60a8\u9700\u8981\u4f7f\u7528 VPC Peering Connection \u6216 Transit Gateway \u8fde\u63a5\u8fd9\u4e9b VPC\uff0c\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574 OpenSearch \u5b89\u5168\u7ec4\u3002 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\uff0c\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\u5e76\u53d1\u9001\u5230 OpenSearch\u3002","title":"EKS \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/considerations/","text":"\u8003\u8651\u56e0\u7d20 \u53ef\u90e8\u7f72\u533a\u57df \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u670d\u52a1\u76ee\u524d\u53ef\u80fd\u5e76\u975e\u5728\u6240\u6709 AWS \u533a\u57df\u90fd\u53ef\u7528\u3002\u8bf7\u5728\u63d0\u4f9b\u6240\u9700\u670d\u52a1\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u6309\u533a\u57df\u5212\u5206\u7684\u6700\u65b0\u53ef\u7528\u6027\uff0c\u8bf7\u53c2\u9605 AWS \u533a\u57df\u670d\u52a1\u5217\u8868 \u3002 Log Hub \u63d0\u4f9b\u4e24\u79cd\u7c7b\u578b\u7684\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f7f\u7528 Cognito \u7528\u6237\u6c60 \u6216 \u4f7f\u7528 OpenID Connect (OIDC ) \u63d0\u4f9b\u8005 \u3002 \u9488\u5bf9\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u60a8\u9700\u8981\u9009\u62e9\u4f7f\u7528 OpenID Connect \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff1a \u60a8\u7684 AWS \u533a\u57df\u6ca1\u6709 Cognito \u7528\u6237\u6c60\u3002 \u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a OpenID Connect \u8ba4\u8bc1\u4e2d\u5fc3\u3002 \u652f\u6301\u90e8\u7f72\u7684\u533a\u57df \u533a\u57df\u540d\u79f0 \u4f7f\u7528 Cognito User Pool \u4f7f\u7528 OpenID Connect \u7f8e\u56fd\u4e1c\u90e8 (\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u4e1c\u90e8 (\u4fc4\u4ea5\u4fc4) \u7f8e\u56fd\u897f\u90e8 (\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u897f\u90e8 (\u4fc4\u52d2\u5188) \u975e\u6d32 (\u5f00\u666e\u6566) \u4e9a\u592a\u5730\u533a (\u9999\u6e2f) \u4e9a\u592a\u5730\u533a (\u96c5\u52a0\u8fbe) \u4e9a\u592a\u5730\u533a (\u5b5f\u4e70) \u4e9a\u592a\u5730\u533a (\u5927\u962a) \u4e9a\u592a\u5730\u533a (\u9996\u5c14) \u4e9a\u592a\u5730\u533a (\u65b0\u52a0\u5761) \u4e9a\u592a\u5730\u533a (\u6089\u5c3c) \u4e9a\u592a\u5730\u533a (\u4e1c\u4eac) \u52a0\u62ff\u5927 (\u4e2d\u90e8) \u6b27\u6d32 (\u6cd5\u5170\u514b\u798f) \u6b27\u6d32 (\u7231\u5c14\u5170) \u6b27\u6d32 (\u4f26\u6566) \u6b27\u6d32 (\u7c73\u5170) \u6b27\u6d32 (\u5df4\u9ece) \u6b27\u6d32 (\u65af\u5fb7\u54e5\u5c14\u6469) \u4e2d\u4e1c (\u5df4\u6797) \u5357\u7f8e\u6d32 (\u5723\u4fdd\u7f57) \u4e2d\u56fd (\u5317\u4eac) \u4e2d\u56fd (\u5b81\u590f) \u9650\u5236 \u4e00\u4e2a\u533a\u57df\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u6d3b\u52a8\u7684 Log Hub \u89e3\u51b3\u65b9\u6848\u5806\u6808\u3002 \u5982\u679c\u60a8\u7684\u90e8\u7f72\u5931\u8d25\uff0c\u8bf7\u786e\u4fdd\u5728\u91cd\u8bd5\u90e8\u7f72\u4e4b\u524d\u5df2\u5220\u9664\u5931\u8d25\u7684\u5806\u6808\u3002","title":"\u8003\u8651\u56e0\u7d20"},{"location":"implementation-guide/considerations/#_1","text":"","title":"\u8003\u8651\u56e0\u7d20"},{"location":"implementation-guide/considerations/#_2","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u670d\u52a1\u76ee\u524d\u53ef\u80fd\u5e76\u975e\u5728\u6240\u6709 AWS \u533a\u57df\u90fd\u53ef\u7528\u3002\u8bf7\u5728\u63d0\u4f9b\u6240\u9700\u670d\u52a1\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u6b64\u89e3\u51b3\u65b9\u6848\u3002\u6709\u5173\u6309\u533a\u57df\u5212\u5206\u7684\u6700\u65b0\u53ef\u7528\u6027\uff0c\u8bf7\u53c2\u9605 AWS \u533a\u57df\u670d\u52a1\u5217\u8868 \u3002 Log Hub \u63d0\u4f9b\u4e24\u79cd\u7c7b\u578b\u7684\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4f7f\u7528 Cognito \u7528\u6237\u6c60 \u6216 \u4f7f\u7528 OpenID Connect (OIDC ) \u63d0\u4f9b\u8005 \u3002 \u9488\u5bf9\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u60a8\u9700\u8981\u9009\u62e9\u4f7f\u7528 OpenID Connect \u542f\u52a8\u89e3\u51b3\u65b9\u6848\uff1a \u60a8\u7684 AWS \u533a\u57df\u6ca1\u6709 Cognito \u7528\u6237\u6c60\u3002 \u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a OpenID Connect \u8ba4\u8bc1\u4e2d\u5fc3\u3002 \u652f\u6301\u90e8\u7f72\u7684\u533a\u57df \u533a\u57df\u540d\u79f0 \u4f7f\u7528 Cognito User Pool \u4f7f\u7528 OpenID Connect \u7f8e\u56fd\u4e1c\u90e8 (\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u4e1c\u90e8 (\u4fc4\u4ea5\u4fc4) \u7f8e\u56fd\u897f\u90e8 (\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8) \u7f8e\u56fd\u897f\u90e8 (\u4fc4\u52d2\u5188) \u975e\u6d32 (\u5f00\u666e\u6566) \u4e9a\u592a\u5730\u533a (\u9999\u6e2f) \u4e9a\u592a\u5730\u533a (\u96c5\u52a0\u8fbe) \u4e9a\u592a\u5730\u533a (\u5b5f\u4e70) \u4e9a\u592a\u5730\u533a (\u5927\u962a) \u4e9a\u592a\u5730\u533a (\u9996\u5c14) \u4e9a\u592a\u5730\u533a (\u65b0\u52a0\u5761) \u4e9a\u592a\u5730\u533a (\u6089\u5c3c) \u4e9a\u592a\u5730\u533a (\u4e1c\u4eac) \u52a0\u62ff\u5927 (\u4e2d\u90e8) \u6b27\u6d32 (\u6cd5\u5170\u514b\u798f) \u6b27\u6d32 (\u7231\u5c14\u5170) \u6b27\u6d32 (\u4f26\u6566) \u6b27\u6d32 (\u7c73\u5170) \u6b27\u6d32 (\u5df4\u9ece) \u6b27\u6d32 (\u65af\u5fb7\u54e5\u5c14\u6469) \u4e2d\u4e1c (\u5df4\u6797) \u5357\u7f8e\u6d32 (\u5723\u4fdd\u7f57) \u4e2d\u56fd (\u5317\u4eac) \u4e2d\u56fd (\u5b81\u590f)","title":"\u53ef\u90e8\u7f72\u533a\u57df"},{"location":"implementation-guide/considerations/#_3","text":"\u4e00\u4e2a\u533a\u57df\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u6d3b\u52a8\u7684 Log Hub \u89e3\u51b3\u65b9\u6848\u5806\u6808\u3002 \u5982\u679c\u60a8\u7684\u90e8\u7f72\u5931\u8d25\uff0c\u8bf7\u786e\u4fdd\u5728\u91cd\u8bd5\u90e8\u7f72\u4e4b\u524d\u5df2\u5220\u9664\u5931\u8d25\u7684\u5806\u6808\u3002","title":"\u9650\u5236"},{"location":"implementation-guide/cost/","text":"\u8d39\u7528\u9884\u4f30 \u91cd\u8981 \u672c\u8282\u4e2d\u63cf\u8ff0\u7684\u6210\u672c\u4f30\u7b97\u53ea\u662f\u793a\u4f8b\uff0c\u5b83\u4eec\u662f\u6839\u636e\u5047\u8bbe\u8ba1\u7b97\u7684\uff0c\u53ef\u80fd\u4f1a\u56e0\u60a8\u7684\u73af\u5883\u800c\u5f02\u3002 \u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u4e2a\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002 \u622a\u81f32022\u5e7410\u6708\uff0c\u5f71\u54cd\u89e3\u51b3\u65b9\u6848\u6210\u672c\u7684\u4e3b\u8981\u56e0\u7d20\u5305\u62ec\uff1a \u8981\u6444\u53d6\u7684\u65e5\u5fd7\u7c7b\u578b \u8981\u6444\u53d6/\u5904\u7406\u7684\u65e5\u5fd7\u91cf \u65e5\u5fd7\u6d88\u606f\u7684\u5927\u5c0f \u65e5\u5fd7\u7684\u4f4d\u7f6e \u989d\u5916\u7684\u7279\u6027 \u4ee5\u4e0b\u793a\u4f8b\u5c06\u6f14\u793a 10/100/1000 GB \u6bcf\u65e5\u65e5\u5fd7\u6444\u53d6\u7684\u6210\u672c\u4f30\u7b97\u3002 \u603b\u6210\u672c\u7531 Amazon OpenSearch \u8d39\u7528 \u3001 \u5904\u7406\u8d39\u7528 \u548c \u989d\u5916\u7279\u6027\u8d39\u7528 \u3002 \u4fe1\u606f \u6240\u6709\u6210\u672c\u4f30\u7b97\u5747\u57fa\u4e8e\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5317\u4f5b\u5409\u5c3c\u4e9a\u533a\u57df (us-east-1) \u4e2d\u7684 AWS \u670d\u52a1\u4ef7\u683c\u3002 Amazon OpenSearch \u8d39\u7528 OD : \u6309\u9700\u5b9e\u4f8b\u4ef7\u683c\u6a21\u578b AURI_1 : \u5168\u989d\u9884\u4ed81\u5e74\u9884\u7559\u5b9e\u4f8b \u5206\u5c42 \uff1a\u5b58\u50a8\u5728\u5c42\u4e2d\u7684\u5929\u6570\u3002 \u4f8b\u5982\uff0c7H + 23W + 60C \u8868\u793a\u65e5\u5fd7\u5728\u70ed\u5c42\u5b58\u50a8 7 \u5929\uff0c\u6e29\u5c42\u5b58\u50a8 23 \u5929\uff0c\u51b7\u5c42\u5b58\u50a8 60 \u5929\u3002 \u526f\u672c : \u5206\u7247\u526f\u672c\u7684\u6570\u91cf\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf (GB) \u5b58\u50a8 (\u5929) \u5206\u5c42 \u526f\u672c OD \u6bcf\u6708 ($) AURI_1 \u6bcf\u6708 ($) \u4e13\u7528\u4e3b\u8282\u70b9 \u6570\u636e\u8282\u70b9 EBS (GB) UltraWarm \u8282\u70b9 UltraWarm/Cold S3 \u5b58\u50a8 (GB) OD \u6bcfGB\u8d39\u7528 ($) AURI_1 \u6bcfGB\u8d39\u7528 ($) 10 30 30H 0 216.28 158.54 N/A c6g.large[2] 380 N/A 0 0.72093 0.52847 10 30 30H 1 289.35 223.94 N/A m6g.large[2] 760 N/A 0 0.9645 0.74647 100 30 7H + 23W 0 989.49 825.97 m6g.large[3] m6g.large[2] 886 medium[2] 0 0.32983 0.27532 100 30 7H + 23W 1 1295.85 1066.92 m6g.large[3] m6g.large[4] 1772 medium[2] 0 0.43195 0.35564 100 90 7H + 23W + 60C 0 1133.49 969.97 m6g.large[3] m6g.large[2] 886 medium[2] 8300 0.12594 0.10777 100 90 7H + 23W + 60C 1 1439.85 1210.92 m6g.large[3] m6g.large[4] 1772 medium[2] 8300 0.15998 0.13455 100 180 7H + 23W + 150C 0 1349.49 1185.97 m6g.large[3] m6g.large[2] 886 medium[2] 17300 0.07497 0.06589 100 180 7H + 23W + 150C 1 1655.85 1426.92 m6g.large[3] m6g.large[4] 1772 medium[2] 17300 0.09199 0.07927 1000 30 7H + 23W 0 6101.15 5489.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 23000 0.20337 0.18298 1000 30 7H + 23W 1 8759.49 7635.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 23000 0.29198 0.25453 1000 90 7H + 23W + 60C 0 8027.33 7245.45 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 83000 0.08919 0.0805 1000 90 7H + 23W + 60C 1 10199.49 9075.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 83000 0.11333 0.10084 1000 180 7H + 23W + 150C 0 9701.15 9089.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 173000 0.0539 0.0505 1000 180 7H + 23W + 150C 1 12644.19 11420.86 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 173000 0.07025 0.06345 \u5904\u7406\u8d39\u7528 AWS \u670d\u52a1\u65e5\u5fd7 \u6444\u53d6\u548c\u5904\u7406\u670d\u52a1\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002 Amazon S3 \u4e2d\u7684\u65e5\u5fd7 \u4fe1\u606f \u4ece S3 \u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u4f1a\u4ea7\u751f\u975e\u5e38\u4f4e\u7684 SQS \u548c S3 \u8bf7\u6c42\u8d39\u7528\uff0c\u901a\u5e38\u5728 AWS \u514d\u8d39\u5957\u9910\u5185\u3002 \u4ee5\u4e0b\u662f\u5047\u8bbe\uff1a AWS \u670d\u52a1\u6bcf 5 \u5206\u949f\u4ee5 gzip \u683c\u5f0f\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230 Amazon S3\uff08\u5927\u591a\u6570 AWS \u670d\u52a1\u4ee5 gzip \u683c\u5f0f\u8f93\u51fa\u65e5\u5fd7\uff09\u3002 S3 \u4e2d 4MB \u7684\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u7684\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f\u7ea6\u4e3a 100MB\u3002 \u4e00\u4e2a 1GB \u5185\u5b58\u7684 Lambda \u5904\u7406\u4e00\u4e2a 4MB \u7684\u65e5\u5fd7\u6587\u4ef6\u5927\u7ea6\u9700\u8981 26 \u79d2\uff0c\u5373\u6bcf MB \u539f\u59cb\u65e5\u5fd7\u9700\u8981 260 \u6beb\u79d2 \u6700\u5927\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a 5MB\u3002 \u60a8\u6bcf\u5929\u6709 N GB \u539f\u59cb\u65e5\u5fd7\uff0c\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Lambda \u6210\u672c = \u6bcf MB 260 \u6beb\u79d2 x 1024 MB x N GB/\u5929 x \u6bcf\u6beb\u79d2 0.0000000167 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x N GB/\u5929 * 4%\uff08\u538b\u7f29\uff09 \u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u4e3a\uff1a \u6bcf\u6708\u603b\u6210\u672c =\uff08Lambda \u6210\u672c + S3 \u5b58\u50a8\u6210\u672c\uff09x 30 \u5929 \u6bcf\u6b21\u65e5\u5fd7\u91cf \u6bcf\u65e5 Lambda \u8d39\u7528 ($) \u6bcf\u6b21 S3 \u5b58\u50a8\u8d39\u7528 ($) \u6bcf\u6708\u8d39\u7528 ($) 10 0.044 0.009 1.610 100 0.445 0.092 16.099 1000 4.446 0.920 160.986 \u5e94\u7528\u65e5\u5fd7 \u6444\u53d6\u548c\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002 \u4ece Amazon EC2 \u6536\u96c6\u65e5\u5fd7 \u91cd\u8981 \u5982\u679c\u60a8\u6709\u591a\u79cd\u65e5\u5fd7\u683c\u5f0f\uff08\u7d22\u5f15\uff09\uff0c\u5219\u9700\u8981\u5bf9\u6bcf\u79cd\u683c\u5f0f\u8fdb\u884c\u6210\u672c\u4f30\u7b97\u3002 \u6210\u672c\u4f30\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u5047\u8bbe\u548c\u4e8b\u5b9e\uff1a \u5e73\u5747\u65e5\u5fd7\u6d88\u606f\u5927\u5c0f\u4e3a 1 KB\u3002 Lambda \u5185\u5b58\u4e3a 1024 MB\u3002 \u6bcf\u4e2a Lambda \u8c03\u7528\u5904\u7406 1 MB \u65e5\u5fd7\u3002 \u4e00\u6b21 Lambda \u8c03\u7528\u5904\u7406\u4e00\u4e2a Kinesis \u5206\u7247\uff0cLambda \u53ef\u4ee5\u6269\u5c55\u6765\u5e76\u53d1\u4ee5\u5904\u7406\u591a\u4e2a\u5206\u7247\u3002 \u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u7684 Lambda \u8fd0\u884c\u65f6\u4e3a 500 \u6beb\u79d2\u3002 \u4e00\u4e2a Kinesis \u5206\u7247\u6444\u5165\u65e5\u5fd7\u5927\u5c0f\u4e3a = 1 MB/\u79d2 x 3600 \u79d2/\u5c0f\u65f6 x 24 \u5c0f\u65f6 x 0.7 = 60.48 GB/\u5929\u3002 \u63d0\u4f9b 30% \u4ee5\u4e0a\u7684\u989d\u5916\u5206\u7247\u6765\u5904\u7406\u6d41\u91cf\u6296\u52a8\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf\u4e3a X GB\u3002 \u6240\u9700\u7684 Kinesis \u5206\u7247\u6570 S \u4e3a = Round_up_to_next_integer\uff08\u6bcf\u65e5\u65e5\u5fd7\u91cf X / 60.48\uff09\u3002 \u57fa\u4e8e\u4ee5\u4e0a\u5047\u8bbe\uff0c\u4ee5\u4e0b\u662f\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u516c\u5f0f\uff1a Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 \u7f8e\u5143/\u5206\u7247\u5c0f\u65f6 x \u6bcf\u5929 24 \u5c0f\u65f6 x S \u5206\u7247 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 \u7f8e\u5143 * \u6bcf GB 1 \u767e\u4e07 x X GB \u6bcf\u5929 Lambda \u6210\u672c = \u6bcf 1 \u6beb\u79d2 0.0000000167 \u7f8e\u5143 x \u6bcf\u6b21\u8c03\u7528 500 \u6beb\u79d2 x \u6bcf GB 1,000 \u6b21\u8c03\u7528 x X GB \u6bcf\u5929 \u6bcf\u6708\u603b\u6210\u672c =\uff08Kinesis Shard \u5c0f\u65f6\u6210\u672c + Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + Lambda \u6210\u672c\uff09x 30 \u5929 \u6bcf\u6b21\u65e5\u5fd7\u91cf (GB) \u5206\u7247\u6570 \u6bcf\u65e5 Kinesis \u5206\u7247\u5c0f\u65f6\u8d39 \u6bcf\u65e5 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u8d39\u7528 \u6bcf\u6b21 Lambda \u8d39\u7528 \u6bcf\u6708\u603b\u8d39\u7528 ($) 10 1 0.36 0.14 0.0835 17.505 100 2 0.72 1.4 0.835 88.65 1000 17 6.12 14 8.35 854.1 \u4ece Amazon EKS \u63d0\u53d6\u65e5\u5fd7 \u76ee\u524d\uff0cEKS \u548c Amazon OpenSearch \u4e4b\u95f4\u6ca1\u6709\u7f13\u51b2\u5c42\uff0c\u4e5f\u6ca1\u6709\u989d\u5916\u7684\u8d39\u7528\u3002 \u989d\u5916\u7279\u6027\u8d39\u7528 \u4fe1\u606f \u5982\u679c\u60a8\u9009\u62e9\u4e0d\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u4e2d\u7684\u9644\u52a0\u529f\u80fd\uff0c\u5219\u4e0d\u4f1a\u5411\u60a8\u6536\u8d39\u3002 \u8bbf\u95ee\u4ee3\u7406 \u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u8bbf\u95ee\u4ee3\u7406 \uff0c\u5c06\u6536\u53d6\u4ee5\u4e0b\u8d39\u7528\u3002 EC2 \u6210\u672c = t3.large 1Y \u5168\u90e8\u9884\u4ed8\u9884\u7559\u5b9e\u4f8b $426.612 x 2 / 12 \u4e2a\u6708 = $71.1/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 71.1 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 88.9 \u7f8e\u5143 \u544a\u8b66 \u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u544a\u8b66 \uff0c\u53ef\u53c2\u8003 CloudWatch \u4ef7\u683c \u3002","title":"\u6210\u672c\u9884\u4f30"},{"location":"implementation-guide/cost/#_1","text":"\u91cd\u8981 \u672c\u8282\u4e2d\u63cf\u8ff0\u7684\u6210\u672c\u4f30\u7b97\u53ea\u662f\u793a\u4f8b\uff0c\u5b83\u4eec\u662f\u6839\u636e\u5047\u8bbe\u8ba1\u7b97\u7684\uff0c\u53ef\u80fd\u4f1a\u56e0\u60a8\u7684\u73af\u5883\u800c\u5f02\u3002 \u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u4e2a\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002 \u622a\u81f32022\u5e7410\u6708\uff0c\u5f71\u54cd\u89e3\u51b3\u65b9\u6848\u6210\u672c\u7684\u4e3b\u8981\u56e0\u7d20\u5305\u62ec\uff1a \u8981\u6444\u53d6\u7684\u65e5\u5fd7\u7c7b\u578b \u8981\u6444\u53d6/\u5904\u7406\u7684\u65e5\u5fd7\u91cf \u65e5\u5fd7\u6d88\u606f\u7684\u5927\u5c0f \u65e5\u5fd7\u7684\u4f4d\u7f6e \u989d\u5916\u7684\u7279\u6027 \u4ee5\u4e0b\u793a\u4f8b\u5c06\u6f14\u793a 10/100/1000 GB \u6bcf\u65e5\u65e5\u5fd7\u6444\u53d6\u7684\u6210\u672c\u4f30\u7b97\u3002 \u603b\u6210\u672c\u7531 Amazon OpenSearch \u8d39\u7528 \u3001 \u5904\u7406\u8d39\u7528 \u548c \u989d\u5916\u7279\u6027\u8d39\u7528 \u3002 \u4fe1\u606f \u6240\u6709\u6210\u672c\u4f30\u7b97\u5747\u57fa\u4e8e\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5317\u4f5b\u5409\u5c3c\u4e9a\u533a\u57df (us-east-1) \u4e2d\u7684 AWS \u670d\u52a1\u4ef7\u683c\u3002","title":"\u8d39\u7528\u9884\u4f30"},{"location":"implementation-guide/cost/#amazon-opensearch","text":"OD : \u6309\u9700\u5b9e\u4f8b\u4ef7\u683c\u6a21\u578b AURI_1 : \u5168\u989d\u9884\u4ed81\u5e74\u9884\u7559\u5b9e\u4f8b \u5206\u5c42 \uff1a\u5b58\u50a8\u5728\u5c42\u4e2d\u7684\u5929\u6570\u3002 \u4f8b\u5982\uff0c7H + 23W + 60C \u8868\u793a\u65e5\u5fd7\u5728\u70ed\u5c42\u5b58\u50a8 7 \u5929\uff0c\u6e29\u5c42\u5b58\u50a8 23 \u5929\uff0c\u51b7\u5c42\u5b58\u50a8 60 \u5929\u3002 \u526f\u672c : \u5206\u7247\u526f\u672c\u7684\u6570\u91cf\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf (GB) \u5b58\u50a8 (\u5929) \u5206\u5c42 \u526f\u672c OD \u6bcf\u6708 ($) AURI_1 \u6bcf\u6708 ($) \u4e13\u7528\u4e3b\u8282\u70b9 \u6570\u636e\u8282\u70b9 EBS (GB) UltraWarm \u8282\u70b9 UltraWarm/Cold S3 \u5b58\u50a8 (GB) OD \u6bcfGB\u8d39\u7528 ($) AURI_1 \u6bcfGB\u8d39\u7528 ($) 10 30 30H 0 216.28 158.54 N/A c6g.large[2] 380 N/A 0 0.72093 0.52847 10 30 30H 1 289.35 223.94 N/A m6g.large[2] 760 N/A 0 0.9645 0.74647 100 30 7H + 23W 0 989.49 825.97 m6g.large[3] m6g.large[2] 886 medium[2] 0 0.32983 0.27532 100 30 7H + 23W 1 1295.85 1066.92 m6g.large[3] m6g.large[4] 1772 medium[2] 0 0.43195 0.35564 100 90 7H + 23W + 60C 0 1133.49 969.97 m6g.large[3] m6g.large[2] 886 medium[2] 8300 0.12594 0.10777 100 90 7H + 23W + 60C 1 1439.85 1210.92 m6g.large[3] m6g.large[4] 1772 medium[2] 8300 0.15998 0.13455 100 180 7H + 23W + 150C 0 1349.49 1185.97 m6g.large[3] m6g.large[2] 886 medium[2] 17300 0.07497 0.06589 100 180 7H + 23W + 150C 1 1655.85 1426.92 m6g.large[3] m6g.large[4] 1772 medium[2] 17300 0.09199 0.07927 1000 30 7H + 23W 0 6101.15 5489.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 23000 0.20337 0.18298 1000 30 7H + 23W 1 8759.49 7635.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 23000 0.29198 0.25453 1000 90 7H + 23W + 60C 0 8027.33 7245.45 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 83000 0.08919 0.0805 1000 90 7H + 23W + 60C 1 10199.49 9075.8 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 83000 0.11333 0.10084 1000 180 7H + 23W + 150C 0 9701.15 9089.48 m6g.large[3] r6g.xlarge[6] 8856 medium[15] 173000 0.0539 0.0505 1000 180 7H + 23W + 150C 1 12644.19 11420.86 m6g.large[3] r6g.2xlarge[6] 17712 medium[15] 173000 0.07025 0.06345","title":"Amazon OpenSearch \u8d39\u7528"},{"location":"implementation-guide/cost/#_2","text":"","title":"\u5904\u7406\u8d39\u7528"},{"location":"implementation-guide/cost/#aws","text":"\u6444\u53d6\u548c\u5904\u7406\u670d\u52a1\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002","title":"AWS \u670d\u52a1\u65e5\u5fd7"},{"location":"implementation-guide/cost/#amazon-s3","text":"\u4fe1\u606f \u4ece S3 \u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u4f1a\u4ea7\u751f\u975e\u5e38\u4f4e\u7684 SQS \u548c S3 \u8bf7\u6c42\u8d39\u7528\uff0c\u901a\u5e38\u5728 AWS \u514d\u8d39\u5957\u9910\u5185\u3002 \u4ee5\u4e0b\u662f\u5047\u8bbe\uff1a AWS \u670d\u52a1\u6bcf 5 \u5206\u949f\u4ee5 gzip \u683c\u5f0f\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230 Amazon S3\uff08\u5927\u591a\u6570 AWS \u670d\u52a1\u4ee5 gzip \u683c\u5f0f\u8f93\u51fa\u65e5\u5fd7\uff09\u3002 S3 \u4e2d 4MB \u7684\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u7684\u539f\u59cb\u65e5\u5fd7\u5927\u5c0f\u7ea6\u4e3a 100MB\u3002 \u4e00\u4e2a 1GB \u5185\u5b58\u7684 Lambda \u5904\u7406\u4e00\u4e2a 4MB \u7684\u65e5\u5fd7\u6587\u4ef6\u5927\u7ea6\u9700\u8981 26 \u79d2\uff0c\u5373\u6bcf MB \u539f\u59cb\u65e5\u5fd7\u9700\u8981 260 \u6beb\u79d2 \u6700\u5927\u538b\u7f29\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u4e3a 5MB\u3002 \u60a8\u6bcf\u5929\u6709 N GB \u539f\u59cb\u65e5\u5fd7\uff0c\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u5982\u4e0b\uff1a Lambda \u6210\u672c = \u6bcf MB 260 \u6beb\u79d2 x 1024 MB x N GB/\u5929 x \u6bcf\u6beb\u79d2 0.0000000167 \u7f8e\u5143 S3 \u5b58\u50a8\u6210\u672c = \u6bcf GB 0.023 \u7f8e\u5143 x N GB/\u5929 * 4%\uff08\u538b\u7f29\uff09 \u5904\u7406 AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6bcf\u6708\u603b\u6210\u672c\u4e3a\uff1a \u6bcf\u6708\u603b\u6210\u672c =\uff08Lambda \u6210\u672c + S3 \u5b58\u50a8\u6210\u672c\uff09x 30 \u5929 \u6bcf\u6b21\u65e5\u5fd7\u91cf \u6bcf\u65e5 Lambda \u8d39\u7528 ($) \u6bcf\u6b21 S3 \u5b58\u50a8\u8d39\u7528 ($) \u6bcf\u6708\u8d39\u7528 ($) 10 0.044 0.009 1.610 100 0.445 0.092 16.099 1000 4.446 0.920 160.986","title":"Amazon S3 \u4e2d\u7684\u65e5\u5fd7"},{"location":"implementation-guide/cost/#_3","text":"\u6444\u53d6\u548c\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u6210\u672c\u53ef\u80fd\u4f1a\u6839\u636e\u65e5\u5fd7\u4f4d\u7f6e\u7b49\u60c5\u51b5\u800c\u6709\u6240\u4e0d\u540c\u3002","title":"\u5e94\u7528\u65e5\u5fd7"},{"location":"implementation-guide/cost/#amazon-ec2","text":"\u91cd\u8981 \u5982\u679c\u60a8\u6709\u591a\u79cd\u65e5\u5fd7\u683c\u5f0f\uff08\u7d22\u5f15\uff09\uff0c\u5219\u9700\u8981\u5bf9\u6bcf\u79cd\u683c\u5f0f\u8fdb\u884c\u6210\u672c\u4f30\u7b97\u3002 \u6210\u672c\u4f30\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u5047\u8bbe\u548c\u4e8b\u5b9e\uff1a \u5e73\u5747\u65e5\u5fd7\u6d88\u606f\u5927\u5c0f\u4e3a 1 KB\u3002 Lambda \u5185\u5b58\u4e3a 1024 MB\u3002 \u6bcf\u4e2a Lambda \u8c03\u7528\u5904\u7406 1 MB \u65e5\u5fd7\u3002 \u4e00\u6b21 Lambda \u8c03\u7528\u5904\u7406\u4e00\u4e2a Kinesis \u5206\u7247\uff0cLambda \u53ef\u4ee5\u6269\u5c55\u6765\u5e76\u53d1\u4ee5\u5904\u7406\u591a\u4e2a\u5206\u7247\u3002 \u5904\u7406\u5c0f\u4e8e 5 MB \u7684\u65e5\u5fd7\u7684 Lambda \u8fd0\u884c\u65f6\u4e3a 500 \u6beb\u79d2\u3002 \u4e00\u4e2a Kinesis \u5206\u7247\u6444\u5165\u65e5\u5fd7\u5927\u5c0f\u4e3a = 1 MB/\u79d2 x 3600 \u79d2/\u5c0f\u65f6 x 24 \u5c0f\u65f6 x 0.7 = 60.48 GB/\u5929\u3002 \u63d0\u4f9b 30% \u4ee5\u4e0a\u7684\u989d\u5916\u5206\u7247\u6765\u5904\u7406\u6d41\u91cf\u6296\u52a8\u3002 \u6bcf\u65e5\u65e5\u5fd7\u91cf\u4e3a X GB\u3002 \u6240\u9700\u7684 Kinesis \u5206\u7247\u6570 S \u4e3a = Round_up_to_next_integer\uff08\u6bcf\u65e5\u65e5\u5fd7\u91cf X / 60.48\uff09\u3002 \u57fa\u4e8e\u4ee5\u4e0a\u5047\u8bbe\uff0c\u4ee5\u4e0b\u662f\u6bcf\u65e5\u6210\u672c\u4f30\u7b97\u516c\u5f0f\uff1a Kinesis \u5206\u7247\u5c0f\u65f6\u6210\u672c = 0.015 \u7f8e\u5143/\u5206\u7247\u5c0f\u65f6 x \u6bcf\u5929 24 \u5c0f\u65f6 x S \u5206\u7247 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c = \u6bcf\u767e\u4e07\u5355\u4f4d 0.014 \u7f8e\u5143 * \u6bcf GB 1 \u767e\u4e07 x X GB \u6bcf\u5929 Lambda \u6210\u672c = \u6bcf 1 \u6beb\u79d2 0.0000000167 \u7f8e\u5143 x \u6bcf\u6b21\u8c03\u7528 500 \u6beb\u79d2 x \u6bcf GB 1,000 \u6b21\u8c03\u7528 x X GB \u6bcf\u5929 \u6bcf\u6708\u603b\u6210\u672c =\uff08Kinesis Shard \u5c0f\u65f6\u6210\u672c + Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u5355\u4f4d\u6210\u672c + Lambda \u6210\u672c\uff09x 30 \u5929 \u6bcf\u6b21\u65e5\u5fd7\u91cf (GB) \u5206\u7247\u6570 \u6bcf\u65e5 Kinesis \u5206\u7247\u5c0f\u65f6\u8d39 \u6bcf\u65e5 Kinesis PUT \u6709\u6548\u8d1f\u8f7d\u8d39\u7528 \u6bcf\u6b21 Lambda \u8d39\u7528 \u6bcf\u6708\u603b\u8d39\u7528 ($) 10 1 0.36 0.14 0.0835 17.505 100 2 0.72 1.4 0.835 88.65 1000 17 6.12 14 8.35 854.1","title":"\u4ece Amazon EC2 \u6536\u96c6\u65e5\u5fd7"},{"location":"implementation-guide/cost/#amazon-eks","text":"\u76ee\u524d\uff0cEKS \u548c Amazon OpenSearch \u4e4b\u95f4\u6ca1\u6709\u7f13\u51b2\u5c42\uff0c\u4e5f\u6ca1\u6709\u989d\u5916\u7684\u8d39\u7528\u3002","title":"\u4ece Amazon EKS \u63d0\u53d6\u65e5\u5fd7"},{"location":"implementation-guide/cost/#_4","text":"\u4fe1\u606f \u5982\u679c\u60a8\u9009\u62e9\u4e0d\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u4e2d\u7684\u9644\u52a0\u529f\u80fd\uff0c\u5219\u4e0d\u4f1a\u5411\u60a8\u6536\u8d39\u3002","title":"\u989d\u5916\u7279\u6027\u8d39\u7528"},{"location":"implementation-guide/cost/#_5","text":"\u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u8bbf\u95ee\u4ee3\u7406 \uff0c\u5c06\u6536\u53d6\u4ee5\u4e0b\u8d39\u7528\u3002 EC2 \u6210\u672c = t3.large 1Y \u5168\u90e8\u9884\u4ed8\u9884\u7559\u5b9e\u4f8b $426.612 x 2 / 12 \u4e2a\u6708 = $71.1/\u6708 EBS \u6210\u672c = 0.1 GB/\u6708 x 8 GB x 2 = $1.6/\u6708 \u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = \u6bcf ALB \u5c0f\u65f6 $0.0225 x 720 \u5c0f\u65f6/\u6708 = $16.2/\u6708 \u6bcf\u6708\u603b\u8d39\u7528 = 71.1 \u7f8e\u5143 EC2 \u6210\u672c + 1.6 \u7f8e\u5143 EBS \u6210\u672c + 16.2 \u7f8e\u5143\u5f39\u6027\u8d1f\u8f7d\u5747\u8861\u5668\u6210\u672c = 88.9 \u7f8e\u5143","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/cost/#_6","text":"\u5982\u679c\u901a\u8fc7 Log Hub \u90e8\u7f72\u5e76\u521b\u5efa\u4e86 \u544a\u8b66 \uff0c\u53ef\u53c2\u8003 CloudWatch \u4ef7\u683c \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/faq/","text":"\u5e38\u89c1\u95ee\u9898 \u5982\u4f55\u5728\u4e0e Log Hub \u90e8\u7f72\u533a\u57df\u4e0d\u540c\u7684\u533a\u57df\u4e2d\u63d0\u53d6 AWS \u6258\u7ba1\u670d\u52a1\u7684\u65e5\u5fd7\uff1f \u60a8\u53ef\u4ee5\u5229\u7528 S3 \u8de8\u533a\u57df\u590d\u5236 \u5c06\u65e5\u5fd7\u590d\u5236\u5230 Log Hub \u90e8\u7f72\u533a\u57df\uff0c\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684 \u5bf9\u8c61\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5220\u9664\u539f\u59cb\u6570\u636e\u3002 \u5f53\u66f4\u65b0\u5806\u6808\u65f6\uff0cCloudFormation \u5806\u6808\u5728\u5220\u9664 AWS::Lambda::Function \u8d44\u6e90\u65f6\u5361\u4f4f\u4e86\u3002\u5982\u4f55\u89e3\u51b3\uff1f Lambda \u51fd\u6570\u4f4d\u4e8e VPC \u4e2d\uff0c\u60a8\u9700\u8981\u7b49\u5f85\u5173\u8054\u7684 ENI \u8d44\u6e90\u88ab\u5220\u9664\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u6709\u54ea\u4e9b\u9650\u5236\uff1f Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86\u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236\u7684 AOS \u57df\u3002\u6309\u7167 \u6700\u4f73\u5b9e\u8df5 \uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u57df\u3002\u4e0d\u652f\u6301\u4f7f\u7528\u516c\u5171\u8bbf\u95ee\u7684 AOS\u3002 Log Hub \u5fc5\u987b\u4e0e\u8981\u4f7f\u7528\u7684 AOS \u57df\u90e8\u7f72\u5728\u540c\u4e00 AWS \u8d26\u6237\u548c\u540c\u4e00\u533a\u57df\u4e2d\u3002 \u7248\u672c\u5347\u7ea7 \u5982\u4f55\u5347\u7ea7 Log Hub? \u60a8\u53ef\u4ee5\u4f7f\u7528\u6700\u65b0\u7684 CloudFormation \u6a21\u677f\u94fe\u63a5\u6765\u5347\u7ea7 Log Hub\u3002 \u8bf7\u53c2\u8003 \u5347\u7ea7\u624b\u518c \u4ee5\u5347\u7ea7\u60a8\u7684 Log Hub. \u65e5\u5fd7\u4ee3\u7406 \u91cd\u542fEC2\u5b9e\u4f8b\u540e\u4ee3\u7406\u72b6\u6001\u4e3a\u79bb\u7ebf\uff0c\u5982\u4f55\u8ba9\u5b83\u5728\u5b9e\u4f8b\u91cd\u542f\u65f6\u81ea\u52a8\u542f\u52a8\uff1f \u5982\u679c\u60a8\u5df2\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f46\u5728\u521b\u5efa\u4efb\u4f55\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\u91cd\u65b0\u542f\u52a8\u5b9e\u4f8b\uff0c\u901a\u5e38\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002 \u5982\u679c\u60a8\u5df2\u7ecf\u914d\u7f6e\u65e5\u5fd7\u6444\u53d6\uff0c\u4ee3\u7406\u5c06\u81ea\u52a8\u91cd\u542f\u3002 \u5982\u679c\u60a8\u6709\u65e5\u5fd7\u6444\u53d6\uff0c \u4f46\u4f9d\u7136\u53d1\u751f\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u4f7f\u7528 systemctl status fluent-bit \u68c0\u67e5\u5176\u5728\u5b9e\u4f8b\u4e2d\u7684\u72b6\u6001\u3002 \u65e5\u5fd7\u6444\u53d6 \u6211\u521b\u5efa\u4e86\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u662f\u5728 OpenSearch \u4e2d\u6709\u91cd\u590d\u7684\u8bb0\u5f55\u3002 \u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684 Kinesis Shards \u6765\u5904\u7406\u4f20\u5165\u7684\u8bf7\u6c42\u3002 \u53d1\u751f\u9608\u503c\u9519\u8bef\u65f6\uff0c\u5728 Kinesis \u4e2d\uff0cFluent Bit \u4ee3\u7406\u5c06 \u91cd\u8bd5 [chunk](https://docs.fluentbit.io/manual/administration /\u7f13\u51b2\u548c\u5b58\u50a8\uff09\u3002 \u6211\u5df2\u7ecf\u5c06\u5728\u5b50\u8d26\u6237\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u53d1\u9001\u5230\u4e86\u4e00\u4e2a\u4e2d\u5fc3\u8d26\u6237\uff0c\u6211\u9700\u8981\u600e\u4e48\u901a\u8fc7 Log Hub \u6765\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\uff1f \u8bf7\u5728\u60a8\u7684\u4e2d\u5fc3\u8d26\u6237\u4e2d\u90e8\u7f72 Log Hub \u5728\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6444\u53d6\u65f6\uff0c\u8bf7\u9009\u62e9 \u624b\u52a8 \u6a21\u5f0f\uff0c\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u83dc\u5355\u9009\u62e9 \"\u5f53\u524d\u8d26\u6237\"\uff0c\u5e76\u4e14\u8f93\u5165\u4e2d\u5fc3\u8d26\u6237\u4e2d\u65e5\u5fd7\u6240\u5728\u7684\u4f4d\u7f6e\u3002 \u6bd4\u5982, \u60a8\u5df2\u7ecf\u5c06\u5404\u4e2a\u5b50\u8d26\u6237\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7\u53d1\u9001\u5230\u4e86\u60a8\u4e2d\u5fc3\u5316\u7684\u5ba1\u8ba1\u8d26\u6237\u7684 S3 \u6876\u4e2d\uff0c\u60a8\u9700\u8981\u505a\u4ee5\u4e0b\u6b65\u9aa4: \u5728\u60a8\u7684\u5ba1\u8ba1\u8d26\u6237\u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848. \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u53c2\u8003\u6b65\u9aa4 \u8bf7\u9009\u62e9 \u624b\u52a8\u6a21\u5f0f , \u5728\u8d26\u6237\u7684\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5f53\u524d\u8d26\u6237 \uff08\u4ee3\u8868\u4e86\u60a8\u7684\u5ba1\u8ba1\u8d26\u6237\uff09\uff0c\u5728 \u65e5\u5fd7\u4f4d\u7f6e \u4e2d\u8f93\u5165\u5ba1\u8ba1\u8d26\u6237\u4e2d\u7684 S3 \u6876\u4f4d\u7f6e\u3002 \u8fd9\u6837\u60a8\u5c31\u80fd\u5c06\u60a8\u5b58\u653e\u5728\u5ba1\u8ba1\u8d26\u6237 S3 \u6876\u4e2d\uff0c\u5404\u4e2a\u5b50\u8d26\u6237\u7684 ALB \u65e5\u5fd7\u6444\u53d6\u5230\u5ba1\u8ba1\u8d26\u6237\u4e2d\u7684 OpenSearch\u3002 \u67e5\u770b\u65e5\u5fd7 \u6211\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u662f\u5728 OpenSearch \u4e2d\u627e\u4e0d\u5230\u5185\u7f6e\u4eea\u8868\u677f \u9996\u5148\u8bf7\u53c2\u8003 aws \u670d\u52a1\u65e5\u5fd7\u6982\u89c8 \uff0c\u67e5\u770b\u60a8\u521b\u5efa\u7684\u670d\u52a1\u65e5\u5fd7\u662f\u5426\u652f\u6301\u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5176\u6b21\u8bf7\u786e\u8ba4\u60a8\u5728AOS\u4e2d\u9009\u62e9\u7684\u662f Global Tenant \u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2AOS\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u6211\u5df2\u7ecf\u9009\u62e9\u4e86 Global tenant. \u4f46\u662f\u4ecd\u7136\u5728 OpenSearch \u4e2d\u627e\u4e0d\u5230\u5185\u7f6e\u4eea\u8868\u677f. \u8fd9\u4e2a\u901a\u5e38\u662f\u7531\u4e8e Log Hub \u5728\u521b\u5efa Index Template \u6216\u8005 Dashboard \u65f6\u4ea7\u751f\u4e86403\u9519\u8bef\u3002\u8fd9\u4e2a\u9700\u8981\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u624b\u52a8\u91cd\u65b0\u8fd0\u884c\u8be5 Lambda \u767b\u9646 Log Hub \u63a7\u5236\u53f0, \u627e\u5230\u51fa\u73b0\u8be5\u95ee\u9898\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6. \u4ece ID \u4e2d\u590d\u5236\u524d5\u4e2a\u5b57\u8282. \u6bd4\u5982 ID \u662f c169cb23-88f3-4a7e-90d7-4ab4bc18982c \uff0c \u9700\u8981\u590d\u5236 c169c \u767b\u9646 AWS \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 Lambda \u670d\u52a1\u9875\u9762\u3002 \u5728\u8fc7\u6ee4\u680f\u4e2d\u7c98\u8d34\u4e0a\u4e00\u6b65\u590d\u5236\u7684\u5185\u5bb9\u3002 Lambda \u9875\u9762\u4f1a\u53ea\u663e\u793a Log Hub \u4e3a\u8fd9\u4e2a\u65e5\u5fd7\u6444\u53d6\u6240\u521b\u5efa\u7684 Lambda \u51fd\u6570\u3002 \u627e\u5230\u540d\u79f0\u4e2d\u542b\u6709\"OpenSearchHelperFn\"\u7684 Lambda \u51fd\u6570\uff0c\u5e76\u70b9\u51fb\u3002 \u5728 \u6d4b\u8bd5 \u9875\u9762\u4e2d\uff0c\u4f7f\u7528\u4efb\u610f\u7684\u4e8b\u4ef6\u540d\u79f0\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u4ef6. \u5355\u51fb \u6d4b\u8bd5 \u6309\u94ae\u4ee5\u89e6\u53d1 Lambda, \u7b49\u5f85 Lambda \u6267\u884c\u7ed3\u675f. \u60a8\u5e94\u8be5\u5c31\u80fd\u5728 OpenSearch \u4e2d\u770b\u5230\u751f\u6210\u7684\u4eea\u8868\u677f","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"implementation-guide/faq/#_1","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"implementation-guide/faq/#log-hub-aws","text":"\u60a8\u53ef\u4ee5\u5229\u7528 S3 \u8de8\u533a\u57df\u590d\u5236 \u5c06\u65e5\u5fd7\u590d\u5236\u5230 Log Hub \u90e8\u7f72\u533a\u57df\uff0c\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684 \u5bf9\u8c61\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5220\u9664\u539f\u59cb\u6570\u636e\u3002","title":"\u5982\u4f55\u5728\u4e0e Log Hub \u90e8\u7f72\u533a\u57df\u4e0d\u540c\u7684\u533a\u57df\u4e2d\u63d0\u53d6 AWS \u6258\u7ba1\u670d\u52a1\u7684\u65e5\u5fd7\uff1f"},{"location":"implementation-guide/faq/#cloudformation-awslambdafunction","text":"Lambda \u51fd\u6570\u4f4d\u4e8e VPC \u4e2d\uff0c\u60a8\u9700\u8981\u7b49\u5f85\u5173\u8054\u7684 ENI \u8d44\u6e90\u88ab\u5220\u9664\u3002","title":"\u5f53\u66f4\u65b0\u5806\u6808\u65f6\uff0cCloudFormation \u5806\u6808\u5728\u5220\u9664 AWS::Lambda::Function \u8d44\u6e90\u65f6\u5361\u4f4f\u4e86\u3002\u5982\u4f55\u89e3\u51b3\uff1f"},{"location":"implementation-guide/faq/#_2","text":"Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86\u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236\u7684 AOS \u57df\u3002\u6309\u7167 \u6700\u4f73\u5b9e\u8df5 \uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u57df\u3002\u4e0d\u652f\u6301\u4f7f\u7528\u516c\u5171\u8bbf\u95ee\u7684 AOS\u3002 Log Hub \u5fc5\u987b\u4e0e\u8981\u4f7f\u7528\u7684 AOS \u57df\u90e8\u7f72\u5728\u540c\u4e00 AWS \u8d26\u6237\u548c\u540c\u4e00\u533a\u57df\u4e2d\u3002","title":"\u6b64\u89e3\u51b3\u65b9\u6848\u6709\u54ea\u4e9b\u9650\u5236\uff1f"},{"location":"implementation-guide/faq/#_3","text":"","title":"\u7248\u672c\u5347\u7ea7"},{"location":"implementation-guide/faq/#log-hub","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u6700\u65b0\u7684 CloudFormation \u6a21\u677f\u94fe\u63a5\u6765\u5347\u7ea7 Log Hub\u3002 \u8bf7\u53c2\u8003 \u5347\u7ea7\u624b\u518c \u4ee5\u5347\u7ea7\u60a8\u7684 Log Hub.","title":"\u5982\u4f55\u5347\u7ea7 Log Hub?"},{"location":"implementation-guide/faq/#_4","text":"","title":"\u65e5\u5fd7\u4ee3\u7406"},{"location":"implementation-guide/faq/#ec2","text":"\u5982\u679c\u60a8\u5df2\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\uff0c\u4f46\u5728\u521b\u5efa\u4efb\u4f55\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\u91cd\u65b0\u542f\u52a8\u5b9e\u4f8b\uff0c\u901a\u5e38\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u3002 \u5982\u679c\u60a8\u5df2\u7ecf\u914d\u7f6e\u65e5\u5fd7\u6444\u53d6\uff0c\u4ee3\u7406\u5c06\u81ea\u52a8\u91cd\u542f\u3002 \u5982\u679c\u60a8\u6709\u65e5\u5fd7\u6444\u53d6\uff0c \u4f46\u4f9d\u7136\u53d1\u751f\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u4f7f\u7528 systemctl status fluent-bit \u68c0\u67e5\u5176\u5728\u5b9e\u4f8b\u4e2d\u7684\u72b6\u6001\u3002","title":"\u91cd\u542fEC2\u5b9e\u4f8b\u540e\u4ee3\u7406\u72b6\u6001\u4e3a\u79bb\u7ebf\uff0c\u5982\u4f55\u8ba9\u5b83\u5728\u5b9e\u4f8b\u91cd\u542f\u65f6\u81ea\u52a8\u542f\u52a8\uff1f"},{"location":"implementation-guide/faq/#_5","text":"","title":"\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/faq/#opensearch","text":"\u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684 Kinesis Shards \u6765\u5904\u7406\u4f20\u5165\u7684\u8bf7\u6c42\u3002 \u53d1\u751f\u9608\u503c\u9519\u8bef\u65f6\uff0c\u5728 Kinesis \u4e2d\uff0cFluent Bit \u4ee3\u7406\u5c06 \u91cd\u8bd5 [chunk](https://docs.fluentbit.io/manual/administration /\u7f13\u51b2\u548c\u5b58\u50a8\uff09\u3002","title":"\u6211\u521b\u5efa\u4e86\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u662f\u5728 OpenSearch \u4e2d\u6709\u91cd\u590d\u7684\u8bb0\u5f55\u3002"},{"location":"implementation-guide/faq/#aws-log-hub","text":"\u8bf7\u5728\u60a8\u7684\u4e2d\u5fc3\u8d26\u6237\u4e2d\u90e8\u7f72 Log Hub \u5728\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u7684\u6444\u53d6\u65f6\uff0c\u8bf7\u9009\u62e9 \u624b\u52a8 \u6a21\u5f0f\uff0c\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u83dc\u5355\u9009\u62e9 \"\u5f53\u524d\u8d26\u6237\"\uff0c\u5e76\u4e14\u8f93\u5165\u4e2d\u5fc3\u8d26\u6237\u4e2d\u65e5\u5fd7\u6240\u5728\u7684\u4f4d\u7f6e\u3002 \u6bd4\u5982, \u60a8\u5df2\u7ecf\u5c06\u5404\u4e2a\u5b50\u8d26\u6237\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7\u53d1\u9001\u5230\u4e86\u60a8\u4e2d\u5fc3\u5316\u7684\u5ba1\u8ba1\u8d26\u6237\u7684 S3 \u6876\u4e2d\uff0c\u60a8\u9700\u8981\u505a\u4ee5\u4e0b\u6b65\u9aa4: \u5728\u60a8\u7684\u5ba1\u8ba1\u8d26\u6237\u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848. \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u53c2\u8003\u6b65\u9aa4 \u8bf7\u9009\u62e9 \u624b\u52a8\u6a21\u5f0f , \u5728\u8d26\u6237\u7684\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5f53\u524d\u8d26\u6237 \uff08\u4ee3\u8868\u4e86\u60a8\u7684\u5ba1\u8ba1\u8d26\u6237\uff09\uff0c\u5728 \u65e5\u5fd7\u4f4d\u7f6e \u4e2d\u8f93\u5165\u5ba1\u8ba1\u8d26\u6237\u4e2d\u7684 S3 \u6876\u4f4d\u7f6e\u3002 \u8fd9\u6837\u60a8\u5c31\u80fd\u5c06\u60a8\u5b58\u653e\u5728\u5ba1\u8ba1\u8d26\u6237 S3 \u6876\u4e2d\uff0c\u5404\u4e2a\u5b50\u8d26\u6237\u7684 ALB \u65e5\u5fd7\u6444\u53d6\u5230\u5ba1\u8ba1\u8d26\u6237\u4e2d\u7684 OpenSearch\u3002","title":"\u6211\u5df2\u7ecf\u5c06\u5728\u5b50\u8d26\u6237\u4e2d\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u53d1\u9001\u5230\u4e86\u4e00\u4e2a\u4e2d\u5fc3\u8d26\u6237\uff0c\u6211\u9700\u8981\u600e\u4e48\u901a\u8fc7 Log Hub \u6765\u6444\u53d6\u8fd9\u4e9b\u65e5\u5fd7\uff1f"},{"location":"implementation-guide/faq/#_6","text":"","title":"\u67e5\u770b\u65e5\u5fd7"},{"location":"implementation-guide/faq/#aws-opensearch","text":"\u9996\u5148\u8bf7\u53c2\u8003 aws \u670d\u52a1\u65e5\u5fd7\u6982\u89c8 \uff0c\u67e5\u770b\u60a8\u521b\u5efa\u7684\u670d\u52a1\u65e5\u5fd7\u662f\u5426\u652f\u6301\u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5176\u6b21\u8bf7\u786e\u8ba4\u60a8\u5728AOS\u4e2d\u9009\u62e9\u7684\u662f Global Tenant \u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2AOS\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002","title":"\u6211\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\uff0c\u4f46\u662f\u5728 OpenSearch \u4e2d\u627e\u4e0d\u5230\u5185\u7f6e\u4eea\u8868\u677f"},{"location":"implementation-guide/faq/#global-tenant-opensearch","text":"\u8fd9\u4e2a\u901a\u5e38\u662f\u7531\u4e8e Log Hub \u5728\u521b\u5efa Index Template \u6216\u8005 Dashboard \u65f6\u4ea7\u751f\u4e86403\u9519\u8bef\u3002\u8fd9\u4e2a\u9700\u8981\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u624b\u52a8\u91cd\u65b0\u8fd0\u884c\u8be5 Lambda \u767b\u9646 Log Hub \u63a7\u5236\u53f0, \u627e\u5230\u51fa\u73b0\u8be5\u95ee\u9898\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6. \u4ece ID \u4e2d\u590d\u5236\u524d5\u4e2a\u5b57\u8282. \u6bd4\u5982 ID \u662f c169cb23-88f3-4a7e-90d7-4ab4bc18982c \uff0c \u9700\u8981\u590d\u5236 c169c \u767b\u9646 AWS \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 Lambda \u670d\u52a1\u9875\u9762\u3002 \u5728\u8fc7\u6ee4\u680f\u4e2d\u7c98\u8d34\u4e0a\u4e00\u6b65\u590d\u5236\u7684\u5185\u5bb9\u3002 Lambda \u9875\u9762\u4f1a\u53ea\u663e\u793a Log Hub \u4e3a\u8fd9\u4e2a\u65e5\u5fd7\u6444\u53d6\u6240\u521b\u5efa\u7684 Lambda \u51fd\u6570\u3002 \u627e\u5230\u540d\u79f0\u4e2d\u542b\u6709\"OpenSearchHelperFn\"\u7684 Lambda \u51fd\u6570\uff0c\u5e76\u70b9\u51fb\u3002 \u5728 \u6d4b\u8bd5 \u9875\u9762\u4e2d\uff0c\u4f7f\u7528\u4efb\u610f\u7684\u4e8b\u4ef6\u540d\u79f0\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u4ef6. \u5355\u51fb \u6d4b\u8bd5 \u6309\u94ae\u4ee5\u89e6\u53d1 Lambda, \u7b49\u5f85 Lambda \u6267\u884c\u7ed3\u675f. \u60a8\u5e94\u8be5\u5c31\u80fd\u5728 OpenSearch \u4e2d\u770b\u5230\u751f\u6210\u7684\u4eea\u8868\u677f","title":"\u6211\u5df2\u7ecf\u9009\u62e9\u4e86 Global tenant. \u4f46\u662f\u4ecd\u7136\u5728 OpenSearch \u4e2d\u627e\u4e0d\u5230\u5185\u7f6e\u4eea\u8868\u677f."},{"location":"implementation-guide/release-notes/","text":"\u66f4\u65b0\u8bb0\u5f55 1.1.0 2022\u5e748\u670826\u65e5 \u65b0\u589e \u652f\u6301 VPC Flow Logs \u65e5\u5fd7\u6444\u53d6\uff0c\u548c\u53ef\u9009\u7684\u4eea\u8868\u677f\u6a21\u677f. #14 \u652f\u6301 AWS Config \u65e5\u5fd7\u6444\u53d6\uff0c\u548c\u53ef\u9009\u7684\u4eea\u8868\u677f\u6a21\u677f. #15 \u652f\u6301 AWS WAF \u65e5\u5fd7\u91c7\u6837\u6444\u53d6. #16 \u652f\u6301\u4ece\u76f8\u540c\u533a\u57df\u7684\u4e0d\u540c\u8d26\u6237\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u5230 Log Hub. #17 \u652f\u6301\u4ece\u76f8\u540c\u533a\u57df\u7684\u4e0d\u540c\u8d26\u6237\u6444\u53d6\u5e94\u7528\u65e5\u5fd7\u5230 Log Hub. #18 \u542f\u52a8\u65f6\u652f\u6301\u9009\u62e9\u5df2\u6709\u7684 VPC. #19 \u589e\u52a0\u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u8fdb\u884c Log Hub \u90e8\u7f72\u7684\u624b\u518c. #20 \u589e\u52a0\u5982\u4f55\u4f7f\u7528 ADFS \u8fdb\u884c Log Hub \u90e8\u7f72\u7684\u624b\u518c. #21 \u589e\u52a0\u652f\u6301\u5c06 EKS \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7\u76f4\u63a5\u5199\u5165\u5230 OpenSearch \u4e2d. #25 \u66f4\u65b0 \u5c06 Lambda \u8fd0\u884c\u65f6\u4ece nodejs12.X \u5347\u7ea7\u5230\u66f4\u65b0\u7248\u672c\u3002 \u60a8\u5c06\u4e0d\u4f1a\u518d\u6536\u5230 Lambda \u8fd0\u884c\u65f6\u5f03\u7528\u8b66\u544a\u7535\u5b50\u90ae\u4ef6\u3002 \u5c06 Lambda \u8fd0\u884c\u65f6\u4ece python3.6 \u5347\u7ea7\u5230\u66f4\u65b0\u7248\u672c\u3002 \u5c06 CDK \u7248\u672c\u5347\u7ea7\u5230 CDK 2.36.0\u3002 Bug \u4fee\u590d OpenSearch \u96c6\u7fa4\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u73b0\u5728\u53ef\u4ee5\u663e\u793a\u5177\u6709 gp3 \u7c7b\u578b EBS \u7684\u5b9e\u4f8b\u7684\u4fe1\u606f\u3002 1.0.0 2022\u5e746\u67086\u65e5 \u65b0\u589e \u652f\u6301 Amazon CloudTrail \u65e5\u5fd7. \u652f\u6301 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7. \u652f\u6301 Amazon RDS/Aurora MySQL \u65e5\u5fd7 (audit, general, error, slow query). \u652f\u6301 Amazon CloudFront standard logs. \u652f\u6301 AWS Lambda \u65e5\u5fd7. \u652f\u6301 Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7. \u652f\u6301 AWS WAF \u65e5\u5fd7. \u652f\u6301\u4ece EC2\uff0cEKS \u4e2d\u6444\u53d6\u65e5\u5fd7, \u5305\u62ec Apache HTTP Server, Nginx, \u5355\u884c\u6587\u672c, \u591a\u884c\u6587\u672c, JSON \u683c\u5f0f. \u652f\u6301\u4ece S3 \u6444\u53d6\u589e\u91cf\u65e5\u5fd7\uff0c\u5305\u62ec JSON \u548c\u5355\u884c\u6587\u672c\u683c\u5f0f\u3002","title":"\u66f4\u65b0\u8bb0\u5f55"},{"location":"implementation-guide/release-notes/#_1","text":"","title":"\u66f4\u65b0\u8bb0\u5f55"},{"location":"implementation-guide/release-notes/#110","text":"2022\u5e748\u670826\u65e5 \u65b0\u589e \u652f\u6301 VPC Flow Logs \u65e5\u5fd7\u6444\u53d6\uff0c\u548c\u53ef\u9009\u7684\u4eea\u8868\u677f\u6a21\u677f. #14 \u652f\u6301 AWS Config \u65e5\u5fd7\u6444\u53d6\uff0c\u548c\u53ef\u9009\u7684\u4eea\u8868\u677f\u6a21\u677f. #15 \u652f\u6301 AWS WAF \u65e5\u5fd7\u91c7\u6837\u6444\u53d6. #16 \u652f\u6301\u4ece\u76f8\u540c\u533a\u57df\u7684\u4e0d\u540c\u8d26\u6237\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u5230 Log Hub. #17 \u652f\u6301\u4ece\u76f8\u540c\u533a\u57df\u7684\u4e0d\u540c\u8d26\u6237\u6444\u53d6\u5e94\u7528\u65e5\u5fd7\u5230 Log Hub. #18 \u542f\u52a8\u65f6\u652f\u6301\u9009\u62e9\u5df2\u6709\u7684 VPC. #19 \u589e\u52a0\u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u8fdb\u884c Log Hub \u90e8\u7f72\u7684\u624b\u518c. #20 \u589e\u52a0\u5982\u4f55\u4f7f\u7528 ADFS \u8fdb\u884c Log Hub \u90e8\u7f72\u7684\u624b\u518c. #21 \u589e\u52a0\u652f\u6301\u5c06 EKS \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7\u76f4\u63a5\u5199\u5165\u5230 OpenSearch \u4e2d. #25 \u66f4\u65b0 \u5c06 Lambda \u8fd0\u884c\u65f6\u4ece nodejs12.X \u5347\u7ea7\u5230\u66f4\u65b0\u7248\u672c\u3002 \u60a8\u5c06\u4e0d\u4f1a\u518d\u6536\u5230 Lambda \u8fd0\u884c\u65f6\u5f03\u7528\u8b66\u544a\u7535\u5b50\u90ae\u4ef6\u3002 \u5c06 Lambda \u8fd0\u884c\u65f6\u4ece python3.6 \u5347\u7ea7\u5230\u66f4\u65b0\u7248\u672c\u3002 \u5c06 CDK \u7248\u672c\u5347\u7ea7\u5230 CDK 2.36.0\u3002 Bug \u4fee\u590d OpenSearch \u96c6\u7fa4\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u73b0\u5728\u53ef\u4ee5\u663e\u793a\u5177\u6709 gp3 \u7c7b\u578b EBS \u7684\u5b9e\u4f8b\u7684\u4fe1\u606f\u3002","title":"1.1.0"},{"location":"implementation-guide/release-notes/#100","text":"2022\u5e746\u67086\u65e5 \u65b0\u589e \u652f\u6301 Amazon CloudTrail \u65e5\u5fd7. \u652f\u6301 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7. \u652f\u6301 Amazon RDS/Aurora MySQL \u65e5\u5fd7 (audit, general, error, slow query). \u652f\u6301 Amazon CloudFront standard logs. \u652f\u6301 AWS Lambda \u65e5\u5fd7. \u652f\u6301 Application Load Balancer \u8bbf\u95ee\u65e5\u5fd7. \u652f\u6301 AWS WAF \u65e5\u5fd7. \u652f\u6301\u4ece EC2\uff0cEKS \u4e2d\u6444\u53d6\u65e5\u5fd7, \u5305\u62ec Apache HTTP Server, Nginx, \u5355\u884c\u6587\u672c, \u591a\u884c\u6587\u672c, JSON \u683c\u5f0f. \u652f\u6301\u4ece S3 \u6444\u53d6\u589e\u91cf\u65e5\u5fd7\uff0c\u5305\u62ec JSON \u548c\u5355\u884c\u6587\u672c\u683c\u5f0f\u3002","title":"1.0.0"},{"location":"implementation-guide/security/","text":"\u5b89\u5168 \u5f53\u60a8\u5728 AWS \u57fa\u7840\u8bbe\u65bd\u4e0a\u6784\u5efa\u7cfb\u7edf\u65f6\uff0c\u5b89\u5168\u8d23\u4efb\u7531\u60a8\u548c AWS \u5171\u540c\u627f\u62c5\u3002\u56e0\u4e3a AWS \u8fd0\u8425\u3001\u7ba1\u7406\u548c\u63a7\u5236\u5305\u62ec\u4e3b\u673a\u5728\u5185\u7684\u7ec4\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u3001\u865a\u62df\u5316\u5c42\u4ee5\u53ca\u670d\u52a1\u8fd0\u884c\u6240\u5728\u8bbe\u65bd\u7684\u7269\u7406\u5b89\u5168\u6027\uff0c \u8fd9\u4e2a \u5171\u4eab\u6a21\u578b \u5c06 \u51cf\u8f7b\u60a8\u7684\u8fd0\u8425\u8d1f\u62c5\u3002 \u6709\u5173 AWS \u5b89\u5168\u6027\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS \u4e91\u5b89\u5168\u6027 \u3002 IAM \u89d2\u8272 AWS Identity and Access Management (IAM) \u89d2\u8272\u5141\u8bb8\u5ba2\u6237\u5206\u914d\u7cbe\u7ec6\u7684\u8bbf\u95ee\u7b56\u7565\u548c\u6743\u9650 \u5230 AWS \u4e91\u4e0a\u7684\u670d\u52a1\u548c\u7528\u6237\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u6388\u4e88\u89e3\u51b3\u65b9\u6848\u7684 AWS Lambda \u51fd\u6570\u7684 IAM \u89d2\u8272\uff0c AWS AppSync \u548c Amazon Cognito \u8bbf\u95ee\u4ee5\u521b\u5efa\u533a\u57df\u8d44\u6e90\u3002 \u5b89\u5168\u7ec4 \u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\u65e8\u5728\u63a7\u5236\u548c\u9694\u79bb\u89e3\u51b3\u65b9\u6848\u4e4b\u95f4\u7684\u7f51\u7edc\u6d41\u91cf\u6210\u5206\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u67e5\u770b\u5b89\u5168\u7ec4\u5e76\u5728\u90e8\u7f72\u540e\u6839\u636e\u9700\u8981\u8fdb\u4e00\u6b65\u9650\u5236\u8bbf\u95ee\u3002 Amazon CloudFront \u6b64\u89e3\u51b3\u65b9\u6848\u5c06\u90e8\u7f72\u6258\u7ba1\u5728 Amazon Simple Storage Service (Amazon S3) \u5b58\u50a8\u6876\u4e2d\u7684 Web \u63a7\u5236\u53f0\u3002\u4e3a\u4e86\u5e2e\u52a9\u51cf\u5c11 \u5ef6\u8fdf\u5e76\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5305\u62ec\u5177\u6709\u539f\u59cb\u8bbf\u95ee\u8eab\u4efd\u7684 Amazon CloudFront \u5206\u914d\uff0c \u8fd9\u662f\u4e00\u4e2a CloudFront \u7528\u6237\uff0c\u63d0\u4f9b\u5bf9\u89e3\u51b3\u65b9\u6848\u7684\u7f51\u7ad9\u5b58\u50a8\u6876\u5185\u5bb9\u7684\u516c\u5171\u8bbf\u95ee\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528\u6e90\u8bbf\u95ee\u8eab\u4efd\u9650\u5236\u5bf9 Amazon S3 \u5185\u5bb9\u7684\u8bbf\u95ee \u3002","title":"\u5b89\u5168"},{"location":"implementation-guide/security/#_1","text":"\u5f53\u60a8\u5728 AWS \u57fa\u7840\u8bbe\u65bd\u4e0a\u6784\u5efa\u7cfb\u7edf\u65f6\uff0c\u5b89\u5168\u8d23\u4efb\u7531\u60a8\u548c AWS \u5171\u540c\u627f\u62c5\u3002\u56e0\u4e3a AWS \u8fd0\u8425\u3001\u7ba1\u7406\u548c\u63a7\u5236\u5305\u62ec\u4e3b\u673a\u5728\u5185\u7684\u7ec4\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u3001\u865a\u62df\u5316\u5c42\u4ee5\u53ca\u670d\u52a1\u8fd0\u884c\u6240\u5728\u8bbe\u65bd\u7684\u7269\u7406\u5b89\u5168\u6027\uff0c \u8fd9\u4e2a \u5171\u4eab\u6a21\u578b \u5c06 \u51cf\u8f7b\u60a8\u7684\u8fd0\u8425\u8d1f\u62c5\u3002 \u6709\u5173 AWS \u5b89\u5168\u6027\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS \u4e91\u5b89\u5168\u6027 \u3002","title":"\u5b89\u5168"},{"location":"implementation-guide/security/#iam","text":"AWS Identity and Access Management (IAM) \u89d2\u8272\u5141\u8bb8\u5ba2\u6237\u5206\u914d\u7cbe\u7ec6\u7684\u8bbf\u95ee\u7b56\u7565\u548c\u6743\u9650 \u5230 AWS \u4e91\u4e0a\u7684\u670d\u52a1\u548c\u7528\u6237\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u521b\u5efa\u6388\u4e88\u89e3\u51b3\u65b9\u6848\u7684 AWS Lambda \u51fd\u6570\u7684 IAM \u89d2\u8272\uff0c AWS AppSync \u548c Amazon Cognito \u8bbf\u95ee\u4ee5\u521b\u5efa\u533a\u57df\u8d44\u6e90\u3002","title":"IAM \u89d2\u8272"},{"location":"implementation-guide/security/#_2","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\u65e8\u5728\u63a7\u5236\u548c\u9694\u79bb\u89e3\u51b3\u65b9\u6848\u4e4b\u95f4\u7684\u7f51\u7edc\u6d41\u91cf\u6210\u5206\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u67e5\u770b\u5b89\u5168\u7ec4\u5e76\u5728\u90e8\u7f72\u540e\u6839\u636e\u9700\u8981\u8fdb\u4e00\u6b65\u9650\u5236\u8bbf\u95ee\u3002","title":"\u5b89\u5168\u7ec4"},{"location":"implementation-guide/security/#amazon-cloudfront","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u5c06\u90e8\u7f72\u6258\u7ba1\u5728 Amazon Simple Storage Service (Amazon S3) \u5b58\u50a8\u6876\u4e2d\u7684 Web \u63a7\u5236\u53f0\u3002\u4e3a\u4e86\u5e2e\u52a9\u51cf\u5c11 \u5ef6\u8fdf\u5e76\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u5305\u62ec\u5177\u6709\u539f\u59cb\u8bbf\u95ee\u8eab\u4efd\u7684 Amazon CloudFront \u5206\u914d\uff0c \u8fd9\u662f\u4e00\u4e2a CloudFront \u7528\u6237\uff0c\u63d0\u4f9b\u5bf9\u89e3\u51b3\u65b9\u6848\u7684\u7f51\u7ad9\u5b58\u50a8\u6876\u5185\u5bb9\u7684\u516c\u5171\u8bbf\u95ee\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528\u6e90\u8bbf\u95ee\u8eab\u4efd\u9650\u5236\u5bf9 Amazon S3 \u5185\u5bb9\u7684\u8bbf\u95ee \u3002","title":"Amazon CloudFront"},{"location":"implementation-guide/solution-components/","text":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6 \u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a \u57df\u7ba1\u7406 \u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (AOS) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 AOS \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 AOS \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a AOS \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002 \u5206\u6790\u7ba1\u9053 \u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002 Log Hub \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/solution-components/#_1","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u7531\u4ee5\u4e0b\u7ec4\u4ef6\u7ec4\u6210\uff1a","title":"\u89e3\u51b3\u65b9\u6848\u7ec4\u4ef6"},{"location":"implementation-guide/solution-components/#_2","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u4f7f\u7528 Amazon OpenSearch Service (AOS) \u4f5c\u4e3a\u5e95\u5c42\u5f15\u64ce\u6765\u5b58\u50a8\u548c\u5206\u6790\u65e5\u5fd7\u3002\u60a8\u53ef\u4ee5\u5bfc\u5165\u73b0\u6709\u7684 AOS \u57df\u4ee5\u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e3a VPC \u5185\u7684 AOS \u4eea\u8868\u677f\u63d0\u4f9b\u8bbf\u95ee\u4ee3\u7406\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4e3a AOS \u8bbe\u7f6e\u63a8\u8350\u7684 CloudWatch \u544a\u8b66\u3002","title":"\u57df\u7ba1\u7406"},{"location":"implementation-guide/solution-components/#_3","text":"\u65e5\u5fd7\u7ba1\u9053\u5305\u62ec\u4e00\u7cfb\u5217\u65e5\u5fd7\u5904\u7406\u6b65\u9aa4\uff0c\u5305\u62ec\u4ece\u6e90\u6536\u96c6\u65e5\u5fd7\u3001\u5904\u7406\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch \u670d\u52a1\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002 Log Hub \u652f\u6301 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u548c\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002","title":"\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/solution-components/#_4","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9 AWS \u670d\u52a1\u65e5\u5fd7\u8fdb\u884c\u5f00\u7bb1\u5373\u7528\u7684\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Amazon S3 \u8bbf\u95ee\u65e5\u5fd7\u548c ELB \u8bbf\u95ee\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u65e8\u5728\u964d\u4f4e\u4e3a\u5177\u6709\u4e0d\u540c\u683c\u5f0f\u7684\u4e0d\u540c AWS \u670d\u52a1\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u7684\u590d\u6742\u6027\u3002","title":"\u670d\u52a1\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/solution-components/#_5","text":"\u8be5\u89e3\u51b3\u65b9\u6848\u652f\u6301\u5bf9\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5f00\u7bb1\u5373\u7528\u65e5\u5fd7\u5206\u6790\uff0c\u4f8b\u5982 Nginx/Apache \u65e5\u5fd7\u6216\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u89e3\u6790\u5668\u7684\u4e00\u822c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002\u8be5\u7ec4\u4ef6\u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u5e95\u5c42\u65e5\u5fd7\u4ee3\u7406\u4ece\u5e94\u7528\u670d\u52a1\u5668\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5141\u8bb8\u60a8\u8f7b\u677e\u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406\u5e76\u901a\u8fc7\u7cfb\u7edf\u7ba1\u7406\u5668\u76d1\u63a7\u4ee3\u7406\u5065\u5eb7\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/trouble-shooting/","text":"\u6545\u969c\u6392\u67e5 \u4ee5\u4e0b\u4ecb\u7ecd\u5728\u4f7f\u7528 Log Hub \u65f6\u53ef\u80fd\u9047\u5230\u7684\u9519\u8bef\u6216\u95ee\u9898\uff0c\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002 Error: Failed to assume service-linked role arn:x:x:x:/AWSServiceRoleForAppSync \u51fa\u73b0\u6b64\u9519\u8bef\u7684\u539f\u56e0\u662f\u8be5\u8d26\u6237\u4ece\u672a\u4f7f\u7528\u8fc7 AWS AppSync \u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u518d\u6b21\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u6a21\u677f\u3002\u5f53\u60a8\u9047\u5230\u9519\u8bef\u65f6\uff0cAWS \u5df2\u7ecf\u81ea\u52a8\u521b\u5efa\u4e86\u89d2\u8272\u3002 \u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 AWS CloudShell \u6216\u672c\u5730\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b AWS CLI \u547d\u4ee4\u4ee5\u94fe\u63a5 AppSync \u89d2\u8272\uff1a aws iam create-service-linked-role --aws-service-name appsync.amazonaws.com Error: Unable to add backend role Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 AOS \u57df\u3002 \u60a8\u9700\u8981\u8f6c\u5230 AOS \u63a7\u5236\u53f0\uff0c\u5e76\u7f16\u8f91 AOS \u57df\u7684 \u8bbf\u95ee\u7b56\u7565 \u3002 Error\uff1aUser xxx is not authorized to perform sts:AssumeRole on resource \u5982\u679c\u51fa\u73b0\u4e86\u6b21\u9519\u8bef\uff0c\u8bf7\u5148\u786e\u4fdd\u60a8\u5728 \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u8bbe\u7f6e \u4e2d\u6b63\u786e\u586b\u5199\u4e86\u6240\u6709\u4fe1\u606f\u3002\u7136\u540e\u8bf7\u7b49\u5f85\u5927\u7ea61\u5206\u949f\u5de6\u53f3\u540e\u518d\u91cd\u8bd5\u3002 Log Hub \u4f7f\u7528\u4e86 AssumeRole \u6765\u5217\u51fa\u6216\u521b\u5efa\u60a8\u6210\u5458\u8d26\u6237\u4e2d\u7684 AWS \u8d44\u6e90\u3002 \u8fd9\u4e9b IAM \u89d2\u8272\u662f\u5728\u60a8 \u8bbe\u7f6e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u65f6\u88ab\u521b\u5efa\u7684\uff0c\u4ed6\u4eec\u9700\u8981\u51e0\u79d2\u949f\u6216\u8005\u51e0\u5206\u949f\u7684\u65f6\u95f4\u624d\u80fd\u751f\u6548\u3002 Error: PutRecords API responded with error='InvalidSignatureException' Fluent-bit agent \u62a5\u9519 PutRecords API responded with error='InvalidSignatureException', message='The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.' \u8bf7\u91cd\u542f fluent-bit agent. \u6bd4\u5982\u5728 Amazon Linux2 \u7684 EC2 \u4e2d, \u8fd0\u884c\u4e00\u4e0b\u547d\u4ee4: sudo service fluent-bit restart Error: PutRecords API responded with error='AccessDeniedException' Fluent-bit agent\u5728EKS\u96c6\u7fa4\u4e2d\u5411Kinesis\u53d1\u9001\u65e5\u5fd7\u65f6\u6c47\u62a5\u4e86\"AccessDeniedException\"\u9519\u8bef \u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u8bbe\u7f6e IAM \u89d2\u8272\u4fe1\u4efb\u5173\u7cfb \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0: \u6253\u5f00 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9\u8981\u68c0\u67e5\u7684EKS\u96c6\u7fa4 \u70b9\u51fb IAM \u89d2\u8272 ARN \uff0c \u8fd9\u4f1a\u5728 AWS \u63a7\u5236\u53f0\u4e2d\u6253\u5f00 IAM \u89d2\u8272\u3002 \u9009\u62e9 \u4fe1\u4efb\u5173\u7cfb \u9009\u9879\u5361\u4ee5\u9a8c\u8bc1 OIDC \u63d0\u4f9b\u65b9, \u670d\u52a1\u8d26\u6237\u547d\u540d\u7a7a\u95f4\u4ee5\u53ca\u6761\u4ef6\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u524d\u5f80 Amazon EKS IAM role configuration \u83b7\u5f97\u66f4\u591a\u4fe1\u606f","title":"\u6545\u969c\u6392\u67e5"},{"location":"implementation-guide/trouble-shooting/#_1","text":"\u4ee5\u4e0b\u4ecb\u7ecd\u5728\u4f7f\u7528 Log Hub \u65f6\u53ef\u80fd\u9047\u5230\u7684\u9519\u8bef\u6216\u95ee\u9898\uff0c\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002","title":"\u6545\u969c\u6392\u67e5"},{"location":"implementation-guide/trouble-shooting/#error-failed-to-assume-service-linked-role-arnxxxawsserviceroleforappsync","text":"\u51fa\u73b0\u6b64\u9519\u8bef\u7684\u539f\u56e0\u662f\u8be5\u8d26\u6237\u4ece\u672a\u4f7f\u7528\u8fc7 AWS AppSync \u670d\u52a1\u3002\u60a8\u53ef\u4ee5\u518d\u6b21\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u6a21\u677f\u3002\u5f53\u60a8\u9047\u5230\u9519\u8bef\u65f6\uff0cAWS \u5df2\u7ecf\u81ea\u52a8\u521b\u5efa\u4e86\u89d2\u8272\u3002 \u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 AWS CloudShell \u6216\u672c\u5730\u7ec8\u7aef\u5e76\u8fd0\u884c\u4ee5\u4e0b AWS CLI \u547d\u4ee4\u4ee5\u94fe\u63a5 AppSync \u89d2\u8272\uff1a aws iam create-service-linked-role --aws-service-name appsync.amazonaws.com","title":"Error: Failed to assume service-linked role arn:x:x:x:/AWSServiceRoleForAppSync"},{"location":"implementation-guide/trouble-shooting/#error-unable-to-add-backend-role","text":"Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 AOS \u57df\u3002 \u60a8\u9700\u8981\u8f6c\u5230 AOS \u63a7\u5236\u53f0\uff0c\u5e76\u7f16\u8f91 AOS \u57df\u7684 \u8bbf\u95ee\u7b56\u7565 \u3002","title":"Error: Unable to add backend role"},{"location":"implementation-guide/trouble-shooting/#erroruser-xxx-is-not-authorized-to-perform-stsassumerole-on-resource","text":"\u5982\u679c\u51fa\u73b0\u4e86\u6b21\u9519\u8bef\uff0c\u8bf7\u5148\u786e\u4fdd\u60a8\u5728 \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u8bbe\u7f6e \u4e2d\u6b63\u786e\u586b\u5199\u4e86\u6240\u6709\u4fe1\u606f\u3002\u7136\u540e\u8bf7\u7b49\u5f85\u5927\u7ea61\u5206\u949f\u5de6\u53f3\u540e\u518d\u91cd\u8bd5\u3002 Log Hub \u4f7f\u7528\u4e86 AssumeRole \u6765\u5217\u51fa\u6216\u521b\u5efa\u60a8\u6210\u5458\u8d26\u6237\u4e2d\u7684 AWS \u8d44\u6e90\u3002 \u8fd9\u4e9b IAM \u89d2\u8272\u662f\u5728\u60a8 \u8bbe\u7f6e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6 \u65f6\u88ab\u521b\u5efa\u7684\uff0c\u4ed6\u4eec\u9700\u8981\u51e0\u79d2\u949f\u6216\u8005\u51e0\u5206\u949f\u7684\u65f6\u95f4\u624d\u80fd\u751f\u6548\u3002","title":"Error\uff1aUser xxx is not authorized to perform sts:AssumeRole on resource"},{"location":"implementation-guide/trouble-shooting/#error-putrecords-api-responded-with-errorinvalidsignatureexception","text":"Fluent-bit agent \u62a5\u9519 PutRecords API responded with error='InvalidSignatureException', message='The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.' \u8bf7\u91cd\u542f fluent-bit agent. \u6bd4\u5982\u5728 Amazon Linux2 \u7684 EC2 \u4e2d, \u8fd0\u884c\u4e00\u4e0b\u547d\u4ee4: sudo service fluent-bit restart","title":"Error: PutRecords API responded with error='InvalidSignatureException'"},{"location":"implementation-guide/trouble-shooting/#error-putrecords-api-responded-with-erroraccessdeniedexception","text":"Fluent-bit agent\u5728EKS\u96c6\u7fa4\u4e2d\u5411Kinesis\u53d1\u9001\u65e5\u5fd7\u65f6\u6c47\u62a5\u4e86\"AccessDeniedException\"\u9519\u8bef","title":"Error: PutRecords API responded with error='AccessDeniedException'"},{"location":"implementation-guide/trouble-shooting/#iam","text":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0: \u6253\u5f00 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u9009\u62e9\u8981\u68c0\u67e5\u7684EKS\u96c6\u7fa4 \u70b9\u51fb IAM \u89d2\u8272 ARN \uff0c \u8fd9\u4f1a\u5728 AWS \u63a7\u5236\u53f0\u4e2d\u6253\u5f00 IAM \u89d2\u8272\u3002 \u9009\u62e9 \u4fe1\u4efb\u5173\u7cfb \u9009\u9879\u5361\u4ee5\u9a8c\u8bc1 OIDC \u63d0\u4f9b\u65b9, \u670d\u52a1\u8d26\u6237\u547d\u540d\u7a7a\u95f4\u4ee5\u53ca\u6761\u4ef6\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u524d\u5f80 Amazon EKS IAM role configuration \u83b7\u5f97\u66f4\u591a\u4fe1\u606f","title":"\u9a8c\u8bc1\u662f\u5426\u6b63\u786e\u8bbe\u7f6e IAM \u89d2\u8272\u4fe1\u4efb\u5173\u7cfb"},{"location":"implementation-guide/uninstall/","text":"\u5378\u8f7d Log Hub \u8b66\u544a \u5982\u679c\u5728\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\u4e4b\u524d\u5220\u9664 Log Hub \u4e3b\u5806\u6808\uff0c\u60a8\u5c06\u9047\u5230 IAM \u89d2\u8272\u4e22\u5931\u9519\u8bef\u3002 Log Hub \u63a7\u5236\u53f0\u542f\u52a8\u989d\u5916\u7684 CloudFormation \u5806\u6808\u4ee5\u6444\u53d6\u65e5\u5fd7\u3002 \u5982\u679c\u8981\u5378\u8f7d Log Hub \u89e3\u51b3\u65b9\u6848\u3002 \u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5378\u8f7d\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\uff08\u5305\u62ec AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff09\u3002 \u6b65\u9aa4 1. \u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053 \u91cd\u8981 \u8bf7\u5728\u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u524d\uff0c\u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u5185\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6\u3002 \u767b\u9646 Log Hub \u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u4e00\u6761\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u67e5\u770b\u8be6\u60c5\u3002 \u5728 \u6444\u53d6 \u9009\u9879\u5361\u4e2d, \u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u4e2d\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6. \u5378\u8f7d/\u505c\u7528 Fluent Bit \u4ee3\u7406. EC2 (\u53ef\u9009): \u4ece EC2 \u5b9e\u4f8b\u7ec4\u4e2d\u5220\u9664\u65e5\u5fd7\u63d0\u53d6\u540e\u3002 Fluent Bit \u5c06\u81ea\u52a8\u505c\u6b62\u53d1\u9001\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u60a8\u7684\u5b9e\u4f8b\u4e2d\u505c\u6b62 Fluent Bit\u3002 \u4ee5\u4e0b\u662f\u505c\u6b62 Fluent Bit \u4ee3\u7406\u7684\u547d\u4ee4\u3002 sudo service fluent-bit stop sudo systemctl disable fluent-bit.service EKS DaemonSet (\u5fc5\u987b): \u5982\u679c\u60a8\u9009\u62e9\u4f7f\u7528 DaemonSet \u90e8\u7f72 Fluent Bit \u4ee3\u7406\uff0c\u5219\u9700\u8981\u5220\u9664\u60a8\u7684 Fluent Bit \u4ee3\u7406\u3002 \u5426\u5219\uff0c\u4ee3\u7406\u5c06\u7ee7\u7eed\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Log Hub \u7ba1\u9053\u3002 kubectl delete -f ~/fluent-bit-logging.yaml EKS SideCar\uff08\u5fc5\u987b\uff09: \u8bf7\u5728\u60a8\u7684 .yaml \u6587\u4ef6\u4e2d\u5220\u9664 Fluent Bit\uff0c\u5e76\u91cd\u542f\u60a8\u7684\u5e94\u7528. \u5220\u9664\u8be5\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5bf9\u4e8e\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u8bf7\u91cd\u590d\u7b2c2\u6b65\u81f3\u7b2c5\u6b65\u6765\u5220\u9664\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\u3002 \u6b65\u9aa4 2. \u5220\u9664 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u767b\u9646 Log Hub \u63a7\u5236\u53f0, \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u8bf7\u9010\u4e00\u5220\u9664\u60a8\u521b\u5efa\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053 \u6b65\u9aa4 3. \u6e05\u9664\u5bfc\u5165\u7684 AOS \u57df \u5220\u9664\u8bbf\u95ee\u4ee3\u7406 \u5220\u9664 Log Hub \u521b\u5efa\u7684\u544a\u8b66 \u5220\u9664 Log Hub \u7684 VPC \u548c AOS \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002 \u524d\u5f80 AWS VPC \u63a7\u5236\u53f0 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u70b9\u51fb \u5bf9\u7b49\u8fde\u63a5 \u3002 \u627e\u5230\u5e76\u5220\u9664 Log Hub \u7684 VPC \u548c AOS \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002\u5982\u679c\u60a8\u5728\u5bfc\u5165 OpenSearch \u57df\u65f6\u6ca1\u6709\u4f7f\u7528\u201c\u81ea\u52a8\u201d\u6a21\u5f0f\uff0c\u60a8\u53ef\u80fd\u6ca1\u6709\u5bf9\u7b49\u8fde\u63a5\u3002 \u5220\u9664\u5bfc\u5165\u7684 AOS \u57df. (\u4ece Log Hub \u4e2d\u5220\u9664 AOS \u57df\u4e0d\u4f1a\u5f71\u54cd\u5230 AWS \u8d26\u6237\u4e2d\u7684 AOS \u57df\u3002) \u6b65\u9aa4 4. \u5220\u9664 Log Hub \u8bbf\u95ee CloudFormation \u63a7\u5236\u53f0 \u3002 \u627e\u5230 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 (\u53ef\u9009) \u5220\u9664 Log Hub \u521b\u5efa\u7684 S3 \u6876. \u91cd\u8981 \u5305\u542b LoggingBucket \u5b57\u6bb5\u7684 S3 \u6876\u662f Log Hub \u521b\u5efa\u7684\u65e5\u5fd7\u6876. \u60a8\u53ef\u80fd\u5df2\u7ecf\u5728\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u65f6\u542f\u7528\u4e86\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\uff0c\u5e76\u5c06\u65e5\u5fd7\u6536\u96c6\u5230\u8be5 S3 \u6876\u4e2d\u3002 \u5220\u9664\u8be5 S3 \u6876\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\u53d1\u9001\u5931\u8d25\u3002 \u627e\u5230 Log Hub \u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u5806\u6808\uff0c\u70b9\u51fb \u8d44\u6e90 \u9009\u9879\u5361\u3002 \u5728\u641c\u7d22\u680f\u4e2d\u8f93\u5165 AWS::S3::Bucket \u3002\u8fd9\u6837\u80fd\u663e\u793a\u6240\u6709 Log Hub \u521b\u5efa\u7684 S3 \u6876, S3 \u6876\u7684\u540d\u5b57\u53ef\u4ee5\u5728 Physical ID \u8fd9\u4e00\u680f\u4e2d\u770b\u5230\u3002 \u767b\u9646 AWS \u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5e76\u524d\u5f80 S3 \u670d\u52a1\u3002\u901a\u8fc7 S3 \u6876\u7684\u540d\u5b57\u627e\u5230\u5bf9\u5e94\u7684 S3 \u6876. \u6e05\u7a7a \u5e76 \u5220\u9664 \u8be5 S3 \u6876. \u5220\u9664 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808","title":"\u5378\u8f7d\u89e3\u51b3\u65b9\u6848"},{"location":"implementation-guide/uninstall/#log-hub","text":"\u8b66\u544a \u5982\u679c\u5728\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\u4e4b\u524d\u5220\u9664 Log Hub \u4e3b\u5806\u6808\uff0c\u60a8\u5c06\u9047\u5230 IAM \u89d2\u8272\u4e22\u5931\u9519\u8bef\u3002 Log Hub \u63a7\u5236\u53f0\u542f\u52a8\u989d\u5916\u7684 CloudFormation \u5806\u6808\u4ee5\u6444\u53d6\u65e5\u5fd7\u3002 \u5982\u679c\u8981\u5378\u8f7d Log Hub \u89e3\u51b3\u65b9\u6848\u3002 \u6211\u4eec\u5efa\u8bae\u60a8\u5728\u5378\u8f7d\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\u5220\u9664\u65e5\u5fd7\u7ba1\u9053\uff08\u5305\u62ec AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\uff09\u3002","title":"\u5378\u8f7d Log Hub"},{"location":"implementation-guide/uninstall/#1","text":"\u91cd\u8981 \u8bf7\u5728\u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u524d\uff0c\u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u5185\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6\u3002 \u767b\u9646 Log Hub \u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u9009\u62e9\u4e00\u6761\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\uff0c\u67e5\u770b\u8be6\u60c5\u3002 \u5728 \u6444\u53d6 \u9009\u9879\u5361\u4e2d, \u5220\u9664\u8be5\u65e5\u5fd7\u7ba1\u9053\u4e2d\u6240\u6709\u7684\u65e5\u5fd7\u6444\u53d6. \u5378\u8f7d/\u505c\u7528 Fluent Bit \u4ee3\u7406. EC2 (\u53ef\u9009): \u4ece EC2 \u5b9e\u4f8b\u7ec4\u4e2d\u5220\u9664\u65e5\u5fd7\u63d0\u53d6\u540e\u3002 Fluent Bit \u5c06\u81ea\u52a8\u505c\u6b62\u53d1\u9001\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u60a8\u7684\u5b9e\u4f8b\u4e2d\u505c\u6b62 Fluent Bit\u3002 \u4ee5\u4e0b\u662f\u505c\u6b62 Fluent Bit \u4ee3\u7406\u7684\u547d\u4ee4\u3002 sudo service fluent-bit stop sudo systemctl disable fluent-bit.service EKS DaemonSet (\u5fc5\u987b): \u5982\u679c\u60a8\u9009\u62e9\u4f7f\u7528 DaemonSet \u90e8\u7f72 Fluent Bit \u4ee3\u7406\uff0c\u5219\u9700\u8981\u5220\u9664\u60a8\u7684 Fluent Bit \u4ee3\u7406\u3002 \u5426\u5219\uff0c\u4ee3\u7406\u5c06\u7ee7\u7eed\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Log Hub \u7ba1\u9053\u3002 kubectl delete -f ~/fluent-bit-logging.yaml EKS SideCar\uff08\u5fc5\u987b\uff09: \u8bf7\u5728\u60a8\u7684 .yaml \u6587\u4ef6\u4e2d\u5220\u9664 Fluent Bit\uff0c\u5e76\u91cd\u542f\u60a8\u7684\u5e94\u7528. \u5220\u9664\u8be5\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053\u3002 \u5bf9\u4e8e\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\uff0c\u8bf7\u91cd\u590d\u7b2c2\u6b65\u81f3\u7b2c5\u6b65\u6765\u5220\u9664\u6240\u6709\u7684\u65e5\u5fd7\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 1. \u5220\u9664\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/uninstall/#2-aws","text":"\u767b\u9646 Log Hub \u63a7\u5236\u53f0, \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u8bf7\u9010\u4e00\u5220\u9664\u60a8\u521b\u5efa\u7684 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053","title":"\u6b65\u9aa4 2. \u5220\u9664 AWS \u670d\u52a1\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/uninstall/#3-aos","text":"\u5220\u9664\u8bbf\u95ee\u4ee3\u7406 \u5220\u9664 Log Hub \u521b\u5efa\u7684\u544a\u8b66 \u5220\u9664 Log Hub \u7684 VPC \u548c AOS \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002 \u524d\u5f80 AWS VPC \u63a7\u5236\u53f0 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u70b9\u51fb \u5bf9\u7b49\u8fde\u63a5 \u3002 \u627e\u5230\u5e76\u5220\u9664 Log Hub \u7684 VPC \u548c AOS \u57df\u7684 VPC \u5efa\u7acb\u7684\u5bf9\u7b49\u94fe\u63a5\u3002\u5982\u679c\u60a8\u5728\u5bfc\u5165 OpenSearch \u57df\u65f6\u6ca1\u6709\u4f7f\u7528\u201c\u81ea\u52a8\u201d\u6a21\u5f0f\uff0c\u60a8\u53ef\u80fd\u6ca1\u6709\u5bf9\u7b49\u8fde\u63a5\u3002 \u5220\u9664\u5bfc\u5165\u7684 AOS \u57df. (\u4ece Log Hub \u4e2d\u5220\u9664 AOS \u57df\u4e0d\u4f1a\u5f71\u54cd\u5230 AWS \u8d26\u6237\u4e2d\u7684 AOS \u57df\u3002)","title":"\u6b65\u9aa4 3. \u6e05\u9664\u5bfc\u5165\u7684 AOS \u57df"},{"location":"implementation-guide/uninstall/#4-log-hub","text":"\u8bbf\u95ee CloudFormation \u63a7\u5236\u53f0 \u3002 \u627e\u5230 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 (\u53ef\u9009) \u5220\u9664 Log Hub \u521b\u5efa\u7684 S3 \u6876. \u91cd\u8981 \u5305\u542b LoggingBucket \u5b57\u6bb5\u7684 S3 \u6876\u662f Log Hub \u521b\u5efa\u7684\u65e5\u5fd7\u6876. \u60a8\u53ef\u80fd\u5df2\u7ecf\u5728\u6444\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u65f6\u542f\u7528\u4e86\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\uff0c\u5e76\u5c06\u65e5\u5fd7\u6536\u96c6\u5230\u8be5 S3 \u6876\u4e2d\u3002 \u5220\u9664\u8be5 S3 \u6876\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u670d\u52a1\u65e5\u5fd7\u53d1\u9001\u5931\u8d25\u3002 \u627e\u5230 Log Hub \u89e3\u51b3\u65b9\u6848\u7684 CloudFormation \u5806\u6808\uff0c\u70b9\u51fb \u8d44\u6e90 \u9009\u9879\u5361\u3002 \u5728\u641c\u7d22\u680f\u4e2d\u8f93\u5165 AWS::S3::Bucket \u3002\u8fd9\u6837\u80fd\u663e\u793a\u6240\u6709 Log Hub \u521b\u5efa\u7684 S3 \u6876, S3 \u6876\u7684\u540d\u5b57\u53ef\u4ee5\u5728 Physical ID \u8fd9\u4e00\u680f\u4e2d\u770b\u5230\u3002 \u767b\u9646 AWS \u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5e76\u524d\u5f80 S3 \u670d\u52a1\u3002\u901a\u8fc7 S3 \u6876\u7684\u540d\u5b57\u627e\u5230\u5bf9\u5e94\u7684 S3 \u6876. \u6e05\u7a7a \u5e76 \u5220\u9664 \u8be5 S3 \u6876. \u5220\u9664 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808","title":"\u6b65\u9aa4 4. \u5220\u9664 Log Hub"},{"location":"implementation-guide/upgrade/","text":"\u5347\u7ea7 Log Hub \u90e8\u7f72\u65f6\u95f4 : \u5927\u7ea6 20 \u5206\u949f \u5347\u7ea7\u6982\u8ff0 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u5347\u7ea7\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u66f4\u65b0 CloudFormation \u5806\u6808 \u6b65\u9aa4 2. \u89e6\u53d1 Lambda \u4ee5\u66f4\u65b0\u7f51\u9875\u914d\u7f6e \u6b65\u9aa4 3. \u5728 CloudFront \u521b\u5efa\u5931\u6548 \u6b65\u9aa4 4. \u5237\u65b0\u7f51\u9875\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u66f4\u65b0 CloudFormation \u5806\u6808 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u4e3b\u5806\u6808, \u70b9\u51fb \u66f4\u65b0 \u6309\u94ae\u3002 \u9009\u62e9 \u66ff\u6362\u5f53\u524d\u6a21\u677f \uff0c\u6839\u636e\u60a8\u6700\u521d\u90e8\u7f72\u7684\u7c7b\u578b\u5728 Amazon S3 URL \u4e2d\u8f93\u5165\u6a21\u677f\u94fe\u63a5. \u7c7b\u578b \u94fe\u63a5 \u4f7f\u7528 Cognito User Pool, \u5e76\u521b\u5efa\u65b0 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHub.template \u4f7f\u7528 Cognito User Pool, \u5e76\u4f7f\u7528\u5df2\u6709\u7684 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHubFromExistingVPC.template \u4f7f\u7528 OpenID Connect, \u5e76\u521b\u5efa\u65b0 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHubWithOIDC.template \u4f7f\u7528 OpenID Connect, \u5e76\u4f7f\u7528\u5df2\u6709\u7684 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHubFromExistingVPCWithOIDC.template \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u66f4\u65b0\u5806\u6808 \u66f4\u65b0\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 UPDATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 2. \u751f\u6210\u65b0\u7684 Web \u63a7\u5236\u53f0\u914d\u7f6e\u6587\u4ef6 \u5806\u6808\u66f4\u65b0\u6210\u529f\u540e\uff0c\u9700\u8981\u751f\u6210\u63a7\u5236\u53f0\u914d\u7f6e\u3002 Log Hub \u4f7f\u7528\u9884\u8bbe\u7684 Lambda \u751f\u6210\u914d\u7f6e\u6587\u4ef6\u3002 \u767b\u5f55 AWS Lambda \u63a7\u5236\u53f0 . \u641c\u7d22 WebConsoleWebConfig \u3002Lambda \u51fd\u6570\u540d\u79f0\u5c06\u7c7b\u4f3c\u4e8e SolutionName-WebConsoleWebConfigXXXXX-XXXX \u5728 \u6d4b\u8bd5 \u9875\u9762\u4e2d\uff0c\u4f7f\u7528\u4efb\u610f\u7684\u4e8b\u4ef6\u540d\u79f0\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u4ef6\u3002 \u5355\u51fb \u6d4b\u8bd5 \u6309\u94ae\u4ee5\u89e6\u53d1 Lambda\uff0c\u5e76\u786e\u4fdd\u60a8\u770b\u5230 Put config file to S3 \u548c Put config file to S3 completed. \u65e5\u5fd7\u6d88\u606f\u3002 \u6b65\u9aa4 3. \u5728 CloudFront \u521b\u5efa CDN \u5237\u65b0 CloudFront \u5df2\u5728\u5176\u8fb9\u7f18\u8282\u70b9\u7f13\u5b58\u65e7\u7248\u672c\u7684 Log Hub \u63a7\u5236\u53f0\u3002 \u6211\u4eec\u9700\u8981\u5728 CloudFront \u63a7\u5236\u53f0\u4e0a\u521b\u5efa\u4e00\u4e2a\u5931\u6548\u4ee5 \u5f3a\u5236\u5220\u9664\u7f13\u5b58\u3002 \u60a8\u5fc5\u987b\u5728\u751f\u6210\u63a7\u5236\u53f0\u914d\u7f6e\u6587\u4ef6\u540e\u6267\u884c\u6b64\u64cd\u4f5c\u3002 \u767b\u5f55 AWS CloudFront \u63a7\u5236\u53f0 . \u9009\u62e9\u5e76\u70b9\u51fb Log Hub \u7684\u5206\u914d\u3002 \u5176\u8bf4\u660e\u7c7b\u4f3c\u4e8e SolutionName - Web Console Distribution (RegionName) \u3002 \u5728 \u5931\u6548 \u754c\u9762\uff0c\u70b9\u51fb \u521b\u5efa\u5931\u6548 \uff0c\u5e76\u4ee5 /* \u8def\u5f84\u521b\u5efa\u4e00\u4e2a\u5b9e\u6548\u3002 \u6b65\u9aa4 4. \u5237\u65b0\u7f51\u9875\u63a7\u5236\u53f0 \u73b0\u5728\u60a8\u5df2\u5b8c\u6210\u6240\u6709\u5347\u7ea7\u6b65\u9aa4\u3002 \u8bf7\u70b9\u51fb\u6d4f\u89c8\u5668\u4e2d\u7684 \u5237\u65b0 \u6309\u94ae\u3002 \u60a8\u53ef\u4ee5\u5728 Log Hub \u63a7\u5236\u53f0\u53f3\u4e0b\u89d2\u67e5\u770b\u65b0\u7248\u672c\u53f7\u3002 Upgrade Notice EC2 \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7 Log Hub \u5728 v1.1.0 \u4e4b\u540e\u66f4\u65b0\u4e86 IAM \u7b56\u7565\u3002 \u5982\u679c\u60a8\u5df2\u521b\u5efa \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u5728 Log Hub V1.0.X \u4e2d\uff0c\u5982\u679c\u60a8\u60f3\u5728 v1.1.0 \u6216\u66f4\u9ad8\u7248\u672c\u4e2d\u521b\u5efa\u65b0\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\uff0c\u60a8\u5c06\u6536\u5230\u4e00\u4e2a\u5347\u7ea7\u901a\u77e5\u5f39\u7a97\uff1a \u5355\u51fb \u5347\u7ea7 \u6309\u94ae\u5c06\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u5347\u7ea7\u5230\u5f53\u524d\u7248\u672c\uff0c \u6b64\u5347\u7ea7\u4e0d\u4f1a\u5f71\u54cd\u60a8\u5728 Log Hub V1.0.X \u4e2d\u521b\u5efa\u7684\u73b0\u6709\u65e5\u5fd7\u63d0\u53d6\u3002 \u4f46\u662f\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u521b\u5efa\u65b0\u7684\u6444\u53d6 \u4e4b\u524d\u5df2\u5c06 IAM \u7b56\u7565\u66f4\u65b0\u5230 EC2 \u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002 EKS \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7 Log Hub \u5728 v1.1.0 \u4e4b\u540e\u66f4\u65b0\u4e86\u4ece EKS \u4e2d\u6444\u53d6\u5e94\u7528\u65e5\u5fd7\u7684 \u67b6\u6784 . \u5728 v1.1.0 \u4e4b\u540e, \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLog Hub \u4f1a\u5c06 EKS \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7\u76f4\u63a5\u5199\u5165\u5230 OpenSearch \u4e2d\u3002 \u6b64\u5347\u7ea7\u4e0d\u4f1a\u5f71\u54cd\u60a8\u5728 Log Hub V1.0.X \u4e2d\u521b\u5efa\u7684\u73b0\u6709\u65e5\u5fd7\u63d0\u53d6 \u6bd4\u5982, \u60a8\u5df2\u7ecf\u5728 Log Hub v1.0.x \u4e2d\u521b\u5efa\u4e86 EKS \u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e14\u5728 Log Hub v1.1.0 \u4e2d\u521b\u5efa\u4e86\u65b0\u7684 EKS \u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u90a3\u4e48\u5bf9\u4e8e v1.0.x \u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u6444\u53d6\u5c06\u4ecd\u7136\u901a\u8fc7 Kinesis Data Stream \u628a\u65e5\u5fd7\u6444\u5165 OpenSearch\uff0c\u5bf9\u4e8e v1.1.0 \u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u6444\u53d6\u5c06\u76f4\u63a5\u53d1\u9001\u5230 OpenSearch\u3002","title":"\u66f4\u65b0\u89e3\u51b3\u65b9\u6848"},{"location":"implementation-guide/upgrade/#log-hub","text":"\u90e8\u7f72\u65f6\u95f4 : \u5927\u7ea6 20 \u5206\u949f","title":"\u5347\u7ea7 Log Hub"},{"location":"implementation-guide/upgrade/#_1","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u5347\u7ea7\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u66f4\u65b0 CloudFormation \u5806\u6808 \u6b65\u9aa4 2. \u89e6\u53d1 Lambda \u4ee5\u66f4\u65b0\u7f51\u9875\u914d\u7f6e \u6b65\u9aa4 3. \u5728 CloudFront \u521b\u5efa\u5931\u6548 \u6b65\u9aa4 4. \u5237\u65b0\u7f51\u9875\u63a7\u5236\u53f0","title":"\u5347\u7ea7\u6982\u8ff0"},{"location":"implementation-guide/upgrade/#1-cloudformation","text":"\u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u4e3b\u5806\u6808, \u70b9\u51fb \u66f4\u65b0 \u6309\u94ae\u3002 \u9009\u62e9 \u66ff\u6362\u5f53\u524d\u6a21\u677f \uff0c\u6839\u636e\u60a8\u6700\u521d\u90e8\u7f72\u7684\u7c7b\u578b\u5728 Amazon S3 URL \u4e2d\u8f93\u5165\u6a21\u677f\u94fe\u63a5. \u7c7b\u578b \u94fe\u63a5 \u4f7f\u7528 Cognito User Pool, \u5e76\u521b\u5efa\u65b0 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHub.template \u4f7f\u7528 Cognito User Pool, \u5e76\u4f7f\u7528\u5df2\u6709\u7684 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHubFromExistingVPC.template \u4f7f\u7528 OpenID Connect, \u5e76\u521b\u5efa\u65b0 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHubWithOIDC.template \u4f7f\u7528 OpenID Connect, \u5e76\u4f7f\u7528\u5df2\u6709\u7684 VPC https://aws-gcr-solutions.s3.amazonaws.com/log-hub/latest/LogHubFromExistingVPCWithOIDC.template \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u66f4\u65b0\u5806\u6808 \u66f4\u65b0\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 UPDATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 1. \u66f4\u65b0 CloudFormation \u5806\u6808"},{"location":"implementation-guide/upgrade/#2-web","text":"\u5806\u6808\u66f4\u65b0\u6210\u529f\u540e\uff0c\u9700\u8981\u751f\u6210\u63a7\u5236\u53f0\u914d\u7f6e\u3002 Log Hub \u4f7f\u7528\u9884\u8bbe\u7684 Lambda \u751f\u6210\u914d\u7f6e\u6587\u4ef6\u3002 \u767b\u5f55 AWS Lambda \u63a7\u5236\u53f0 . \u641c\u7d22 WebConsoleWebConfig \u3002Lambda \u51fd\u6570\u540d\u79f0\u5c06\u7c7b\u4f3c\u4e8e SolutionName-WebConsoleWebConfigXXXXX-XXXX \u5728 \u6d4b\u8bd5 \u9875\u9762\u4e2d\uff0c\u4f7f\u7528\u4efb\u610f\u7684\u4e8b\u4ef6\u540d\u79f0\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u4ef6\u3002 \u5355\u51fb \u6d4b\u8bd5 \u6309\u94ae\u4ee5\u89e6\u53d1 Lambda\uff0c\u5e76\u786e\u4fdd\u60a8\u770b\u5230 Put config file to S3 \u548c Put config file to S3 completed. \u65e5\u5fd7\u6d88\u606f\u3002","title":"\u6b65\u9aa4 2. \u751f\u6210\u65b0\u7684 Web \u63a7\u5236\u53f0\u914d\u7f6e\u6587\u4ef6"},{"location":"implementation-guide/upgrade/#3-cloudfront-cdn","text":"CloudFront \u5df2\u5728\u5176\u8fb9\u7f18\u8282\u70b9\u7f13\u5b58\u65e7\u7248\u672c\u7684 Log Hub \u63a7\u5236\u53f0\u3002 \u6211\u4eec\u9700\u8981\u5728 CloudFront \u63a7\u5236\u53f0\u4e0a\u521b\u5efa\u4e00\u4e2a\u5931\u6548\u4ee5 \u5f3a\u5236\u5220\u9664\u7f13\u5b58\u3002 \u60a8\u5fc5\u987b\u5728\u751f\u6210\u63a7\u5236\u53f0\u914d\u7f6e\u6587\u4ef6\u540e\u6267\u884c\u6b64\u64cd\u4f5c\u3002 \u767b\u5f55 AWS CloudFront \u63a7\u5236\u53f0 . \u9009\u62e9\u5e76\u70b9\u51fb Log Hub \u7684\u5206\u914d\u3002 \u5176\u8bf4\u660e\u7c7b\u4f3c\u4e8e SolutionName - Web Console Distribution (RegionName) \u3002 \u5728 \u5931\u6548 \u754c\u9762\uff0c\u70b9\u51fb \u521b\u5efa\u5931\u6548 \uff0c\u5e76\u4ee5 /* \u8def\u5f84\u521b\u5efa\u4e00\u4e2a\u5b9e\u6548\u3002","title":"\u6b65\u9aa4 3. \u5728 CloudFront \u521b\u5efa CDN \u5237\u65b0"},{"location":"implementation-guide/upgrade/#4","text":"\u73b0\u5728\u60a8\u5df2\u5b8c\u6210\u6240\u6709\u5347\u7ea7\u6b65\u9aa4\u3002 \u8bf7\u70b9\u51fb\u6d4f\u89c8\u5668\u4e2d\u7684 \u5237\u65b0 \u6309\u94ae\u3002 \u60a8\u53ef\u4ee5\u5728 Log Hub \u63a7\u5236\u53f0\u53f3\u4e0b\u89d2\u67e5\u770b\u65b0\u7248\u672c\u53f7\u3002","title":"\u6b65\u9aa4 4. \u5237\u65b0\u7f51\u9875\u63a7\u5236\u53f0"},{"location":"implementation-guide/upgrade/#upgrade-notice","text":"","title":"Upgrade Notice"},{"location":"implementation-guide/upgrade/#ec2","text":"Log Hub \u5728 v1.1.0 \u4e4b\u540e\u66f4\u65b0\u4e86 IAM \u7b56\u7565\u3002 \u5982\u679c\u60a8\u5df2\u521b\u5efa \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u5728 Log Hub V1.0.X \u4e2d\uff0c\u5982\u679c\u60a8\u60f3\u5728 v1.1.0 \u6216\u66f4\u9ad8\u7248\u672c\u4e2d\u521b\u5efa\u65b0\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\uff0c\u60a8\u5c06\u6536\u5230\u4e00\u4e2a\u5347\u7ea7\u901a\u77e5\u5f39\u7a97\uff1a \u5355\u51fb \u5347\u7ea7 \u6309\u94ae\u5c06\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u5347\u7ea7\u5230\u5f53\u524d\u7248\u672c\uff0c \u6b64\u5347\u7ea7\u4e0d\u4f1a\u5f71\u54cd\u60a8\u5728 Log Hub V1.0.X \u4e2d\u521b\u5efa\u7684\u73b0\u6709\u65e5\u5fd7\u63d0\u53d6\u3002 \u4f46\u662f\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u521b\u5efa\u65b0\u7684\u6444\u53d6 \u4e4b\u524d\u5df2\u5c06 IAM \u7b56\u7565\u66f4\u65b0\u5230 EC2 \u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\u3002","title":"EC2 \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7"},{"location":"implementation-guide/upgrade/#eks","text":"Log Hub \u5728 v1.1.0 \u4e4b\u540e\u66f4\u65b0\u4e86\u4ece EKS \u4e2d\u6444\u53d6\u5e94\u7528\u65e5\u5fd7\u7684 \u67b6\u6784 . \u5728 v1.1.0 \u4e4b\u540e, \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLog Hub \u4f1a\u5c06 EKS \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7\u76f4\u63a5\u5199\u5165\u5230 OpenSearch \u4e2d\u3002 \u6b64\u5347\u7ea7\u4e0d\u4f1a\u5f71\u54cd\u60a8\u5728 Log Hub V1.0.X \u4e2d\u521b\u5efa\u7684\u73b0\u6709\u65e5\u5fd7\u63d0\u53d6 \u6bd4\u5982, \u60a8\u5df2\u7ecf\u5728 Log Hub v1.0.x \u4e2d\u521b\u5efa\u4e86 EKS \u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\uff0c\u5e76\u4e14\u5728 Log Hub v1.1.0 \u4e2d\u521b\u5efa\u4e86\u65b0\u7684 EKS \u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u90a3\u4e48\u5bf9\u4e8e v1.0.x \u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u6444\u53d6\u5c06\u4ecd\u7136\u901a\u8fc7 Kinesis Data Stream \u628a\u65e5\u5fd7\u6444\u5165 OpenSearch\uff0c\u5bf9\u4e8e v1.1.0 \u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u6444\u53d6\u5c06\u76f4\u63a5\u53d1\u9001\u5230 OpenSearch\u3002","title":"EKS \u4e2d\u7684\u5e94\u7528\u65e5\u5fd7"},{"location":"implementation-guide/applications/","text":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301\u4ece EC2 \u5b9e\u4f8b\u3001EKS \u96c6\u7fa4\u548c S3 \u5b58\u50a8\u6876\u4e2d\u6444\u53d6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u5bf9\u4e8e EC2 \u5b9e\u4f8b\uff0cLog Hub \u4f1a\u81ea\u52a8\u5b89\u88c5 logging agent ( Fluent Bit 1.9 )\uff0c\u6536\u96c6 EC2 \u5b9e\u4f8b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e EKS \u96c6\u7fa4\uff0cLog Hub \u5c06\u751f\u6210\u4e00\u4f53\u5316\u914d\u7f6e\u6587\u4ef6\u4f9b\u5ba2\u6237\u5c06 logging agent ( Fluent Bit 1.9 ) \u90e8\u7f72\u4e3a DaemonSet \u6216 Sidecar\u3002 \u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u6536\u96c6 pod \u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e S3 \u5b58\u50a8\u6876\uff0cLog hub \u5c06\u76f4\u63a5\u6536\u96c6\u5b58\u50a8\u5728 S3 \u5b58\u50a8\u6876\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u6570\u636e\u6e90 Log \u683c\u5f0f EC2 \u673a\u5668\u7ec4 EKS \u96c6\u7fa4 S3 \u6876 Nginx \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u5426 \u591a\u5f20\u6587\u672c (Spring Boot) \u662f \u662f \u5426 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff1a Apache HTTP server \u65e5\u5fd7 Nginx \u65e5\u5fd7 \u5355\u884c\u6587\u672c\u65e5\u5fd7 \u591a\u884c\u6587\u672c\u65e5\u5fd7 JSON \u65e5\u5fd7 \u5728\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\uff0c\u60a8\u9700\u8981\uff1a \u521b\u5efa\u65e5\u5fd7\u6e90 \uff08\u4e0d\u9002\u7528\u4e8eS3\u5b58\u50a8\u6876\uff09 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053 \u6982\u5ff5 \u4e0b\u9762\u4ecb\u7ecd\u7684\u6982\u5ff5\u53ef\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u8981\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u9700\u8981\u6570\u636e\u7ba1\u9053\u3002\u7ba1\u9053\u4e0d\u4ec5\u7f13\u51b2\u4f20\u8f93\u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u6e05\u7406\u6216\u9884\u5904\u7406\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06 IP \u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u3002\u76ee\u524d\uff0cKinesis Data Stream \u7528\u4f5c\u6570\u636e\u7f13\u51b2\u3002 \u65e5\u5fd7\u6444\u53d6 (Log Ingestion) \u65e5\u5fd7\u6444\u53d6\u4e3a Log Hub \u4f7f\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u914d\u7f6e\u65e5\u5fd7\u6e90\u3001\u65e5\u5fd7\u7c7b\u578b\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u4e4b\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u4ece\u65e5\u5fd7\u6e90\u6536\u96c6\u7279\u5b9a\u7c7b\u578b\u7684\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u65e5\u5fd7\u4ee3\u7406 (Logging Agent) \u65e5\u5fd7\u4ee3\u7406\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u8bfb\u53d6\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0cOpenSearch\uff09\u3002 \u76ee\u524d\uff0cLog Hub \u4ec5\u652f\u6301\u81ea\u52a8\u5b89\u88c5\u7684 Fluent Bit 1.9 \u65e5\u5fd7\u4ee3\u7406\u3002 Fluent Bit \u4ee3\u7406\u5177\u6709 OpenSSL 1.1 \u7684\u4f9d\u8d56\u9879\u3002\u8981\u4e86\u89e3\u5982\u4f55\u5728 Linux \u5b9e\u4f8b\u4e0a \u5b89\u88c5 OpenSSL\uff0c\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002\u901a\u8fc7\u6b64 \u94fe\u63a5 \u67e5\u770b Fluent Bit \u652f\u6301\u7684\u5e73\u53f0\u3002 \u65e5\u5fd7\u6e90 (Log Source) \u65e5\u5fd7\u6e90\u662f\u6307\u60a8\u5e0c\u671b Log Hub \u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 Amazon \u670d\u52a1\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u6e90\u6709\uff1a \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 S3 \u5b58\u50a8\u6876 \u5b9e\u4f8b\u7ec4 (Instance Group) \u5b9e\u4f8b\u7ec4\u662f\u60a8\u8981\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 EC2 \u5b9e\u4f8b\u7684\u96c6\u5408\u3002 Log Hub \u5c06\u5e2e\u52a9\u60a8\u5728\u7ec4\u5185\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4e2d\u5b89\u88c5\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u3002 EKS \u96c6\u7fa4 (EKS Cluster) Log Hub \u4e2d\u7684 EKS \u96c6\u7fa4\u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon EKS\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar\u3002 S3 \u5b58\u50a8\u6876 (S3 Bucket) \u5982\u679c\u60a8\u7684\u7cfb\u7edf\u5f53\u524d\u6b63\u5728\u5c06\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u53d1\u9001\u5230 S3 \u5b58\u50a8\u6876\uff0cLog Hub \u652f\u6301\u6536\u96c6\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e0a\u7684\u6301\u7eed\u65e5\u5fd7\u3002 \u65e5\u5fd7\u914d\u7f6e (Log Config) \u65e5\u5fd7\u914d\u7f6e\u662f\u4e00\u79cd\u914d\u7f6e\uff0c\u5b83\u544a\u8bc9 Log Hub \u65e5\u5fd7\u5728\u65e5\u5fd7\u6e90\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u3001\u60a8\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7c7b\u578b\u3001\u65e5\u5fd7\u884c\u5305\u542b\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/applications/#_1","text":"Log Hub \u652f\u6301\u4ece EC2 \u5b9e\u4f8b\u3001EKS \u96c6\u7fa4\u548c S3 \u5b58\u50a8\u6876\u4e2d\u6444\u53d6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u5bf9\u4e8e EC2 \u5b9e\u4f8b\uff0cLog Hub \u4f1a\u81ea\u52a8\u5b89\u88c5 logging agent ( Fluent Bit 1.9 )\uff0c\u6536\u96c6 EC2 \u5b9e\u4f8b\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u7136\u540e\u5c06\u65e5\u5fd7\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e EKS \u96c6\u7fa4\uff0cLog Hub \u5c06\u751f\u6210\u4e00\u4f53\u5316\u914d\u7f6e\u6587\u4ef6\u4f9b\u5ba2\u6237\u5c06 logging agent ( Fluent Bit 1.9 ) \u90e8\u7f72\u4e3a DaemonSet \u6216 Sidecar\u3002 \u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u6536\u96c6 pod \u65e5\u5fd7\u5e76\u53d1\u9001\u5230 Amazon OpenSearch\u3002 \u5bf9\u4e8e S3 \u5b58\u50a8\u6876\uff0cLog hub \u5c06\u76f4\u63a5\u6536\u96c6\u5b58\u50a8\u5728 S3 \u5b58\u50a8\u6876\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/#_2","text":"Log \u683c\u5f0f EC2 \u673a\u5668\u7ec4 EKS \u96c6\u7fa4 S3 \u6876 Nginx \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u5426 \u591a\u5f20\u6587\u672c (Spring Boot) \u662f \u662f \u5426 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b\u65e5\u5fd7\u683c\u5f0f\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\uff1a Apache HTTP server \u65e5\u5fd7 Nginx \u65e5\u5fd7 \u5355\u884c\u6587\u672c\u65e5\u5fd7 \u591a\u884c\u6587\u672c\u65e5\u5fd7 JSON \u65e5\u5fd7 \u5728\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u4e4b\u524d\uff0c\u60a8\u9700\u8981\uff1a \u521b\u5efa\u65e5\u5fd7\u6e90 \uff08\u4e0d\u9002\u7528\u4e8eS3\u5b58\u50a8\u6876\uff09 \u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053","title":"\u652f\u6301\u7684\u65e5\u5fd7\u683c\u5f0f\u548c\u6570\u636e\u6e90"},{"location":"implementation-guide/applications/#_3","text":"\u4e0b\u9762\u4ecb\u7ecd\u7684\u6982\u5ff5\u53ef\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u7684\u5de5\u4f5c\u539f\u7406\u3002","title":"\u6982\u5ff5"},{"location":"implementation-guide/applications/#_4","text":"\u8981\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\uff0c\u9700\u8981\u6570\u636e\u7ba1\u9053\u3002\u7ba1\u9053\u4e0d\u4ec5\u7f13\u51b2\u4f20\u8f93\u4e2d\u7684\u6570\u636e\uff0c\u8fd8\u6e05\u7406\u6216\u9884\u5904\u7406\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5c06 IP \u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u3002\u76ee\u524d\uff0cKinesis Data Stream \u7528\u4f5c\u6570\u636e\u7f13\u51b2\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/#log-ingestion","text":"\u65e5\u5fd7\u6444\u53d6\u4e3a Log Hub \u4f7f\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u914d\u7f6e\u65e5\u5fd7\u6e90\u3001\u65e5\u5fd7\u7c7b\u578b\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u4e4b\u540e\uff0cLog Hub \u5c06\u5f00\u59cb\u4ece\u65e5\u5fd7\u6e90\u6536\u96c6\u7279\u5b9a\u7c7b\u578b\u7684\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230 Amazon OpenSearch\u3002","title":"\u65e5\u5fd7\u6444\u53d6 (Log Ingestion)"},{"location":"implementation-guide/applications/#logging-agent","text":"\u65e5\u5fd7\u4ee3\u7406\u662f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b83\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u8bfb\u53d6\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0cOpenSearch\uff09\u3002 \u76ee\u524d\uff0cLog Hub \u4ec5\u652f\u6301\u81ea\u52a8\u5b89\u88c5\u7684 Fluent Bit 1.9 \u65e5\u5fd7\u4ee3\u7406\u3002 Fluent Bit \u4ee3\u7406\u5177\u6709 OpenSSL 1.1 \u7684\u4f9d\u8d56\u9879\u3002\u8981\u4e86\u89e3\u5982\u4f55\u5728 Linux \u5b9e\u4f8b\u4e0a \u5b89\u88c5 OpenSSL\uff0c\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002\u901a\u8fc7\u6b64 \u94fe\u63a5 \u67e5\u770b Fluent Bit \u652f\u6301\u7684\u5e73\u53f0\u3002","title":"\u65e5\u5fd7\u4ee3\u7406 (Logging Agent)"},{"location":"implementation-guide/applications/#log-source","text":"\u65e5\u5fd7\u6e90\u662f\u6307\u60a8\u5e0c\u671b Log Hub \u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 Amazon \u670d\u52a1\u3002 \u652f\u6301\u7684\u65e5\u5fd7\u6e90\u6709\uff1a \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 S3 \u5b58\u50a8\u6876","title":"\u65e5\u5fd7\u6e90 (Log Source)"},{"location":"implementation-guide/applications/#instance-group","text":"\u5b9e\u4f8b\u7ec4\u662f\u60a8\u8981\u4ece\u4e2d\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684 EC2 \u5b9e\u4f8b\u7684\u96c6\u5408\u3002 Log Hub \u5c06\u5e2e\u52a9\u60a8\u5728\u7ec4\u5185\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u4e2d\u5b89\u88c5\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u3002","title":"\u5b9e\u4f8b\u7ec4 (Instance Group)"},{"location":"implementation-guide/applications/#eks-eks-cluster","text":"Log Hub \u4e2d\u7684 EKS \u96c6\u7fa4\u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon EKS\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar\u3002","title":"EKS \u96c6\u7fa4 (EKS Cluster)"},{"location":"implementation-guide/applications/#s3-s3-bucket","text":"\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u5f53\u524d\u6b63\u5728\u5c06\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u53d1\u9001\u5230 S3 \u5b58\u50a8\u6876\uff0cLog Hub \u652f\u6301\u6536\u96c6\u5b58\u50a8\u5728 Amazon S3 \u5b58\u50a8\u6876\u4e0a\u7684\u6301\u7eed\u65e5\u5fd7\u3002","title":"S3 \u5b58\u50a8\u6876 (S3 Bucket)"},{"location":"implementation-guide/applications/#log-config","text":"\u65e5\u5fd7\u914d\u7f6e\u662f\u4e00\u79cd\u914d\u7f6e\uff0c\u5b83\u544a\u8bc9 Log Hub \u65e5\u5fd7\u5728\u65e5\u5fd7\u6e90\u4e0a\u7684\u5b58\u50a8\u4f4d\u7f6e\u3001\u60a8\u8981\u6536\u96c6\u7684\u65e5\u5fd7\u7c7b\u578b\u3001\u65e5\u5fd7\u884c\u5305\u542b\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7c7b\u578b\u3002","title":"\u65e5\u5fd7\u914d\u7f6e (Log Config)"},{"location":"implementation-guide/applications/apache/","text":"Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7 Apache HTTP Server (httpd) \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ece\u800c\u6444\u53d6 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u3002 \u524d\u63d0\u6761\u4ef6 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Apache HTTP \u670d\u52a1\u5668 \u3002 \u5728 Apache Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/httpd/conf/httpd.conf \uff0c\u4ee5 LogFormat \u5f00\u5934\u3002 \u5982: LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [22/Dec/2021:06:48:57 +0000] \"GET /xxx HTTP/1.1\" 404 196 \"-\" \"curl/7.79.1\" \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 \u6b65\u9aa4 3: \u67e5\u770b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f \u5bf9\u4e8e Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\uff0cLog Hub \u5c06\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002 \u793a\u4f8b\u4eea\u8868\u677f","title":"Apache HTTP \u670d\u52a1\u5668"},{"location":"implementation-guide/applications/apache/#apache-http","text":"Apache HTTP Server (httpd) \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ece\u800c\u6444\u53d6 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u3002","title":"Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7"},{"location":"implementation-guide/applications/apache/#_1","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/apache/#1-apache-http","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Apache HTTP \u670d\u52a1\u5668 \u3002 \u5728 Apache Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u60a8\u7684 Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\u3002 \u5b83\u7684\u683c\u5f0f\u4e3a /etc/httpd/conf/httpd.conf \uff0c\u4ee5 LogFormat \u5f00\u5934\u3002 \u5982: LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u793a\u4f8b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [22/Dec/2021:06:48:57 +0000] \"GET /xxx HTTP/1.1\" 404 196 \"-\" \"curl/7.79.1\" \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/apache/#2","text":"","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/apache/#_2","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/apache/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/apache/#3-apache-http","text":"\u5bf9\u4e8e Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\uff0cLog Hub \u5c06\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4 3: \u67e5\u770b Apache HTTP \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/apache/#_3","text":"","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/create-applog-pipeline/","text":"\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u7ba1\u9053 \u3002 \u4ee5\u5c0f\u5199\u5f62\u5f0f\u6307\u5b9a \u7d22\u5f15\u540d\u79f0 \u3002 \u5728 Buffer(Amazon Kinesis Data Streams) \u90e8\u5206\u4e2d\uff0c\u6307\u5b9a\u521d\u59cb\u5206\u7247\u53f7\u3002 \u91cd\u8981 \u5982\u679c Kinesis Data Streams (KDS) \u4e2d\u51fa\u73b0\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728 OpenSearch \u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u65e5\u5fd7\u3002 \u8fd9\u662f\u56e0\u4e3a Fluent Bit \u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 \u7684\u5f62\u5f0f\u4e0a\u4f20\u65e5\u5fd7\uff08\u5305\u542b\u591a\u6761\u8bb0\u5f55\uff09\uff0c\u5982\u679c\u4e0a\u4f20\u5931\u8d25\u4f1a\u91cd\u8bd5\u8be5\u5757\u3002 \u6bcf\u4e2a KDS \u5206\u7247\u6700\u591a\u53ef\u652f\u6301\u6bcf\u79d2 1,000 \u6761\u8bb0\u5f55\u8fdb\u884c\u5199\u5165\uff0c\u6700\u9ad8\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d2 1 MB\u3002 \u8bf7\u4f30\u8ba1\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u9009\u62e9 \u662f \u4ee5\u6839\u636e\u8f93\u5165\u65e5\u5fd7\u6d41\u91cf\u542f\u7528 Kinesis Data Streams \u5206\u7247\u7684\u81ea\u52a8\u7f29\u653e\uff0c\u5e76\u6307\u5b9a\u6700\u5927\u5206\u7247\u6570\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7ba1\u9053\u8f6c\u4e3a\"\u6709\u6548\"\u72b6\u6001\u3002","title":"\u521b\u5efa\u5e94\u7528\u65e5\u5fd7\u7ba1\u9053"},{"location":"implementation-guide/applications/create-applog-pipeline/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u7ba1\u9053 \u3002 \u4ee5\u5c0f\u5199\u5f62\u5f0f\u6307\u5b9a \u7d22\u5f15\u540d\u79f0 \u3002 \u5728 Buffer(Amazon Kinesis Data Streams) \u90e8\u5206\u4e2d\uff0c\u6307\u5b9a\u521d\u59cb\u5206\u7247\u53f7\u3002 \u91cd\u8981 \u5982\u679c Kinesis Data Streams (KDS) \u4e2d\u51fa\u73b0\u9608\u503c\u9519\u8bef\uff0c\u60a8\u53ef\u80fd\u4f1a\u5728 OpenSearch \u4e2d\u89c2\u5bdf\u5230\u91cd\u590d\u65e5\u5fd7\u3002 \u8fd9\u662f\u56e0\u4e3a Fluent Bit \u65e5\u5fd7\u4ee3\u7406\u4ee5 \u5757 \u7684\u5f62\u5f0f\u4e0a\u4f20\u65e5\u5fd7\uff08\u5305\u542b\u591a\u6761\u8bb0\u5f55\uff09\uff0c\u5982\u679c\u4e0a\u4f20\u5931\u8d25\u4f1a\u91cd\u8bd5\u8be5\u5757\u3002 \u6bcf\u4e2a KDS \u5206\u7247\u6700\u591a\u53ef\u652f\u6301\u6bcf\u79d2 1,000 \u6761\u8bb0\u5f55\u8fdb\u884c\u5199\u5165\uff0c\u6700\u9ad8\u603b\u6570\u636e\u5199\u5165\u901f\u7387\u4e3a\u6bcf\u79d2 1 MB\u3002 \u8bf7\u4f30\u8ba1\u60a8\u7684\u65e5\u5fd7\u91cf\u5e76\u9009\u62e9\u5408\u9002\u7684\u5206\u7247\u6570\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u9009\u62e9 \u662f \u4ee5\u6839\u636e\u8f93\u5165\u65e5\u5fd7\u6d41\u91cf\u542f\u7528 Kinesis Data Streams \u5206\u7247\u7684\u81ea\u52a8\u7f29\u653e\uff0c\u5e76\u6307\u5b9a\u6700\u5927\u5206\u7247\u6570\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u7b49\u5f85\u5e94\u7528\u7ba1\u9053\u8f6c\u4e3a\"\u6709\u6548\"\u72b6\u6001\u3002","title":"\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/applications/create-log-ingestion/","text":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002","title":"Create log ingestion"},{"location":"implementation-guide/applications/create-log-ingestion/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-ingestion/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-ingestion/#s3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002","title":"S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/","text":"\u65e5\u5fd7\u6e90 \u5728\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u5148\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 Log Hub \u652f\u6301\u4ee5\u4e0b\u65e5\u5fd7\u6e90\uff1a EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6982\u5ff5 \u3002 \u521b\u5efa\u4e00\u4e2a EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u5b9e\u4f8b\u7ec4\u662f\u6307\u6258\u7ba1\u76f8\u540c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\u3002\u8fd9\u662f\u4e00\u79cd\u5c06 Log Config \u4e0e\u4e00\u7ec4 EC2 \u5b9e\u4f8b\u76f8\u5173\u8054\u7684\u65b9\u6cd5\u3002 Log Hub \u4f7f\u7528 Systems Manager Agent(SSM Agent) \u5b89\u88c5\u548c\u914d\u7f6e Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams \u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u5b9e\u4f8b\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a SSM Agent \u5b89\u88c5\u5728\u5b9e\u4f8b\u4e0a\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5728 Linux \u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 SSM Agent AmazonSSMManagedInstanceCore \u7b56\u7565\u4e0e\u5b9e\u4f8b\u76f8\u5173\u8054\u3002 \u5df2\u5b89\u88c5 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee AWS Systems Manager\u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon Kinesis Data Streams\u3002 \u6b65\u9aa4 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u5b9e\u4f8b \u90e8\u5206\u4e2d\uff0c\u9009\u62e9\u8981\u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684\u5b9e\u4f8b\u3002 \u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0 5 \u4e2a\u6807\u7b7e\u6765\u8fc7\u6ee4\u5b9e\u4f8b\u3002 \u9a8c\u8bc1\u6240\u6709\u9009\u4e2d\u7684\u5b9e\u4f8b \u72b6\u6001 \u90fd\u662f \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9009\u4e2d\u7684\u5b9e\u4f8b\u201c\u72b6\u6001\u201d\u4e3a\u7a7a\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u6309\u94ae\uff0c\u7b49\u5f85 \u72b6\u6001 \u53d8\u4e3a \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237\u8bbe\u7f6e \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u8de8\u8d26\u6237\u7684\u5b9e\u4f8b\u7ec4\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u5df2\u77e5\u95ee\u9898 \u5728 \u5317\u4eac (cn-north-1)\u548c\u5b81\u590f (cn-northwest-1) \u533a\u57df\u7684 Ubuntu \u5b9e\u4f8b\u4e0a\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u4f1a\u5bfc\u81f4\u5b89\u88c5\u9519\u8bef\u3002 Fluent Bit \u5b89\u88c5\u5305\u4e0d\u80fd \u4e0b\u8f7d\u6210\u529f\u3002 \u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 \u5bfc\u5165 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 Log Hub \u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u91cd\u8981 Log Hub \u4e0d\u652f\u6301\u5c06\u4e00\u4e2a EKS \u96c6\u7fa4\u4e2d\u7684\u65e5\u5fd7\u540c\u65f6\u53d1\u9001\u5230\u591a\u4e2a Amazon OpenSearch \u57df\u3002 \u5982\u679c\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u548c \u53d1\u9001\u76ee\u7684\u5730\u7684 OpenSearch \u4e0d\u5728\u540c\u4e00\u4e2a VPC \u4e2d\uff0c\u5fc5\u987b\u8981\u5efa\u7acb VPC \u5bf9\u7b49\u8fde\u63a5\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS Cluster \u3002 \u5355\u51fb \u5bfc\u5165\u96c6\u7fa4 \u6309\u94ae\u3002 \u9009\u62e9 Log Hub \u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684 EKS \u96c6\u7fa4 \u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237 \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u5bfc\u5165\u4e00\u4e2a\u5176\u4ed6\u8d26\u6237\u7684 EKS \u96c6\u7fa4\u3002 \u9009\u62e9 DaemonSet \u6216 Sidecar \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\u7684\u90e8\u7f72\u6a21\u5f0f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6307\u5b9a Log Hub \u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u7684 Amazon OpenSearch \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5efa\u7acb EKS \u548c OpenSearch \u4e4b\u95f4\u7684 VPC \u5bf9\u7b49\u8fde\u63a5\u3002 \u521b\u5efa\u5e76\u63a5\u53d7 VPC \u5bf9\u7b49\u8fde\u63a5 \u4e3a VPC \u5bf9\u7b49\u8fde\u63a5\u66f4\u65b0\u8def\u7531\u8868 \u66f4\u65b0\u60a8\u7684\u5b89\u5168\u7ec4\u4ee5\u5f15\u7528\u5bf9\u7b49 VPC \u7ec4 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 Amazon S3 \u4f5c\u4e3a\u65e5\u5fd7\u6e90 Note Amazon S3 \u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u60a8\u7684 Log Hub \u533a\u57df\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e2d\u7684 Amazon S3 bucket \u662f\u6307\u5b58\u50a8\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u3002 \u60a8\u65e0\u9700\u4ece Log Hub \u63a7\u5236\u53f0\u521b\u5efa\u7279\u5b9a\u7684\u65e5\u5fd7\u6e90\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#_1","text":"\u5728\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u5148\u521b\u5efa\u65e5\u5fd7\u6e90\u3002 Log Hub \u652f\u6301\u4ee5\u4e0b\u65e5\u5fd7\u6e90\uff1a EC2 \u5b9e\u4f8b\u7ec4 EKS \u96c6\u7fa4 Amazon S3 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6982\u5ff5 \u3002","title":"\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#ec2","text":"\u5b9e\u4f8b\u7ec4\u662f\u6307\u6258\u7ba1\u76f8\u540c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u7ec4 EC2 Linux \u5b9e\u4f8b\u3002\u8fd9\u662f\u4e00\u79cd\u5c06 Log Config \u4e0e\u4e00\u7ec4 EC2 \u5b9e\u4f8b\u76f8\u5173\u8054\u7684\u65b9\u6cd5\u3002 Log Hub \u4f7f\u7528 Systems Manager Agent(SSM Agent) \u5b89\u88c5\u548c\u914d\u7f6e Fluent Bit \u4ee3\u7406\uff0c\u5e76\u5c06\u65e5\u5fd7\u6570\u636e\u53d1\u9001\u5230 Kinesis Data Streams \u3002","title":"\u521b\u5efa\u4e00\u4e2a EC2 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#_2","text":"\u786e\u4fdd\u5b9e\u4f8b\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a SSM Agent \u5b89\u88c5\u5728\u5b9e\u4f8b\u4e0a\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5728 Linux \u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 SSM Agent AmazonSSMManagedInstanceCore \u7b56\u7565\u4e0e\u5b9e\u4f8b\u76f8\u5173\u8054\u3002 \u5df2\u5b89\u88c5 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 OpenSSL \u5b89\u88c5 \u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee AWS Systems Manager\u3002 \u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee Amazon Kinesis Data Streams\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/create-log-source/#_3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 \u5b9e\u4f8b\u7ec4 \u3002 \u5355\u51fb \u521b\u5efa\u5b9e\u4f8b\u7ec4 \u6309\u94ae\u3002 \u5728 \u8bbe\u7f6e \u90e8\u5206\uff0c\u6307\u5b9a\u7ec4\u540d\u3002 \u5728 \u5b9e\u4f8b \u90e8\u5206\u4e2d\uff0c\u9009\u62e9\u8981\u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684\u5b9e\u4f8b\u3002 \u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0 5 \u4e2a\u6807\u7b7e\u6765\u8fc7\u6ee4\u5b9e\u4f8b\u3002 \u9a8c\u8bc1\u6240\u6709\u9009\u4e2d\u7684\u5b9e\u4f8b \u72b6\u6001 \u90fd\u662f \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9009\u4e2d\u7684\u5b9e\u4f8b\u201c\u72b6\u6001\u201d\u4e3a\u7a7a\uff0c\u70b9\u51fb \u5b89\u88c5\u65e5\u5fd7\u4ee3\u7406 \u6309\u94ae\uff0c\u7b49\u5f85 \u72b6\u6001 \u53d8\u4e3a \u5728\u7ebf \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237\u8bbe\u7f6e \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u8de8\u8d26\u6237\u7684\u5b9e\u4f8b\u7ec4\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u5df2\u77e5\u95ee\u9898 \u5728 \u5317\u4eac (cn-north-1)\u548c\u5b81\u590f (cn-northwest-1) \u533a\u57df\u7684 Ubuntu \u5b9e\u4f8b\u4e0a\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u4f1a\u5bfc\u81f4\u5b89\u88c5\u9519\u8bef\u3002 Fluent Bit \u5b89\u88c5\u5305\u4e0d\u80fd \u4e0b\u8f7d\u6210\u529f\u3002 \u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/applications/create-log-source/#eks","text":"Log Hub \u4e2d\u7684 EKS Cluster \u662f\u6307\u60a8\u8981\u4ece\u4e2d\u6536\u96c6 pod \u65e5\u5fd7\u7684 Amazon Elastic Kubernetes Service (Amazon EKS)\u3002 Log Hub \u5c06\u6307\u5bfc\u60a8\u5c06\u65e5\u5fd7\u8bb0\u5f55\u4ee3\u7406\u90e8\u7f72\u4e3a EKS \u96c6\u7fa4\u4e2d\u7684 DaemonSet \u6216 Sidecar \u3002 \u91cd\u8981 Log Hub \u4e0d\u652f\u6301\u5c06\u4e00\u4e2a EKS \u96c6\u7fa4\u4e2d\u7684\u65e5\u5fd7\u540c\u65f6\u53d1\u9001\u5230\u591a\u4e2a Amazon OpenSearch \u57df\u3002 \u5982\u679c\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u548c \u53d1\u9001\u76ee\u7684\u5730\u7684 OpenSearch \u4e0d\u5728\u540c\u4e00\u4e2a VPC \u4e2d\uff0c\u5fc5\u987b\u8981\u5efa\u7acb VPC \u5bf9\u7b49\u8fde\u63a5\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS Cluster \u3002 \u5355\u51fb \u5bfc\u5165\u96c6\u7fa4 \u6309\u94ae\u3002 \u9009\u62e9 Log Hub \u4ece\u4e2d\u6536\u96c6\u65e5\u5fd7\u7684 EKS \u96c6\u7fa4 \u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u8de8\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u5728 \u8d26\u6237 \u90e8\u5206\uff0c\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \uff0c\u5c31\u53ef\u4ee5\u5bfc\u5165\u4e00\u4e2a\u5176\u4ed6\u8d26\u6237\u7684 EKS \u96c6\u7fa4\u3002 \u9009\u62e9 DaemonSet \u6216 Sidecar \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\u7684\u90e8\u7f72\u6a21\u5f0f\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6307\u5b9a Log Hub \u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u7684 Amazon OpenSearch \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5efa\u7acb EKS \u548c OpenSearch \u4e4b\u95f4\u7684 VPC \u5bf9\u7b49\u8fde\u63a5\u3002 \u521b\u5efa\u5e76\u63a5\u53d7 VPC \u5bf9\u7b49\u8fde\u63a5 \u4e3a VPC \u5bf9\u7b49\u8fde\u63a5\u66f4\u65b0\u8def\u7531\u8868 \u66f4\u65b0\u60a8\u7684\u5b89\u5168\u7ec4\u4ee5\u5f15\u7528\u5bf9\u7b49 VPC \u7ec4 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u5bfc\u5165 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/create-log-source/#amazon-s3","text":"Note Amazon S3 \u5b58\u50a8\u6876\u5fc5\u987b\u4e0e\u60a8\u7684 Log Hub \u533a\u57df\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e2d\u7684 Amazon S3 bucket \u662f\u6307\u5b58\u50a8\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u3002 \u60a8\u65e0\u9700\u4ece Log Hub \u63a7\u5236\u53f0\u521b\u5efa\u7279\u5b9a\u7684\u65e5\u5fd7\u6e90\u3002","title":"\u4f7f\u7528 Amazon S3 \u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/include-prerequisites/","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Include prerequisites"},{"location":"implementation-guide/applications/include-supported-app-logs/","text":"Log \u683c\u5f0f EC2 \u673a\u5668\u7ec4 EKS \u96c6\u7fa4 S3 \u6876 Nginx \u662f \u662f \u5426 Apache HTTP Server \u662f \u662f \u5426 JSON \u662f \u662f \u662f \u5355\u884c\u6587\u672c \u662f \u662f \u662f \u591a\u884c\u6587\u672c \u662f \u662f \u5426 \u591a\u5f20\u6587\u672c (Spring Boot) \u662f \u662f \u5426","title":"Include supported app logs"},{"location":"implementation-guide/applications/json/","text":"JSON \u683c\u5f0f\u65e5\u5fd7 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6 JSON \u65e5\u5fd7\u3002 \u524d\u63d0\u6761\u4ef6 \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a JSON \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 JSON \u3002 \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b JSON \u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: { \"host\" : \"81.95.250.9\" , \"user-identifier\" : \"-\" , \"time\" : \"08/Mar/2022:06:28:03 +0000\" , \"method\" : \"PATCH\" , \"request\" : \"/clicks-and-mortar/24%2f7\" , \"protocol\" : \"HTTP/2.0\" , \"status\" : 502 , \"bytes\" : 24337 , \"referer\" : \"http://www.investorturn-key.net/functionalities/innovative/integrated\" } \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6 \u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002 \u7b2c 3 \u6b65\uff1a\u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u521b\u5efa\u7d22\u5f15 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"JSON"},{"location":"implementation-guide/applications/json/#json","text":"\u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6 JSON \u65e5\u5fd7\u3002","title":"JSON \u683c\u5f0f\u65e5\u5fd7"},{"location":"implementation-guide/applications/json/#_1","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/applications/json/#1-json","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 JSON \u3002 \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b JSON \u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: { \"host\" : \"81.95.250.9\" , \"user-identifier\" : \"-\" , \"time\" : \"08/Mar/2022:06:28:03 +0000\" , \"method\" : \"PATCH\" , \"request\" : \"/clicks-and-mortar/24%2f7\" , \"protocol\" : \"HTTP/2.0\" , \"status\" : 502 , \"bytes\" : 24337 , \"referer\" : \"http://www.investorturn-key.net/functionalities/innovative/integrated\" } \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a JSON \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/json/#2","text":"\u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002","title":"\u6b65\u9aa4 2\uff1a\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/applications/json/#3-opensearch","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u521b\u5efa\u7d22\u5f15 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u7b2c 3 \u6b65\uff1a\u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7"},{"location":"implementation-guide/applications/multi-line-text/","text":"\u591a\u884c\u6587\u672c\u65e5\u5fd7 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u3002 \u76ee\u524dLog Hub\u652f\u6301 Spring Boot \u4f7f\u7528 \u6b63\u5219\u8868\u8fbe\u5f0f \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f\u6216\u81ea\u5b9a\u4e49\u65e5\u5fd7\u683c\u5f0f\u3002 Prerequisites \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u591a\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u591a\u884c\u6587\u672c \u3002 Java - Spring Boot Java Spring Boot \u65e5\u5fd7\uff0c\u53ef\u4ee5\u63d0\u4f9b\u65e5\u5fd7\u683c\u5f0f\u3002 \u4f8b\u5982\uff1a %d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger : %msg%n \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u81ea\u5b9a\u4e49\u683c\u5f0f \u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e00\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002 \u4f8b\u5982\uff1a (?<time>\\d{4}-\\d{2}-\\d{2}\\s*\\d{2}:\\d{2}:\\d{2}.\\d{3})\\s*(?<level>[\\S]+)\\s*\\[(?<thread>.+)\\]\\s*(?<logger>\\S+)\\s*:\\s*(?<message>[\\s\\S]+) \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002 Note \u76ee\u524d\uff0cLog Hub \u4e0d\u652f\u6301\u4ece S3 Bucket \u6536\u96c6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002 \u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u521b\u5efa\u7d22\u5f15 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u591a\u884c\u6587\u672c"},{"location":"implementation-guide/applications/multi-line-text/#_1","text":"\u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u3002 \u76ee\u524dLog Hub\u652f\u6301 Spring Boot \u4f7f\u7528 \u6b63\u5219\u8868\u8fbe\u5f0f \u8bbe\u7f6e\u65e5\u5fd7\u6837\u5f0f\u6216\u81ea\u5b9a\u4e49\u65e5\u5fd7\u683c\u5f0f\u3002","title":"\u591a\u884c\u6587\u672c\u65e5\u5fd7"},{"location":"implementation-guide/applications/multi-line-text/#prerequisites","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Prerequisites"},{"location":"implementation-guide/applications/multi-line-text/#1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u591a\u884c\u6587\u672c \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u591a\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/multi-line-text/#java-spring-boot","text":"Java Spring Boot \u65e5\u5fd7\uff0c\u53ef\u4ee5\u63d0\u4f9b\u65e5\u5fd7\u683c\u5f0f\u3002 \u4f8b\u5982\uff1a %d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger : %msg%n \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"Java - Spring Boot"},{"location":"implementation-guide/applications/multi-line-text/#_2","text":"\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u65e5\u5fd7\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e00\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002 \u4f8b\u5982\uff1a (?<time>\\d{4}-\\d{2}-\\d{2}\\s*\\d{2}:\\d{2}:\\d{2}.\\d{3})\\s*(?<level>[\\S]+)\\s*\\[(?<thread>.+)\\]\\s*(?<logger>\\S+)\\s*:\\s*(?<message>[\\s\\S]+) \u7c98\u8d34\u793a\u4f8b\u591a\u884c\u65e5\u5fd7\u3002 \u4f8b\u5982\uff1a 2022-02-18 10:32:26.400 ERROR [http-nio-8080-exec-1] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause java.lang.ArithmeticException: / by zero at com.springexamples.demo.web.LoggerController.logs(LoggerController.java:22) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke \u9009\u62e9 \u89e3\u6790\u65e5\u5fd7 . \u68c0\u67e5\u5404\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 \u8bf4\u660e \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u81ea\u5b9a\u4e49\u683c\u5f0f"},{"location":"implementation-guide/applications/multi-line-text/#2","text":"\u521b\u5efa\u6b65\u9aa4\u7c7b\u4f3c\u4e8e\u4e3a\u5355\u884c\u6587\u672c\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u6444\u53d6\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u5355\u884c\u6587\u672c \u3002 Note \u76ee\u524d\uff0cLog Hub \u4e0d\u652f\u6301\u4ece S3 Bucket \u6536\u96c6\u591a\u884c\u6587\u672c\u65e5\u5fd7\u4f5c\u4e3a\u65e5\u5fd7\u6e90\u3002","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/multi-line-text/#3-opensearch","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u521b\u5efa\u7d22\u5f15 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7"},{"location":"implementation-guide/applications/nginx/","text":"Nginx Nginx \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ee5\u6444\u53d6 Nginx \u65e5\u5fd7\u3002 Prerequisites \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Nginx \u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Nginx \u3002 \u5728 Nginx Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u4f60\u7684Nginx\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a /etc/nginx/nginx.conf \uff0c\u4ee5 log_format \u5f00\u5934\u3002 \u5982: log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2aNginx\u793a\u4f8b\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u70b9\u51fb \u521b\u5efa . \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 \u6b65\u9aa4 3: \u67e5\u770b Nginx \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f \u5bf9\u4e8e Nginx \u65e5\u5fd7\uff0cLog Hub \u4f1a\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002 \u793a\u4f8b\u4eea\u8868\u677f","title":"Nginx"},{"location":"implementation-guide/applications/nginx/#nginx","text":"Nginx \u80fd\u591f\u5c06 \u9519\u8bef\u548c\u8bbf\u95ee\u65e5\u5fd7 \u6587\u4ef6\u5199\u5165\u672c\u5730\u76ee\u5f55\u3002 \u60a8\u53ef\u4ee5\u914d\u7f6e Log Hub \u4ee5\u6444\u53d6 Nginx \u65e5\u5fd7\u3002","title":"Nginx"},{"location":"implementation-guide/applications/nginx/#prerequisites","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Prerequisites"},{"location":"implementation-guide/applications/nginx/#1-nginx","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 Nginx \u3002 \u5728 Nginx Log Format \u90e8\u5206\uff0c\u7c98\u8d34\u4f60\u7684Nginx\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a /etc/nginx/nginx.conf \uff0c\u4ee5 log_format \u5f00\u5934\u3002 \u5982: log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; \uff08\u53ef\u9009\uff09\u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2aNginx\u793a\u4f8b\u65e5\u5fd7\u4ee5\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u5982: 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u70b9\u51fb \u521b\u5efa .","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a Nginx \u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/nginx/#2","text":"","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/nginx/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/nginx/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/nginx/#3-nginx","text":"\u5bf9\u4e8e Nginx \u65e5\u5fd7\uff0cLog Hub \u4f1a\u521b\u5efa\u4e00\u4e2a\u5185\u7f6e\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u4eea\u8868\u677f\u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u4eea\u8868\u677f \u90e8\u5206\u3002 \u627e\u5230\u540d\u79f0\u4ee5 <the-application-pipeline> \u5f00\u5934\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4 3: \u67e5\u770b Nginx \u670d\u52a1\u5668\u65e5\u5fd7\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/nginx/#_2","text":"","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/applications/single-line-text/","text":"\u5355\u884c\u6587\u672c Log Hub \u4f7f\u7528\u81ea\u5b9a\u4e49 Ruby \u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u89e3\u6790\u65e5\u5fd7\u3002 \u5b83\u652f\u6301\u5355\u884c\u65e5\u5fd7\u683c\u5f0f\u548c\u591a\u8f93\u5165\u683c\u5f0f\u3002 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u5355\u884c\u6587\u672c\u65e5\u5fd7\u3002 Prerequisites \u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 . \u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u5355\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5355\u884c\u6587\u672c \u3002 \u5728 Rubular \u4e2d\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u5148\u9a8c\u8bc1\u5e76\u8f93\u5165\u503c\u3002 \u4f8b\u5982\uff1a (?<remote_addr>\\S+)\\s*-\\s*(?<remote_user>\\S+)\\s*\\[(?<time_local>\\d+/\\S+/\\d+:\\d+:\\d+:\\d+)\\s+\\S+\\]\\s*\"(?<request_method>\\S+)\\s+(?<request_uri>\\S+)\\s+\\S+\"\\s*(?<status>\\S+)\\s*(?<body_bytes_sent>\\S+)\\s*\"(?<http_referer>[^\"]*)\"\\s*\"(?<http_user_agent>[^\"]*)\"\\s*\"(?<http_x_forwarded_for>[^\"]*)\".* \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b\u7684\u5355\u884c\u6587\u672c\u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165 \u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002 EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002 S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7 \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u521b\u5efa\u7d22\u5f15 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u5355\u884c\u6587\u672c"},{"location":"implementation-guide/applications/single-line-text/#_1","text":"Log Hub \u4f7f\u7528\u81ea\u5b9a\u4e49 Ruby \u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u89e3\u6790\u65e5\u5fd7\u3002 \u5b83\u652f\u6301\u5355\u884c\u65e5\u5fd7\u683c\u5f0f\u548c\u591a\u8f93\u5165\u683c\u5f0f\u3002 \u60a8\u53ef\u4ee5\u5c06 Log Hub \u914d\u7f6e\u4e3a\u6444\u53d6\u5355\u884c\u6587\u672c\u65e5\u5fd7\u3002","title":"\u5355\u884c\u6587\u672c"},{"location":"implementation-guide/applications/single-line-text/#prerequisites","text":"\u8bf7\u786e\u8ba4\u60a8\u5df2\u7ecf\u5b8c\u6210: \u5bfc\u5165 AOS \u57df . \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6e90 . \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 .","title":"Prerequisites"},{"location":"implementation-guide/applications/single-line-text/#1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u65e5\u5fd7\u914d\u7f6e \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u914d\u7f6e \u6309\u94ae\u3002 \u6307\u5b9a \u914d\u7f6e\u540d\u79f0 \u3002 \u6307\u5b9a \u65e5\u5fd7\u8def\u5f84 \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528 , \u5206\u9694\u591a\u4e2a\u8def\u5f84\u3002 \u5728\u65e5\u5fd7\u7c7b\u578b\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u5355\u884c\u6587\u672c \u3002 \u5728 Rubular \u4e2d\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u5148\u9a8c\u8bc1\u5e76\u8f93\u5165\u503c\u3002 \u4f8b\u5982\uff1a (?<remote_addr>\\S+)\\s*-\\s*(?<remote_user>\\S+)\\s*\\[(?<time_local>\\d+/\\S+/\\d+:\\d+:\\d+:\\d+)\\s+\\S+\\]\\s*\"(?<request_method>\\S+)\\s+(?<request_uri>\\S+)\\s+\\S+\"\\s*(?<status>\\S+)\\s*(?<body_bytes_sent>\\S+)\\s*\"(?<http_referer>[^\"]*)\"\\s*\"(?<http_user_agent>[^\"]*)\"\\s*\"(?<http_x_forwarded_for>[^\"]*)\".* \u5728 \u793a\u4f8b\u65e5\u5fd7\u89e3\u6790 \u90e8\u5206\uff0c\u7c98\u8d34\u4e00\u4e2a\u793a\u4f8b\u7684\u5355\u884c\u6587\u672c\u65e5\u5fd7\uff0c\u70b9\u51fb \u89e3\u6790\u65e5\u5fd7 \uff0c\u9a8c\u8bc1\u65e5\u5fd7\u89e3\u6790\u662f\u5426\u6210\u529f\u3002 \u4f8b\u5982\uff1a 127.0.0.1 - - [24/Dec/2021:01:27:11 +0000] \"GET / HTTP/1.1\" 200 3520 \"-\" \"curl/7.79.1\" \"-\" \u68c0\u67e5\u6bcf\u4e2a\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04\u662f\u5426\u6b63\u786e\u3002 \u901a\u8fc7\u9009\u62e9\u7b2c\u4e8c\u5217\u4e2d\u7684\u4e0b\u62c9\u83dc\u5355\u6765\u66f4\u6539\u7c7b\u578b\u3002 \u5bf9\u4e8e\u6240\u6709\u652f\u6301\u7684\u7c7b\u578b\uff0c\u8bf7\u53c2\u9605 \u6570\u636e\u7c7b\u578b \u3002 Note \u60a8\u5fc5\u987b\u4f7f\u7528\u952e time \u6307\u5b9a\u65e5\u5fd7\u7684\u65e5\u671f\u65f6\u95f4\u3002 \u5982\u679c\u672a\u6307\u5b9a\uff0c\u5c06\u6dfb\u52a0\u7cfb\u7edf\u65f6\u95f4\u3002 \u6307\u5b9a \u65f6\u95f4\u683c\u5f0f \u3002 \u683c\u5f0f\u8bed\u6cd5\u9075\u5faa strptime \u3002 \u8bf7\u53c2\u89c1 \u8be6\u60c5 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 1: \u521b\u5efa\u4e00\u4e2a\u5355\u884c\u6587\u672c\u65e5\u5fd7\u914d\u7f6e"},{"location":"implementation-guide/applications/single-line-text/#2","text":"","title":"\u6b65\u9aa4 2: \u521b\u5efa\u4e00\u4e2a\u65e5\u5fd7\u6444\u5165"},{"location":"implementation-guide/applications/single-line-text/#_2","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u8f6c\u5230 Permission \u9009\u9879\u5361\u5e76\u590d\u5236\u63d0\u4f9b\u7684 JSON \u7b56\u7565\u3002 \u5728 AWS Console > IAM > Policies \u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002 \u70b9\u51fb Create Policy \uff0c\u9009\u62e9 JSON \u5e76\u66ff\u6362\u6587\u672c\u5757\u5185\u7684\u6240\u6709\u5185\u5bb9\u3002\u8bf7\u8bb0\u4f4f\u7528\u60a8\u7684\u5e10\u6237 ID \u66ff\u6362 <YOUR ACCOUNT ID> \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u518d\u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u8f93\u5165\u6b64\u7b56\u7565\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff1a loghub-ec2-policy \u3002 \u5c06\u7b56\u7565\u9644\u52a0\u5230\u60a8\u7684 EC2 \u5b9e\u4f8b\u89d2\u8272\uff0c\u4ee5\u5141\u8bb8\u65e5\u5fd7\u4ee3\u7406\u6709\u6743\u5c06\u65e5\u5fd7\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \"\u4ece\u5b9e\u4f8b\u7ec4\"\u3002 \u9009\u62e9 \u9009\u62e9\u5b58\u5728 \uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u60a8\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5b9e\u4f8b\u7ec4\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u9009\u62e9\u5df2\u5b58\u5728 \uff0c\u5e76\u9009\u62e9\u5728\u5148\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u3002","title":"\u5b9e\u4f8b\u7ec4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/single-line-text/#eks","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u6e90 \u4e0b\uff0c\u9009\u62e9 EKS \u96c6\u7fa4 \u3002 \u5355\u51fb\u5df2\u5bfc\u5165\u4e3a\u65e5\u5fd7\u6e90\u7684 EKS \u96c6\u7fa4\u3002 \u8f6c\u5230 \u5e94\u7528\u65e5\u5fd7\u6444\u53d6 \u9009\u9879\u5361\uff0c\u7136\u540e\u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u9009\u62e9\"\u9009\u62e9\u5df2\u5b58\u5728\" \u5e76\u9009\u62e9\u5728 \u524d\u63d0\u6761\u4ef6 \u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002 \u6309\u7167 Log Hub \u751f\u6210\u7684\u6307\u5357\u90e8\u7f72 Fluent-bit \u65e5\u5fd7\u4ee3\u7406\u3002 \u9009\u62e9\u521a\u521a\u521b\u5efa\u7684\u5e94\u7528\u65e5\u5fd7\u6444\u53d6\u3002 \u6309\u7167 DaemonSet \u6216 Sidecar \u6307\u5357\u90e8\u7f72\u65e5\u5fd7\u4ee3\u7406\u3002","title":"EKS \u96c6\u7fa4\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/single-line-text/#s3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 \u5e94\u7528\u65e5\u5fd7 \u3002 \u5355\u51fb\u5728 \u524d\u63d0\u6761\u4ef6 \u671f\u95f4\u521b\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u7ba1\u9053\u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u4e0b\u62c9\u83dc\u5355\uff0c\u7136\u540e\u9009\u62e9 \u4eceS3\u5b58\u50a8\u6876 \u3002 \u586b\u5199\u6240\u6709\u8868\u5355\u5b57\u6bb5\u4ee5\u6307\u5b9a S3 \u65e5\u5fd7\u6e90\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9\u4e4b\u524d\u8bbe\u7f6e\u4e2d\u521b\u5efa\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\uff0c\u7136\u540e\u9009\u62e9 \u521b\u5efa \u5b8c\u6210\u521b\u5efa\u6444\u53d6\u3002","title":"S3 \u5b58\u50a8\u6876\u4f5c\u4e3a\u65e5\u5fd7\u6e90"},{"location":"implementation-guide/applications/single-line-text/#3-opensearch","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 OpenSearch \u63a7\u5236\u53f0\u3002 \u521b\u5efa\u7d22\u5f15 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002 \u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Discover \u90e8\u5206\u3002 \u5c06\u6d3b\u52a8\u7d22\u5f15\u6a21\u5f0f\u66f4\u6539\u4e3a <pipeline-index-prefix>-* \u3002","title":"\u6b65\u9aa4 3: \u5728 OpenSearch \u4e2d\u67e5\u770b\u60a8\u7684\u65e5\u5fd7"},{"location":"implementation-guide/aws-services/","text":"\u6784\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 Log Hub \u652f\u6301\u901a\u8fc7\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u5230 AOS\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u7f51\u9875\u63a7\u5236\u53f0 \u6216\u901a\u8fc7 \u72ec\u7acb CloudFormation \u6a21\u677f \u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 Log Hub \u8bfb\u53d6\u6570\u636e\u6e90\u3001\u89e3\u6790\u3001\u6e05\u7406\u6216\u4e30\u5bcc\u3001\u548c\u6444\u53d6\u65e5\u5fd7\u5230 AOS \u57df\u8fdb\u884c\u5206\u6790\u3002\u6b64\u5916\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u6a21\u677f\u5316\u7684\u4eea\u8868\u677f\u4fbf\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u91cd\u8981 AWS \u6258\u7ba1\u670d\u52a1\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\uff0c\u5e76\u4e14\u65e0\u6cd5\u8c03\u6574\u3002 \u652f\u6301\u7684 AWS Services \u5927\u591a\u6570 AWS \u6258\u7ba1\u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 Amazon CloudWatch Logs\u3001Amazon S3\u3001Amazon Kinesis Data Streams \u6216 Amazon Kinesis Firehose\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f Amazon CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u662f Amazon VPC Flow logs S3 \u662f \u662f AWS Config N/A S3 \u662f \u662f \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 AOS\u3002 Log Hub \u4e2d\u5927\u591a\u6570\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u4eea\u8868\u677f\u3002\u5728\u4f9b\u5e94\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u8f6c\u5230 OpenSearch \u67e5\u770b\u4eea\u8868\u677f\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b AWS \u670d\u52a1\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u5e76\u67e5\u770b\u4eea\u8868\u677f\uff1a Amazon CloudTrail Amazon S3 Amazon RDS/Aurora Amazon CloudFront AWS Lambda Elastic Load Balancing AWS WAF Amazon VPC AWS Config","title":"\u6982\u89c8"},{"location":"implementation-guide/aws-services/#aws","text":"Log Hub \u652f\u6301\u901a\u8fc7\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u5c06 AWS \u670d\u52a1\u65e5\u5fd7\u6444\u53d6\u5230 AOS\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u7f51\u9875\u63a7\u5236\u53f0 \u6216\u901a\u8fc7 \u72ec\u7acb CloudFormation \u6a21\u677f \u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 Log Hub \u8bfb\u53d6\u6570\u636e\u6e90\u3001\u89e3\u6790\u3001\u6e05\u7406\u6216\u4e30\u5bcc\u3001\u548c\u6444\u53d6\u65e5\u5fd7\u5230 AOS \u57df\u8fdb\u884c\u5206\u6790\u3002\u6b64\u5916\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u63d0\u4f9b\u6a21\u677f\u5316\u7684\u4eea\u8868\u677f\u4fbf\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u91cd\u8981 AWS \u6258\u7ba1\u670d\u52a1\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u6bcf\u5929\u8f6e\u6362\u7d22\u5f15\uff0c\u5e76\u4e14\u65e0\u6cd5\u8c03\u6574\u3002","title":"\u6784\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053"},{"location":"implementation-guide/aws-services/#aws-services","text":"\u5927\u591a\u6570 AWS \u6258\u7ba1\u670d\u52a1\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 Amazon CloudWatch Logs\u3001Amazon S3\u3001Amazon Kinesis Data Streams \u6216 Amazon Kinesis Firehose\u3002 \u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f Amazon CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u662f Amazon VPC Flow logs S3 \u662f \u662f AWS Config N/A S3 \u662f \u662f \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 AOS\u3002 Log Hub \u4e2d\u5927\u591a\u6570\u53d7\u652f\u6301\u7684 AWS \u670d\u52a1\u5728\u521b\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u65f6\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u4eea\u8868\u677f\u3002\u5728\u4f9b\u5e94\u7ba1\u9053\u540e\uff0c\u60a8\u53ef\u4ee5\u8f6c\u5230 OpenSearch \u67e5\u770b\u4eea\u8868\u677f\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u4ee5\u4e0b AWS \u670d\u52a1\u521b\u5efa\u65e5\u5fd7\u6444\u53d6\u5e76\u67e5\u770b\u4eea\u8868\u677f\uff1a Amazon CloudTrail Amazon S3 Amazon RDS/Aurora Amazon CloudFront AWS Lambda Elastic Load Balancing AWS WAF Amazon VPC AWS Config","title":"\u652f\u6301\u7684 AWS Services"},{"location":"implementation-guide/aws-services/cloudfront/","text":"Amazon CloudFront \u65e5\u5fd7 CloudFront \u6807\u51c6\u65e5\u5fd7 \u4e3a\u6bcf\u4e2a\u53d1\u9001\u5230\u5206\u53d1\u7684\u8bf7\u6c42\u63d0\u4f9b\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important CloudFront \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f CloudFront \u5206\u914d ID\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon CloudFront"},{"location":"implementation-guide/aws-services/cloudfront/#amazon-cloudfront","text":"CloudFront \u6807\u51c6\u65e5\u5fd7 \u4e3a\u6bcf\u4e2a\u53d1\u9001\u5230\u5206\u53d1\u7684\u8bf7\u6c42\u63d0\u4f9b\u8be6\u7ec6\u7684\u8bb0\u5f55\u3002","title":"Amazon CloudFront \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/cloudfront/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important CloudFront \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/cloudfront/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudFront \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a CloudFront \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b CloudFront \u65e5\u5fd7\u4f4d\u7f6e\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 CloudFront \u5206\u914d\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 CloudFront Distribution ID \u548c CloudFront \u6807\u51c6\u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f CloudFront \u5206\u914d ID\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudfront/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudfront/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/cloudtrail/","text":"CloudTrail \u65e5\u5fd7 Amazon CloudTrail \u76d1\u63a7\u548c\u8bb0\u5f55\u60a8\u7684 AWS \u57fa\u7840\u8bbe\u65bd\u4e2d\u7684\u8d26\u6237\u6d3b\u52a8\u3002\u5b83\u5c06\u6240\u6709\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684 S3 \u5b58\u50a8\u6876\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 CloudTrail \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u8ddf\u8e2a\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528\u72ec\u7acb\u7684 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudTrail Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon CloudTrail"},{"location":"implementation-guide/aws-services/cloudtrail/#cloudtrail","text":"Amazon CloudTrail \u76d1\u63a7\u548c\u8bb0\u5f55\u60a8\u7684 AWS \u57fa\u7840\u8bbe\u65bd\u4e2d\u7684\u8d26\u6237\u6d3b\u52a8\u3002\u5b83\u5c06\u6240\u6709\u6570\u636e\u8f93\u51fa\u5230\u6307\u5b9a\u7684 S3 \u5b58\u50a8\u6876\u3002","title":"CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/cloudtrail/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 CloudTrail \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/cloudtrail/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u5355\u51fb \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u8ddf\u8e2a\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/cloudtrail/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudTrail Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528\u72ec\u7acb\u7684 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/cloudtrail/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/config/","text":"Amazon Config \u65e5\u5fd7 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cAWS Config\u5c06\u914d\u7f6e\u5386\u53f2\u8bb0\u5f55\u548c\u5feb\u7167\u6587\u4ef6\u4f20\u9001\u5230 Amazon S3 \u5b58\u50a8\u6876 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important \u9700\u8981\u60a8\u5df2\u7ecf\u5728\u90e8\u7f72\u4e86 Log Hub \u7684\u533a\u57df\u4e2d\u542f\u7528\u4e86 AWS Config \u670d\u52a1\u3002 \u5b58\u653e AWS Config \u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Config \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a \u65e5\u5fd7\u521b\u5efa \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u786e\u8ba4 AWS Config \u65e5\u5fd7\u5b58\u50a8\u7684 S3 \u4f4d\u7f6e\uff0c\u5e76\u8f93\u5165 AWS Config \u540d\u79f0 \u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 AWS Config \u540d\u79f0 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u4e4b\u524d\u8f93\u5165\u7684 AWS Config \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"AWS Config"},{"location":"implementation-guide/aws-services/config/#amazon-config","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cAWS Config\u5c06\u914d\u7f6e\u5386\u53f2\u8bb0\u5f55\u548c\u5feb\u7167\u6587\u4ef6\u4f20\u9001\u5230 Amazon S3 \u5b58\u50a8\u6876","title":"Amazon Config \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/config/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important \u9700\u8981\u60a8\u5df2\u7ecf\u5728\u90e8\u7f72\u4e86 Log Hub \u7684\u533a\u57df\u4e2d\u542f\u7528\u4e86 AWS Config \u670d\u52a1\u3002 \u5b58\u653e AWS Config \u65e5\u5fd7\u7684\u5b58\u50a8\u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/config/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Config \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a \u65e5\u5fd7\u521b\u5efa \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u786e\u8ba4 AWS Config \u65e5\u5fd7\u5b58\u50a8\u7684 S3 \u4f4d\u7f6e\uff0c\u5e76\u8f93\u5165 AWS Config \u540d\u79f0 \u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 AWS Config \u540d\u79f0 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u4e4b\u524d\u8f93\u5165\u7684 AWS Config \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/config/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - CloudFront \u6807\u51c6\u65e5\u5fd7\u6444\u53d6 \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/config/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/elb/","text":"\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7 ALB \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u8bbf\u95ee\u65e5\u5fd7\uff0c\u7528\u4e8e\u6355\u83b7\u6709\u5173\u53d1\u9001\u5230\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 ALB \u4e3a\u6bcf\u4e2a\u8d1f\u8f7d\u5e73\u8861\u5668\u8282\u70b9\u53d1\u5e03\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6bcf 5 \u5206\u949f\u4e00\u6b21\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 ELB \u65e5\u5fd7\u5b58\u50a8\u6876\u533a\u57df\u5fc5\u987b\u4e0e Log Hub \u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u533a\u57df\u76f8\u540c\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u8d1f\u8f7d\u5747\u8861\u5668\u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Elastic Load Balancing"},{"location":"implementation-guide/aws-services/elb/#alb","text":"ALB \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u8bbf\u95ee\u65e5\u5fd7\uff0c\u7528\u4e8e\u6355\u83b7\u6709\u5173\u53d1\u9001\u5230\u8d1f\u8f7d\u5747\u8861\u5668\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 ALB \u4e3a\u6bcf\u4e2a\u8d1f\u8f7d\u5e73\u8861\u5668\u8282\u70b9\u53d1\u5e03\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6bcf 5 \u5206\u949f\u4e00\u6b21\u3002","title":"\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5e73\u8861 (ALB) \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/elb/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 ELB \u65e5\u5fd7\u5b58\u50a8\u6876\u533a\u57df\u5fc5\u987b\u4e0e Log Hub \u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u533a\u57df\u76f8\u540c\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/elb/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Elastic Load Balancer \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \uff08\u5982\u679c\u9009\u62e9\u7684 ALB \u8bbf\u95ee\u65e5\u5fd7\u6ca1\u6709\u5f00\u542f\uff0c\u70b9\u51fb \u5f00\u542f \u5f00\u542f ALB \u8bbf\u95ee\u65e5\u5fd7\u3002\uff09 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Application Load Balancer \u6807\u8bc6\u7b26 \u548c \u65e5\u5fd7\u4f4d\u7f6e \u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u8d1f\u8f7d\u5747\u8861\u5668\u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/elb/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - ELB Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/elb/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/include-cfn-common/","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"Include cfn common"},{"location":"implementation-guide/aws-services/include-cw-cfn-common/","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"Include cw cfn common"},{"location":"implementation-guide/aws-services/include-dashboard/","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Include dashboard"},{"location":"implementation-guide/aws-services/include-index-pattern/","text":"\u8f6c\u5230\u5de6\u4fa7\u8fb9\u680f\u4e2d\u7684 Stack Management \u90e8\u5206\uff0c\u7136\u540e\u9009\u62e9 Index Patterns \u3002 \u9009\u62e9 Create index pattern \uff0c\u8f93\u5165\u8981\u521b\u5efa\u7684\u7d22\u5f15\u3002 \u9009\u62e9 Next step \u3002 \u5728 Time field \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u6307\u5b9a\u65f6\u95f4\uff0c\u9009\u62e9 Create index pattern \u3002","title":"Include index pattern"},{"location":"implementation-guide/aws-services/include-supported-service-logs/","text":"\u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684 AWS \u670d\u52a1\u548c\u76f8\u5e94\u7684\u529f\u80fd\u3002 AWS Service \u65e5\u5fd7\u7c7b\u578b \u65e5\u5fd7\u4f4d\u7f6e \u81ea\u52a8\u6444\u53d6 \u5185\u7f6e\u4eea\u8868\u677f Amazon CloudTrail N/A S3 \u662f \u662f Amazon S3 Access logs S3 \u662f \u662f Amazon RDS/Aurora MySQL Logs CloudWatch Logs \u662f \u662f Amazon CloudFront Standard access logs S3 \u662f \u662f Application Load Balancer Access logs S3 \u662f \u662f AWS WAF Web ACL logs S3 \u662f \u662f AWS Lambda N/A CloudWatch Logs \u662f \u662f Amazon VPC Flow logs S3 \u662f \u662f AWS Config N/A S3 \u662f \u662f \u81ea\u52a8\u6444\u53d6 : \u8be5\u89e3\u51b3\u65b9\u6848\u81ea\u52a8\u68c0\u6d4b\u8d44\u6e90\u7684\u65e5\u5fd7\u4f4d\u7f6e\uff0c\u7136\u540e\u8bfb\u53d6\u65e5\u5fd7\u3002 \u5185\u7f6e\u4eea\u8868\u677f : \u6307\u5b9a AWS \u670d\u52a1\u7684\u5f00\u7bb1\u5373\u7528\u4eea\u8868\u677f\u3002 \u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u81ea\u52a8\u5c06\u4eea\u8868\u677f\u5f15\u5165 AOS\u3002","title":"Include supported service logs"},{"location":"implementation-guide/aws-services/lambda/","text":"AWS Lambda \u65e5\u5fd7 AWS Lambda \u4f1a\u4ee3\u8868\u60a8\u81ea\u52a8\u76d1\u63a7 Lambda \u51fd\u6570\u5e76\u5c06\u51fd\u6570\u6307\u6807\u53d1\u9001\u5230 Amazon CloudWatch\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important Lambda \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u80fd\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Lambda \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 Lambda \u51fd\u6570\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Lambda \u51fd\u6570\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Lambda Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 Sample Dashboard \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"AWS Lambda"},{"location":"implementation-guide/aws-services/lambda/#aws-lambda","text":"AWS Lambda \u4f1a\u4ee3\u8868\u60a8\u81ea\u52a8\u76d1\u63a7 Lambda \u51fd\u6570\u5e76\u5c06\u51fd\u6570\u6307\u6807\u53d1\u9001\u5230 Amazon CloudWatch\u3002","title":"AWS Lambda \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/lambda/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important Lambda \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS \u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u80fd\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/lambda/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS Lambda \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 Lambda \u51fd\u6570\u3002\uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Lambda \u51fd\u6570\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/lambda/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Lambda Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/lambda/#sample-dashboard","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Sample Dashboard"},{"location":"implementation-guide/aws-services/rds/","text":"Amazon RDS/Aurora \u65e5\u5fd7 \u60a8\u53ef\u4ee5 \u5c06\u6570\u636e\u5e93\u5b9e\u4f8b\u65e5\u5fd7\u53d1\u5e03\u5230 Amazon CloudWatch Logs \u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u5c06\u6570\u636e\u5b58\u50a8\u5728\u9ad8\u5ea6\u8010\u7528\u7684\u5b58\u50a8\u4e2d\uff0c\u5e76\u4f7f\u7528 CloudWatch Logs \u4ee3\u7406\u7ba1\u7406\u6570\u636e\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u60a8\u7684\u6570\u636e\u5e93\u65e5\u5fd7\u5df2\u542f\u7528\u3002 \u67d0\u4e9b\u6570\u636e\u5e93\u65e5\u5fd7\u9ed8\u8ba4\u672a\u542f\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u53c2\u6570\u4ee5\u542f\u7528\u65e5\u5fd7\u3002 \u8bf7\u53c2\u9605 \u5982\u4f55\u4e3a Amazon RDS MySQL \u6570\u636e\u5e93\u5b9e\u4f8b\u542f\u7528\u548c\u76d1\u63a7\u65e5\u5fd7\uff1f \u4e86\u89e3\u5982\u4f55\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 CloudWatch \u65e5\u5fd7\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 RDS/Aurora MySQL \u53c2\u6570\u7684\u8981\u6c42\u3002 \u53c2\u6570 \u8981\u6c42 Audit Log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 MARIADB_AUDIT_PLUGIN \u9009\u9879\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u7ec4\u3002 General log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a general_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u901a\u7528\u65e5\u5fd7\u3002 Slow query log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a slow_query_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\u3002 Log output \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a log_output = FILE \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u5c06\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5e76\u5c06\u5b83\u4eec\u53d1\u5e03\u5230 CloudWatch Logs\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 RDS \u548c CloudWatch \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon RDS \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u4e3a RDS \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b\u60a8\u7684 RDS \u65e5\u5fd7\u914d\u7f6e\uff0c\u5e76\u4ece CloudWatch \u6444\u53d6\u65e5\u5fd7\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 RDS \u96c6\u7fa4\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \uff0c\u9009\u62e9 \u6570\u636e\u5e93\u7c7b\u578b \u5e76\u5728 \u65e5\u5fd7\u7c7b\u578b\u548c\u4f4d\u7f6e \u4e2d\u8f93\u5165 CloudWatch \u65e5\u5fd7\u4f4d\u7f6e\u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - RDS Log Ingestion \u89e3\u51b3\u65b9\u6848 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002 RDS/Aurora MySQL","title":"Amazon RDS/Aurora"},{"location":"implementation-guide/aws-services/rds/#amazon-rdsaurora","text":"\u60a8\u53ef\u4ee5 \u5c06\u6570\u636e\u5e93\u5b9e\u4f8b\u65e5\u5fd7\u53d1\u5e03\u5230 Amazon CloudWatch Logs \u3002 \u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u5bf9\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u5c06\u6570\u636e\u5b58\u50a8\u5728\u9ad8\u5ea6\u8010\u7528\u7684\u5b58\u50a8\u4e2d\uff0c\u5e76\u4f7f\u7528 CloudWatch Logs \u4ee3\u7406\u7ba1\u7406\u6570\u636e\u3002","title":"Amazon RDS/Aurora \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/rds/#_1","text":"\u786e\u4fdd\u60a8\u7684\u6570\u636e\u5e93\u65e5\u5fd7\u5df2\u542f\u7528\u3002 \u67d0\u4e9b\u6570\u636e\u5e93\u65e5\u5fd7\u9ed8\u8ba4\u672a\u542f\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u53c2\u6570\u4ee5\u542f\u7528\u65e5\u5fd7\u3002 \u8bf7\u53c2\u9605 \u5982\u4f55\u4e3a Amazon RDS MySQL \u6570\u636e\u5e93\u5b9e\u4f8b\u542f\u7528\u548c\u76d1\u63a7\u65e5\u5fd7\uff1f \u4e86\u89e3\u5982\u4f55\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230 CloudWatch \u65e5\u5fd7\u3002 \u4e0b\u8868\u5217\u51fa\u4e86 RDS/Aurora MySQL \u53c2\u6570\u7684\u8981\u6c42\u3002 \u53c2\u6570 \u8981\u6c42 Audit Log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 MARIADB_AUDIT_PLUGIN \u9009\u9879\u7684\u81ea\u5b9a\u4e49\u9009\u9879\u7ec4\u3002 General log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a general_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u901a\u7528\u65e5\u5fd7\u3002 Slow query log \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a slow_query_log = 1 \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u6765\u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\u3002 Log output \u6570\u636e\u5e93\u5b9e\u4f8b\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u8bbe\u7f6e\u4e3a log_output = FILE \u7684\u81ea\u5b9a\u4e49\u53c2\u6570\u7ec4\u5c06\u65e5\u5fd7\u5199\u5165\u6587\u4ef6\u7cfb\u7edf\u5e76\u5c06\u5b83\u4eec\u53d1\u5e03\u5230 CloudWatch Logs\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/aws-services/rds/#_2","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 RDS \u548c CloudWatch \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/rds/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon RDS \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u4e3a RDS \u65e5\u5fd7\u542f\u7528 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u68c0\u6d4b\u60a8\u7684 RDS \u65e5\u5fd7\u914d\u7f6e\uff0c\u5e76\u4ece CloudWatch \u6444\u53d6\u65e5\u5fd7\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 RDS \u96c6\u7fa4\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \uff0c\u9009\u62e9 \u6570\u636e\u5e93\u7c7b\u578b \u5e76\u5728 \u65e5\u5fd7\u7c7b\u578b\u548c\u4f4d\u7f6e \u4e2d\u8f93\u5165 CloudWatch \u65e5\u5fd7\u4f4d\u7f6e\u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f \u6570\u636e\u5e93\u6807\u8bc6\u7b26 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/rds/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - RDS Log Ingestion \u89e3\u51b3\u65b9\u6848 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u63cf\u8ff0 LogGroupNames <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 CloudWatch \u65e5\u5fd7\u7ec4\u7684\u540d\u79f0\u3002 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5bfc\u51fa CloudWatch Logs \u7684\u65e5\u5fd7\u6876\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> CloudWatch \u65e5\u5fd7\u7ec4\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). KDSShardNumber 1 \u5c06\u8ba2\u9605 CloudWatch \u65e5\u5fd7\u7ec4\u7684 Kinesis Data Streams \u7684\u5206\u7247\u6570\u3002 KDSRetentionHours 48 Kinesis Data Streams \u7684\u4fdd\u7559\u65f6\u95f4\u3002 Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 15 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/rds/#_3","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/rds/#rdsaurora-mysql","text":"","title":"RDS/Aurora MySQL"},{"location":"implementation-guide/aws-services/s3/","text":"Amazon S3 \u65e5\u5fd7 Amazon S3 \u670d\u52a1\u5668\u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u5bf9\u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u53e6\u4e00\u4e2a S3 \u5b58\u50a8\u6876\u4e2d\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 S3 Bucket \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub\u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon S3 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u5b58\u50a8\u6876\u540d\u79f0 \u548c S3\u8bbf\u95ee\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - S3 Access Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"Amazon S3"},{"location":"implementation-guide/aws-services/s3/#amazon-s3","text":"Amazon S3 \u670d\u52a1\u5668\u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u5bf9\u5b58\u50a8\u6876\u7684\u8bf7\u6c42\u7684\u8be6\u7ec6\u8bb0\u5f55\u3002\u60a8\u53ef\u4ee5\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u53e6\u4e00\u4e2a S3 \u5b58\u50a8\u6876\u4e2d\u3002","title":"Amazon S3 \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/s3/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 S3 Bucket \u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/s3/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon S3 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 S3 \u8bbf\u95ee\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 \u5b58\u50a8\u6876\u540d\u79f0 \u548c S3\u8bbf\u95ee\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684\u5b58\u50a8\u6876\u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/s3/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - S3 Access Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/s3/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/vpc/","text":"VPC \u6d41\u65e5\u5fd7 VPC \u6d41\u65e5\u5fd7 \u53ef\u4ee5\u8ba9\u60a8\u53ef\u4ee5\u6355\u83b7\u6709\u5173\u4f20\u5165\u548c\u4f20\u51fa\u60a8\u7684 VPC \u4e2d\u7f51\u7edc\u63a5\u53e3\u7684 IP \u6d41\u91cf\u7684\u4fe1\u606f. \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 Log Hub \u76ee\u524d\u53ea\u652f\u6301\u5c06\u6d41\u65e5\u5fd7\u6570\u636e\u53d1\u5e03\u5230 Amazon S3 \u7684 VPC\uff0c \u5e76\u4e14\u8be5 S3 \u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub\u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 VPC Flow \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 VPC \u6d41\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 VPC\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 VPC \u540d\u5b57 \u548c VPC \u6d41\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684 VPC \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - VPC Flow Logs Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"VPC Flow Log"},{"location":"implementation-guide/aws-services/vpc/#vpc","text":"VPC \u6d41\u65e5\u5fd7 \u53ef\u4ee5\u8ba9\u60a8\u53ef\u4ee5\u6355\u83b7\u6709\u5173\u4f20\u5165\u548c\u4f20\u51fa\u60a8\u7684 VPC \u4e2d\u7f51\u7edc\u63a5\u53e3\u7684 IP \u6d41\u91cf\u7684\u4fe1\u606f.","title":"VPC \u6d41\u65e5\u5fd7"},{"location":"implementation-guide/aws-services/vpc/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 \u91cd\u8981 Log Hub \u76ee\u524d\u53ea\u652f\u6301\u5c06\u6d41\u65e5\u5fd7\u6570\u636e\u53d1\u5e03\u5230 Amazon S3 \u7684 VPC\uff0c \u5e76\u4e14\u8be5 S3 \u6876\u5fc5\u987b\u4e0e Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/vpc/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 VPC Flow \u65e5\u5fd7 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u4e3a S3\u542f\u7528\u8bbf\u95ee\u65e5\u5fd7 \u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002\u5982\u679c\u5c1a\u672a\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\uff0c\u81ea\u52a8\u6a21\u5f0f\u5c06\u542f\u7528 VPC \u6d41\u65e5\u5fd7\u5e76\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5230\u96c6\u4e2d\u5f0f S3 \u5b58\u50a8\u6876\u3002 \u5bf9\u4e8e \u81ea\u52a8\u6a21\u5f0f \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9 VPC\u3002 \u5bf9\u4e8e \u624b\u52a8\u6a21\u5f0f \uff0c\u8f93\u5165 VPC \u540d\u5b57 \u548c VPC \u6d41\u65e5\u5fd7\u4f4d\u7f6e \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u8981\u6444\u53d6\u5173\u8054\u7684\u5185\u7f6e AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f\u60a8\u7684 VPC \u540d\u79f0\u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub\u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/vpc/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - VPC Flow Logs Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u5728 AWS \u63a7\u5236\u53f0\u4e2d\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df Template AWS \u4e2d\u56fd\u533a\u57df Template \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/vpc/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/aws-services/waf/","text":"AWS WAF \u65e5\u5fd7 WAF \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u6709\u5173\u7531\u60a8\u7684 Web ACL \u5206\u6790\u7684\u6d41\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bb0\u5f55\u7684\u4fe1\u606f\u5305\u62ec AWS WAF \u4ece\u60a8\u7684 AWS \u8d44\u6e90\u6536\u5230 Web \u8bf7\u6c42\u7684\u65f6\u95f4\u3001\u6709\u5173\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u4ee5\u53ca\u6709\u5173\u8bf7\u6c42\u5339\u914d\u7684\u89c4\u5219\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important WAF \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u548c Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e0d\u652f\u6301 WAF Classic \u4ea7\u751f\u7684\u65e5\u5fd7. \u60a8\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55 \u4ece WAF Classic \u8fc1\u79fb\u5230\u65b0 AWS WAF . AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u6444\u53d6\u9009\u9879 \u4e2d. \u9009\u62e9 \u91c7\u6837 \u6216 \u5168\u91cf . \u5bf9\u4e8e \u91c7\u6837 \uff0c \u8bf7\u8f93\u5165\u6444\u53d6\u91c7\u6837\u65e5\u5fd7\u7684\u9891\u7387\u3002 \u5bf9\u4e8e \u5168\u91cf \uff0c \u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\u6216\u5728\u624b\u52a8\u6a21\u5f0f\u4e2d\u8f93\u5165\u65e5\u5fd7\u4f4d\u7f6e \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Web ACL \u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - waf Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u793a\u4f8b\u4eea\u8868\u677f \u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"AWS WAF"},{"location":"implementation-guide/aws-services/waf/#aws-waf","text":"WAF \u8bbf\u95ee\u65e5\u5fd7 \u63d0\u4f9b\u6709\u5173\u7531\u60a8\u7684 Web ACL \u5206\u6790\u7684\u6d41\u91cf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u8bb0\u5f55\u7684\u4fe1\u606f\u5305\u62ec AWS WAF \u4ece\u60a8\u7684 AWS \u8d44\u6e90\u6536\u5230 Web \u8bf7\u6c42\u7684\u65f6\u95f4\u3001\u6709\u5173\u8bf7\u6c42\u7684\u8be6\u7ec6\u4fe1\u606f\u4ee5\u53ca\u6709\u5173\u8bf7\u6c42\u5339\u914d\u7684\u89c4\u5219\u7684\u8be6\u7ec6\u4fe1\u606f\u3002","title":"AWS WAF \u65e5\u5fd7"},{"location":"implementation-guide/aws-services/waf/#_1","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u5c06\u65e5\u5fd7\u6444\u53d6\u5230 AOS \u4e2d\u3002 Important WAF \u65e5\u5fd7\u5b58\u50a8\u6876\u5fc5\u987b\u548c Log Hub \u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u3002 Log Hub \u4e0d\u652f\u6301 WAF Classic \u4ea7\u751f\u7684\u65e5\u5fd7. \u60a8\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55 \u4ece WAF Classic \u8fc1\u79fb\u5230\u65b0 AWS WAF . AOS\u7d22\u5f15\u6bcf\u5929\u8f6e\u6362\uff0c\u4e0d\u53ef\u8c03\u6574\u3002","title":"\u521b\u5efa\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/aws-services/waf/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u4e0b\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u6309\u94ae\u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 AWS WAF \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u6216 \u624b\u52a8 \u3002 \u5bf9\u4e8e \u81ea\u52a8 \u6a21\u5f0f\uff0c\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a Web ACL\u3002 \u5bf9\u4e8e \u624b\u52a8 \u6a21\u5f0f\uff0c\u8f93\u5165 Web ACL name \u3002 (\u53ef\u9009\u6b65\u9aa4) \u5982\u679c\u9700\u8981\u5938\u8d26\u6237\u6444\u53d6\u65e5\u5fd7\uff0c\u9700\u8981\u5148\u5728 \u8d26\u6237 \u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a \u94fe\u63a5\u7684 AWS \u8d26\u6237 \u3002 \u5728 \u6444\u53d6\u9009\u9879 \u4e2d. \u9009\u62e9 \u91c7\u6837 \u6216 \u5168\u91cf . \u5bf9\u4e8e \u91c7\u6837 \uff0c \u8bf7\u8f93\u5165\u6444\u53d6\u91c7\u6837\u65e5\u5fd7\u7684\u9891\u7387\u3002 \u5bf9\u4e8e \u5168\u91cf \uff0c \u5982\u679c\u672a\u542f\u7528 Web ACL \u65e5\u5fd7\uff0c\u8bf7\u5355\u51fb \u5f00\u542f \u542f\u7528\u8bbf\u95ee\u65e5\u5fd7\u3002\u6216\u5728\u624b\u52a8\u6a21\u5f0f\u4e2d\u8f93\u5165\u65e5\u5fd7\u4f4d\u7f6e \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u4e00\u4e2a\u5bfc\u5165\u7684\u57df\u3002 \u5982\u679c\u60a8\u8981\u6444\u53d6\u5173\u8054\u7684\u6a21\u677f\u5316 AOS \u4eea\u8868\u677f\uff0c\u8bf7\u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u66f4\u6539\u76ee\u6807 AOS \u7d22\u5f15\u7684 \u7d22\u5f15\u524d\u7f00 \u3002\u9ed8\u8ba4\u524d\u7f00\u662f Web ACL \u540d\u79f0 \u3002 \u5728 \u65e5\u5fd7\u751f\u547d\u5468\u671f \u90e8\u5206\uff0c\u8f93\u5165\u7ba1\u7406 AOS \u7d22\u5f15\u751f\u547d\u5468\u671f\u7684\u5929\u6570\u3002 Log Hub \u5c06\u4e3a\u6b64\u7ba1\u9053\u81ea\u52a8\u521b\u5efa\u5173\u8054\u7684 \u7d22\u5f15\u72b6\u6001\u7ba1\u7406 (ISM) \u7b56\u7565\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5982\u679c\u9700\u8981\uff0c\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/aws-services/waf/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - waf Log Ingestion \u89e3\u51b3\u65b9\u6848\u3002 \u4ece AWS \u63a7\u5236\u53f0\u542f\u52a8 \u4e0b\u8f7d\u6a21\u677f AWS \u6d77\u5916\u533a\u57df \u6a21\u677f AWS \u4e2d\u56fd\u533a\u57df \u6a21\u677f \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u4ee5\u4e0a\u6309\u94ae\u4ee5\u542f\u52a8 AWS CloudFormation \u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e0b\u8f7d\u6a21\u677f\u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u4e0b\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u63cf\u8ff0 Log Bucket Name <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u540d\u79f0\u3002 Log Bucket Prefix <\u9700\u8981\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u8def\u5f84\u524d\u7f00\u3002 Log Source Account ID <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u8d26\u6237 ID. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 1 \u4e2d\u767b\u5f55\u7684\u8d26\u6237 ID. Log Source Region <\u53ef\u9009\u8f93\u5165> \u5b58\u50a8\u65e5\u5fd7\u7684 S3 \u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df. \u9ed8\u8ba4\u60c5\u51b5\u4e0b, \u4f1a\u4f7f\u7528\u60a8\u5728 \u6b65\u9aa4 2 \u4e2d\u6307\u5b9a\u7684\u533a\u57df Log Source Account Assume Role <\u53ef\u9009\u8f93\u5165> \u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u6240\u9700\u8981\u4f7f\u7528\u7684 IAM Role. \u5bf9\u4e8e\u5938\u8d26\u6237\u65e5\u5fd7\u6444\u53d6\u662f\u5fc5\u586b (\u9700\u8981\u5148 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 ). Engine Type OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 OpenSearch Domain Name <\u9700\u8981\u8f93\u5165> Amazon OpenSearch \u96c6\u7fa4\u7684\u57df\u540d\u3002 OpenSearch Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9 URL\u3002\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 Index Prefix <\u9700\u8981\u8f93\u5165> \u65e5\u5fd7\u7684 OpenSearch \u7d22\u5f15\u7684\u516c\u5171\u524d\u7f00\u3002\u7d22\u5f15\u540d\u79f0\u5c06\u4e3a <Index Prefix>-<log-type>-<YYYY-MM-DD> \u3002 Create Sample Dashboard Yes \u662f\u5426\u521b\u5efa\u793a\u4f8b OpenSearch \u4eea\u8868\u677f\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684 VPC\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u9009\u5b9a\u7684 VPC \u4e2d\u3002 Subnet IDs <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u81f3\u5c11\u4e24\u4e2a\u53ef\u4ee5\u8bbf\u95ee OpenSearch \u57df\u7684\u5b50\u7f51\u3002\u65e5\u5fd7\u5904\u7406 Lambda \u5c06\u9a7b\u7559\u5728\u5b50\u7f51\u4e2d\u3002\u786e\u4fdd\u5b50\u7f51\u53ef\u4ee5\u8bbf\u95ee Amazon S3 \u670d\u52a1\u3002 Security Group ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u5c06\u4e0e\u65e5\u5fd7\u5904\u7406 Lambda \u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u786e\u4fdd\u5b89\u5168\u7ec4\u6709\u6743\u8bbf\u95ee OpenSearch \u57df\u3002 S3 Backup Bucket <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u5b58\u50a8\u5931\u8d25\u63d0\u53d6\u65e5\u5fd7\u7684 S3 \u5907\u4efd\u5b58\u50a8\u6876\u540d\u79f0\u3002 Number Of Shards 5 \u5c06\u7d22\u5f15\u5747\u5300\u5206\u5e03\u5728\u6240\u6709\u6570\u636e\u8282\u70b9\u4e0a\u7684\u5206\u7247\u6570\u3002\u5c06\u6bcf\u4e2a\u5206\u7247\u7684\u5927\u5c0f\u4fdd\u6301\u5728 10-50 GiB \u4e4b\u95f4\u3002 Number of Replicas 1 OpenSearch \u7d22\u5f15\u7684\u526f\u672c\u6570\u3002\u6bcf\u4e2a\u526f\u672c\u90fd\u662f\u7d22\u5f15\u7684\u5b8c\u6574\u526f\u672c\u3002 Days to Warm Storage 0 \u5c06\u7d22\u5f15\u79fb\u52a8\u5230\u70ed\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u70ed\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Cold Storage 0 \u5c06\u7d22\u5f15\u79fb\u5165\u51b7\u5b58\u50a8\u6240\u9700\u7684\u5929\u6570\u3002\u4ec5\u5f53\u8be5\u503c\u5927\u4e8e 0 \u4e14 OpenSearch \u4e2d\u542f\u7528\u4e86\u51b7\u5b58\u50a8\u65f6\u624d\u751f\u6548\u3002 Days to Retain 0 \u4fdd\u7559\u7d22\u5f15\u7684\u603b\u5929\u6570\u3002\u5982\u679c\u503c\u4e3a 0\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u7d22\u5f15\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u5927\u7ea6 10 \u5206\u949f\u540e\u4f1a\u770b\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/aws-services/waf/#_2","text":"\u60a8\u53ef\u4ee5\u8bbf\u95ee Amazon OpenSearch \u4e2d\u7684\u5185\u7f6e\u4eea\u8868\u677f\u6765\u67e5\u770b\u65e5\u5fd7\u6570\u636e\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u67e5\u770b\u4eea\u8868\u677f \u3002 \u60a8\u53ef\u4ee5\u5355\u51fb\u4e0b\u56fe\u67e5\u770b\u9ad8\u5206\u8fa8\u7387\u7684\u793a\u4f8b\u4eea\u8868\u677f\u3002","title":"\u793a\u4f8b\u4eea\u8868\u677f"},{"location":"implementation-guide/deployment/","text":"\u6982\u89c8 \u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u8d26\u6237\u4e2d\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd\u60a8\u8981\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u76ee\u6807\u533a\u57df\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC, \u81f3\u5c11\u80fd\u67091\u4e2a\u65b0\u7684 VPC \u7a7a\u7f3a\u3002 \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC, \u81f3\u5c11\u9700\u89812\u4e2a\u5f39\u6027 IP (EIP) \u5730\u5740\u7a7a\u7f3a\u3002 \u81f3\u5c11\u80fd\u521b\u5efa8\u4e2a S3 \u5b58\u50a8\u6876\u3002 \u68c0\u67e5\u6240\u6709\u7684 \u8003\u8651\u56e0\u7d20 \u3002 \u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72 Log Hub \u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u9a8c\u8bc1\u548c\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 Cognito \u7528\u6237\u6c60\u5728\u4e00\u4e9b AWS \u533a\u57df \u7f3a\u5931\uff08\u4f8b\u5982: \u9999\u6e2f\uff09\u3002 \u5728\u8fd9\u4e9b\u5730\u533a\uff0c\u60a8\u9700\u8981\u6309\u7167\u8bf4\u660e\u4f7f\u7528 OpenID Connect \u7684\u65b9\u5f0f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u3002 \u6709\u5173\u53d7\u652f\u6301\u533a\u57df\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u533a\u57df\u90e8\u7f72 \u3002 \u4f7f\u7528 Cognito User Pool \u542f\u52a8 \u4f7f\u7528 OpenID Connect \u542f\u52a8 \u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72 AWS \u4e2d\u56fd\u533a\u57df\u6ca1\u6709 Cognito User Pool\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u8bf4\u660e\u5728\u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002 \u4f7f\u7528 OpenID Connect \u542f\u52a8","title":"\u6982\u89c8"},{"location":"implementation-guide/deployment/#_1","text":"\u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u8d26\u6237\u4e2d\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/deployment/#_2","text":"\u786e\u4fdd\u60a8\u8981\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u76ee\u6807\u533a\u57df\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC, \u81f3\u5c11\u80fd\u67091\u4e2a\u65b0\u7684 VPC \u7a7a\u7f3a\u3002 \u5982\u679c\u60a8\u542f\u52a8\u65f6\u9009\u62e9\u521b\u5efa\u65b0\u7684VPC, \u81f3\u5c11\u9700\u89812\u4e2a\u5f39\u6027 IP (EIP) \u5730\u5740\u7a7a\u7f3a\u3002 \u81f3\u5c11\u80fd\u521b\u5efa8\u4e2a S3 \u5b58\u50a8\u6876\u3002 \u68c0\u67e5\u6240\u6709\u7684 \u8003\u8651\u56e0\u7d20 \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/deployment/#aws","text":"Log Hub \u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u9a8c\u8bc1\u548c\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 Cognito \u7528\u6237\u6c60\u5728\u4e00\u4e9b AWS \u533a\u57df \u7f3a\u5931\uff08\u4f8b\u5982: \u9999\u6e2f\uff09\u3002 \u5728\u8fd9\u4e9b\u5730\u533a\uff0c\u60a8\u9700\u8981\u6309\u7167\u8bf4\u660e\u4f7f\u7528 OpenID Connect \u7684\u65b9\u5f0f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u3002 \u6709\u5173\u53d7\u652f\u6301\u533a\u57df\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u533a\u57df\u90e8\u7f72 \u3002 \u4f7f\u7528 Cognito User Pool \u542f\u52a8 \u4f7f\u7528 OpenID Connect \u542f\u52a8","title":"\u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/#aws_1","text":"AWS \u4e2d\u56fd\u533a\u57df\u6ca1\u6709 Cognito User Pool\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u8bf4\u660e\u5728\u4e2d\u56fd\u533a\u57df\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002 \u4f7f\u7528 OpenID Connect \u542f\u52a8","title":"\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/with-cognito/","text":"\u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72 \u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 15 \u5206\u949f \u90e8\u7f72\u6982\u8ff0 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u4e2d\u7684 IAM \u548c STS \u9650\u5236 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0 \u6210\u529f\u521b\u5efa\u5806\u6808\u540e\uff0c\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u751f\u6210\u4e00\u4e2a CloudFront \u57df\u540d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540c\u65f6\uff0c\u81ea\u52a8\u751f\u6210\u7684\u4e34\u65f6\u5bc6\u7801\uff08\u4e0d\u5305\u62ec\u5bc6\u7801\u7ed3\u5c3e\u5904\u7684 . \uff09\u5c06\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u5728 \u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u5e76\u8bb0\u5f55\u57df\u540d\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 WebConsoleUrl \uff0c\u7136\u540e\u5bfc\u822a\u5230\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u548c\u4e34\u65f6\u5bc6\u7801\u3002 a. \u8bbe\u7f6e\u65b0\u7684\u5e10\u6237\u5bc6\u7801\u3002 b. \uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u7528\u4e8e\u6062\u590d\u5e10\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u4f7f\u7528 Cognito User Pool"},{"location":"implementation-guide/deployment/with-cognito/#aws","text":"\u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 15 \u5206\u949f","title":"\u5728 AWS \u6d77\u5916\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/with-cognito/#_1","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0","title":"\u90e8\u7f72\u6982\u8ff0"},{"location":"implementation-guide/deployment/with-cognito/#1","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e2d\u90e8\u7f72 Log Hub \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u4e2d\u7684 IAM \u548c STS \u9650\u5236 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e Admin User Email <\u9700\u8981\u8f93\u5165> \u6307\u5b9a\u7ba1\u7406\u5458\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u7684\u4e34\u65f6\u5bc6\u7801\u3002\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u914d\u7f6e\u7684 Cognito User Pool \u4e2d\u521b\u5efa\u66f4\u591a\u7528\u6237\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 1. \u542f\u52a8\u5806\u6808"},{"location":"implementation-guide/deployment/with-cognito/#2","text":"\u6210\u529f\u521b\u5efa\u5806\u6808\u540e\uff0c\u6b64\u89e3\u51b3\u65b9\u6848\u4f1a\u751f\u6210\u4e00\u4e2a CloudFront \u57df\u540d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540c\u65f6\uff0c\u81ea\u52a8\u751f\u6210\u7684\u4e34\u65f6\u5bc6\u7801\uff08\u4e0d\u5305\u62ec\u5bc6\u7801\u7ed3\u5c3e\u5904\u7684 . \uff09\u5c06\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u5728 \u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u5e76\u8bb0\u5f55\u57df\u540d\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00 WebConsoleUrl \uff0c\u7136\u540e\u5bfc\u822a\u5230\u767b\u5f55\u9875\u9762\u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u548c\u4e34\u65f6\u5bc6\u7801\u3002 a. \u8bbe\u7f6e\u65b0\u7684\u5e10\u6237\u5bc6\u7801\u3002 b. \uff08\u53ef\u9009\uff09\u9a8c\u8bc1\u7528\u4e8e\u6062\u590d\u5e10\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 2. \u767b\u5f55\u63a7\u5236\u53f0"},{"location":"implementation-guide/deployment/with-oidc/","text":"\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72 \u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 30 \u5206\u949f \u524d\u63d0\u6761\u4ef6 \u91cd\u8981 Log Hub \u63a7\u5236\u53f0\u901a\u8fc7 CloudFront \u5206\u53d1\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u5206\u53d1\u88ab\u89c6\u4e3a Internet \u4fe1\u606f\u670d\u52a1\u3002 \u5982\u679c\u60a8\u5728 AWS \u4e2d\u56fd\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002\u57df\u540d\u5fc5\u987b\u6709\u6709\u6548\u7684 ICP\u5907\u6848 \u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002 \u4e00\u4e2a\u57df\u540d\u3002 \u60a8\u5c06\u4f7f\u7528\u6b64\u57df\u6765\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u3002 AWS IAM \u4e2d\u7684 SSL \u8bc1\u4e66\uff0c\u4e14\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u7684\u57df\u76f8\u5173\u8054\u3002 \u6309\u7167 \u672c\u6307\u5357 \u5c06 SSL \u8bc1\u4e66\u4e0a\u4f20\u5230 IAM\u3002 \u90e8\u7f72\u6982\u89c8 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684 OpenID \u8fde\u63a5\u5668 (OIDC) \u63d0\u4f9b\u5546\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u9009\u9879 1 \u81f3 4\u3002 \uff08\u9009\u9879 1\uff09\u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 2\uff09 Authing \u662f\u7b2c\u4e09\u65b9\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 3\uff09 Keycloak \u662f AWS \u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 4\uff09 ADFS \u662f Microsoft \u63d0\u4f9b\u7684\u4e00\u9879\u670d\u52a1\u3002 \uff08\u9009\u9879 5\uff09\u5176\u5b83\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5e73\u53f0\uff0c\u5982 Auth0 \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa OIDC \u5ba2\u6237\u7aef\uff0c\u5e76\u83b7\u53d6 client_id \u548c issuer \u3002 (\u9009\u9879 1) \u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u5728 AWS \u6d77\u5916\u533a\u57df\u767b\u9646 Amazon Cognito \u63a7\u5236\u53f0 \u3002 \u4f7f\u7528 Amazon Cognito \u63a7\u5236\u53f0\u8bbe\u7f6e\u6258\u7ba1 UI\u3002( \u8be6\u7ec6\u6b65\u9aa4 ) \u8bf7\u6ce8\u610f\uff0cAmazon Cognito \u63a7\u5236\u53f0\u53d1\u5e03\u4e86\u4e00\u4e2a\u65b0\u7248\u672c\uff0c\u65b0\u8001\u7248\u672c\u90fd\u5728\u4f7f\u7528\u3002\u5982\u679c\u60a8\u6b63\u5728\u4f7f\u7528\u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0\uff0c\u8bf7\u6309\u7167 New console \u7684\u6b65\u9aa4\u64cd\u4f5c\u3002\u5e76\u4e14\uff1a \u5bf9\u4e8e \u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a\u8bf7\u5728\u9009\u62e9 App type\uff08\u5e94\u7528\u7a0b\u5e8f\u7c7b\u578b\uff09\u65f6\u9009\u62e9 Public client\uff08\u516c\u6709\u5ba2\u6237\u7aef\uff09\u3002 \u5bf9\u4e8e \u65e7\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a\u8bf7\u5728\u6dfb\u52a0\u5e94\u7528\u7a0b\u5e8f\u5ba2\u6237\u7aef\u65f6\uff0c \u6e05\u9664 \u9009\u9879 Generate client secret\uff08\u751f\u6210\u5ba2\u6237\u7aef\u5bc6\u94a5\uff09\u3002\u8be5\u9009\u9879\u662f\u9ed8\u8ba4\u5f00\u542f\u7684\u3002 \u8bf7\u5728\u586b\u5199 Callback URL \u548c Sign out URL \u65f6\uff0c\u4f7f\u7528\u7ed9 Log Hub \u63a7\u5236\u53f0\u51c6\u5907\u7684\u57df\u540d\u3002\u5728\u60a8\u7684 hosted UI \u8bbe\u7f6e\u6210\u529f\u540e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u72b6\u6001\uff1a \u5bf9\u4e8e \u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1ahosted UI \u7684\u72b6\u6001\u4e3a Available \u3002 \u5bf9\u4e8e \u65e7\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a\u53ef\u4ee5\u770b\u5230 Launch Hosted UI \u8fd9\u4e2a\u94fe\u63a5\uff0c\u5e76\u4e14\u8be5\u94fe\u63a5\u6709\u6548\u3002 \u5c06 App client ID, User pool ID \u548c Cognito \u7528\u6237\u6c60\u6240\u5728\u7684\u6d77\u5916\u533a\u57df\u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5bf9\u4e8e \u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a \u5bf9\u4e8e \u65e7\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a \u5728 \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u4e2d\uff0cOidcClientID \u5c31\u662f App client ID , OidcProvider \u662f https://cognito-idp.${REGION}.amazonaws.com/${USER_POOL_ID} \u3002 (\u9009\u9879 2) Authing.cn OIDC \u5ba2\u6237\u7aef \u767b\u5f55 Authing \u63a7\u5236\u53f0 \u3002 \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u6c60\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u6c60\u3002 \u9009\u62e9\u7528\u6237\u6c60\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 \u5e94\u7528 \u4e0b\u7684 \u81ea\u5efa\u5e94\u7528 \u3002 \u5355\u51fb \u521b\u5efa\u81ea\u5efa\u5e94\u7528 \u6309\u94ae\u3002 \u8f93\u5165 \u5e94\u7528\u540d\u79f0 \u548c \u8ba4\u8bc1\u5730\u5740 \u3002 \u5c06Endpoint Information\u4e2d\u7684 App ID \uff08\u5373 client_id \uff09\u548c Issuer \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5c06 Login Callback URL \u548c Logout Callback URL \u66f4\u65b0\u4e3aIPC\u8bb0\u5f55\u7684\u57df\u540d\u3002 \u8bbe\u7f6e\u4ee5\u4e0b\u6388\u6743\u914d\u7f6e\u3002 \u60a8\u5df2\u7ecf\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u81ea\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002 (\u9009\u9879 3) Keycloak OIDC \u5ba2\u6237\u7aef \u6309\u7167 \u672c\u6307\u5357 \u5728AWS\u4e2d\u56fd\u533a\u57df\u90e8\u7f72 Keycloak \u89e3\u51b3\u65b9\u6848\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55 Keycloak \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 Add Realm \u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a Realm\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 \u8fdb\u5165\u9886\u57df\u8bbe\u7f6e\u9875\u9762\u3002\u9009\u62e9 Endpoints \uff0c\u7136\u540e\u4ece\u5217\u8868\u4e2d\u9009\u62e9 OpenID Endpoint Configuration \u3002 \u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684 JSON \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55 issuer \u503c\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fd4\u56deKeycloak\u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u9009\u62e9 Clients \uff0c\u7136\u540e\u9009\u62e9 Create \u3002 \u8f93\u5165\u5ba2\u6237 ID\uff0c\u5fc5\u987b\u5305\u542b 24 \u4e2a\u5b57\u6bcd\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u6216\u6570\u5b57\u3002\u8bb0\u5f55 Client ID \uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u66f4\u6539Client\u8bbe\u7f6e\uff0c\u5728 Valid Redirect URIs \u5904\u8f93\u5165 https://<Log Hub \u63a7\u5236\u53f0\u57df\u540d> \uff0c\u5728 Web Origins \u8f93\u5165 * \u548c + \u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728 Advanced Settings \u4e2d, \u8bf7\u628a Access Token Lifespan \u7684\u503c\u8bbe\u7f6e\u4e3a5\u5206\u949f\u6216\u66f4\u957f\u65f6\u95f4\u3002 \u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u680f\u7684 Users \u3002 \u70b9\u51fb Add user \uff0c\u5e76\u8f93\u5165 username \u3002 \u521b\u5efa\u7528\u6237\u540e\uff0c\u9009\u62e9 Credentials \uff0c\u8f93\u5165 Password \u3002 Issuer \u7684\u503c\u7684\u683c\u5f0f\u4e3a https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME> \u3002 (\u9009\u9879 4) \u4f7f\u7528 ADFS OpenID Connect \u786e\u4fdd\u60a8\u7684 ADFS \u5df2\u5b89\u88c5\uff0c\u60a8\u53ef\u4ee5\u6309\u7167 \u672c\u6307\u5357 \u4e86\u89e3\u5982\u4f55\u5b89\u88c5 ADFS -\u90e8\u7f72\u6307\u5357\uff09\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55\u5230 ADFS \u767b\u5f55\u9875\u9762\u3002 URL \u5e94\u4e3a\u201chttps://adfs.domain.com/adfs/ls/idpinitiatedSignOn.aspx\u201d\uff0c\u5c06 adfs.domain.com \u66ff\u6362\u4e3a\u60a8\u7684\u771f\u5b9e ADFS \u57df\u3002 \u767b\u5f55\u60a8\u7684 \u57df\u63a7\u5236\u5668 \uff0c\u6253\u5f00 Active Directory \u7528\u6237\u548c\u8ba1\u7b97\u673a \u3002 \u4e3a Log Hub \u7528\u6237\u521b\u5efa\u4e00\u4e2a \u5b89\u5168\u7ec4 \uff0c\u5c06\u60a8\u8ba1\u5212\u7684 Log Hub \u7528\u6237\u6dfb\u52a0\u5230\u6b64\u5b89\u5168\u7ec4\u3002 \u767b\u5f55 ADFS \u670d\u52a1\u5668\uff0c\u6253\u5f00 ADFS \u7ba1\u7406 \u3002 \u53f3\u51fb Application Groups \uff0c\u70b9\u51fb Application Group \uff0c\u8f93\u5165Application Group\u7684\u540d\u79f0\uff0c\u5982LogHub\u3002\u5728 Client-Server Applications \u4e0b\u9009\u62e9 Web browser access a web application \u9009\u9879 \uff0c \u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002 \u8bb0\u5f55\u4e0b\u6b64\u7a97\u53e3\u4e2d\u7684 Client Identifier ( client_id )\uff0c\u5728 Redirect URI \u4e0b\uff0c\u8f93\u5165\u60a8\u7684 Log Hub \u57df\u540d\uff08\u4f8b\u5982\uff0c loghub.domain.com \uff09\uff0c\u7136\u540e\u5355\u51fb \u6dfb\u52a0 \uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \u3002 \u5728 Choose Access Control Policy \u7a97\u53e3\u4e2d\uff0c\u9009\u62e9 Permit specific group \uff0c\u5355\u51fb Policy \u90e8\u5206\u4e0b\u7684 parameters \uff0c\u6dfb\u52a0\u5728\u7b2c 4 \u6b65\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \uff08\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u8981\u6c42\u914d\u7f6e\u5176\u4ed6\u8bbf\u95ee\u63a7\u5236\u7b56\u7565\uff09\u3002 \u5728\u6458\u8981\u7a97\u53e3\u4e0b\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u5355\u51fb \u5173\u95ed \u3002 \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u6253\u5f00 Windows PowerShell\uff0c\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u914d\u7f6e ADFS \u4ee5\u5141\u8bb8\u5bf9\u60a8\u8ba1\u5212\u7684 LogHub URL \u8fdb\u884c CORS\u3002 Set-AdfsResponseHeaders -EnableCORS $true Set-AdfsResponseHeaders -CORSTrustedOrigins https://<your-loghub-domain> \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u7684 Windows PowerShell \u4e0b\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6 ADFS \u7684\u9881\u53d1\u8005\uff08 issuer \uff09\uff0c\u7c7b\u4f3c\u4e8e https://adfs.domain.com/adfs \u3002 Get-ADFSProperties | Select IdTokenIssuer \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 Important \u5728\u4e00\u4e2a AWS \u8d26\u6237\u7684\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u60a8\u53ea\u80fd\u90e8\u7f72\u4e00\u4e2a Log Hub solution\u7684\u5806\u6808\u3002 \u5982\u679c\u60a8\u5728\u90e8\u7f72\u4e2d\u78b0\u5230\u4e86\u9519\u8bef\uff0c\u6bd4\u5982\u6ca1\u6709\u6ee1\u8db3 \u524d\u63d0\u6761\u4ef6 \uff0c \u8bf7\u786e\u4fdd\u60a8\u5220\u9664\u4e86\u5931\u8d25\u7684\u5806\u6808\uff0c\u7136\u540e\u518d\u91cd\u8bd5\u90e8\u7f72\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u5728\u6d77\u5916\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u6d77\u5916\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 IAM \u548c STS \u9650\u5236 \u4e2d\u7684 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain <\u9700\u8981\u8f93\u5165> Log Hub \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID <\u9700\u8981\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 \u5982\u679c\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain <\u9700\u8981\u8f93\u5165> Log Hub \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID <\u9700\u8981\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b64\u89e3\u51b3\u65b9\u6848\u9884\u7f6e CloudFront \u5206\u914d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u83b7\u53d6 WebConsoleUrl \u4f5c\u4e3a\u89e3\u6790\u5730\u5740\u3002 \u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa CNAME \u8bb0\u5f55\uff0c\u6307\u5411\u8be5\u89e3\u6790\u5730\u5740\u3002 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0 \u91cd\u8981 \u60a8\u7684\u767b\u5f55\u51ed\u636e\uff08\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u3002 \u5728\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5728 OIDC \u63d0\u4f9b\u5546\u7684\u7528\u6237\u6c60\u4e2d\u521b\u5efa\u4e86\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00DNS\u89e3\u6790\u5668\u4e2d\u521b\u5efa\u7684CNAME\u8bb0\u5f55\u3002 \u9009\u62e9 \u767b\u5f55 Log Hub \uff0c\u7136\u540e\u5bfc\u822a\u5230 OIDC \u63d0\u4f9b\u5546\u3002 \u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u60a8\u53ef\u80fd\u4f1a\u88ab\u8981\u6c42\u66f4\u6539\u9996\u6b21\u767b\u5f55\u7684\u9ed8\u8ba4\u5bc6\u7801\uff0c\u8fd9\u53d6\u51b3\u4e8e\u60a8\u7684 OIDC \u63d0\u4f9b\u5546\u7684\u653f\u7b56\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u4f7f\u7528 OpenID Connect"},{"location":"implementation-guide/deployment/with-oidc/#aws","text":"\u90e8\u7f72\u65f6\u95f4 \uff1a\u5927\u7ea6 30 \u5206\u949f","title":"\u5728 AWS \u4e2d\u56fd\u533a\u57df\u90e8\u7f72"},{"location":"implementation-guide/deployment/with-oidc/#_1","text":"\u91cd\u8981 Log Hub \u63a7\u5236\u53f0\u901a\u8fc7 CloudFront \u5206\u53d1\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u5206\u53d1\u88ab\u89c6\u4e3a Internet \u4fe1\u606f\u670d\u52a1\u3002 \u5982\u679c\u60a8\u5728 AWS \u4e2d\u56fd\u533a\u57df \u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u3002\u57df\u540d\u5fc5\u987b\u6709\u6709\u6548\u7684 ICP\u5907\u6848 \u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002 \u4e00\u4e2a\u57df\u540d\u3002 \u60a8\u5c06\u4f7f\u7528\u6b64\u57df\u6765\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u3002 AWS IAM \u4e2d\u7684 SSL \u8bc1\u4e66\uff0c\u4e14\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u7684\u57df\u76f8\u5173\u8054\u3002 \u6309\u7167 \u672c\u6307\u5357 \u5c06 SSL \u8bc1\u4e66\u4e0a\u4f20\u5230 IAM\u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/deployment/with-oidc/#_2","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728 AWS \u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790 \u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0","title":"\u90e8\u7f72\u6982\u89c8"},{"location":"implementation-guide/deployment/with-oidc/#1-oidc","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684 OpenID \u8fde\u63a5\u5668 (OIDC) \u63d0\u4f9b\u5546\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u9009\u9879 1 \u81f3 4\u3002 \uff08\u9009\u9879 1\uff09\u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool \u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 2\uff09 Authing \u662f\u7b2c\u4e09\u65b9\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 3\uff09 Keycloak \u662f AWS \u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u3002 \uff08\u9009\u9879 4\uff09 ADFS \u662f Microsoft \u63d0\u4f9b\u7684\u4e00\u9879\u670d\u52a1\u3002 \uff08\u9009\u9879 5\uff09\u5176\u5b83\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u5e73\u53f0\uff0c\u5982 Auth0 \u3002 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa OIDC \u5ba2\u6237\u7aef\uff0c\u5e76\u83b7\u53d6 client_id \u548c issuer \u3002","title":"\u6b65\u9aa4 1. \u521b\u5efa OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/with-oidc/#1-cognito-user-pool","text":"\u5728 AWS \u6d77\u5916\u533a\u57df\u767b\u9646 Amazon Cognito \u63a7\u5236\u53f0 \u3002 \u4f7f\u7528 Amazon Cognito \u63a7\u5236\u53f0\u8bbe\u7f6e\u6258\u7ba1 UI\u3002( \u8be6\u7ec6\u6b65\u9aa4 ) \u8bf7\u6ce8\u610f\uff0cAmazon Cognito \u63a7\u5236\u53f0\u53d1\u5e03\u4e86\u4e00\u4e2a\u65b0\u7248\u672c\uff0c\u65b0\u8001\u7248\u672c\u90fd\u5728\u4f7f\u7528\u3002\u5982\u679c\u60a8\u6b63\u5728\u4f7f\u7528\u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0\uff0c\u8bf7\u6309\u7167 New console \u7684\u6b65\u9aa4\u64cd\u4f5c\u3002\u5e76\u4e14\uff1a \u5bf9\u4e8e \u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a\u8bf7\u5728\u9009\u62e9 App type\uff08\u5e94\u7528\u7a0b\u5e8f\u7c7b\u578b\uff09\u65f6\u9009\u62e9 Public client\uff08\u516c\u6709\u5ba2\u6237\u7aef\uff09\u3002 \u5bf9\u4e8e \u65e7\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a\u8bf7\u5728\u6dfb\u52a0\u5e94\u7528\u7a0b\u5e8f\u5ba2\u6237\u7aef\u65f6\uff0c \u6e05\u9664 \u9009\u9879 Generate client secret\uff08\u751f\u6210\u5ba2\u6237\u7aef\u5bc6\u94a5\uff09\u3002\u8be5\u9009\u9879\u662f\u9ed8\u8ba4\u5f00\u542f\u7684\u3002 \u8bf7\u5728\u586b\u5199 Callback URL \u548c Sign out URL \u65f6\uff0c\u4f7f\u7528\u7ed9 Log Hub \u63a7\u5236\u53f0\u51c6\u5907\u7684\u57df\u540d\u3002\u5728\u60a8\u7684 hosted UI \u8bbe\u7f6e\u6210\u529f\u540e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u72b6\u6001\uff1a \u5bf9\u4e8e \u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1ahosted UI \u7684\u72b6\u6001\u4e3a Available \u3002 \u5bf9\u4e8e \u65e7\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a\u53ef\u4ee5\u770b\u5230 Launch Hosted UI \u8fd9\u4e2a\u94fe\u63a5\uff0c\u5e76\u4e14\u8be5\u94fe\u63a5\u6709\u6548\u3002 \u5c06 App client ID, User pool ID \u548c Cognito \u7528\u6237\u6c60\u6240\u5728\u7684\u6d77\u5916\u533a\u57df\u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5bf9\u4e8e \u65b0\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a \u5bf9\u4e8e \u65e7\u7248\u672c\u7684 Cognito \u63a7\u5236\u53f0 \uff1a \u5728 \u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808 \u4e2d\uff0cOidcClientID \u5c31\u662f App client ID , OidcProvider \u662f https://cognito-idp.${REGION}.amazonaws.com/${USER_POOL_ID} \u3002","title":"(\u9009\u9879 1) \u4f7f\u7528\u5176\u4ed6\u533a\u57df\u7684 Cognito User Pool"},{"location":"implementation-guide/deployment/with-oidc/#2-authingcn-oidc","text":"\u767b\u5f55 Authing \u63a7\u5236\u53f0 \u3002 \u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u7528\u6237\u6c60\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u6c60\u3002 \u9009\u62e9\u7528\u6237\u6c60\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 \u5e94\u7528 \u4e0b\u7684 \u81ea\u5efa\u5e94\u7528 \u3002 \u5355\u51fb \u521b\u5efa\u81ea\u5efa\u5e94\u7528 \u6309\u94ae\u3002 \u8f93\u5165 \u5e94\u7528\u540d\u79f0 \u548c \u8ba4\u8bc1\u5730\u5740 \u3002 \u5c06Endpoint Information\u4e2d\u7684 App ID \uff08\u5373 client_id \uff09\u548c Issuer \u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u5c06 Login Callback URL \u548c Logout Callback URL \u66f4\u65b0\u4e3aIPC\u8bb0\u5f55\u7684\u57df\u540d\u3002 \u8bbe\u7f6e\u4ee5\u4e0b\u6388\u6743\u914d\u7f6e\u3002 \u60a8\u5df2\u7ecf\u6210\u529f\u521b\u5efa\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u81ea\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002","title":"(\u9009\u9879 2) Authing.cn OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/with-oidc/#3-keycloak-oidc","text":"\u6309\u7167 \u672c\u6307\u5357 \u5728AWS\u4e2d\u56fd\u533a\u57df\u90e8\u7f72 Keycloak \u89e3\u51b3\u65b9\u6848\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55 Keycloak \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u9009\u62e9 Add Realm \u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6709\u4e00\u4e2a Realm\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002 \u8fdb\u5165\u9886\u57df\u8bbe\u7f6e\u9875\u9762\u3002\u9009\u62e9 Endpoints \uff0c\u7136\u540e\u4ece\u5217\u8868\u4e2d\u9009\u62e9 OpenID Endpoint Configuration \u3002 \u5728\u6d4f\u89c8\u5668\u6253\u5f00\u7684 JSON \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55 issuer \u503c\uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u8fd4\u56deKeycloak\u63a7\u5236\u53f0\uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u9009\u62e9 Clients \uff0c\u7136\u540e\u9009\u62e9 Create \u3002 \u8f93\u5165\u5ba2\u6237 ID\uff0c\u5fc5\u987b\u5305\u542b 24 \u4e2a\u5b57\u6bcd\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u6216\u6570\u5b57\u3002\u8bb0\u5f55 Client ID \uff0c\u4ee5\u5907\u540e\u9762\u4f7f\u7528\u3002 \u66f4\u6539Client\u8bbe\u7f6e\uff0c\u5728 Valid Redirect URIs \u5904\u8f93\u5165 https://<Log Hub \u63a7\u5236\u53f0\u57df\u540d> \uff0c\u5728 Web Origins \u8f93\u5165 * \u548c + \u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728 Advanced Settings \u4e2d, \u8bf7\u628a Access Token Lifespan \u7684\u503c\u8bbe\u7f6e\u4e3a5\u5206\u949f\u6216\u66f4\u957f\u65f6\u95f4\u3002 \u9009\u62e9\u5de6\u4fa7\u5bfc\u822a\u680f\u7684 Users \u3002 \u70b9\u51fb Add user \uff0c\u5e76\u8f93\u5165 username \u3002 \u521b\u5efa\u7528\u6237\u540e\uff0c\u9009\u62e9 Credentials \uff0c\u8f93\u5165 Password \u3002 Issuer \u7684\u503c\u7684\u683c\u5f0f\u4e3a https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME> \u3002","title":"(\u9009\u9879 3) Keycloak OIDC \u5ba2\u6237\u7aef"},{"location":"implementation-guide/deployment/with-oidc/#4-adfs-openid-connect","text":"\u786e\u4fdd\u60a8\u7684 ADFS \u5df2\u5b89\u88c5\uff0c\u60a8\u53ef\u4ee5\u6309\u7167 \u672c\u6307\u5357 \u4e86\u89e3\u5982\u4f55\u5b89\u88c5 ADFS -\u90e8\u7f72\u6307\u5357\uff09\u3002 \u786e\u4fdd\u60a8\u53ef\u4ee5\u767b\u5f55\u5230 ADFS \u767b\u5f55\u9875\u9762\u3002 URL \u5e94\u4e3a\u201chttps://adfs.domain.com/adfs/ls/idpinitiatedSignOn.aspx\u201d\uff0c\u5c06 adfs.domain.com \u66ff\u6362\u4e3a\u60a8\u7684\u771f\u5b9e ADFS \u57df\u3002 \u767b\u5f55\u60a8\u7684 \u57df\u63a7\u5236\u5668 \uff0c\u6253\u5f00 Active Directory \u7528\u6237\u548c\u8ba1\u7b97\u673a \u3002 \u4e3a Log Hub \u7528\u6237\u521b\u5efa\u4e00\u4e2a \u5b89\u5168\u7ec4 \uff0c\u5c06\u60a8\u8ba1\u5212\u7684 Log Hub \u7528\u6237\u6dfb\u52a0\u5230\u6b64\u5b89\u5168\u7ec4\u3002 \u767b\u5f55 ADFS \u670d\u52a1\u5668\uff0c\u6253\u5f00 ADFS \u7ba1\u7406 \u3002 \u53f3\u51fb Application Groups \uff0c\u70b9\u51fb Application Group \uff0c\u8f93\u5165Application Group\u7684\u540d\u79f0\uff0c\u5982LogHub\u3002\u5728 Client-Server Applications \u4e0b\u9009\u62e9 Web browser access a web application \u9009\u9879 \uff0c \u70b9\u51fb \u4e0b\u4e00\u6b65 \u3002 \u8bb0\u5f55\u4e0b\u6b64\u7a97\u53e3\u4e2d\u7684 Client Identifier ( client_id )\uff0c\u5728 Redirect URI \u4e0b\uff0c\u8f93\u5165\u60a8\u7684 Log Hub \u57df\u540d\uff08\u4f8b\u5982\uff0c loghub.domain.com \uff09\uff0c\u7136\u540e\u5355\u51fb \u6dfb\u52a0 \uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \u3002 \u5728 Choose Access Control Policy \u7a97\u53e3\u4e2d\uff0c\u9009\u62e9 Permit specific group \uff0c\u5355\u51fb Policy \u90e8\u5206\u4e0b\u7684 parameters \uff0c\u6dfb\u52a0\u5728\u7b2c 4 \u6b65\u4e2d\u521b\u5efa\u7684\u5b89\u5168\u7ec4\uff0c\u7136\u540e\u5355\u51fb \u4e0b\u4e00\u6b65 \uff08\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u8981\u6c42\u914d\u7f6e\u5176\u4ed6\u8bbf\u95ee\u63a7\u5236\u7b56\u7565\uff09\u3002 \u5728\u6458\u8981\u7a97\u53e3\u4e0b\uff0c\u5355\u51fb \u4e0b\u4e00\u6b65 \uff0c\u7136\u540e\u5355\u51fb \u5173\u95ed \u3002 \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u6253\u5f00 Windows PowerShell\uff0c\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u914d\u7f6e ADFS \u4ee5\u5141\u8bb8\u5bf9\u60a8\u8ba1\u5212\u7684 LogHub URL \u8fdb\u884c CORS\u3002 Set-AdfsResponseHeaders -EnableCORS $true Set-AdfsResponseHeaders -CORSTrustedOrigins https://<your-loghub-domain> \u5728 ADFS \u670d\u52a1\u5668\u4e0a\u7684 Windows PowerShell \u4e0b\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6 ADFS \u7684\u9881\u53d1\u8005\uff08 issuer \uff09\uff0c\u7c7b\u4f3c\u4e8e https://adfs.domain.com/adfs \u3002 Get-ADFSProperties | Select IdTokenIssuer","title":"(\u9009\u9879 4) \u4f7f\u7528 ADFS OpenID Connect"},{"location":"implementation-guide/deployment/with-oidc/#2","text":"Important \u5728\u4e00\u4e2a AWS \u8d26\u6237\u7684\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u60a8\u53ea\u80fd\u90e8\u7f72\u4e00\u4e2a Log Hub solution\u7684\u5806\u6808\u3002 \u5982\u679c\u60a8\u5728\u90e8\u7f72\u4e2d\u78b0\u5230\u4e86\u9519\u8bef\uff0c\u6bd4\u5982\u6ca1\u6709\u6ee1\u8db3 \u524d\u63d0\u6761\u4ef6 \uff0c \u8bf7\u786e\u4fdd\u60a8\u5220\u9664\u4e86\u5931\u8d25\u7684\u5806\u6808\uff0c\u7136\u540e\u518d\u91cd\u8bd5\u90e8\u7f72\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u4f7f\u7528\u4e0b\u9762\u7684\u6309\u94ae\u542f\u52a8 log-hub AWS CloudFormation \u6a21\u677f\u3002 Launch in AWS Console \u5728\u6d77\u5916\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u6d77\u5916\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u65b0\u7684 VPC \u4e2d\u90e8\u7f72 \u5728\u4e2d\u56fd\u533a\u57df\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 \u767b\u5f55\u63a7\u5236\u53f0\u540e\uff0c\u6a21\u677f\u5728\u9ed8\u8ba4\u533a\u57df\u542f\u52a8\u3002\u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u89e3\u51b3\u65b9\u6848\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002\u6709\u5173\u547d\u540d\u5b57\u7b26\u9650\u5236\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 IAM \u548c STS \u9650\u5236 \u4e2d\u7684 AWS Identity and Access Management \u7528\u6237\u6307\u5357 \u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u5982\u679c\u4ece\u65b0\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain <\u9700\u8981\u8f93\u5165> Log Hub \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID <\u9700\u8981\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 \u5982\u679c\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72, \u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c: \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e OidcClientId <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u5ba2\u6237\u7aef ID\u3002 OidcProvider <\u9700\u8981\u8f93\u5165> OpenId \u8fde\u63a5\u5668\u63d0\u4f9b\u8005\u53d1\u884c\u8005\u3002\u53d1\u884c\u8005\u5fc5\u987b\u4ee5 https:// Domain <\u9700\u8981\u8f93\u5165> Log Hub \u63a7\u5236\u53f0\u7684\u81ea\u5b9a\u4e49\u57df\u3002\u5207\u8bb0\u4e0d\u8981\u6dfb\u52a0 http(s) \u524d\u7f00\u3002 IamCertificateID <\u9700\u8981\u8f93\u5165> IAM \u4e2d SSL \u8bc1\u4e66\u7684 ID\u3002 ID \u7531 21 \u4e2a\u5927\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u5b57\u7b26\u7ec4\u6210\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 list-server-certificates \u547d\u4ee4\u68c0\u7d22 ID\u3002 VPC ID <\u9700\u8981\u8f93\u5165> \u9009\u62e9\u73b0\u6709\u7684VPC\u3002 Public Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u516c\u6709\u5b50\u7f51\u3002 Private Subnet IDs <\u9700\u8981\u8f93\u5165> \u4ece\u73b0\u6709\u7684 VPC \u4e2d\u9009\u62e92\u4e2a\u79c1\u6709\u5b50\u7f51\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u6b65\u9aa4 2. \u542f\u52a8\u5806\u6808"},{"location":"implementation-guide/deployment/with-oidc/#3-dns","text":"\u6b64\u89e3\u51b3\u65b9\u6848\u9884\u7f6e CloudFront \u5206\u914d\uff0c\u8ba9\u60a8\u53ef\u4ee5\u8bbf\u95ee Log Hub \u63a7\u5236\u53f0\u3002 \u767b\u5f55 AWS CloudFormation \u63a7\u5236\u53f0 \u3002 \u9009\u62e9\u89e3\u51b3\u65b9\u6848\u7684\u5806\u6808\u3002 \u9009\u62e9 \u8f93\u51fa \u9009\u9879\u5361\u3002 \u83b7\u53d6 WebConsoleUrl \u4f5c\u4e3a\u89e3\u6790\u5730\u5740\u3002 \u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa CNAME \u8bb0\u5f55\uff0c\u6307\u5411\u8be5\u89e3\u6790\u5730\u5740\u3002","title":"\u6b65\u9aa4 3. \u914d\u7f6e DNS \u89e3\u6790"},{"location":"implementation-guide/deployment/with-oidc/#4","text":"\u91cd\u8981 \u60a8\u7684\u767b\u5f55\u51ed\u636e\uff08\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\u7531 OIDC \u63d0\u4f9b\u5546\u7ba1\u7406\u3002 \u5728\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u5728 OIDC \u63d0\u4f9b\u5546\u7684\u7528\u6237\u6c60\u4e2d\u521b\u5efa\u4e86\u81f3\u5c11\u4e00\u4e2a\u7528\u6237\u3002 \u4f7f\u7528\u7f51\u9875\u6d4f\u89c8\u5668\u6253\u5f00DNS\u89e3\u6790\u5668\u4e2d\u521b\u5efa\u7684CNAME\u8bb0\u5f55\u3002 \u9009\u62e9 \u767b\u5f55 Log Hub \uff0c\u7136\u540e\u5bfc\u822a\u5230 OIDC \u63d0\u4f9b\u5546\u3002 \u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 \u60a8\u53ef\u80fd\u4f1a\u88ab\u8981\u6c42\u66f4\u6539\u9996\u6b21\u767b\u5f55\u7684\u9ed8\u8ba4\u5bc6\u7801\uff0c\u8fd9\u53d6\u51b3\u4e8e\u60a8\u7684 OIDC \u63d0\u4f9b\u5546\u7684\u653f\u7b56\u3002 \u9a8c\u8bc1\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u6253\u5f00 Log Hub \u7f51\u9875\u63a7\u5236\u53f0\u3002 \u540e\u7eed\u64cd\u4f5c\uff1a\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5 \u5bfc\u5165 AOS \u57df \u5e76\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002","title":"\u6b65\u9aa4 4. \u767b\u5f55\u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/","text":"\u6982\u89c8 \u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u7ba1\u7406 Amazon OpenSearch Service (AOS) \u57df\u3002 AOS \u57df\u4e0e AOS \u96c6\u7fa4\u540c\u4e49\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\uff1a \u5bfc\u5165\u548c\u5220\u9664 AOS \u57df \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u521b\u5efa\u63a8\u8350\u7684\u544a\u8b66 \u60a8\u53ef\u4ee5\u5148\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\uff0c\u4e86\u89e3\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u57fa\u672c\u6b65\u9aa4\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/domains/#_1","text":"\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u7ba1\u7406 Amazon OpenSearch Service (AOS) \u57df\u3002 AOS \u57df\u4e0e AOS \u96c6\u7fa4\u540c\u4e49\u3002 \u5728\u672c\u7ae0\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\uff1a \u5bfc\u5165\u548c\u5220\u9664 AOS \u57df \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u521b\u5efa\u63a8\u8350\u7684\u544a\u8b66 \u60a8\u53ef\u4ee5\u5148\u9605\u8bfb \u5feb\u901f\u5165\u95e8 \u7ae0\u8282\uff0c\u4e86\u89e3\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\u7684\u57fa\u672c\u6b65\u9aa4\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/domains/alarms/","text":"\u63a8\u8350\u544a\u8b66 Amazon OpenSearch \u63d0\u4f9b\u4e00\u7ec4 \u63a8\u8350\u7684 CloudWatch \u544a\u8b66 \u6765\u76d1\u63a7 AOS \u57df\u7684\u8fd0\u884c\u72b6\u51b5\u3002 Log Hub \u5e2e\u52a9\u60a8\u81ea\u52a8\u521b\u5efa\u544a\u8b66\uff0c\u5e76\u901a\u8fc7 SNS \u5c06\u901a\u77e5\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\uff08\u6216 SMS\uff09\u3002 \u521b\u5efa\u544a\u8b66 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u4e0b\uff0c\u5728 \u544a\u8b66 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u3002 \u9009\u62e9\u60a8\u8981\u521b\u5efa\u7684\u544a\u8b66\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u8bbe\u7f6e\u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 log-hub-alarms AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 DomainName <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u540d\u79f0\u3002 Email <\u9700\u8981\u8f93\u5165> \u901a\u77e5\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002\u544a\u8b66\u5c06\u901a\u8fc7 SNS \u53d1\u9001\u5230\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ClusterStatusRed \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u4e3b\u5206\u7247\u53ca\u5176\u526f\u672c\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 ClusterStatusYellow \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u5206\u7247\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 FreeStorageSpace 10 \u662f\u5426\u5728\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4e0b\u964d\u5230\u60a8\u5728 GiB \u4e2d\u8f93\u5165\u7684\u53ef\u7528\u5b58\u50a8\u7a7a\u95f4\u65f6\u542f\u7528\u544a\u8b66\u3002\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u7a7a\u95f4\u7684 25%\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 ClusterIndexWritesBlocked 1 \u5728 5 \u5206\u949f\u51fa\u73b0\u96c6\u7fa4\u963b\u6b62\u5199\u5165\u9519\u8bef\u7684\u6b21\u6570\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 UnreachableNodeNumber 3 \u8282\u70b9\u6700\u5c0f\u503c\u4e3a < x 1 \u5929\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 AutomatedSnapshotFailure \u662f \u81ea\u52a8\u5feb\u7167\u5931\u8d25\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 AutomatedSnapshotFailure \u6700\u5927\u503c >= 1 \u6301\u7eed 1 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 CPUUtilization \u662f \u53d1\u751f\u6301\u7eed\u9ad8 CPU \u4f7f\u7528\u7387\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 CPUUtilization \u6216 WarmCPUUtilization \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 JVMMemoryPressure \u662f JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u53d1\u751f\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 JVMMemoryPressure \u6216 WarmJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 5 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterCPUUtilization \u662f \u4e3b\u8282\u70b9CPU\u6301\u7eed\u9ad8\u4f7f\u7528\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterCPUUtilization \u6700\u5927\u503c >= 50% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterJVMMemoryPressure \u662f \u5f53\u4e3b\u8282\u70b9\u51fa\u73b0 JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyError \u662f \u7981\u7528 KMS \u52a0\u5bc6\u5bc6\u94a5\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 KMSKeyError \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyInaccessible \u662f \u662f\u5426\u5728 KMS \u52a0\u5bc6\u5bc6\u94a5\u5df2\u88ab\u5220\u9664\u6216\u5df2\u64a4\u9500\u5176\u5bf9 OpenSearch \u670d\u52a1\u7684\u6388\u6743\u65f6\u542f\u7528\u544a\u8b66\u3002 KMSKeyInaccessible \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u4f60\u5e94\u8be5\u6536\u5230 \u5927\u7ea6 5 \u5206\u949f\u540e\u51fa\u73b0 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u544a\u8b66\u540e\uff0c\u5c06\u5411\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u53d1\u9001\u4e00\u5c01\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002 \u60a8\u9700\u8981\u5355\u51fb\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684 *\u786e\u8ba4 * \u94fe\u63a5\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7 Log Hub \u63a7\u5236\u53f0\u7684 \u57fa\u672c\u914d\u7f6e > \u544a\u8b66 > Cloudwatch \u544a\u8b66 \u94fe\u63a5\u8bbf\u95ee Cloudwatch \u4e2d\u65b0\u521b\u5efa\u7684\u544a\u8b66\uff0c\u94fe\u63a5\u4f4d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bf7\u786e\u4fdd\u6240\u6709\u7684\u544a\u8b66\u72b6\u6001\u90fd\u662f \u786e\u5b9a \u72b6\u6001\u3002\u56e0\u4e3a\u4efb\u4f55\u5728\u60a8\u786e\u8ba4\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\u53d1\u51fa\u7684\u544a\u8b66\u5e76\u4e0d\u4f1a\u53d1\u9001\u901a\u77e5\u90ae\u4ef6\u3002 \u6ce8\u610f \u6ce8\u610f\uff0c\u5728\u60a8\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\uff0c\u544a\u8b66\u5e76\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55SNS\u901a\u77e5\uff01\u4e5f\u5c31\u610f\u5473\u7740\uff0c\u5047\u5982\u5728\u60a8\u65b0\u521b\u5efa OpenSearch \u544a\u8b66\u529f\u80fd\u65f6\uff0c\u60a8\u7684\u67d0\u4e9b\u6307\u6807\u5df2\u7ecf\u89e6\u53d1\u8b66\u62a5\uff0c\u60a8\u4f1a\u7531\u4e8e\u5c1a\u672a\u8ba2\u9605\u7684\u7f18\u6545\u65e0\u6cd5\u6536\u5230\u8fd9\u4e9b\u5df2\u89e6\u53d1\u7684\u8b66\u62a5\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u521b\u5efa\u5b8c\u544a\u8b66\u529f\u80fd\u540e\uff0c\u901a\u8fc7\u4e0a\u6587\u63d0\u5230\u7684\u94fe\u63a5\u524d\u5f80 CloudWatch \u9875\u9762\u68c0\u67e5\u6bcf\u4e00\u4e2a\u544a\u8b66\u7684\u72b6\u6001\uff0c\u5e76\u4f18\u5148\u89e3\u51b3\u5df2\u7ecf\u89e6\u53d1\u7684\u544a\u8b66\u5185\u5bb9\u3002 \u5220\u9664\u544a\u8b66 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_1","text":"Amazon OpenSearch \u63d0\u4f9b\u4e00\u7ec4 \u63a8\u8350\u7684 CloudWatch \u544a\u8b66 \u6765\u76d1\u63a7 AOS \u57df\u7684\u8fd0\u884c\u72b6\u51b5\u3002 Log Hub \u5e2e\u52a9\u60a8\u81ea\u52a8\u521b\u5efa\u544a\u8b66\uff0c\u5e76\u901a\u8fc7 SNS \u5c06\u901a\u77e5\u53d1\u9001\u5230\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\uff08\u6216 SMS\uff09\u3002","title":"\u63a8\u8350\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#_2","text":"","title":"\u521b\u5efa\u544a\u8b66"},{"location":"implementation-guide/domains/alarms/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u4e0b\uff0c\u5728 \u544a\u8b66 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u8f93\u5165 \u7535\u5b50\u90ae\u4ef6 \u3002 \u9009\u62e9\u60a8\u8981\u521b\u5efa\u7684\u544a\u8b66\u5e76\u6839\u636e\u9700\u8981\u8c03\u6574\u8bbe\u7f6e\u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/alarms/#cloudformation","text":"\u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 log-hub-alarms AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u8fd8\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 DomainName <\u9700\u8981\u8f93\u5165> OpenSearch \u57df\u7684\u540d\u79f0\u3002 Email <\u9700\u8981\u8f93\u5165> \u901a\u77e5\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002\u544a\u8b66\u5c06\u901a\u8fc7 SNS \u53d1\u9001\u5230\u6b64\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ClusterStatusRed \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u4e3b\u5206\u7247\u53ca\u5176\u526f\u672c\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 ClusterStatusYellow \u662f \u5f53\u81f3\u5c11\u4e00\u4e2a\u526f\u672c\u5206\u7247\u672a\u5206\u914d\u7ed9\u8282\u70b9\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 FreeStorageSpace 10 \u662f\u5426\u5728\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4e0b\u964d\u5230\u60a8\u5728 GiB \u4e2d\u8f93\u5165\u7684\u53ef\u7528\u5b58\u50a8\u7a7a\u95f4\u65f6\u542f\u7528\u544a\u8b66\u3002\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u7a7a\u95f4\u7684 25%\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 ClusterIndexWritesBlocked 1 \u5728 5 \u5206\u949f\u51fa\u73b0\u96c6\u7fa4\u963b\u6b62\u5199\u5165\u9519\u8bef\u7684\u6b21\u6570\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 UnreachableNodeNumber 3 \u8282\u70b9\u6700\u5c0f\u503c\u4e3a < x 1 \u5929\uff0c\u8fde\u7eed 1 \u6b21\u3002 0 \u8868\u793a\u544a\u8b66\u88ab\u7981\u7528\u3002 AutomatedSnapshotFailure \u662f \u81ea\u52a8\u5feb\u7167\u5931\u8d25\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 AutomatedSnapshotFailure \u6700\u5927\u503c >= 1 \u6301\u7eed 1 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 CPUUtilization \u662f \u53d1\u751f\u6301\u7eed\u9ad8 CPU \u4f7f\u7528\u7387\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 CPUUtilization \u6216 WarmCPUUtilization \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 JVMMemoryPressure \u662f JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u53d1\u751f\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 JVMMemoryPressure \u6216 WarmJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 5 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterCPUUtilization \u662f \u4e3b\u8282\u70b9CPU\u6301\u7eed\u9ad8\u4f7f\u7528\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterCPUUtilization \u6700\u5927\u503c >= 50% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 3 \u6b21\u3002 MasterJVMMemoryPressure \u662f \u5f53\u4e3b\u8282\u70b9\u51fa\u73b0 JVM RAM \u4f7f\u7528\u9ad8\u5cf0\u65f6\u662f\u5426\u5f00\u542f\u544a\u8b66\u3002 MasterJVMMemoryPressure \u6700\u5927\u503c >= 80% \u6301\u7eed 15 \u5206\u949f\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyError \u662f \u7981\u7528 KMS \u52a0\u5bc6\u5bc6\u94a5\u65f6\u662f\u5426\u542f\u7528\u544a\u8b66\u3002 KMSKeyError \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 KMSKeyInaccessible \u662f \u662f\u5426\u5728 KMS \u52a0\u5bc6\u5bc6\u94a5\u5df2\u88ab\u5220\u9664\u6216\u5df2\u64a4\u9500\u5176\u5bf9 OpenSearch \u670d\u52a1\u7684\u6388\u6743\u65f6\u542f\u7528\u544a\u8b66\u3002 KMSKeyInaccessible \u5728 1 \u5206\u949f\u5185 >= 1\uff0c\u8fde\u7eed 1 \u6b21\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002 \u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002 \u4f60\u5e94\u8be5\u6536\u5230 \u5927\u7ea6 5 \u5206\u949f\u540e\u51fa\u73b0 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u544a\u8b66\u540e\uff0c\u5c06\u5411\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u53d1\u9001\u4e00\u5c01\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002 \u60a8\u9700\u8981\u5355\u51fb\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684 *\u786e\u8ba4 * \u94fe\u63a5\u3002 \u60a8\u53ef\u4ee5\u901a\u8fc7 Log Hub \u63a7\u5236\u53f0\u7684 \u57fa\u672c\u914d\u7f6e > \u544a\u8b66 > Cloudwatch \u544a\u8b66 \u94fe\u63a5\u8bbf\u95ee Cloudwatch \u4e2d\u65b0\u521b\u5efa\u7684\u544a\u8b66\uff0c\u94fe\u63a5\u4f4d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bf7\u786e\u4fdd\u6240\u6709\u7684\u544a\u8b66\u72b6\u6001\u90fd\u662f \u786e\u5b9a \u72b6\u6001\u3002\u56e0\u4e3a\u4efb\u4f55\u5728\u60a8\u786e\u8ba4\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\u53d1\u51fa\u7684\u544a\u8b66\u5e76\u4e0d\u4f1a\u53d1\u9001\u901a\u77e5\u90ae\u4ef6\u3002 \u6ce8\u610f \u6ce8\u610f\uff0c\u5728\u60a8\u8ba2\u9605\u90ae\u4ef6\u63d0\u9192\u4e4b\u524d\uff0c\u544a\u8b66\u5e76\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55SNS\u901a\u77e5\uff01\u4e5f\u5c31\u610f\u5473\u7740\uff0c\u5047\u5982\u5728\u60a8\u65b0\u521b\u5efa OpenSearch \u544a\u8b66\u529f\u80fd\u65f6\uff0c\u60a8\u7684\u67d0\u4e9b\u6307\u6807\u5df2\u7ecf\u89e6\u53d1\u8b66\u62a5\uff0c\u60a8\u4f1a\u7531\u4e8e\u5c1a\u672a\u8ba2\u9605\u7684\u7f18\u6545\u65e0\u6cd5\u6536\u5230\u8fd9\u4e9b\u5df2\u89e6\u53d1\u7684\u8b66\u62a5\u3002\u6211\u4eec\u5efa\u8bae\u60a8\u5728\u521b\u5efa\u5b8c\u544a\u8b66\u529f\u80fd\u540e\uff0c\u901a\u8fc7\u4e0a\u6587\u63d0\u5230\u7684\u94fe\u63a5\u524d\u5f80 CloudWatch \u9875\u9762\u68c0\u67e5\u6bcf\u4e00\u4e2a\u544a\u8b66\u7684\u72b6\u6001\uff0c\u5e76\u4f18\u5148\u89e3\u51b3\u5df2\u7ecf\u89e6\u53d1\u7684\u544a\u8b66\u5185\u5bb9\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/domains/alarms/#_3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u544a\u8b66 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664\u544a\u8b66"},{"location":"implementation-guide/domains/import/","text":"\u57df\u64cd\u4f5c \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u540e\uff0c\u60a8\u53ef\u4ee5\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 AOS \u57df\u3002 \u6ce8\u610f \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u524d\u63d0\u6761\u4ef6 VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 AOS \u57df\u3002 \u5728 security configuration\uff08\u5b89\u5168\u914d\u7f6e\uff09\u4e2d\uff0c\u60a8\u7684 access policy \uff08\u8bbf\u95ee\u7b56\u7565\uff09\u5e94\u8be5\u548c\u4e0b\u56fe\u7c7b\u4f3c\uff1a \u5bfc\u5165 AOS \u57df \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u9009\u62e9\u96c6\u7fa4 \u9875\u9762\u4e0a\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002\u4e0b\u62c9\u5217\u8868\u5c06\u4ec5\u663e\u793a\u4e0e\u89e3\u51b3\u65b9\u6848\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u7684\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u7f51\u7edc \u9875\u9762\u7684 \u7f51\u7edc\u521b\u5efa \uff0c \u9009\u62e9 \u624b\u52a8 \u5e76\u70b9\u51fb \u4e0b\u4e00\u6b65 \uff1b \u6216\u9009\u62e9 \u81ea\u52a8 \uff0c\u7136\u540e\u8f6c\u5230\u6b65\u9aa4 9\u3002 \u5728 VPC \u4e0b\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a VPC\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC \u7684 VPC\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0e\u60a8\u7684 AOS \u57df\u76f8\u540c\u7684 VPC\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b50\u7f51\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC/privateSubnet1 \u548c LogHubVpc/DefaultVPC/privateSubnet2 \u7684\u5b50\u7f51\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b89\u5168\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ProcessSecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u5bfc\u5165 \u3002 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\u3002\u60a8\u9700\u8981\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u4ee5\u5141\u8bb8\u65e5\u5fd7\u5904\u7406\u5c42\u8bbf\u95ee\u60a8\u7684 AOS \u57df\u3002 \u6ce8\u610f \u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u521b\u5efa VPC \u5bf9\u7b49\u5e76\u914d\u7f6e\u8def\u7531\u8868\u3002\u60a8\u65e0\u9700\u518d\u6b21\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u6309\u7167\u4ee5\u4e0b\u5185\u5bb9\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u3001\u66f4\u65b0\u5b89\u5168\u7ec4\u548c\u66f4\u65b0\u8def\u7531\u8868\u3002 \u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u627e\u5230\u5bfc\u5165\u7684\u57df\u540d\uff0c\u9009\u62e9\u57df\u540d\u3002 \u9009\u62e9 \u7f51\u7edc \u9009\u9879\u5361\u3002 \u590d\u5236 OpenSearch \u57df\u7f51\u7edc \u548c \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u4e24\u4e2a\u90e8\u5206\u4e2d\u7684 VPC ID\u3002\u60a8\u5c06\u5728\u8fd9\u4e24\u4e2a VPC \u4e4b\u95f4\u521b\u5efa\u5bf9\u7b49\u8fde\u63a5\u3002 \u5bfc\u822a\u5230 VPC \u63a7\u5236\u53f0\u5bf9\u7b49\u8fde\u63a5 \u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u540d\u79f0\uff0c\u4f8b\u5982\uff0c log-hub \u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u672c\u5730 VPC\uff0cVPC ID (\u8bf7\u6c42\u8005) \uff0c\u9009\u62e9 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u7684 VPC ID\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u53e6\u4e00\u4e2a VPC, VPC ID (\u63a5\u6536\u65b9) \uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u7684VPC ID\u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \uff0c\u7136\u540e\u5bfc\u822a\u5230\u5bf9\u7b49\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u3002 \u5355\u51fb \u64cd\u4f5c \u6309\u94ae\u5e76\u9009\u62e9 \u63a5\u53d7\u8bf7\u6c42 \u3002 \u66f4\u65b0\u8def\u7531\u8868 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u63a7\u5236\u53f0\u3002 \u9009\u62e9\u5b50\u7f51\uff0c\u7136\u540e\u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\u3002 \u9009\u62e9\u5b50\u7f51\u5173\u8054\u7684\u8def\u7531\u8868\uff0c\u6253\u5f00\u8def\u7531\u8868\u914d\u7f6e\u9875\u9762\u3002 \u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\uff0c\u7136\u540e\u9009\u62e9 \u7f16\u8f91\u8def\u7531 \u3002 \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531 10.255.0.0/16 \uff08Log Hub \u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 Log Hub\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09\u6307\u5411\u60a8\u521a\u521a\u521b\u5efa\u7684\u5bf9\u7b49\u8fde\u63a5\u3002 \u8fd4\u56de Log Hub \u63a7\u5236\u53f0\u3002 \u5355\u51fb OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\u7684 VPC ID\u3002 \u5728 VPC \u63a7\u5236\u53f0\u4e0a\u9009\u62e9 VPC ID \u5e76\u627e\u5230\u5b83\u7684 IPv4 CIDR \u3002 \u5728 Log Hub \u63a7\u5236\u53f0\u7684 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u90e8\u5206\u4e2d\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u3002 \u91cd\u590d\u6b65\u9aa4 3\u30014\u30015\u30016 \u4ee5\u6dfb\u52a0\u76f8\u53cd\u7684\u8def\u7ebf\u3002\u5373\u914d\u7f6e OpenSearch VPC \u7684 IPv4 CIDR \u6307\u5411\u5bf9\u7b49\u8fde\u63a5\u3002\u60a8\u9700\u8981\u5bf9\u65e5\u5fd7\u5904\u7406\u7f51\u7edc\u7684\u6bcf\u4e2a\u5b50\u7f51\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\u3002 \u66f4\u65b0 OpenSearch \u57df\u7684\u5b89\u5168\u7ec4 \u5728 Log Hub \u63a7\u5236\u53f0\u7684 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\uff0c\u9009\u62e9 \u5b89\u5168\u7ec4 \u4e2d\u7684\u5b89\u5168\u7ec4 ID \u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b89\u5168\u7ec4\u3002 \u5728\u63a7\u5236\u53f0\u4e0a\uff0c\u9009\u62e9 \u7f16\u8f91\u5165\u7ad9\u89c4\u5219 \u3002 \u6dfb\u52a0\u89c4\u5219 \"ALLOW TCP/443 from 10.255.0.0/16\"\uff08Log Hub \u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 Log Hub\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09 \u9009\u62e9 \u4fdd\u5b58\u89c4\u5219 \u3002 \u5220\u9664 AOS \u57df \u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5220\u9664 AOS \u57df\u3002 \u91cd\u8981 \u4ece Log Hub \u4e2d\u5220\u9664\u57df\u5c06 \u4e0d\u4f1a \u5220\u9664\u60a8 AWS \u8d26\u6237\u4e2d\u7684 AOS \u57df\u3002 \u5b83 \u4e0d\u4f1a \u5f71\u54cd\u4efb\u4f55\u73b0\u6709\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u96c6\u7fa4\u64cd\u4f5c"},{"location":"implementation-guide/domains/import/#_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u540e\uff0c\u60a8\u53ef\u4ee5\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 AOS \u57df\u3002 \u6ce8\u610f \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002","title":"\u57df\u64cd\u4f5c"},{"location":"implementation-guide/domains/import/#_2","text":"VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 AOS \u57df\u3002 \u5728 security configuration\uff08\u5b89\u5168\u914d\u7f6e\uff09\u4e2d\uff0c\u60a8\u7684 access policy \uff08\u8bbf\u95ee\u7b56\u7565\uff09\u5e94\u8be5\u548c\u4e0b\u56fe\u7c7b\u4f3c\uff1a","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/domains/import/#aos","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u9009\u62e9\u96c6\u7fa4 \u9875\u9762\u4e0a\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002\u4e0b\u62c9\u5217\u8868\u5c06\u4ec5\u663e\u793a\u4e0e\u89e3\u51b3\u65b9\u6848\u4f4d\u4e8e\u540c\u4e00\u533a\u57df\u7684\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u7f51\u7edc \u9875\u9762\u7684 \u7f51\u7edc\u521b\u5efa \uff0c \u9009\u62e9 \u624b\u52a8 \u5e76\u70b9\u51fb \u4e0b\u4e00\u6b65 \uff1b \u6216\u9009\u62e9 \u81ea\u52a8 \uff0c\u7136\u540e\u8f6c\u5230\u6b65\u9aa4 9\u3002 \u5728 VPC \u4e0b\uff0c\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a VPC\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC \u7684 VPC\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0e\u60a8\u7684 AOS \u57df\u76f8\u540c\u7684 VPC\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b50\u7f51\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u540d\u4e3a LogHubVpc/DefaultVPC/privateSubnet1 \u548c LogHubVpc/DefaultVPC/privateSubnet2 \u7684\u5b50\u7f51\u3002 \u5728 \u65e5\u5fd7\u5904\u7406\u5b89\u5168\u7ec4 \u4e0b\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ProcessSecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u5728 \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6807\u7b7e\u3002 \u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u5bfc\u5165 AOS \u57df"},{"location":"implementation-guide/domains/import/#vpc","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u89e3\u51b3\u65b9\u6848\u4f1a\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684 VPC\u3002\u60a8\u9700\u8981\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u4ee5\u5141\u8bb8\u65e5\u5fd7\u5904\u7406\u5c42\u8bbf\u95ee\u60a8\u7684 AOS \u57df\u3002 \u6ce8\u610f \u81ea\u52a8\u6a21\u5f0f\u5c06\u81ea\u52a8\u521b\u5efa VPC \u5bf9\u7b49\u5e76\u914d\u7f6e\u8def\u7531\u8868\u3002\u60a8\u65e0\u9700\u518d\u6b21\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u6309\u7167\u4ee5\u4e0b\u5185\u5bb9\u521b\u5efa VPC \u5bf9\u7b49\u4e92\u8fde\u3001\u66f4\u65b0\u5b89\u5168\u7ec4\u548c\u66f4\u65b0\u8def\u7531\u8868\u3002","title":"\u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde"},{"location":"implementation-guide/domains/import/#vpc_1","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u627e\u5230\u5bfc\u5165\u7684\u57df\u540d\uff0c\u9009\u62e9\u57df\u540d\u3002 \u9009\u62e9 \u7f51\u7edc \u9009\u9879\u5361\u3002 \u590d\u5236 OpenSearch \u57df\u7f51\u7edc \u548c \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u4e24\u4e2a\u90e8\u5206\u4e2d\u7684 VPC ID\u3002\u60a8\u5c06\u5728\u8fd9\u4e24\u4e2a VPC \u4e4b\u95f4\u521b\u5efa\u5bf9\u7b49\u8fde\u63a5\u3002 \u5bfc\u822a\u5230 VPC \u63a7\u5236\u53f0\u5bf9\u7b49\u8fde\u63a5 \u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u6309\u94ae\u3002 \u5728 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \u9875\u9762\u4e0a\uff0c\u8f93\u5165\u540d\u79f0\uff0c\u4f8b\u5982\uff0c log-hub \u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u672c\u5730 VPC\uff0cVPC ID (\u8bf7\u6c42\u8005) \uff0c\u9009\u62e9 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u7684 VPC ID\u3002 \u5bf9\u4e8e \u9009\u62e9\u8981\u7528\u4f5c\u5bf9\u7b49\u7684\u53e6\u4e00\u4e2a VPC, VPC ID (\u63a5\u6536\u65b9) \uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u7684VPC ID\u3002 \u9009\u62e9 \u521b\u5efa\u5bf9\u7b49\u8fde\u63a5 \uff0c\u7136\u540e\u5bfc\u822a\u5230\u5bf9\u7b49\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u3002 \u5355\u51fb \u64cd\u4f5c \u6309\u94ae\u5e76\u9009\u62e9 \u63a5\u53d7\u8bf7\u6c42 \u3002","title":"\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5"},{"location":"implementation-guide/domains/import/#_3","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u63a7\u5236\u53f0\u3002 \u9009\u62e9\u5b50\u7f51\uff0c\u7136\u540e\u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\u3002 \u9009\u62e9\u5b50\u7f51\u5173\u8054\u7684\u8def\u7531\u8868\uff0c\u6253\u5f00\u8def\u7531\u8868\u914d\u7f6e\u9875\u9762\u3002 \u9009\u62e9 \u8def\u7531\u8868 \u9009\u9879\u5361\uff0c\u7136\u540e\u9009\u62e9 \u7f16\u8f91\u8def\u7531 \u3002 \u6dfb\u52a0\u4e00\u4e2a\u8def\u7531 10.255.0.0/16 \uff08Log Hub \u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 Log Hub\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09\u6307\u5411\u60a8\u521a\u521a\u521b\u5efa\u7684\u5bf9\u7b49\u8fde\u63a5\u3002 \u8fd4\u56de Log Hub \u63a7\u5236\u53f0\u3002 \u5355\u51fb OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\u7684 VPC ID\u3002 \u5728 VPC \u63a7\u5236\u53f0\u4e0a\u9009\u62e9 VPC ID \u5e76\u627e\u5230\u5b83\u7684 IPv4 CIDR \u3002 \u5728 Log Hub \u63a7\u5236\u53f0\u7684 \u65e5\u5fd7\u5904\u7406\u7f51\u7edc \u90e8\u5206\u4e2d\uff0c\u5355\u51fb AZs and Subnets \u4e0b\u7684\u5b50\u7f51\u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b50\u7f51\u3002 \u91cd\u590d\u6b65\u9aa4 3\u30014\u30015\u30016 \u4ee5\u6dfb\u52a0\u76f8\u53cd\u7684\u8def\u7ebf\u3002\u5373\u914d\u7f6e OpenSearch VPC \u7684 IPv4 CIDR \u6307\u5411\u5bf9\u7b49\u8fde\u63a5\u3002\u60a8\u9700\u8981\u5bf9\u65e5\u5fd7\u5904\u7406\u7f51\u7edc\u7684\u6bcf\u4e2a\u5b50\u7f51\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\u3002","title":"\u66f4\u65b0\u8def\u7531\u8868"},{"location":"implementation-guide/domains/import/#opensearch","text":"\u5728 Log Hub \u63a7\u5236\u53f0\u7684 OpenSearch \u96c6\u7fa4\u7f51\u7edc \u90e8\u5206\u4e0b\uff0c\u9009\u62e9 \u5b89\u5168\u7ec4 \u4e2d\u7684\u5b89\u5168\u7ec4 ID \u4ee5\u5728\u65b0\u9009\u9879\u5361\u4e2d\u6253\u5f00\u5b89\u5168\u7ec4\u3002 \u5728\u63a7\u5236\u53f0\u4e0a\uff0c\u9009\u62e9 \u7f16\u8f91\u5165\u7ad9\u89c4\u5219 \u3002 \u6dfb\u52a0\u89c4\u5219 \"ALLOW TCP/443 from 10.255.0.0/16\"\uff08Log Hub \u7684 CIDR\uff0c\u5982\u679c\u60a8\u662f\u4ece\u73b0\u6709\u7684 VPC \u4e2d\u90e8\u7f72 Log Hub\uff0c\u8bf7\u4f7f\u7528\u76f8\u5e94\u7684 CIDR\uff09 \u9009\u62e9 \u4fdd\u5b58\u89c4\u5219 \u3002","title":"\u66f4\u65b0 OpenSearch \u57df\u7684\u5b89\u5168\u7ec4"},{"location":"implementation-guide/domains/import/#aos_1","text":"\u5982\u679c\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5220\u9664 AOS \u57df\u3002 \u91cd\u8981 \u4ece Log Hub \u4e2d\u5220\u9664\u57df\u5c06 \u4e0d\u4f1a \u5220\u9664\u60a8 AWS \u8d26\u6237\u4e2d\u7684 AOS \u57df\u3002 \u5b83 \u4e0d\u4f1a \u5f71\u54cd\u4efb\u4f55\u73b0\u6709\u7684\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u96c6\u7fa4 \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664 AOS \u57df"},{"location":"implementation-guide/domains/proxy/","text":"\u8bbf\u95ee\u4ee3\u7406 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u4ece Internet \u8bbf\u95ee VPC \u5185\u7684 AOS \u57df\u3002 Log Hub \u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u53ef\u7528\u7684 Nginx cluster \uff0c\u5b83\u5141\u8bb8\u60a8\u4ece Internet \u8bbf\u95ee OpenSearch Dashboards\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 \u4f7f\u7528 SSH \u96a7\u9053 \u8bbf\u95ee AOS \u57df\u3002 \u672c\u8282\u4ecb\u7ecd\u4ee3\u7406\u5806\u6808\u7684\u67b6\u6784\u4ee5\u53ca\u4ee5\u4e0b\u5185\u5bb9\uff1a \u521b\u5efa\u4ee3\u7406 \u521b\u5efa\u5173\u8054\u7684DNS\u8bb0\u5f55 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS \u5220\u9664\u4ee3\u7406 \u67b6\u6784 Log Hub \u521b\u5efa\u4e00\u4e2a Auto Scaling Group (ASG) \u548c\u4e00\u4e2a Application Load Balancer (ALB) \u3002 \u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a \u7528\u6237\u8bbf\u95ee\u4ee3\u7406\u7684\u81ea\u5b9a\u4e49\u57df\uff0c\u8be5\u57df\u9700\u8981\u901a\u8fc7DNS\u670d\u52a1\u89e3\u6790\uff08\u4f8b\u5982\uff0c\u4f7f\u7528AWS\u4e0a\u7684Route 53\uff09\u3002 DNS \u670d\u52a1\u5c06\u6d41\u91cf\u8def\u7531\u5230\u9762\u5411 Internet \u7684 ALB\u3002 ALB \u5c06\u6d41\u91cf\u5206\u914d\u5230 ASG \u5185 Amazon EC2 \u4e0a\u8fd0\u884c\u7684\u540e\u7aef Nginx \u670d\u52a1\u5668\u3002 Nginx \u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 OpenSearch Dashboards\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u4ee3\u7406\u7684 VPC \u4e0e OpenSearch \u670d\u52a1\u4e0d\u540c\uff0c\u5219\u9700\u8981 VPC \u5bf9\u7b49\u4e92\u8fde\u3002 \u521b\u5efa\u4ee3\u7406 \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u521b\u5efa\u57fa\u4e8e Nginx \u7684\u4ee3\u7406\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd VPC \u4e2d\u7684 AOS \u57df \u53ef\u7528\u3002 \u5728 Amazon Certificate Manager (ACM) \u4e2d\u521b\u5efa\u6216\u4e0a\u4f20\u57df\u5173\u8054\u7684 SSL \u8bc1\u4e66 \u3002 \u786e\u4fdd\u60a8\u62e5\u6709 EC2 \u79c1\u94a5 (.pem) \u6587\u4ef6\u3002 \u4f7f\u7528 Log Hub \u63a7\u5236\u53f0 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\uff0c\u5728 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u6ce8\u610f \u542f\u7528\u8bbf\u95ee\u4ee3\u7406\u540e\uff0c\u8bbf\u95ee\u4ee3\u7406\u7684\u94fe\u63a5\u5c06\u53ef\u7528\u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \u90e8\u5206\uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 2 \u4e2a\u540d\u4e3a LogHubVPC/DefaultVPC/publicSubnet \u7684\u516c\u6709\u5b50\u7f51\uff0c\u5b83\u4eec\u662f\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u7684\u3002 \u5728 \u516c\u5171\u5b89\u5168\u7ec4 \u4e2d\u9009\u62e9 ALB \u7684\u5b89\u5168\u7ec4\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u540d\u4e3a ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\uff0c\u8be5\u5b89\u5168\u7ec4\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u4e0e\u57df\u540d\u5173\u8054\u7684 Load Balancer SSL Certificate \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u4f7f\u7528 CloudFormation \u5806\u6808 \u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Nginx \u8bbf\u95ee\u4ee3\u7406 \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 nginx-for-opensearch AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u4e5f\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e VPCId <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u90e8\u7f72 Nginx \u4ee3\u7406\u8d44\u6e90\u7684 VPC\uff0c\u4f8b\u5982 vpc-bef13dc7 \u3002 PublicSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 ELB \u7684\u516c\u5171\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u516c\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 ELBSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e ELB \u5173\u8054\u7684\u5b89\u5168\u7ec4\uff0c\u4f8b\u5982\uff0c sg-123456 \u3002 ELBDomain <\u9700\u8981\u8f93\u5165> ELB\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f8b\u5982 dashboard.example.com \u3002 ELBDomainCertificateArn <\u9700\u8981\u8f93\u5165> \u4e0e ELBDomain \u5173\u8054\u7684 SSL \u8bc1\u4e66 ARN\u3002\u8bc1\u4e66\u5fc5\u987b\u4ece Amazon Certificate Manager (ACM) \u521b\u5efa\u3002 PrivateSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 Nginx \u5b9e\u4f8b\u7684\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 NginxSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e Nginx \u5b9e\u4f8b\u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u5b89\u5168\u7ec4\u5fc5\u987b\u5141\u8bb8\u6765\u81ea ELB \u5b89\u5168\u7ec4\u7684\u8bbf\u95ee\u3002 KeyName <\u9700\u8981\u8f93\u5165> Nginx \u5b9e\u4f8b\u7684 PEM \u5bc6\u94a5\u540d\u79f0\u3002 EngineType OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 CognitoEndpoint <\u53ef\u9009> OpenSearch \u57df\u7684 Cognito \u7528\u6237\u6c60\u7aef\u70b9 URL\uff0c\u4f8b\u5982\uff0c mydomain.auth.us-east-1.amazoncognito.com \u3002\u5982\u679c\u60a8\u7684 OpenSearch \u57df\u4e0d\u662f\u901a\u8fc7 Cognito \u7528\u6237\u6c60\u8ba4\u8bc1\uff0c\u8bf7\u7559\u7a7a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002 \u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230 ALB \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u60a8\u53ef\u4ee5\u770b\u5230 \u8d1f\u8f7d\u5747\u8861\u57df\u540d \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee AOS DNS \u8bb0\u5f55\u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\uff0c\u6216\u5355\u51fb \u5e38\u89c4\u914d\u7f6e \u90e8\u5206\u4e2d \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u5220\u9664\u4ee3\u7406 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u4ece Internet \u8bbf\u95ee VPC \u5185\u7684 AOS \u57df\u3002 Log Hub \u521b\u5efa\u4e86\u4e00\u4e2a\u9ad8\u53ef\u7528\u7684 Nginx cluster \uff0c\u5b83\u5141\u8bb8\u60a8\u4ece Internet \u8bbf\u95ee OpenSearch Dashboards\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 \u4f7f\u7528 SSH \u96a7\u9053 \u8bbf\u95ee AOS \u57df\u3002 \u672c\u8282\u4ecb\u7ecd\u4ee3\u7406\u5806\u6808\u7684\u67b6\u6784\u4ee5\u53ca\u4ee5\u4e0b\u5185\u5bb9\uff1a \u521b\u5efa\u4ee3\u7406 \u521b\u5efa\u5173\u8054\u7684DNS\u8bb0\u5f55 \u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS \u5220\u9664\u4ee3\u7406","title":"\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#_2","text":"Log Hub \u521b\u5efa\u4e00\u4e2a Auto Scaling Group (ASG) \u548c\u4e00\u4e2a Application Load Balancer (ALB) \u3002 \u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a \u7528\u6237\u8bbf\u95ee\u4ee3\u7406\u7684\u81ea\u5b9a\u4e49\u57df\uff0c\u8be5\u57df\u9700\u8981\u901a\u8fc7DNS\u670d\u52a1\u89e3\u6790\uff08\u4f8b\u5982\uff0c\u4f7f\u7528AWS\u4e0a\u7684Route 53\uff09\u3002 DNS \u670d\u52a1\u5c06\u6d41\u91cf\u8def\u7531\u5230\u9762\u5411 Internet \u7684 ALB\u3002 ALB \u5c06\u6d41\u91cf\u5206\u914d\u5230 ASG \u5185 Amazon EC2 \u4e0a\u8fd0\u884c\u7684\u540e\u7aef Nginx \u670d\u52a1\u5668\u3002 Nginx \u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 OpenSearch Dashboards\u3002 \uff08\u53ef\u9009\u6b65\u9aa4\uff09\u5982\u679c\u4ee3\u7406\u7684 VPC \u4e0e OpenSearch \u670d\u52a1\u4e0d\u540c\uff0c\u5219\u9700\u8981 VPC \u5bf9\u7b49\u4e92\u8fde\u3002","title":"\u67b6\u6784"},{"location":"implementation-guide/domains/proxy/#_3","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u6216\u901a\u8fc7\u90e8\u7f72\u72ec\u7acb\u7684 CloudFormation \u5806\u6808\u6765\u521b\u5efa\u57fa\u4e8e Nginx \u7684\u4ee3\u7406\u3002 \u524d\u63d0\u6761\u4ef6 \u786e\u4fdd VPC \u4e2d\u7684 AOS \u57df \u53ef\u7528\u3002 \u5728 Amazon Certificate Manager (ACM) \u4e2d\u521b\u5efa\u6216\u4e0a\u4f20\u57df\u5173\u8054\u7684 SSL \u8bc1\u4e66 \u3002 \u786e\u4fdd\u60a8\u62e5\u6709 EC2 \u79c1\u94a5 (.pem) \u6587\u4ef6\u3002","title":"\u521b\u5efa\u4ee3\u7406"},{"location":"implementation-guide/domains/proxy/#log-hub","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\uff0c\u5728 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u6ce8\u610f \u542f\u7528\u8bbf\u95ee\u4ee3\u7406\u540e\uff0c\u8bbf\u95ee\u4ee3\u7406\u7684\u94fe\u63a5\u5c06\u53ef\u7528\u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \u90e8\u5206\uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5b50\u7f51\u3002\u60a8\u53ef\u4ee5\u9009\u62e9 2 \u4e2a\u540d\u4e3a LogHubVPC/DefaultVPC/publicSubnet \u7684\u516c\u6709\u5b50\u7f51\uff0c\u5b83\u4eec\u662f\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u7684\u3002 \u5728 \u516c\u5171\u5b89\u5168\u7ec4 \u4e2d\u9009\u62e9 ALB \u7684\u5b89\u5168\u7ec4\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u540d\u4e3a ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\uff0c\u8be5\u5b89\u5168\u7ec4\u7531 Log Hub \u9ed8\u8ba4\u521b\u5efa\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u4e0e\u57df\u540d\u5173\u8054\u7684 Load Balancer SSL Certificate \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0"},{"location":"implementation-guide/domains/proxy/#cloudformation","text":"\u6b64\u81ea\u52a8\u5316 AWS CloudFormation \u6a21\u677f\u5728 AWS \u4e91\u4e2d\u90e8\u7f72 Log Hub - Nginx \u8bbf\u95ee\u4ee3\u7406 \u89e3\u51b3\u65b9\u6848\u3002 \u767b\u5f55 AWS \u7ba1\u7406\u63a7\u5236\u53f0\u5e76\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8 nginx-for-opensearch AWS CloudFormation \u6a21\u677f\u3002 \u60a8\u4e5f\u53ef\u4ee5 \u4e0b\u8f7d\u6a21\u677f \u5f00\u59cb\u90e8\u7f72\u3002 \u8981\u5728\u4e0d\u540c\u7684 AWS \u533a\u57df\u4e2d\u542f\u52a8\u5806\u6808\uff0c\u8bf7\u4f7f\u7528\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u9009\u62e9\u5668\u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e0a\uff0c\u9a8c\u8bc1\u6b63\u786e\u7684\u6a21\u677f URL \u663e\u793a\u5728 Amazon S3 URL \u6587\u672c\u6846\u4e2d\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u5806\u6808\u8be6\u7ec6\u4fe1\u606f \u9875\u9762\u4e0a\uff0c\u4e3a\u60a8\u7684\u5806\u6808\u5206\u914d\u4e00\u4e2a\u540d\u79f0\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u503c\u3002 \u53c2\u6570 \u9ed8\u8ba4 \u8bf4\u660e VPCId <\u9700\u8981\u8f93\u5165> \u7528\u4e8e\u90e8\u7f72 Nginx \u4ee3\u7406\u8d44\u6e90\u7684 VPC\uff0c\u4f8b\u5982 vpc-bef13dc7 \u3002 PublicSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 ELB \u7684\u516c\u5171\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u516c\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 ELBSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e ELB \u5173\u8054\u7684\u5b89\u5168\u7ec4\uff0c\u4f8b\u5982\uff0c sg-123456 \u3002 ELBDomain <\u9700\u8981\u8f93\u5165> ELB\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f8b\u5982 dashboard.example.com \u3002 ELBDomainCertificateArn <\u9700\u8981\u8f93\u5165> \u4e0e ELBDomain \u5173\u8054\u7684 SSL \u8bc1\u4e66 ARN\u3002\u8bc1\u4e66\u5fc5\u987b\u4ece Amazon Certificate Manager (ACM) \u521b\u5efa\u3002 PrivateSubnetIds <\u9700\u8981\u8f93\u5165> \u90e8\u7f72 Nginx \u5b9e\u4f8b\u7684\u79c1\u6709\u5b50\u7f51\u3002\u60a8\u9700\u8981\u81f3\u5c11\u9009\u62e9\u4e24\u4e2a\u79c1\u6709\u5b50\u7f51\uff0c\u4f8b\u5982\uff0c subnet-12345abc\uff0csubnet-54321cba \u3002 NginxSecurityGroupId <\u9700\u8981\u8f93\u5165> \u4e0e Nginx \u5b9e\u4f8b\u5173\u8054\u7684\u5b89\u5168\u7ec4\u3002\u5b89\u5168\u7ec4\u5fc5\u987b\u5141\u8bb8\u6765\u81ea ELB \u5b89\u5168\u7ec4\u7684\u8bbf\u95ee\u3002 KeyName <\u9700\u8981\u8f93\u5165> Nginx \u5b9e\u4f8b\u7684 PEM \u5bc6\u94a5\u540d\u79f0\u3002 EngineType OpenSearch OpenSearch \u7684\u5f15\u64ce\u7c7b\u578b\u3002\u9009\u62e9 OpenSearch \u6216 Elasticsearch\u3002 Endpoint <\u9700\u8981\u8f93\u5165> OpenSearch \u7aef\u70b9\uff0c\u4f8b\u5982\uff0c vpc-your_opensearch_domain_name-xcvgw6uu2o6zafsiefxubwuohe.us-east-1.es.amazonaws.com \u3002 CognitoEndpoint <\u53ef\u9009> OpenSearch \u57df\u7684 Cognito \u7528\u6237\u6c60\u7aef\u70b9 URL\uff0c\u4f8b\u5982\uff0c mydomain.auth.us-east-1.amazoncognito.com \u3002\u5982\u679c\u60a8\u7684 OpenSearch \u57df\u4e0d\u662f\u901a\u8fc7 Cognito \u7528\u6237\u6c60\u8ba4\u8bc1\uff0c\u8bf7\u7559\u7a7a\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\u4e0a\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u521b\u5efa AWS Identity and Access Management (IAM) \u8d44\u6e90\u7684\u590d\u9009\u6846\u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728 AWS CloudFormation \u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u60a8\u5e94\u8be5\u4f1a\u5728\u5927\u7ea6 15 \u5206\u949f\u5185\u6536\u5230 CREATE_COMPLETE \u72b6\u6001\u3002","title":"\u4f7f\u7528 CloudFormation \u5806\u6808"},{"location":"implementation-guide/domains/proxy/#dns","text":"\u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002 \u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230 ALB \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u60a8\u53ef\u4ee5\u770b\u5230 \u8d1f\u8f7d\u5747\u8861\u57df\u540d \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55"},{"location":"implementation-guide/domains/proxy/#aos","text":"DNS \u8bb0\u5f55\u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f\u3002 \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\uff0c\u6216\u5355\u51fb \u5e38\u89c4\u914d\u7f6e \u90e8\u5206\u4e2d \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee AOS"},{"location":"implementation-guide/domains/proxy/#_4","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e0b\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002 \u9009\u62e9 \u5220\u9664 \u3002 \u5728\u786e\u8ba4\u63d0\u793a\u4e2d\uff0c\u9009\u62e9 \u5220\u9664 \u3002","title":"\u5220\u9664\u4ee3\u7406"},{"location":"implementation-guide/getting-started/","text":"\u5feb\u901f\u5165\u95e8 \u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u540e\uff0c\u60a8\u53ef\u4ee5\u5148\u9605\u8bfb\u672c\u7ae0\uff0c\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5229\u7528 Log Hub \u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff08\u4ee5 Amazon CloudTrail \u65e5\u5fd7\u4e3a\u4f8b\uff09\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5f00\u59cb \u96c6\u7fa4\u7ba1\u7406 \uff0c\u5e76\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002 \u6b65\u9aa4 \u6b65\u9aa4 1\uff1a\u5bfc\u5165AOS\u57df \u3002 \u5c06\u73b0\u6709 AOS \u57df\u5bfc\u5165\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u4ee3\u7406\uff0c\u5141\u8bb8\u60a8\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u6a21\u677f\u5316\u4eea\u8868\u677f\u3002 \u6b65\u9aa4 3\uff1a\u6444\u53d6 CloudTrail \u65e5\u5fd7 \u3002 \u5c06 CloudTrail \u65e5\u5fd7\u6444\u53d6\u5230\u6307\u5b9a\u7684 AOS \u57df\u3002 \u6b65\u9aa4 4\uff1a\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f \u3002 \u67e5\u770b CloudTrail \u65e5\u5fd7\u7684\u4eea\u8868\u677f\u3002","title":"\u6982\u89c8"},{"location":"implementation-guide/getting-started/#_1","text":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848 \u540e\uff0c\u60a8\u53ef\u4ee5\u5148\u9605\u8bfb\u672c\u7ae0\uff0c\u5feb\u901f\u4e86\u89e3\u5982\u4f55\u5229\u7528 Log Hub \u8fdb\u884c\u65e5\u5fd7\u6444\u53d6\uff08\u4ee5 Amazon CloudTrail \u65e5\u5fd7\u4e3a\u4f8b\uff09\u548c\u65e5\u5fd7\u53ef\u89c6\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5f00\u59cb \u96c6\u7fa4\u7ba1\u7406 \uff0c\u5e76\u521b\u5efa AWS \u670d\u52a1\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u548c \u5e94\u7528\u65e5\u5fd7\u5206\u6790\u7ba1\u9053 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"implementation-guide/getting-started/#_2","text":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165AOS\u57df \u3002 \u5c06\u73b0\u6709 AOS \u57df\u5bfc\u5165\u89e3\u51b3\u65b9\u6848\u3002 \u6b65\u9aa4 2\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u4ee3\u7406\uff0c\u5141\u8bb8\u60a8\u4ece\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee AOS \u6a21\u677f\u5316\u4eea\u8868\u677f\u3002 \u6b65\u9aa4 3\uff1a\u6444\u53d6 CloudTrail \u65e5\u5fd7 \u3002 \u5c06 CloudTrail \u65e5\u5fd7\u6444\u53d6\u5230\u6307\u5b9a\u7684 AOS \u57df\u3002 \u6b65\u9aa4 4\uff1a\u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f \u3002 \u67e5\u770b CloudTrail \u65e5\u5fd7\u7684\u4eea\u8868\u677f\u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/getting-started/1.import-domain/","text":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch \u57df \u9996\u6b21\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u5fc5\u987b\u5148\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 Amazon OpenSearch \u57df \u3002 \u91cd\u8981 \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u524d\u63d0\u6761\u4ef6 VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002 \u6b65\u9aa4 \u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u6b65\u9aa4 1. \u9009\u62e9\u57df \u9875\u9762\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6b65\u9aa4 2. \u914d\u7f6e\u7f51\u7edc \u9875\u9762\uff0c\u5728 \u7f51\u7edc\u521b\u5efa \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u3002\u5982\u679c\u60a8\u7684 Log Hub \u548c OpenSearch \u57df\u4f4d\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684 VPC \u4e2d\uff0c \u81ea\u52a8 \u6a21\u5f0f\u5c06\u5728\u5b83\u4eec\u4e4b\u95f4\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u8868\u3002\u8bf7\u53c2\u9605 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u4e2d\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u5728 \u6b65\u9aa4 3. \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u6b65\u9aa4 1. \u5bfc\u5165 AOS \u57df"},{"location":"implementation-guide/getting-started/1.import-domain/#1-amazon-opensearch","text":"\u9996\u6b21\u4f7f\u7528 Log Hub \u89e3\u51b3\u65b9\u6848\uff0c\u5fc5\u987b\u5148\u5bfc\u5165 AOS \u57df\u3002 Log Hub \u4ec5\u652f\u6301\u542f\u7528\u4e86 \u7ec6\u7c92\u5ea6\u8bbf\u95ee\u63a7\u5236 \u7684 VPC \u5185 \u7684 Amazon OpenSearch \u57df \u3002 \u91cd\u8981 \u76ee\u524d\uff0cLog Hub \u652f\u6301 Amazon Elasticsearch 7.10 \u53ca\u66f4\u9ad8\u7248\u672c\uff0c\u6216 Amazon OpenSearch 1.0 \u53ca\u66f4\u9ad8\u7248\u672c\u3002","title":"\u6b65\u9aa4 1\uff1a\u5bfc\u5165 Amazon OpenSearch \u57df"},{"location":"implementation-guide/getting-started/1.import-domain/#_1","text":"VPC \u5185\u81f3\u5c11\u6709\u4e00\u4e2a AOS \u57df\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709 AOS \u57df\uff0c\u60a8\u53ef\u4ee5\u5728 VPC \u4e2d\u521b\u5efa\u4e00\u4e2a AOS \u57df\u3002\u8bf7\u53c2\u9605 \u5728 VPC \u4e2d\u542f\u52a8\u60a8\u7684 Amazon OpenSearch \u670d\u52a1\u57df \u3002","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"implementation-guide/getting-started/1.import-domain/#_2","text":"\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5728 Log Hub \u63a7\u5236\u53f0\u4e0a\u5bfc\u5165 AOS \u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \uff0c\u9009\u62e9 \u5bfc\u5165 OpenSearch \u57df \u3002 \u5728 \u6b65\u9aa4 1. \u9009\u62e9\u57df \u9875\u9762\uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u57df\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6b65\u9aa4 2. \u914d\u7f6e\u7f51\u7edc \u9875\u9762\uff0c\u5728 \u7f51\u7edc\u521b\u5efa \u4e0b\uff0c\u9009\u62e9 \u81ea\u52a8 \u3002\u5982\u679c\u60a8\u7684 Log Hub \u548c OpenSearch \u57df\u4f4d\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684 VPC \u4e2d\uff0c \u81ea\u52a8 \u6a21\u5f0f\u5c06\u5728\u5b83\u4eec\u4e4b\u95f4\u521b\u5efa VPC \u5bf9\u7b49\u8fde\u63a5\uff0c\u5e76\u66f4\u65b0\u8def\u7531\u8868\u3002\u8bf7\u53c2\u9605 \u8bbe\u7f6e VPC \u5bf9\u7b49\u4e92\u8fde \u4e2d\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u5728 \u6b65\u9aa4 3. \u521b\u5efa\u6807\u7b7e \u9875\u9762\uff0c\u9009\u62e9 \u5bfc\u5165 \u3002","title":"\u6b65\u9aa4"},{"location":"implementation-guide/getting-started/2.create-proxy/","text":"\u6b65\u9aa42\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u60a8\u53ef\u4ee5\u521b\u5efa Nginx \u4ee3\u7406\u5e76\u521b\u5efa\u6307\u5411\u8be5\u4ee3\u7406\u7684 DNS \u8bb0\u5f55\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u57df\u7ba1\u7406\u7ae0\u8282\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u3002 \u521b\u5efa\u4e00\u4e2a Nginx \u4ee3\u7406 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u7684 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5305\u542b LogHubVpc/DefaultVPC/publicSubnetX \u7684\u5b50\u7f51\u3002 \u5bf9\u4e8e \u516c\u5f00\u5b89\u5168\u7ec4 \uff0c\u9009\u62e9\u5305\u542b ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u9002\u7528\u4e8e\u57df\u540d\u7684\u5173\u8054 Load Balancer SSL \u8bc1\u4e66 \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230\u5e94\u7528\u8d1f\u8f7d\u5e73\u8861 (ALB) \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002 \u521b\u5efaDNS\u8bb0\u5f55 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u627e\u5230 Load Balancer Domain \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u5e76\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u6b65\u9aa4 2. \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#2","text":"\u60a8\u53ef\u4ee5\u521b\u5efa Nginx \u4ee3\u7406\u5e76\u521b\u5efa\u6307\u5411\u8be5\u4ee3\u7406\u7684 DNS \u8bb0\u5f55\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u57df\u7ba1\u7406\u7ae0\u8282\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u3002","title":"\u6b65\u9aa42\uff1a\u521b\u5efa\u8bbf\u95ee\u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#nginx","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u5728 \u57fa\u672c\u914d\u7f6e \u7684 \u8bbf\u95ee\u4ee3\u7406 \u6807\u7b7e\u5904\u9009\u62e9 \u5f00\u542f \u3002 \u5728 \u521b\u5efa\u8bbf\u95ee\u4ee3\u7406 \u9875\u9762\u7684 \u516c\u5171\u8bbf\u95ee\u4ee3\u7406 \uff0c\u4e3a \u516c\u5171\u5b50\u7f51 \u9009\u62e9\u81f3\u5c11 2 \u4e2a\u5305\u542b LogHubVpc/DefaultVPC/publicSubnetX \u7684\u5b50\u7f51\u3002 \u5bf9\u4e8e \u516c\u5f00\u5b89\u5168\u7ec4 \uff0c\u9009\u62e9\u5305\u542b ProxySecurityGroup \u7684\u5b89\u5168\u7ec4\u3002 \u8f93\u5165 \u57df\u540d \u3002 \u9009\u62e9\u9002\u7528\u4e8e\u57df\u540d\u7684\u5173\u8054 Load Balancer SSL \u8bc1\u4e66 \u3002 \u9009\u62e9 Nginx \u5b9e\u4f8b\u5bc6\u94a5\u540d\u79f0 \u3002 \u9009\u62e9 \u521b\u5efa \u3002 \u914d\u7f6e\u4ee3\u7406\u57fa\u7840\u67b6\u6784\u540e\uff0c\u60a8\u9700\u8981\u5728 DNS \u89e3\u6790\u5668\u4e2d\u521b\u5efa\u5173\u8054\u7684 DNS \u8bb0\u5f55\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u627e\u5230\u5e94\u7528\u8d1f\u8f7d\u5e73\u8861 (ALB) \u57df\uff0c\u7136\u540e\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002","title":"\u521b\u5efa\u4e00\u4e2a Nginx \u4ee3\u7406"},{"location":"implementation-guide/getting-started/2.create-proxy/#dns","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u96c6\u7fa4 \u4e2d\uff0c\u9009\u62e9 OpenSearch \u57df \u3002 \u4ece\u8868\u4e2d\u9009\u62e9\u57df\u3002 \u9009\u62e9 \u8bbf\u95ee\u4ee3\u7406 \u9009\u9879\u5361\u3002\u627e\u5230 Load Balancer Domain \uff0c\u5373 ALB \u57df\u3002 \u8f6c\u5230 DNS \u89e3\u6790\u5668\uff0c\u5e76\u521b\u5efa\u6307\u5411\u8be5\u57df\u7684 CNAME \u8bb0\u5f55\u3002\u5982\u679c\u60a8\u7684\u57df\u7531 Amazon Route 53 \u7ba1\u7406\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Amazon Route 53 \u63a7\u5236\u53f0\u521b\u5efa\u8bb0\u5f55 \u3002","title":"\u521b\u5efaDNS\u8bb0\u5f55"},{"location":"implementation-guide/getting-started/3.build-cloudtrail-pipeline/","text":"\u6b65\u9aa4 3: \u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7 \u60a8\u53ef\u4ee5\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6765\u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7\u3002 \u91cd\u8981 \u786e\u4fdd\u60a8\u7684 CloudTrail \u548c Log Hub \u4f4d\u4e8e\u540c\u4e00 AWS \u533a\u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u5bfc\u5165\u7684\u57df\u3002 \u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u4fdd\u7559\u9ed8\u8ba4\u503c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 3. \u6444\u53d6 CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/getting-started/3.build-cloudtrail-pipeline/#3-amazon-cloudtrail","text":"\u60a8\u53ef\u4ee5\u6784\u5efa\u65e5\u5fd7\u5206\u6790\u7ba1\u9053\u6765\u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7\u3002 \u91cd\u8981 \u786e\u4fdd\u60a8\u7684 CloudTrail \u548c Log Hub \u4f4d\u4e8e\u540c\u4e00 AWS \u533a\u57df\u3002 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\uff0c\u9009\u62e9 AWS \u670d\u52a1\u65e5\u5fd7 \u3002 \u9009\u62e9 \u521b\u5efa\u65e5\u5fd7\u6444\u53d6 \u3002 \u5728 AWS \u670d\u52a1 \u90e8\u5206\uff0c\u9009\u62e9 Amazon CloudTrail \u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a\u8bbe\u7f6e \uff0c\u5bf9\u4e8e Trail \uff0c\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u9879\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u6307\u5b9a OpenSearch \u57df \u90e8\u5206\uff0c\u4e3a Amazon OpenSearch \u57df \u9009\u62e9\u5bfc\u5165\u7684\u57df\u3002 \u4e3a \u793a\u4f8b\u4eea\u8868\u677f \u9009\u62e9 \u662f \u3002 \u4fdd\u7559\u9ed8\u8ba4\u503c\u5e76\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa \u3002","title":"\u6b65\u9aa4 3: \u6444\u53d6 Amazon CloudTrail \u65e5\u5fd7"},{"location":"implementation-guide/getting-started/4.view-dashboard/","text":"\u6b65\u9aa4 4: \u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f DNS\u8bb0\u5f55 \u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS\u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\u3002 \u6216\u8005\uff0c\u5355\u51fb\u57df\u7684 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u8f93\u5165\u60a8\u7684\u51ed\u8bc1\uff0c\u767b\u5f55\u5230 Amazon OpenSearch Dashboards\u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2AOS\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d\uff0c\u9009\u62e9 Dashboards \u3002 \u9009\u62e9\u81ea\u52a8\u521b\u5efa\u7684 AOS \u4eea\u8868\u677f\u5e76\u5f00\u59cb\u63a2\u7d22\u60a8\u7684\u6570\u636e\u3002","title":"\u6b65\u9aa4 4. \u67e5\u770b\u4eea\u8868\u677f"},{"location":"implementation-guide/getting-started/4.view-dashboard/#4-aos","text":"DNS\u8bb0\u5f55 \u751f\u6548\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u901a\u8fc7\u4ee3\u7406\u8bbf\u95eeAOS\u5185\u7f6e\u4eea\u8868\u677f\u3002 \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4ee3\u7406\u7684\u57df\u3002 \u6216\u8005\uff0c\u5355\u51fb\u57df\u7684 \u57fa\u672c\u914d\u7f6e \u90e8\u5206\u4e2d\u7684 \u8bbf\u95ee\u4ee3\u7406 \u4e0b\u7684 \u94fe\u63a5 \u6309\u94ae\u3002 \u8f93\u5165\u60a8\u7684\u51ed\u8bc1\uff0c\u767b\u5f55\u5230 Amazon OpenSearch Dashboards\u3002 \u70b9\u51fb\u53f3\u4e0a\u89d2AOS\u4eea\u8868\u677f\u7684\u7528\u6237\u540d\u56fe\u6807\u3002 \u9009\u62e9 Switch Tenants \u3002 \u5728 Select your tenant \u9875\u9762\u4e0a\uff0c\u9009\u62e9 Global \uff0c\u7136\u540e\u5355\u51fb Confirm \u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d\uff0c\u9009\u62e9 Dashboards \u3002 \u9009\u62e9\u81ea\u52a8\u521b\u5efa\u7684 AOS \u4eea\u8868\u677f\u5e76\u5f00\u59cb\u63a2\u7d22\u60a8\u7684\u6570\u636e\u3002","title":"\u6b65\u9aa4 4: \u8bbf\u95ee AOS \u5185\u7f6e\u4eea\u8868\u677f"},{"location":"implementation-guide/link-account/","text":"\u8de8\u8d26\u53f7\u65e5\u5fd7\u6444\u53d6 Log Hub \u89e3\u51b3\u65b9\u6848\u652f\u6301\u4ece\u540c\u4e00\u533a\u57df\u7684\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u4e3a\u6b64\uff0c\u60a8\u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u542f\u52a8 CloudFormation \u5806\u6808\uff0c\u5e76\u4e0e\u4e3b\u8d26\u6237\u5173\u8054\u3002 \u6982\u5ff5 \u4e3b\u8d26\u6237 : \u60a8\u90e8\u7f72 Log Hub \u63a7\u5236\u53f0\u7684\u5e10\u6237\u662f\u4e3b\u5e10\u6237\u3002 OpenSearch \u96c6\u7fa4\u4e5f\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u5e10\u6237\u4e2d\u3002 \u6210\u5458\u8d26\u6237 : \u60a8\u62e5\u6709 AWS \u670d\u52a1\u6216\u5e94\u7528\u7a0b\u5e8f\u5e76\u5e0c\u671b\u4ece\u4e2d\u63d0\u53d6\u65e5\u5fd7\u7684\u8d26\u6237\u3002 \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808\u5177\u6709\u6700\u5c11\u7684\u6743\u9650\u3002Log Hub \u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u9884\u7f6e\u4e00\u4e9b AWS \u8d44\u6e90\u6765\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5c06\u91c7\u7528 IAM \u5728\u6210\u5458\u8d26\u6237\u4e2d\u914d\u7f6e\u7684\u89d2\u8272\u4ee5\u5217\u51fa\u6216\u521b\u5efa\u8d44\u6e90\u3002 \u8bf7\u53c2\u8003 \u67b6\u6784 \u90e8\u5206\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002 \u5173\u8054\u4e00\u4e2a\u6210\u5458\u8d26\u6237 \u6b65\u9aa4 1. \u5728\u6210\u5458\u8d26\u6237\u4e2d\u90e8\u7f72 CloudFormation \u5806\u6808 \u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u53f7\u6444\u53d6 \u3002 \u70b9\u51fb \u94fe\u63a5\u4e00\u4e2a\u5e10\u6237 \u6309\u94ae\u3002 \u60a8\u53ef\u4ee5\u5728\u6210\u5458\u8d26\u6237\u4e2d\u627e\u5230\u90e8\u7f72 CloudFormation \u5806\u6808\u7684\u6b65\u9aa4\u3002 \u8fdb\u5165\u6210\u5458\u8d26\u6237\u7684 CloudFormation \u63a7\u5236\u53f0\u3002 \u5355\u51fb \u521b\u5efa\u5806\u6808 \u6309\u94ae\u5e76\u9009\u62e9 \u4f7f\u7528\u65b0\u8d44\u6e90 (\u6807\u51c6) \u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e2d\uff0c\u5728 Amazon S3 URL \u4e2d\u8f93\u5165 CloudFormation URL\u3002 \u60a8\u53ef\u4ee5\u5728 Log Hub \u63a7\u5236\u53f0\u7684 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 \u9875\u9762\u4e0a\u627e\u5230 URL\u3002 \u6309\u7167\u6b65\u9aa4\u521b\u5efa CloudFormation \u5806\u6808\uff0c\u5e76\u7b49\u5f85\u914d\u7f6e CloudFormation \u5806\u6808\u5b8c\u6210\u3002 \u70b9\u51fb\u8fdb\u5165 \u8f93\u51fa \u9875\u7b7e\uff0c\u67e5\u770b\u5c06\u7528\u4e8e \u6b65\u9aa4 2 \u7684\u76f8\u5173\u53c2\u6570\u3002 \u6b65\u9aa4 2. \u5173\u8054\u6210\u5458\u8d26\u6237 \u8fdb\u5165 Log Hub \u63a7\u5236\u53f0\u3002 \uff08\u53ef\u9009\uff09\u5728\u5bfc\u822a\u9762\u677f\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u6237\u6444\u53d6 \u3002 \u5728 \u6b65\u9aa4 2 \u4e2d\uff0c\u4f7f\u7528\u4e0a\u4e00\u6b65\u7684 CloudFormation \u8f93\u51fa\u586b\u5199\u53c2\u6570\u3002 \u53c2\u6570 CloudFormation \u8f93\u51fa \u63cf\u8ff0 Account Name N/A \u6210\u5458\u8d26\u53f7\u7684\u540d\u79f0\u3002 Account ID N/A 12\u4f4d AWS \u6570\u5b57\u8d26\u53f7\u3002 Cross Account Role ARN CrossAccountRoleARN Log Hub \u5c06\u901a\u8fc7\u6d88\u8d39\u8fd9\u4e2a\u89d2\u8272\u6765\u64cd\u4f5c\u5173\u8054\u8d26\u53f7\u4e2d\u7684\u8d44\u6e90\u3002 FluentBit Agent Installation Document AgentInstallDocument Log Hub \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5728\u6210\u5458\u8d26\u6237\u4e2d\u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 FluentBit Agent Configuration Document AgentConfigDocument Log Hub \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5c06 Fluent Bit \u914d\u7f6e\u4e0b\u53d1\u7ed9 EC2 \u5b9e\u4f8b\u3002 Cross Account S3 Bucket CrossAccountS3Bucket \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u542f\u7528\u4e00\u4e9b AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u8f93\u51fa\u5230 Amazon S3\u3002 \u65e5\u5fd7\u5c06\u5b58\u50a8\u5728\u6b64\u5e10\u6237\u4e2d\u3002 Cross Account Stack ID CrossAccountStackId \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808 ID\u3002 Cross Account KMS Key CrossAccountKMSKeyARN Log Hub \u5c06\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1 (KMS) \u5bc6\u94a5\u6765\u52a0\u5bc6\u7b80\u5355\u961f\u5217\u670d\u52a1 (SQS)\u3002 \u70b9\u51fb \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u8de8\u8d26\u6237\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/link-account/#_1","text":"Log Hub \u89e3\u51b3\u65b9\u6848\u652f\u6301\u4ece\u540c\u4e00\u533a\u57df\u7684\u53e6\u4e00\u4e2a AWS \u8d26\u6237\u63d0\u53d6 AWS \u670d\u52a1\u65e5\u5fd7\u548c\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7\u3002 \u4e3a\u6b64\uff0c\u60a8\u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u542f\u52a8 CloudFormation \u5806\u6808\uff0c\u5e76\u4e0e\u4e3b\u8d26\u6237\u5173\u8054\u3002","title":"\u8de8\u8d26\u53f7\u65e5\u5fd7\u6444\u53d6"},{"location":"implementation-guide/link-account/#_2","text":"\u4e3b\u8d26\u6237 : \u60a8\u90e8\u7f72 Log Hub \u63a7\u5236\u53f0\u7684\u5e10\u6237\u662f\u4e3b\u5e10\u6237\u3002 OpenSearch \u96c6\u7fa4\u4e5f\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u5e10\u6237\u4e2d\u3002 \u6210\u5458\u8d26\u6237 : \u60a8\u62e5\u6709 AWS \u670d\u52a1\u6216\u5e94\u7528\u7a0b\u5e8f\u5e76\u5e0c\u671b\u4ece\u4e2d\u63d0\u53d6\u65e5\u5fd7\u7684\u8d26\u6237\u3002 \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808\u5177\u6709\u6700\u5c11\u7684\u6743\u9650\u3002Log Hub \u9700\u8981\u5728\u6210\u5458\u8d26\u6237\u4e2d\u9884\u7f6e\u4e00\u4e9b AWS \u8d44\u6e90\u6765\u6536\u96c6\u65e5\u5fd7\uff0c\u5e76\u5c06\u91c7\u7528 IAM \u5728\u6210\u5458\u8d26\u6237\u4e2d\u914d\u7f6e\u7684\u89d2\u8272\u4ee5\u5217\u51fa\u6216\u521b\u5efa\u8d44\u6e90\u3002 \u8bf7\u53c2\u8003 \u67b6\u6784 \u90e8\u5206\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002","title":"\u6982\u5ff5"},{"location":"implementation-guide/link-account/#_3","text":"","title":"\u5173\u8054\u4e00\u4e2a\u6210\u5458\u8d26\u6237"},{"location":"implementation-guide/link-account/#1-cloudformation","text":"\u767b\u5f55 Log Hub \u63a7\u5236\u53f0\u3002 \u5728\u5bfc\u822a\u7a97\u683c\u4e2d\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u53f7\u6444\u53d6 \u3002 \u70b9\u51fb \u94fe\u63a5\u4e00\u4e2a\u5e10\u6237 \u6309\u94ae\u3002 \u60a8\u53ef\u4ee5\u5728\u6210\u5458\u8d26\u6237\u4e2d\u627e\u5230\u90e8\u7f72 CloudFormation \u5806\u6808\u7684\u6b65\u9aa4\u3002 \u8fdb\u5165\u6210\u5458\u8d26\u6237\u7684 CloudFormation \u63a7\u5236\u53f0\u3002 \u5355\u51fb \u521b\u5efa\u5806\u6808 \u6309\u94ae\u5e76\u9009\u62e9 \u4f7f\u7528\u65b0\u8d44\u6e90 (\u6807\u51c6) \u3002 \u5728 \u521b\u5efa\u5806\u6808 \u9875\u9762\u4e2d\uff0c\u5728 Amazon S3 URL \u4e2d\u8f93\u5165 CloudFormation URL\u3002 \u60a8\u53ef\u4ee5\u5728 Log Hub \u63a7\u5236\u53f0\u7684 \u94fe\u63a5\u4e00\u4e2a\u8d26\u6237 \u9875\u9762\u4e0a\u627e\u5230 URL\u3002 \u6309\u7167\u6b65\u9aa4\u521b\u5efa CloudFormation \u5806\u6808\uff0c\u5e76\u7b49\u5f85\u914d\u7f6e CloudFormation \u5806\u6808\u5b8c\u6210\u3002 \u70b9\u51fb\u8fdb\u5165 \u8f93\u51fa \u9875\u7b7e\uff0c\u67e5\u770b\u5c06\u7528\u4e8e \u6b65\u9aa4 2 \u7684\u76f8\u5173\u53c2\u6570\u3002","title":"\u6b65\u9aa4 1. \u5728\u6210\u5458\u8d26\u6237\u4e2d\u90e8\u7f72 CloudFormation \u5806\u6808"},{"location":"implementation-guide/link-account/#2","text":"\u8fdb\u5165 Log Hub \u63a7\u5236\u53f0\u3002 \uff08\u53ef\u9009\uff09\u5728\u5bfc\u822a\u9762\u677f\u7684 \u8d44\u6e90 \u4e0b\uff0c\u9009\u62e9 \u8de8\u8d26\u6237\u6444\u53d6 \u3002 \u5728 \u6b65\u9aa4 2 \u4e2d\uff0c\u4f7f\u7528\u4e0a\u4e00\u6b65\u7684 CloudFormation \u8f93\u51fa\u586b\u5199\u53c2\u6570\u3002 \u53c2\u6570 CloudFormation \u8f93\u51fa \u63cf\u8ff0 Account Name N/A \u6210\u5458\u8d26\u53f7\u7684\u540d\u79f0\u3002 Account ID N/A 12\u4f4d AWS \u6570\u5b57\u8d26\u53f7\u3002 Cross Account Role ARN CrossAccountRoleARN Log Hub \u5c06\u901a\u8fc7\u6d88\u8d39\u8fd9\u4e2a\u89d2\u8272\u6765\u64cd\u4f5c\u5173\u8054\u8d26\u53f7\u4e2d\u7684\u8d44\u6e90\u3002 FluentBit Agent Installation Document AgentInstallDocument Log Hub \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5728\u6210\u5458\u8d26\u6237\u4e2d\u7684 EC2 \u5b9e\u4f8b\u4e0a\u5b89\u88c5 Fluent Bit \u4ee3\u7406\u3002 FluentBit Agent Configuration Document AgentConfigDocument Log Hub \u5c06\u4f7f\u7528\u6b64 SSM \u6587\u6863\u5c06 Fluent Bit \u914d\u7f6e\u4e0b\u53d1\u7ed9 EC2 \u5b9e\u4f8b\u3002 Cross Account S3 Bucket CrossAccountS3Bucket \u60a8\u53ef\u4ee5\u4f7f\u7528 Log Hub \u63a7\u5236\u53f0\u542f\u7528\u4e00\u4e9b AWS \u670d\u52a1\u65e5\u5fd7\u5e76\u5c06\u5b83\u4eec\u8f93\u51fa\u5230 Amazon S3\u3002 \u65e5\u5fd7\u5c06\u5b58\u50a8\u5728\u6b64\u5e10\u6237\u4e2d\u3002 Cross Account Stack ID CrossAccountStackId \u6210\u5458\u8d26\u6237\u4e2d\u7684 CloudFormation \u5806\u6808 ID\u3002 Cross Account KMS Key CrossAccountKMSKeyARN Log Hub \u5c06\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1 (KMS) \u5bc6\u94a5\u6765\u52a0\u5bc6\u7b80\u5355\u961f\u5217\u670d\u52a1 (SQS)\u3002 \u70b9\u51fb \u94fe\u63a5 \u6309\u94ae\u3002","title":"\u6b65\u9aa4 2. \u5173\u8054\u6210\u5458\u8d26\u6237"},{"location":"implementation-guide/resources/aws-services/","text":"AWS \u670d\u52a1 AWS CloudFormation Amazon OpenSearch Service Amazon S3 AWS Lambda Amazon CloudFront AWS AppSync Amazon Cognito User Pool AWS Step Functions Amazon DynamoDB AWS Systems Manager Amazon EventBridge Amazon Kinesis Data Streams Amazon Kinesis Data Firehose","title":"AWS \u670d\u52a1"},{"location":"implementation-guide/resources/aws-services/#aws","text":"AWS CloudFormation Amazon OpenSearch Service Amazon S3 AWS Lambda Amazon CloudFront AWS AppSync Amazon Cognito User Pool AWS Step Functions Amazon DynamoDB AWS Systems Manager Amazon EventBridge Amazon Kinesis Data Streams Amazon Kinesis Data Firehose","title":"AWS \u670d\u52a1"},{"location":"implementation-guide/resources/open-ssl/","text":"OpenSSL 1.1 \u5b89\u88c5 Log Hub \u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\uff0c\u9700\u8981 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf (OS) \u5b89\u88c5\u4f9d\u8d56\u9879\u3002 \u5efa\u8bae\u60a8\u81ea\u5df1\u5236\u4f5c\u5b89\u88c5\u4e86 OpenSSL 1.1 \u7684 AMI\u3002 \u91cd\u8981 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5728\u4ee5\u4e0b\u5217\u8868\u4e2d\uff0c\u8fd9\u5e76\u4e0d\u4ee3\u8868\u60a8\u4e0d\u53ef\u4ee5\u4f7f\u7528 Log Hub\u3002\u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 OpenSSL 1.1\u3002 Amazon Linux 2 sudo yum install openssl11 Ubuntu 20.04 OpenSSL \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002 18.04 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Debian GNU/10 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 GNU/11 ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3 Red Hat Enterprise Linux 8.X OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002 7.X sudo yum -y install wget sudo yum -y install ca-certificates echo \"ca_directory=/etc/ssl/certs\" | sudo tee -a /etc/wgetrc > /dev/null wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_1-stable.zip sudo yum -y install gcc unzip perl unzip OpenSSL_1_1_1-stable.zip cd openssl-OpenSSL_1_1_1-stable ./config sudo make sudo make install echo \"/usr/local/lib64/\" | sudo tee -a /etc/ld.so.conf > /dev/null sudo ldconfig SUSE Linux Enterprise Server 15 OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"OpenSSL \u5b89\u88c5"},{"location":"implementation-guide/resources/open-ssl/#openssl-11","text":"Log Hub \u4f7f\u7528 Fluent Bit \u4f5c\u4e3a\u65e5\u5fd7\u4ee3\u7406\uff0c\u9700\u8981 OpenSSL 1.1 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf (OS) \u5b89\u88c5\u4f9d\u8d56\u9879\u3002 \u5efa\u8bae\u60a8\u81ea\u5df1\u5236\u4f5c\u5b89\u88c5\u4e86 OpenSSL 1.1 \u7684 AMI\u3002 \u91cd\u8981 \u5982\u679c\u60a8\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5728\u4ee5\u4e0b\u5217\u8868\u4e2d\uff0c\u8fd9\u5e76\u4e0d\u4ee3\u8868\u60a8\u4e0d\u53ef\u4ee5\u4f7f\u7528 Log Hub\u3002\u60a8\u9700\u8981\u81ea\u5df1\u5b89\u88c5 OpenSSL 1.1\u3002","title":"OpenSSL 1.1 \u5b89\u88c5"},{"location":"implementation-guide/resources/open-ssl/#amazon-linux-2","text":"sudo yum install openssl11","title":"Amazon Linux 2"},{"location":"implementation-guide/resources/open-ssl/#ubuntu","text":"","title":"Ubuntu"},{"location":"implementation-guide/resources/open-ssl/#2004","text":"OpenSSL \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"20.04"},{"location":"implementation-guide/resources/open-ssl/#1804","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"18.04"},{"location":"implementation-guide/resources/open-ssl/#debian","text":"","title":"Debian"},{"location":"implementation-guide/resources/open-ssl/#gnu10","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"GNU/10"},{"location":"implementation-guide/resources/open-ssl/#gnu11","text":"ln -s /usr/lib/x86_64-linux-gnu/libsasl2.so.2 /usr/lib/libsasl2.so.3","title":"GNU/11"},{"location":"implementation-guide/resources/open-ssl/#red-hat-enterprise-linux","text":"","title":"Red Hat Enterprise Linux"},{"location":"implementation-guide/resources/open-ssl/#8x","text":"OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"8.X"},{"location":"implementation-guide/resources/open-ssl/#7x","text":"sudo yum -y install wget sudo yum -y install ca-certificates echo \"ca_directory=/etc/ssl/certs\" | sudo tee -a /etc/wgetrc > /dev/null wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_1-stable.zip sudo yum -y install gcc unzip perl unzip OpenSSL_1_1_1-stable.zip cd openssl-OpenSSL_1_1_1-stable ./config sudo make sudo make install echo \"/usr/local/lib64/\" | sudo tee -a /etc/ld.so.conf > /dev/null sudo ldconfig","title":"7.X"},{"location":"implementation-guide/resources/open-ssl/#suse-linux-enterprise-server","text":"","title":"SUSE Linux Enterprise Server"},{"location":"implementation-guide/resources/open-ssl/#15","text":"OpenSSL 1.1 \u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u3002","title":"15"},{"location":"implementation-guide/resources/upload-ssl-certificate/","text":"\u4e0a\u4f20 SSL \u8bc1\u4e66\u5230 IAM \u901a\u8fc7\u8fd0\u884c\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\u7684 AWS CLI \u547d\u4ee4 upload-server-certificate \u4e0a\u4f20 SSL \u8bc1\u4e66\uff1a aws iam upload-server-certificate --path /cloudfront/ \\ --server-certificate-name YourCertificate \\ --certificate-body file://Certificate.pem \\ --certificate-chain file://CertificateChain.pem \\ --private-key file://PrivateKey.pem \u5c06\u6587\u4ef6\u540d\u548c\u60a8\u7684\u8bc1\u4e66\u66ff\u6362\u4e3a\u60a8\u4e0a\u4f20\u7684\u6587\u4ef6\u548c\u8bc1\u4e66\u7684\u540d\u79f0\u3002 \u60a8\u5fc5\u987b\u5728 API \u8bf7\u6c42\u7684\u8bc1\u4e66\u6b63\u6587\u3001\u8bc1\u4e66\u94fe\u548c\u79c1\u94a5\u53c2\u6570\u4e2d\u6307\u5b9a file:// \u524d\u7f00\u3002 \u5426\u5219\uff0c\u8bf7\u6c42\u5c06\u5931\u8d25\u5e76\u663e\u793a\u201cMalformedCertificate: Unknown\u201d\u9519\u8bef\u6d88\u606f\u3002 \u91cd\u8981\u4e8b\u9879 \u60a8\u5fc5\u987b\u4f7f\u7528 --path \u9009\u9879\u6307\u5b9a\u8def\u5f84\u3002\u8def\u5f84\u5fc5\u987b\u4ee5 /cloudfront \u5f00\u5934\uff0c\u5e76\u4e14\u5fc5\u987b\u5305\u542b\u5c3e\u90e8\u659c\u6760\uff08\u4f8b\u5982\uff0c/cloudfront/test/\uff09\u3002 \u4e0a\u4f20\u8bc1\u4e66\u540e\uff0cAWS CLI \u547d\u4ee4 upload-server-certificate \u4f1a\u8fd4\u56de\u4e0a\u4f20\u8bc1\u4e66\u7684\u5143\u6570\u636e\uff0c\u5305\u62ec\u8bc1\u4e66\u7684 Amazon \u8d44\u6e90\u540d\u79f0 (ARN)\u3001\u53cb\u597d\u540d\u79f0\u3001\u6807\u8bc6\u7b26 (ID) \u548c\u5230\u671f\u65e5\u671f\u3002 \u8981\u67e5\u770b\u4e0a\u4f20\u7684\u8bc1\u4e66\uff0c\u8bf7\u8fd0\u884c AWS CLI \u547d\u4ee4 list-server-certificates \uff1a aws iam list-server-certificates \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4f20\u670d\u52a1\u5668\u8bc1\u4e66 \u3002","title":"\u4e0a\u4f20\u8bc1\u4e66"},{"location":"implementation-guide/resources/upload-ssl-certificate/#ssl-iam","text":"\u901a\u8fc7\u8fd0\u884c\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\u7684 AWS CLI \u547d\u4ee4 upload-server-certificate \u4e0a\u4f20 SSL \u8bc1\u4e66\uff1a aws iam upload-server-certificate --path /cloudfront/ \\ --server-certificate-name YourCertificate \\ --certificate-body file://Certificate.pem \\ --certificate-chain file://CertificateChain.pem \\ --private-key file://PrivateKey.pem \u5c06\u6587\u4ef6\u540d\u548c\u60a8\u7684\u8bc1\u4e66\u66ff\u6362\u4e3a\u60a8\u4e0a\u4f20\u7684\u6587\u4ef6\u548c\u8bc1\u4e66\u7684\u540d\u79f0\u3002 \u60a8\u5fc5\u987b\u5728 API \u8bf7\u6c42\u7684\u8bc1\u4e66\u6b63\u6587\u3001\u8bc1\u4e66\u94fe\u548c\u79c1\u94a5\u53c2\u6570\u4e2d\u6307\u5b9a file:// \u524d\u7f00\u3002 \u5426\u5219\uff0c\u8bf7\u6c42\u5c06\u5931\u8d25\u5e76\u663e\u793a\u201cMalformedCertificate: Unknown\u201d\u9519\u8bef\u6d88\u606f\u3002 \u91cd\u8981\u4e8b\u9879 \u60a8\u5fc5\u987b\u4f7f\u7528 --path \u9009\u9879\u6307\u5b9a\u8def\u5f84\u3002\u8def\u5f84\u5fc5\u987b\u4ee5 /cloudfront \u5f00\u5934\uff0c\u5e76\u4e14\u5fc5\u987b\u5305\u542b\u5c3e\u90e8\u659c\u6760\uff08\u4f8b\u5982\uff0c/cloudfront/test/\uff09\u3002 \u4e0a\u4f20\u8bc1\u4e66\u540e\uff0cAWS CLI \u547d\u4ee4 upload-server-certificate \u4f1a\u8fd4\u56de\u4e0a\u4f20\u8bc1\u4e66\u7684\u5143\u6570\u636e\uff0c\u5305\u62ec\u8bc1\u4e66\u7684 Amazon \u8d44\u6e90\u540d\u79f0 (ARN)\u3001\u53cb\u597d\u540d\u79f0\u3001\u6807\u8bc6\u7b26 (ID) \u548c\u5230\u671f\u65e5\u671f\u3002 \u8981\u67e5\u770b\u4e0a\u4f20\u7684\u8bc1\u4e66\uff0c\u8bf7\u8fd0\u884c AWS CLI \u547d\u4ee4 list-server-certificates \uff1a aws iam list-server-certificates \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4f20\u670d\u52a1\u5668\u8bc1\u4e66 \u3002","title":"\u4e0a\u4f20 SSL \u8bc1\u4e66\u5230 IAM"}]}